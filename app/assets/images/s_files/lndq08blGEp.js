/*!CK:3031663680!*//*1427086730,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["8n40f"]); }

__d("PhotosUploadWaterfallErrorCodes",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={SECURITY:1,FILE_IO:2,IMAGE_IO:3,UPLOAD_IO:4,INVALID_SERVER_RESULT:5,RESIZE_FAILURE:6,ENCODE_FAILURE:7,INVALID_DOMAIN:8,BAD_JPEG_MARKERS:9,BAD_SERVER_RESPONSE:10,EXTERNAL_INTERFACE_UNAVAILABLE:11,JS_CALL_FAILED:12,UNCAUGHT_ERROR:13,UPLOAD_SWF_FAILED_LOAD:14,FILE_IO_TIMEOUT:15,IMAGE_SECURITY:16,BAD_IMAGE_FILE:17,IMAGE_IO_TIMEOUT:18,BLACK_PHOTO:19,EMPTY_FILE_LOADED:20,FILE_READ_DISABLED:21,BAD_NETWORK:22,FLASH_LOAD_TIMEOUT:23,FLASH_LOAD_FAILURE:24,FLASH_UPGRADE_REQUIRED:25};},null);
__d("ImageResizer",["ArbiterMixin","BlobFactory","DOM","UserAgent_DEPRECATED","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=function(m,n,o,p,q){this._input=m;this._image=null;this._canvas=null;this._rotation=0;this._maxWidth=n;this._maxHeight=o;this._outputMime=p||'image/jpeg';this._outputQuality=(q===(void 0))?.87:q;};l.isSupported=function(){if(window.File&&window.FileReader){var m=i.create('canvas');if(m.toBlob||(m.toDataURL&&window.ArrayBuffer&&window.Uint8Array&&h.isSupported()))return true;}return false;};k(l.prototype,g);k(l.prototype,{setOrientation:function(m){this._rotation={1:0,3:180,6:90,8:270}[m]||0;},resize:function(){if(this._input instanceof HTMLCanvasElement||this._input instanceof HTMLImageElement){this._image=this._input;this._handleImage();}else if(typeof this._input=="string"){this._loadImage(this._input);}else if(this._input instanceof window.File)this._loadFile(this._input);},_rotatedToSide:function(){return (this._rotation%180)==90;},_prepareError:function(m){return (function(){this.inform.bind(this,"error",m);}.bind(this));},_loadFile:function(m){this._fileLoadTime=Date.now();var n=new FileReader();n.onload=this._handleFile.bind(this);n.onerror=this._prepareError("Could not read tile.");n.readAsDataURL(m);},_handleFile:function(event){this._fileLoadTime=Date.now()-this._fileLoadTime;var m=event.target.result;this._loadImage(m);},_loadImage:function(m){this._imageLoadTime=Date.now();this._image=i.create('img');this._image.onload=this._handleImage.bind(this);this._image.onerror=this._prepareError("Could not load image.");this._image.src=m;},_handleImage:function(){if(this._imageLoadTime)this._imageLoadTime=Date.now()-this._imageLoadTime;if(this._input instanceof window.File){var m=this._calculateRatio();if(m>=1){this._skippedResizing=true;return this._handleBlob(this._input);}}this._skippedResizing=false;this._drawTransformed();this._extractBlob();},_drawTransformed:function(){var m=Date.now(),n=this._calculateRatio(),o=0;if(j.chrome())if(n<.25){o=2;}else if(n<.5)o=1;var p=this._drawResizedCanvas(this._image,n*Math.pow(2,o));for(var q=0;q<o;q++)p=this._drawResizedCanvas(p,.5);if(this._rotation)p=this._drawRotatedCanvas(p);this._canvas=p;this._drawTime=Date.now()-m;},_drawResizedCanvas:function(m,n){var o=i.create('canvas');o.width=m.width*n;o.height=m.height*n;var p=o.getContext("2d");p.scale(n,n);p.drawImage(m,0,0);return o;},_drawRotatedCanvas:function(m){var n=i.create('canvas');if(this._rotatedToSide()){n.width=m.height;n.height=m.width;}else{n.width=m.width;n.height=m.height;}var o=n.getContext("2d");o.translate(n.width*.5,n.height*.5);o.rotate(Math.PI*(this._rotation/180));o.translate(m.width*-.5,m.height*-.5);o.drawImage(m,0,0,m.width,m.height);return n;},_calculateRatio:function(){var m=1,n=this._rotatedToSide()?this._maxHeight:this._maxWidth,o=this._rotatedToSide()?this._maxWidth:this._maxHeight,p=n/this._image.width,q=o/this._image.height;if(p<m&&p>0)m=p;if(q<m&&q>0)m=q;return m;},_extractBlob:function(){this._extractionStart=Date.now();if(this._canvas.toBlob){this._canvas.toBlob(this._handleBlob.bind(this),this._outputMime,this._outputQuality);return;}var m=this._canvas.toDataURL(this._outputMime,this._outputQuality),n=m.match(/^data:(.*?);base64,/);if(!n){this._prepareError("Couldn't get base64 encoded data from canvas.")();return;}var o=n[1],p=m.substr(n[0].length),q=window.atob(p),r=new ArrayBuffer(q.length),s=new Uint8Array(r);for(var t=0;t<q.length;t++)s[t]=q.charCodeAt(t);var u=h.getBlob([r],{type:o});this._handleBlob(u);},_handleBlob:function(m){this._canvas=this._canvas||i.create('canvas');m.performanceData={blockingDraw:+true,blockingExtraction:+!this._canvas.toBlob,imageLoadTime:this._imageLoadTime,fileLoadTime:this._fileLoadTime,skippedResizing:+this._skippedResizing};if(!this._skippedResizing)k(m.performanceData,{extractionTime:Date.now()-this._extractionStart,drawTime:this._drawTime});this.inform('resized',m);}});e.exports=l;},null);
__d("LitestandStream",["Arbiter","DOM","LitestandMessages","LitestandStoryInsertionStatus","LitestandStreamConfig","ViewportBounds","copyProperties","csx","ge","getElementPosition"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q,r,s,t,u,v={init:function(w,x,y){q=x;s=y;t=w;r=u=0;g.subscribe(i.STORIES_INSERTED,function(z,aa){if(!aa||!aa.substream_id||!q)return;var ba=h.scry(o(aa.substream_id),v.getStoriesSelector());ba.forEach(function(ca){var da=h.scry(ca,"._5pbw"),ea=h.scry(ca,"._5pcp")[0],fa=h.scry(ca,"._5pbx")[0];if(da[0]&&ea&&fa){var ga='';for(var ha=0;ha<da.length;ha++)ga+=h.getID(da[ha])+' ';ga.trim();ca.setAttribute('aria-labelledby',ga+' '+h.getID(ea)+' '+h.getID(fa));}var ia=ca.getAttribute('data-timestamp'),ja=ca.getAttribute('data-ft')&&JSON.parse(ca.getAttribute('data-ft')).ei;if(!ja&&ia&&ia<q)r++;u++;});});},getEmptySubstreamsSelector:function(){return "._4ikz:empty";},getStoriesSelector:function(){return "._5jmm";},getStreamConfig:function(w){return m({bufferPixels:1000,firstPagerScrollBuffer:100,maxStories:null,pagerController:'LitestandMoreStoriesPagelet',pagerSelector:v.getPagerSelector(),pollIntervalMS:null,newStoryIdleTime:60000,crossPage:k.load_more_units_cross_page},w);},getPagerSelector:function(){return "._2as,._5us6";},getStreamRoot:function(){return t;},getVisibleStoryCount:function(w){var x=h.scry(w,v.getStoriesSelector());return x.length;},hideOffscreenSubstreams:function(){return k.hide_offscreen_substreams;},getOldStoryCount:function(){return r;},getTotalStoryCount:function(){return u;},getSectionID:function(){return s;},canFetchNewerStories:function(){return j.canInsert();},canInsertNewerStories:function(){if(l.getTop()>p(v.getStreamRoot()).y)return false;return j.canInsert();},getFeedStreamID:function(){return parseInt(t.id.split('feed_stream_')[1],16)%1e+08;}};e.exports=v;},null);
__d("ControlledReferer",["Event","URI","UserAgent_DEPRECATED"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={useFacebookReferer:function(k,l,m){var n=false;function o(){if(n)return;var q=k.contentWindow.location.pathname;if(q!=='/intern/common/referer_frame.php'&&q!=='/common/referer_frame.php')return;n=true;k.contentWindow.document.body.style.margin=0;l();}var p;if(document.domain!=='facebook.com'){p='/intern/common/referer_frame.php';}else if(i.opera()){p='/common/referer_frame.php';}else if(h().isSecure()){p='https://s-static.ak.facebook.com/common/referer_frame.php';}else p='http://static.ak.facebook.com/common/referer_frame.php';if(m)p+='?fb_source='+m;g.listen(k,'load',o);k.src=p;},useFacebookRefererHtml:function(k,l,m){j.useFacebookReferer(k,function(){k.contentWindow.document.body.innerHTML=l;},m);}};e.exports=j;},null);
__d("TrackingPixel",["Arbiter","ControlledReferer"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={_iframe:(void 0),loadWithNoReferrer:function(j){if(!i._iframe){var k=document.createElement('iframe');k.frameborder=0;k.width=k.height=1;k.style.position='absolute';k.style.top='-10px';h.useFacebookReferer(k,function(){g.inform('TrackingPixel/iframeIsLoaded',null,g.BEHAVIOR_PERSISTENT);},null);document.body.appendChild(k);i._iframe=k;}g.subscribe('TrackingPixel/iframeIsLoaded',function(){var l=i._iframe.contentWindow.document,m=l.createElement('img');m.src=j;});}};e.exports=i;},null);
__d("ExternalTrackingTag",["AsyncSignal","TrackingPixel","Event"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={listenForElementClick:function(k,l,m,n,o){i.listen(k,'click',function(){j.sendRequest(l,m,n,o);});},sendRequest:function(k,l,m,n){if(!k)return;new g('/ads/external_tracking_tag/',{href:k,tracking_tag_id:l,adgroup_id:m,ad_id:n}).send();h.loadWithNoReferrer(k);}};e.exports=j;},null);
__d("FeedAdsClickLogger",["Arbiter","AsyncRequest","Banzai","BanzaiODS","collectDataAttributes","DOM","ge","LitestandMessages","LitestandStream","Parent","TrackingNodes","ExternalTrackingTag","URI","isFacebookURI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();var u='ssinfeed',v={},w=false,x=[];function y(){"use strict";}y.prototype.init=function(z){"use strict";g.subscribe("ClickRefAction/new",this.onNewUserAction.bind(this));if(z.append_tracking_data_to_links){this.appendTrackingDataToLinks();g.subscribe(n.STORIES_INSERTED,this.appendTrackingDataToLinks.bind(this));g.subscribe('FeedAdsClickLogger/refreshTrackingData',this.appendTrackingDataToLinks.bind(this),g.SUBSCRIBE_NEW);}};y.prototype.getStories=function(){"use strict";var z=o.getStreamRoot();if(z){return l.scry(z,o.getStoriesSelector());}else{var aa=m('home_stream');if(aa)return l.scry(aa,'.uiStreamStory');}return [];};y.prototype.appendTrackingDataToLinks=function(){"use strict";var z=this.getStories();for(var aa=0;aa<z.length;aa++){var ba=z[aa];if(ba in x)continue;var ca=ba.getAttribute('data-ft');if(!ca||(ca.indexOf('ei')===-1)&&(ca.indexOf('mei')===-1))continue;var da=l.scry(ba,'a');for(var ea=0;ea<da.length;ea++){var fa=da[ea];if(fa.getAttribute('ajaxify')!=null)continue;if(fa.getAttribute('rel')!=null)continue;var ga=fa.getAttribute('href');if(!ga||ga.charAt(0)==='#')continue;var ha=s(fa);if(t(ha)===false)continue;if(ha.isLinkshimURI()===true)continue;var ia=k(fa,['ft']).ft,ja=ha.getQueryData();ja.ft=ia;ja.__md__=0;ha.setQueryData(ja);fa.setAttribute('href',ha.toString());fa.setAttribute('onmousedown',"this.href = this.href.replace('__md__=0', '__md__=1');");}x.push(ba);}};y.prototype.getHref=function(z){"use strict";return (z.getAttribute&&(z.getAttribute('ajaxify')||z.getAttribute('data-endpoint'))||z.action||z.href);};y.prototype.sendLogRequest=function(z,aa){"use strict";var ba=z.ei||z.ai;if(!ba&&z.mei)ba=z.mf_story_key;if(z!==null&&typeof(ba)==="string"){var ca=false;if(z.tn){var da=q.parseTrackingNodeString(z.tn);for(var ea=0;ea<da.length;ea++){var fa=da[ea][0];switch(fa){case q.types.LIKE_LINK:case q.types.UNLIKE_LINK:case q.types.COMMENT:case q.types.COMMENT_LINK:case q.types.ADD_COMMENT_BOX:return;case q.types.XBUTTON:case q.types.HIDE_LINK:case q.types.REPORT_SPAM_LINK:case q.types.HIDE_ALL_LINK:case q.types.DROPDOWN_BUTTON:case q.types.UNHIDE_LINK:return;case q.types.RELATED_SHARE_ARTICLE:case q.types.RELATED_SHARE_VIDEO:return;case q.types.ATTACHMENT:case q.types.USER_MESSAGE:ca=true;break;}}}var ga=Date.now(),ha=500;z.duplicate_click=!!v[ba]&&(ga-v[ba]<ha);v[ba]=ga;if(i.isEnabled('ssinfeed')){i.post(u,z,{delay:0,retry:i.isEnabled('ssinfeed_retry')});}else{var ia=new h('/ajax/ssinfeed/end/').setData(z).setAllowCrossPageTransition(true).setMethod('POST');ia.send();}var ja=z.href;if(s(ja).isLinkshimURI()&&s(ja).getQueryData())ja=s(ja).getQueryData().u;if(ca&&!z.duplicate_click&&aa!==null&&aa.url&&ja&&t(s(ja))===false){r.sendRequest(aa.url,aa.tag_id,aa.adgroup_id);j.bumpEntityKey('external_tracking_tags','request_sent');}}};y.prototype.onNewUserAction=function(z,aa){"use strict";if(!aa.node)return;var ba=this.getHref(aa.node),ca=p.byTag(aa.node,'input')||p.byTag(aa.node,'button');if(!ba&&ca&&ca.type=="submit"&&ca.getAttribute&&ca.getAttribute('data-ft'))ba="#";var da,ea;if(ba&&aa.event&&(aa.event.type==='click'||aa.event.type==='contextmenu')){da=k(aa.node,['ft']);da.ft.href=ba;da.ft.mouse_type=aa.event.type;ea=k(aa.node,['external-tracking-tags']);this.sendLogRequest(da.ft,ea['external-tracking-tags']);}};e.exports.init=function(z){if(w===false){(new y()).init(z);w=true;}};},null);
__d("ComposerXMediaPostTab",["Arbiter","AudienceAlignment","ComposerXMarauderLogger","ComposerXMediaUploadHandler","Event"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();function l(m,n){"use strict";h.abort();g.inform('composer/reset_pab_nux');i.logEntry(m);var o=new j(m);k.listen(n.getContainer(),'click',function(){o.fetchAttachments();n.getInput().disabled=false;});n.subscribe('change',function(){o.handleFileSelected(n);});}e.exports=l;},null);
__d("EntstreamStoryDeduper",["AsyncRequest","Arbiter","DOM","csx","CSS","CacheStorage"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();function m(p,q){var r={};for(var s=0;s<p.length;s++){var t=p[s],u=t.getAttribute('data-dedupekey');if(r[u]){if(q){k.hide(t);h.inform('FbFeedUnreadPillNavigation/logDedupe',{story:t,action:'dedupe_story_hide'});}else{i.remove(t);h.inform('FbFeedUnreadPillNavigation/logDedupe',{story:t,action:'dedupe_story_remove'});}}else r[u]=1;}}function n(p,q){var r={},s=0,t=Date.now()/1000/3600,u=30;for(var v=0;v<u;++v){var w=new l('localstorage','vpv_local_log.'+parseInt(t-v,10)+'h'),x=w.keys();s+=x.length>0;for(var y=0;y<x.length;y++)r[x[y]]=1;}var z=0,aa=0,ba;for(var ca=0;ca<p.length;ca++){var da=p[ca],ea=da.getAttribute('data-dedupekey'),fa='checkedVPVLocalCache';if(k.hasClass(da,fa)){continue;}else k.addClass(da,fa);++z;if(r[ea]&&k.shown(da)){ba=ea;++aa;if(q){k.hide(da);}else i.remove(da);}}if(z>0)new g('/ajax/feed/feed_tracking/vpv_local_storage_log').setData({num_vpvs:Object.keys(r).length,num_hours:s,num_seen_stories:aa,num_unseen_stories:z,seen_story_key:ba}).send();}var o={dedupe:function(p,q){q=q||"._5jmm";var r=i.scry(p,q);r=r.filter(function(s){return s.getAttribute('data-dedupekey');});m(r,false);},dedupeHide:function(p,q,r){q=q||"._5jmm";var s=i.scry(p,q),t=s.filter(function(x){return x.getAttribute('data-dedupekey')&&k.shown(x);});m(t,true);if(r){var u=i.scry(p,".unread_session");for(var v=0;v<u.length;++v){var w=i.scry(u[v],q);w.length&&n(w,true);}}}};e.exports=o;},null);
__d("KeyboardShortcuts",["KeyEventController","Layer","ModalLayer"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(l,m,n){"use strict";this.key=l;this.handler=m;this.filter=n;this.register();}j.prototype.register=function(){"use strict";this.token=g.registerKey(this.key,this.handler,this.filter);};j.prototype.remove=function(){"use strict";this.token.remove();};var k={_tokens:[[]],register:function(l,m,n){n=n||{};var o=n.allowDefault?m:function(event,s){m.apply(this,arguments);event.prevent();},p=n.baseFilters||[g.defaultFilter],q=function(event,s){for(var t=0,u=p.length;t<u;t++)if(!p[t](event,s))return false;return !n.filter||n.filter(event,s);},r=new j(l,o,q);this._tokens[this._tokens.length-1].push(r);return r;},init:function(){h.subscribe('show',function(l,m){if(m.hasBehavior(i))this.pushLayer();}.bind(this));h.subscribe('hide',function(l,m){if(m.hasBehavior(i))this.popLayer();}.bind(this));},pushLayer:function(){var l=this._tokens[this._tokens.length-1];l&&l.forEach(function(m){m.remove();});this._tokens.push([]);},popLayer:function(){var l=this._tokens.length-1;if(l<0)return;var m=this._tokens[l];m.forEach(function(o){o.remove();});this._tokens.pop();var n=this._tokens[l-1];n&&n.forEach(function(o){o.register();});}};k.init();e.exports=k;},null);
__d("FeedBaseKeyboardController",["$","AccessibilityLogger","Arbiter","AsyncDialog","AsyncRequest","Banzai","BanzaiODS","BanzaiNectar","CSS","DOM","DOMScroll","DOMQuery","Event","Focus","KeyboardShortcuts","LikeConfirmer","NavigationMessage","Parent","Run","SubscriptionsHandler","Vector","ViewportBounds","cx","emptyFunction","ge","getActiveElement","isAsyncScrollQuery","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha){b.__markCompiled&&b.__markCompiled();var ia;function ja(){ia=o.hasClass(document.documentElement,'tinyViewport')?0:g('pagelet_bluebar').offsetTop+g('pagelet_bluebar').offsetHeight;}setTimeout(ja,0);s.listen(window,'resize',ha(ja));function ka(la,ma){"use strict";this.root=la;this.clicktabscrollgk=ma.feed_click_and_tab_to_scroll;this.init();}ka.prototype.getStories=function(){"use strict";};ka.prototype.getParentStory=function(la){"use strict";};ka.prototype.isStory=function(la){"use strict";};ka.prototype.isHoldoutStory=function(la){"use strict";};ka.prototype.getHeadline=function(la){"use strict";};ka.prototype.getPreviousStory=function(la){"use strict";};ka.prototype.getNextStory=function(la){"use strict";};ka.prototype.setSelected=function(la,ma){"use strict";};ka.prototype.clickLike=function(){"use strict";};ka.prototype.clickComment=function(){"use strict";};ka.prototype.clickShare=function(){"use strict";};ka.prototype.clickSeeMore=function(){"use strict";};ka.prototype.clickLeft=function(){"use strict";};ka.prototype.clickRight=function(){"use strict";};ka.prototype.openAttachment=function(){"use strict";};ka.prototype.focusComposer=function(){"use strict";var la=ea('pagelet_composer');if(!la)la=ea('pagelet_group_composer');if(la){var ma=p.scry(la,'textarea')[0];if(ma){t.set(ma);q.scrollToTop(true);}}};ka.prototype.getScrollOffset=function(){"use strict";return 10;};ka.prototype.getAnimationLength=function(la){"use strict";return Math.min(Math.abs(aa.getElementPosition(la).y-ba.getTop()-document.body.scrollTop),400);};ka.prototype.findTop=function(){"use strict";var la=this.getStories();for(var ma=0;ma<la.length;ma++)if(aa.getElementPosition(la[ma]).y>aa.getScrollPosition().y)return la[ma];};ka.prototype.onLeave=function(){"use strict";this.subscriptions&&this.subscriptions.release();};ka.prototype.getHelpDialogRequest=function(){"use strict";if(!this.dialogRequest){this.dialogRequest=new k('/ajax/keyboard_shortcuts');this.dialogRequest.setReadOnly(true);}else if(this.dialogRequest.transport)return null;return this.dialogRequest;};ka.prototype.init=function(la){"use strict";y.onLeave(this.onLeave.bind(this));this.subscriptions=new z();this.subscriptions.addSubscriptions(i.subscribe(w.NAVIGATION_BEGIN,this.onLeave.bind(this)),u.register('j',this.vert.bind(this,1)),u.register('k',this.vert.bind(this,-1)),u.register('l',function(){var ma=this.getParentStory(fa());v.like(function(){this.setSelected(ma,false);this.clickLike();}.bind(this),fa());}.bind(this),{filter:this.hasActiveStory.bind(this)}),u.register('c',this.clickComment.bind(this),{filter:this.hasActiveStory.bind(this)}),u.register('o',this.openAttachment.bind(this),{filter:this.hasActiveStory.bind(this)}),u.register('p',this.focusComposer.bind(this)),u.register('s',this.clickShare.bind(this),{filter:this.hasActiveStory.bind(this)}),u.register('SLASH',function(){var ma=this.getHelpDialogRequest();ma&&j.send(ma);}.bind(this),{filter:function(event,ma){return event.getModifiers().shift;}}),u.register('RETURN',this.clickSeeMore.bind(this),{filter:this.hasExpandableStoryInFocus.bind(this)}),u.register('LEFT',this.clickLeft.bind(this),{filter:this.hasActiveStory.bind(this)}),u.register('RIGHT',this.clickRight.bind(this),{filter:this.hasActiveStory.bind(this)}),s.listen(this.root,'focusin',function(event){var ma=event.getTarget();if(!this.isStory(ma)){var na=(ma.nodeName=='OBJECT'||ma.nodeName=='EMBED'||ma.nodeName=='IFRAME'),oa=this.getParentStory(ma),pa=this.selected;if(oa&&!na&&pa){this.setSelected(oa,true);this.selected=oa;if(this.clicktabscrollgk)if((aa.getElementPosition(ma).y-aa.getElementPosition(oa).y)+75<aa.getViewportDimensions().y)this.vert(0);}}}.bind(this)),s.listen(this.root,'click',function(event){if(this.clicktabscrollgk){var ma=event.getTarget(),na=!!x.byClass(ma,'uiPopover');if(this.selected)o.removeClass(this.selected,"_5qdv");var oa=(ma.nodeName=='OBJECT'||ma.nodeName=='EMBED'||ma.nodeName=='IFRAME');if(this.isStory(this.getParentStory(ma)))var pa=this.getParentStory(ma);if(pa&&(this.selected!=pa)&&!oa){this.setSelected(pa,false);if(!this.isInteractive(ma)&&!o.hasClass(ma,'UFICommentContainer'))this.setFocused(pa);}this.selected=pa;if((aa.getElementPosition(ma).y-aa.getElementPosition(pa).y)+75<aa.getViewportDimensions().y&&!na)this.vert(0);}}.bind(this)));};ka.prototype.hasActiveStory=function(event,la){"use strict";var ma=fa();return !(ma&&o.shown(ma))||!!this.getParentStory(ma);};ka.prototype.hasExpandableStoryInFocus=function(event,la){"use strict";var ma=fa();return !!(ma.getElementsByClassName('text_exposed_root').length&&!ma.getElementsByClassName('text_exposed_root text_exposed').length);};ka.prototype.click=function(la){"use strict";if(!this.selected)return;var ma;for(var na=0,oa=arguments.length;na<oa;na++){ma=p.scry(this.selected,arguments[na])[0];if(ma&&o.shown(ma)){ma.click();return;}}};ka.prototype.vert=function(la){"use strict";if(!this.scrollInitialized){this.subscriptions.addSubscriptions(s.listen(document,'scroll',function(){if(this.selected&&!this.scrolling)this.setSelected(null,false);}.bind(this)));this.scrollInitialized=true;}var ma,na;if(this.selected){if(l.isEnabled('kbshortcuts_feed')){na=la>0?'kbshortcuts.scroll_down':'kbshortcuts.scroll_up';m.bumpEntityKey('kbshortcuts_feed',na);n.log('feed_scroll',na,{});}h.logJKKey();if(this.selected.id=='pagelet_composer'){ma=la>0?this.getStories()[0]:null;if(this.isHoldoutStory(ma))ma=this.getPreviousStory(ma);}else if(la===0){ma=this.selected;}else ma=la>0?this.getNextStory(this.selected):(this.getPreviousStory(this.selected)||ea('pagelet_composer'));if(!ma){return;}else if(!r.isElementNode(ma)){o.removeClass(this.selected,'selectedStorySimple');this.selected=ma;return this.vert(la);}}if(!ma||x.byClass(ma,'hidden_elem')||!p.contains(document,ma)){ma=this.findTop();if(ma&&la<0)ma=this.getPreviousStory(ma);if(this.isHoldoutStory(ma))ma=this.getPreviousStory(ma);}if(!ma)return;this.anim&&this.anim.stop();var oa=(Date.now()-(this.lastScroll||0)>30);if(la!==0)var pa=this.setFocused.bind(this,ma);if(ga()){oa=false;pa();pa=da;}this.scrolling=true;this.scrollingTimer&&window.clearTimeout(this.scrollingTimer);this.anim=q.scrollTo(ma,oa?this.getAnimationLength(ma):0,false,aa.getViewportDimensions().y-ia-this.getScrollOffset(),0,function(){this.scrollingTimer=window.setTimeout(function(){this.scrolling=false;}.bind(this),300);var qa=aa.getScrollPosition();pa();if(qa.distanceTo(aa.getScrollPosition())!==0)q.scrollTo(qa,0);}.bind(this));this.setSelected(ma,true);this.lastScroll=Date.now();};ka.prototype.isInteractive=function(la){"use strict";return ((la.nodeName=='INPUT')||(la.nodeName=='BUTTON')||(la.nodeName=='TEXTAREA')||(la.nodeName=='A')||!!x.byAttribute(la,'contenteditable'));};ka.prototype.setTabindexOnHeadline=function(la,ma){"use strict";if(this.isStory(la)){var na=this.getHeadline(la);if(na)na.tabIndex=ma;}};ka.prototype.setTabindexOnStory=function(la,ma){"use strict";if(this.isStory(la))la.tabIndex=ma;};ka.prototype.setFocused=function(la){"use strict";if(this.isStory(la))t.setWithoutOutline(la);};e.exports=ka;},null);
__d("PageAdsAttachmentLinkShareConstants",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={LINK_ATTACHMENT_CLICK:'link_attachment_click'};e.exports=g;},null);
__d("XFeedEgoImpressionLoggingController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/ego\/feed\/logging\/impression\/",{ego_id:{type:"Int",required:true},qid:{type:"Int",required:true},mf_story_key:{type:"Int",required:true}});},null);
__d("XFeedEgoLoadController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/ego\/feed\/load\/",{loading_id:{type:"String",required:true},ids:{type:"IntVector",required:true},service_id:{type:"String",required:true},replace_data:{type:"String",defaultValue:""},location:{type:"String",defaultValue:""},group_size:{type:"Int",defaultValue:1},qid:{type:"Int",required:true},mf_story_key:{type:"Int",required:true}});},null);
__d("PYMKUnitCarousel",["CSS","DOM","tidyEvent","Animation","Ease","Arbiter","XFeedEgoImpressionLoggingController","AsyncRequest","Locale","XFeedEgoLoadController","csx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();function r(s){"use strict";this.$PYMKUnitCarousel0=o.isRTL()?'margin-right':'margin-left';var t=s.elements;this.$PYMKUnitCarousel1={};this.$PYMKUnitCarousel2=s.item_width;this.$PYMKUnitCarousel3=s.visible_count;this.$PYMKUnitCarousel4=0;this.$PYMKUnitCarousel5=s.start_offset;this.$PYMKUnitCarousel6=3;this.$PYMKUnitCarousel7=t.node;this.$PYMKUnitCarousel8=s.show_xout_buttons;this.$PYMKUnitCarousel9=t.grid;this.$PYMKUnitCarousel9.style[this.$PYMKUnitCarousel0]=this.$PYMKUnitCarousel5+'px';this.$PYMKUnitCarousel9.style.width=this.$PYMKUnitCarousel2*this.$PYMKUnitCarousel3+'px';l.subscribe('x-out-pymk-suggestions',this.$PYMKUnitCarousela.bind(this));this.$PYMKUnitCarouselb=t.service_id;this.$PYMKUnitCarouselc=t.pager;this.$PYMKUnitCarouseld=t.location;this.$PYMKUnitCarousele();this.$PYMKUnitCarouself();this.$PYMKUnitCarouselg();i([this.$PYMKUnitCarouselc.subscribe('next',this.$PYMKUnitCarouselh.bind(this)),this.$PYMKUnitCarouselc.subscribe('prev',this.$PYMKUnitCarouseli.bind(this))]);}r.prototype.$PYMKUnitCarouselj=function(s){"use strict";var t=JSON.parse(s.getAttribute('data-ft'));if(!t)return;var u=t.ego_id;if(!u)return;if(this.$PYMKUnitCarousel1[u])return;var v=m.getURIBuilder().setInt('ego_id',u).setInt('qid',t.qid).setInt('mf_story_key',t.mf_story_key).getURI();new n().setURI(v).send();this.$PYMKUnitCarousel1[u]=true;};r.prototype.$PYMKUnitCarouselk=function(s,t,u){"use strict";if(!this.$PYMKUnitCarousel8)return;var v=Math.min(s,t),w=Math.max(s,t),x=this.$PYMKUnitCarousel9.children;v=Math.max(v,0);w=Math.min(w,x.length-1);var y;for(var z=v;z<=w;++z){y=x[z];var aa=h.scry(y,"._g2l")[0];if(aa)if(u){g.hide(aa);}else g.show(aa);}};r.prototype.$PYMKUnitCarousele=function(){"use strict";var s=this.$PYMKUnitCarousel9.children,t=s.length,u=this.$PYMKUnitCarousel4+Math.min(this.$PYMKUnitCarousel3,t)-1;if(u===(t-1))--u;for(var v=this.$PYMKUnitCarousel4;v<=u;++v)this.$PYMKUnitCarouselj(s[v]);};r.prototype.$PYMKUnitCarousela=function(s,t){"use strict";if(!t)return;if(this.$PYMKUnitCarousel9.childElementCount===0){h.remove(this.$PYMKUnitCarousel7);return;}if(this.$PYMKUnitCarousel9.childElementCount>=this.$PYMKUnitCarousel3){var u=this.$PYMKUnitCarousel4+this.$PYMKUnitCarousel3,v=this.$PYMKUnitCarousel9.childElementCount-u;if(v<0)this.$PYMKUnitCarouselm(-v);}this.$PYMKUnitCarouselg();this.$PYMKUnitCarousele();this.$PYMKUnitCarouself();};r.prototype.$PYMKUnitCarouselg=function(){"use strict";this.$PYMKUnitCarouselk(this.$PYMKUnitCarousel4,this.$PYMKUnitCarousel4+this.$PYMKUnitCarousel3-1,false);if(this.$PYMKUnitCarousel9.childElementCount<this.$PYMKUnitCarousel3){this.$PYMKUnitCarouselc.setNextEnabled(false);this.$PYMKUnitCarouselc.setPrevEnabled(false);return;}this.$PYMKUnitCarouselc.setNextEnabled(this.$PYMKUnitCarousel4+this.$PYMKUnitCarousel3<this.$PYMKUnitCarousel9.childElementCount);this.$PYMKUnitCarouselc.setPrevEnabled(this.$PYMKUnitCarousel4!==0);};r.prototype.$PYMKUnitCarouselm=function(s){"use strict";this.$PYMKUnitCarouselk(this.$PYMKUnitCarousel4,this.$PYMKUnitCarousel4+this.$PYMKUnitCarousel3,true);var t=this.$PYMKUnitCarousel4+s;if(t<0)t=0;if(t+this.$PYMKUnitCarousel3>=this.$PYMKUnitCarousel9.childElementCount)t=this.$PYMKUnitCarousel9.childElementCount-this.$PYMKUnitCarousel3;s=t-this.$PYMKUnitCarousel4;if(t===this.$PYMKUnitCarousel4)return;this.$PYMKUnitCarousel5-=s*this.$PYMKUnitCarousel2;this.$PYMKUnitCarousel4=t;var u=Math.abs(s*this.$PYMKUnitCarousel2);new j(this.$PYMKUnitCarousel9).to(this.$PYMKUnitCarousel0,this.$PYMKUnitCarousel5).duration(u).ease(k.sineOut).ondone(this.$PYMKUnitCarouselg.bind(this)).go();};r.prototype.$PYMKUnitCarouseli=function(){"use strict";this.$PYMKUnitCarouselm(-this.$PYMKUnitCarousel6);};r.prototype.$PYMKUnitCarouselh=function(){"use strict";this.$PYMKUnitCarouselm(this.$PYMKUnitCarousel6);this.$PYMKUnitCarousele();this.$PYMKUnitCarouself();};r.prototype.$PYMKUnitCarouself=function(){"use strict";if(this.$PYMKUnitCarouseln)return;var s=this.$PYMKUnitCarousel9.childElementCount-this.$PYMKUnitCarousel4-this.$PYMKUnitCarousel3-1;if(s>7)return;var t=h.scry(this.$PYMKUnitCarousel9,"._34bp")[0];if(!t)return;var u=t.id,v=[],w=this.$PYMKUnitCarousel9.childNodes,x=w.length-1,y,z;for(var aa=0;aa<x;++aa){var ba=JSON.parse(w[aa].getAttribute('data-ft'));if(ba.ego_id)v.push(ba.ego_id);if(ba.qid&&!y)y=ba.qid;if(ba.mf_story_key&&!z)z=ba.mf_story_key;}var ca=p.getURIBuilder().setString('service_id',this.$PYMKUnitCarouselb).setString('location',this.$PYMKUnitCarouseld).setString('loading_id',u).setIntVector('ids',v).setInt('qid',y).setInt('mf_story_key',z).getURI();new n().setURI(ca).setHandler(this.$PYMKUnitCarouselo.bind(this)).setErrorHandler(this.$PYMKUnitCarouselp.bind(this)).send();this.$PYMKUnitCarouseln=true;};r.prototype.$PYMKUnitCarouselo=function(s){"use strict";this.$PYMKUnitCarouseln=false;if(s&&s.payload&&s.payload.items){var t=s.payload.items;if(t){var u=h.find(this.$PYMKUnitCarousel9,"._34bp");h.insertBefore(u,t);this.$PYMKUnitCarouselg();this.$PYMKUnitCarousele();this.$PYMKUnitCarouself();}}};r.prototype.$PYMKUnitCarouselp=function(){"use strict";this.$PYMKUnitCarouseln=false;};e.exports=r;},null);
__d("ViewportTrackingHelper",["Event","DOMDimensions","Vector"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={getScrollListener:function(k){return g.listen(window,'scroll',k);},looseIsVisible:function(k,l){if(!k.x&&!k.y&&!k.width&&!k.height)return false;var m=i.getScrollPosition().y,n=h.getViewportDimensions().height,o=n+l-m;return k.y<o;},isVisible:function(k,l){if(!k.x&&!k.y&&!k.width&&!k.height)return false;var m=h.getViewportDimensions().height,n=Math.max(k.y,0),o=Math.min(k.y+k.height,m),p=Math.min(k.height,l);return (o-n)>=p;},isDescendantOf:function(k,l){if(k===l)return k;while(k&&k.parentNode){if(k.parentNode===l)return k;k=k.parentNode;}return false;}};e.exports=j;},null);
__d("ViewportTracking",["Arbiter","AsyncSignal","Banzai","BanzaiScuba","CSS","cx","CurrentUser","DOM","DOMDimensions","Event","LitestandMessages","NavigationMessage","Run","SubscriptionsHandler","UserActivity","Vector","ViewportTrackingHelper","clickRefAction","collectDataAttributes","copyProperties","debounce","getElementPosition","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca){b.__markCompiled&&b.__markCompiled();var da=97,ea=51,fa='vpv',ga='/feed/feed_tracking/vpv_waterfall_logging',ha=3,ia=2,ja=1,ka=0,la=1,ma=2,na=3,oa=4;function pa(){"use strict";}pa.prototype.init=function(qa){"use strict";this.useBanzai=true;this.banzaiNoDelay=!!qa.banzai_no_delay;this.banzaiRetry=!!qa.banzai_retry;this.viewportHeightRatio=qa.viewport_height_ratio?qa.viewport_height_ratio:.25;this.vpvDebug=!!qa.vpv_debug;this.vpvdDebug=!!qa.vpvd_debug;this.vpvdAnalysis=!!qa.vpvd_analysis;this.trackMouseClick=!!qa.track_mouse_click;this.trackMouseMove=!!qa.track_mouse_move;this.trackKeyboard=!!qa.track_keyboard;this.initLoggingDisabled=!!qa.init_logging;this.annotatedVPVLogging=!!qa.annotated_vpv_logging;this.useWaterfallLogging=!!qa.waterfall_logging;this.loggedStoryIDs={};this.readStoryIDs={};this.annotatedStoryIDs={};this.minSizeToBeVisible=200;this.minFractionToBeVisibleForTimetracking=.5;this.scrollThrottlingInterval=100;this.mouseThrottlingInterval=100;this.keyboardThrottlingInterval=100;this.minTimeToReportImmediately=500;this.discardVPVDIntervalThreshold=90000;this.active_state_duration=1000;this.height_diff_to_change_state=25;this.focused_state_duration=3500;this.invalidateAllStoriesCache();this.cachedViewportHeight=o.getViewportDimensions().height;this.isTimetrackingEnabled=0;this.activeStories={};this.userInactiveLock=false;this.userActivityPollerTimeoutID=-1;this._headLoadStoryCount=0;this.getDataFromConfig(qa);if(this.isTimetrackingEnabled){this.lastMouseX=-1;this.lastMouseY=-1;this.lastStreamY=-1;this.latestStreamYChangedTimeStamp=-1;if(this.initLoggingDisabled){this.userFocus=ma;this.latestUserFocus=ma;}else{this.userFocus=la;this.latestUserFocus=la;}this.latestUserActivity='init';this.focusedStory=null;this.latestFocusedStory=null;this.latestActiveStory=null;this.totalVPVDuration={};}this.isLoose=!!qa.is_loose;this.maxScrollPosition=0;if(qa.tracking_duration_config){this.scrollThrottlingInterval=qa.tracking_duration_config.scroll_throttling_interval;this.mouseThrottlingInterval=qa.tracking_duration_config.mouse_throttling_interval;this.keyboardThrottlingInterval=qa.tracking_duration_config.keyboard_throttling_interval;this.userActivityPollingInterval=qa.tracking_duration_config.user_activity_polling_interval;this.timeToBeConsideredInactive=qa.tracking_duration_config.time_to_be_considered_inactive;this.minFractionToBeVisibleForTimetracking=qa.tracking_duration_config.min_fraction_to_be_visible;this.minTimeToReportImmediately=qa.tracking_duration_config.min_time_to_report_immediately;this.active_state_duration=qa.tracking_duration_config.active_state_duration;this.height_diff_to_change_state=qa.tracking_duration_config.story_height_diff_to_change_state;this.focused_state_duration=qa.tracking_duration_config.focused_state_duration;this.discardVPVDIntervalThreshold=qa.tracking_duration_config.discard_vpvd_interval_threshold;}var ra,sa=aa(this.fireTimer,this.getTimeout(),this);if(this.isLoose){this.minSizeToBeVisible=0;ra=ca(function(){this.maxScrollPosition=Math.max(this.maxScrollPosition,v.getScrollPosition().y);sa();}.bind(this));}else ra=sa;this.initialStories=this.getStoriesInView();this.initialStoriesLogged=false;if(this.annotatedVPVLogging)this.initialStories.forEach(this.logAnnotatedVPV,this);if(this.useWaterfallLogging)this.getStoriesInView().forEach(function(wa){this.waterfallLogStep(wa,'100_all_stories_in_view_ignore_height',true);},this);this.vpvHeartBeatInterval=qa.vpv_heartbeat_interval;this.passVPVHeartbeatGK=qa.use_vpv_heartbeat;if(this.passVPVHeartbeatGK){this.intervalCount=1;this.fireTimerCount=1;this.storiesInView=this.initialStories?this.initialStories:this.getStoriesInView();this.vpvHeartBeatIntervalSignal=setInterval(function(){this._sendSignal('interval');}.bind(this),this.vpvHeartBeatInterval);}this.subscriptions=new t();this.subscriptions.addSubscriptions(this._getScrollListener(ra),p.listen(window,'resize',function(){this.invalidateVisibleStoriesCache();this.cachedViewportHeight=o.getViewportDimensions().height;ra();}.bind(this)),p.listen(window,'focus',function(){if(this.isTimetrackingEnabled)this.updateTimeTrackingData(false,'window_focus');}.bind(this)),p.listen(window,'blur',function(){if(this.isTimetrackingEnabled)this.updateTimeTrackingData(true,'window_blur');}.bind(this)),g.subscribe(r.NAVIGATION_BEGIN,this.cleanup.bind(this)),g.subscribe('Stream/totalHeadLoadedStories',function(wa,xa){this._headLoadStoryCount=xa.count;}.bind(this)),g.subscribe(q.STORIES_INSERTED,function(){if(this.annotatedVPVLogging&&!this.initialStoriesLogged){var wa=this.getStoriesInView();wa.forEach(this.logAnnotatedVPV,this);}else ra();if(this.isTimetrackingEnabled)this.updateTimeTrackingData(false,'stories_inserted');}.bind(this)));if(this.isTimetrackingEnabled){this.updateTimeTrackingData(false,'init');var ta=ca(function(event){this.invalidateVisibleStoriesCache();this.handleScroll(event);}.bind(this),this.scrollThrottlingInterval),ua=ca(function(event){this.handleKeyboard(event);}.bind(this),this.keyboardThrottlingInterval),va=ca(function(event){this.handleMouse(event);}.bind(this),this.mouseThrottlingInterval);this.subscriptions.addSubscriptions(p.listen(window,'scroll',ta),p.listen(document.documentElement,'DOMMouseScroll',ta),p.listen(document.documentElement,'mousewheel',ta));if(this.trackKeyboard)this.subscriptions.addSubscriptions(p.listen(document.documentElement,'keydown',ua));if(this.trackMouseMove)this.subscriptions.addSubscriptions(p.listen(document.documentElement,'mouseover',va),p.listen(document.documentElement,'mousemove',va));if(this.trackMouseMove&&this.trackMouseClick)this.subscriptions.addSubscriptions(g.subscribe('Event/stop',function(wa,xa){this.handleMouse(xa.event);}.bind(this)));if(this.trackMouseClick)this.subscriptions.addSubscriptions(p.listen(document.documentElement,'click',function(event){this.handleMouse(event);}.bind(this)),g.subscribe('PhotoSnowlift.OPEN',function(){this.userFocus=na;this.handleLayers();}.bind(this)),g.subscribe('PhotoSnowlift.CLOSE',function(){this.userFocus=la;this.focusedStory=null;this.updateTimeTrackingData(false,'snowlift_close');}.bind(this)));this._userActivityPoller();}s.onLeave(this.cleanup.bind(this));s.onUnload(this.cleanup.bind(this));};pa.prototype._getScrollListener=function(qa){"use strict";return p.listen(window,'scroll',qa);};pa.prototype.cleanup=function(){"use strict";if(this.subscriptions){this.subscriptions.release();this.subscriptions=null;}if(this.isTimetrackingEnabled){clearTimeout(this.userActivityPollerTimeoutID);this.updateTimeTrackingData(true,'cleanup');}if(this.passVPVHeartbeatGK)clearInterval(this.vpvHeartBeatIntervalSignal);if(this.annotatedVPVLogging){var qa=this.getStoriesInView();qa.forEach(this.logAnnotatedVPV,this);}this.initialStories=[];this._headLoadStoryCount=0;};pa.prototype.fireTimer=function(){"use strict";if(this.useWaterfallLogging){var qa=this.getStoriesInViewIgnoreHeight();qa.forEach(function(ra){this.waterfallLogStep(ra,'100_all_stories_in_view_ignore_height');},this);}if(!this.initialStoriesLogged){this.initialStories.forEach(this.markStoryRead,this);this.initialStoriesLogged=true;}this.storiesInView=this.getStoriesInView();this.storiesInView.forEach(this.markStoryRead,this);if(this.passVPVHeartbeatGK)this._sendSignal('fireTimer');};pa.prototype.heartBeatIsEnabled=function(){"use strict";return false;};pa.prototype.getSessionID=function(){"use strict";return null;};pa.prototype._sendSignal=function(qa){"use strict";if(!this.heartBeatIsEnabled())return;var ra=-1;if(qa=='interval'){ra=this.intervalCount++;}else if(qa=='fireTimer')ra=this.fireTimerCount++;var sa=-1,ta=-1,ua=-1;if(this.storiesInView.length>0){sa=this.getStoryID(this.storiesInView[0]);ta=this.getQueryID(this.storiesInView[0]);ua=this.getFBFeedLocations(this.storiesInView[0]);}var va=new j('vpv_heartbeat_js');va.addInteger('qid',ta);va.addInteger('uid',m.getID());va.addInteger('firststoryid',sa);va.addInteger('time',Math.round(Date.now()/1000));va.addNormal('type',qa);va.addInteger('count',ra);va.addInteger('fbfeed_location',ua);va.post();};pa.prototype._userActivityPoller=function(){"use strict";if(!this.userInactiveLock&&!u.isActive(this.timeToBeConsideredInactive)){this.userInactiveLock=true;this.userFocus=ma;this.updateTimeTrackingData(false,'user_activity_inactive');u.subscribeOnce(function(){this.userFocus=la;this.updateTimeTrackingData(false,'user_activity_active');this.userInactiveLock=false;}.bind(this));}this.userActivityPollerTimeoutID=setTimeout(this._userActivityPoller.bind(this),this.userActivityPollingInterval);};pa.prototype.getQueryID=function(qa){"use strict";return -1;};pa.prototype.getFBFeedLocations=function(qa){"use strict";return -1;};pa.prototype.getFBFeedInsertionPosition=function(qa){"use strict";return -1;};pa.prototype.createVPVDTimer=function(qa){"use strict";var ra=document.createElement("Label");ra.setAttribute("for",qa);ra.setAttribute("class",'vpvd_debug_timer');return ra;};pa.prototype.updateVPVDTimer=function(qa){"use strict";var ra=this.activeStories[qa].story,sa=n.scry(ra,'.vpvd_debug_timer');if(!sa.length){sa=[this.createVPVDTimer(ra),this.createVPVDTimer(ra)];var ta=n.scry(ra,'.UFIRow');if(ta.length&&ta[ta.length-1].clientWidth>0){ta[ta.length-1].appendChild(sa[0]);}else ra.appendChild(sa[0]);ra.insertBefore(sa[1],ra.firstChild);}var ua=this.totalVPVDuration[qa],va=Math.floor(ua/1000)+'.'+Math.floor((ua%1000)/100);n.setContent(sa[0],va);n.setContent(sa[1],va);};pa.prototype.updateVPVDTimers=function(){"use strict";for(var qa in this.activeStories)if(this.activeStories.hasOwnProperty(qa))this.updateVPVDTimer(qa);};pa.prototype.logVpvdAnalysis=function(qa,ra,sa,ta,ua,va){"use strict";var wa=new j('vpv_duration');wa.addDenorm('qid',this.getQueryID(this.activeStories[qa].story));wa.addDenorm('uid',m.getID());wa.addDenorm('vsid',qa);wa.addInteger('time',Math.round(Date.now()/1000));wa.addInteger('duration',ta);wa.addInteger('total_duration',ua);wa.addNormal('story_state',this.activeStories[qa].state);wa.addNormal('is_active_state',sa);wa.addNormal('num_visible_stories',this.numVisibleStories);wa.addInteger('story_height',this.activeStories[qa].story_height);wa.addInteger('story_visible_height',this.activeStories[qa].height);wa.addInteger('state_visible_height',va);wa.addInteger('total_visible_height',this.totalVisibleHeight);wa.addInteger('total_height',this.totalHeight);wa.addNormal('user_focus',this.latestUserFocus);wa.addNormal('next_user_focus',this.userFocus);wa.addInteger('vpvd',ra);wa.addInteger('accumulated_vpvd',this.activeStories[qa].vpvd);wa.addNormal('user_activity',this.latestUserActivity);wa.addNormal('next_user_activity',this.userActivity);wa.addInteger('story_position_y',this.activeStories[qa].y);wa.addInteger('feed_insertion_position',this.getFBFeedInsertionPosition(this.activeStories[qa].story));wa.addNormal('visible_position',this.activeStories[qa].visible_position);wa.addNormal('is_focused_story',this.activeStories[qa].is_focused);wa.post();};pa.prototype.shouldDiscardStory=function(qa){"use strict";return this.activeStories[qa].height!=this.activeStories[qa].story_height&&this.activeStories[qa].height<this.totalHeight/2;};pa.prototype.calculateTotalHeight=function(){"use strict";this.totalHeight=0;for(var qa in this.activeStories)if(this.activeStories.hasOwnProperty(qa))this.totalHeight+=this.activeStories[qa].height;};pa.prototype.updateVPVDurations=function(qa){"use strict";if(this.latestUserFocus===ma||qa-this.latestTimeTrackingTimestamp>this.discardVPVDIntervalThreshold)return;var ra={1:0,2:0,3:0},sa=(qa-this.latestTimeTrackingTimestamp>=this.focused_state_duration);this.totalVisibleHeight=0;for(var ta in this.activeStories)if(this.activeStories.hasOwnProperty(ta))if(!(this.latestUserFocus===la&&sa&&this.shouldDiscardStory(ta))){ra[this.activeStories[ta].state]+=this.activeStories[ta].height;this.totalVisibleHeight+=this.activeStories[ta].height;}var ua=0,va=qa-this.latestTimeTrackingTimestamp;if(this.latestUserFocus===la){va=ra[ha]>0?this.focused_state_duration:this.active_state_duration;va=Math.min(va,qa-this.latestTimeTrackingTimestamp);ua=(qa-this.latestTimeTrackingTimestamp)-va;}var wa=0,xa=ha;for(var ya=ha;ya>=ja;ya--)if(ra[ya]>0){wa=ra[ya];xa=ya;break;}var za=ra[ha]+ra[ia]+ra[ja],ab=0;for(ta in this.activeStories)if(this.activeStories.hasOwnProperty(ta)){if(this.latestUserFocus===la&&sa&&this.shouldDiscardStory(ta))continue;if(wa>0&&this.activeStories[ta].state>=xa){ab=va*(this.activeStories[ta].height/wa);if(this.vpvdAnalysis&&va>0)this.logVpvdAnalysis(ta,ab,true,va,va+ua,wa);this.activeStories[ta].vpvd+=ab;this.totalVPVDuration[ta]+=ab;}if(za>0){ab=ua*(this.activeStories[ta].height/za);if(this.vpvdAnalysis&&ua>0)this.logVpvdAnalysis(ta,ab,false,ua,va+ua,za);this.activeStories[ta].vpvd+=ab;this.totalVPVDuration[ta]+=ab;}}};pa.prototype.updateActiveStory=function(qa,ra,sa,ta){"use strict";this.activeStories[qa].state=ra;this.activeStories[qa].ts=sa;this.activeStories[qa].height_snapshot=ta[qa].height;this.activeStories[qa].is_focused=this.focusedStory===ta[qa].story;this.activeStories[qa].story_height=ta[qa].story_height;if(this.vpvdAnalysis){this.activeStories[qa].visible_position=ta[qa].visible_position;this.activeStories[qa].y=ta[qa].y;}};pa.prototype.updateActiveStories=function(qa,ra){"use strict";for(var sa in qa)if(qa.hasOwnProperty(sa))if(sa in this.activeStories){this.activeStories[sa].height=qa[sa].height;var ta=qa[sa].height-this.activeStories[sa].height_snapshot;if(this.focusedStory===qa[sa].story){this.updateActiveStory(sa,ha,ra,qa);}else if(ta<=-this.height_diff_to_change_state){this.updateActiveStory(sa,this.shouldDiscardStory(sa)?ka:ja,ra,qa);}else if(ta>=this.height_diff_to_change_state||this.activeStories[sa].is_focused||this.activeStories[sa].height===this.activeStories[sa].story_height)this.updateActiveStory(sa,ia,ra,qa);}else{this.activeStories[sa]={evp_ts:ra,story:qa[sa].story,height:qa[sa].height,vpvd:0};if(!this.totalVPVDuration[sa])this.totalVPVDuration[sa]=0;this.updateActiveStory(sa,ia,ra,qa);}};pa.prototype.recordVPVDurations=function(qa,ra){"use strict";for(var sa in this.activeStories)if(this.activeStories.hasOwnProperty(sa))if(ra||!(sa in qa)){if(this.activeStories[sa].vpvd>this.focused_state_duration||this.activeStories[sa].vpvd===this.totalVPVDuration[sa])this.recordTimeStoryWasInView(this.activeStories[sa]);delete this.activeStories[sa];}};pa.prototype.updateTimeTrackingData=function(qa,ra){"use strict";this.userActivity=ra;if(!this.activeStories)this.activeStories={};var sa=Date.now();if(!this.latestTimeTrackingTimestamp)this.latestTimeTrackingTimestamp=sa;var ta=this.getVisibleStoriesFromCache();this.calculateTotalHeight();this.updateVPVDurations(sa);this.updateActiveStories(ta,sa);if(this.vpvdDebug)this.updateVPVDTimers();this.recordVPVDurations(ta,qa);if(qa){this.latestTimeTrackingTimestamp=0;}else this.latestTimeTrackingTimestamp=sa;this.latestUserActivity=this.userActivity;this.latestUserFocus=this.userFocus;if(this.focusedStory)this.latestActiveStory=this.focusedStory;this.latestFocusedStory=this.focusedStory;this.focusedStory=null;};pa.prototype.needsToUpdateTimeTrackingData=function(){"use strict";return !(this.latestUserFocus===this.userFocus&&(this.userFocus===ma||(this.userFocus===la&&!this.latestFocusedStory&&!this.focusedStory)));};pa.prototype.getfocusedStory=function(qa){"use strict";var ra=this.getVisibleStoriesFromCache();for(var sa in ra)if(ra.hasOwnProperty(sa))if(w.isDescendantOf(qa,ra[sa].story))return ra[sa].story;return null;};pa.prototype.handleLayers=function(){"use strict";if(this.userFocus===na||this.userFocus===oa){this.focusedStory=this.latestActiveStory;this.updateTimeTrackingData(false,'media_layer');return true;}return false;};pa.prototype.didInteractWithStream=function(qa){"use strict";return w.isDescendantOf(qa,this.getStream())||w.isDescendantOf(this.getStream(),qa);};pa.prototype.handleScroll=function(event){"use strict";if(this.handleLayers())return;var qa=Date.now(),ra=ba(this.getStream()).y;if(ra!=this.lastStreamY||qa-this.latestStreamYChangedTimeStamp<2.5*this.scrollThrottlingInterval||this.didInteractWithStream(event.target)){this.latestStreamYChangedTimeStamp=qa;this.userFocus=la;}else this.userFocus=ma;this.lastStreamY=ra;if(this.userFocus===la||this.needsToUpdateTimeTrackingData())this.updateTimeTrackingData(false,'scroll');};pa.prototype.handleKeyboard=function(event){"use strict";if(this.handleLayers())return;if(this.didInteractWithStream(event.target)){this.userFocus=la;this.focusedStory=this.getfocusedStory(event.target);}else if(k.hasClass(event.target,'shareInput')){this.userFocus=la;this.focusedStory=this.latestActiveStory;}else this.userFocus=ma;if(this.userFocus===la||this.needsToUpdateTimeTrackingData())this.updateTimeTrackingData(false,'keyboard');};pa.prototype.handleMouse=function(event){"use strict";if(this.handleLayers())return;if(event.type!='click'&&event.clientX===this.lastMouseX&&event.clientY===this.lastMouseY)return;if(event.type==='click')this.invalidateVisibleStoriesCache();if(this.didInteractWithStream(event.target)){this.userFocus=la;this.focusedStory=this.getfocusedStory(event.target);}else this.userFocus=ma;this.lastMouseX=event.clientX;this.lastMouseY=event.clientY;if(this.needsToUpdateTimeTrackingData())this.updateTimeTrackingData(false,event.type);};pa.prototype.getStoriesInView=function(){"use strict";var qa=this.getAllStories(),ra=[],sa=false;for(var ta=0;ta<qa.length;ta++){var ua=qa[ta],va=this.getStoryID(ua);if(this.hasBeenVisible(va))continue;if(this.isVisible(ua)){if(ua.getAttribute('data-insertion-position')===null)ua.setAttribute('data-insertion-position',ta-this._headLoadStoryCount);ra.push(ua);sa=true;}else if(sa)break;}return ra;};pa.prototype.getStoriesInViewIgnoreHeight=function(){"use strict";var qa=this.getAllStories(),ra=false,sa=[];for(var ta=0;ta<qa.length;ta++){var ua=qa[ta];if(this.isVisible(ua,false,0)){sa.push(ua);ra=true;}else if(ra)break;}return sa;};pa.prototype.getAllStoriesFromCache=function(){"use strict";if(this.cachedAllStories===null)this.cachedAllStories=this.getAllStories();return this.cachedAllStories;};pa.prototype.invalidateAllStoriesCache=function(){"use strict";this.cachedAllStories=null;this.invalidateVisibleStoriesCache();};pa.prototype.getVisibleStoriesFromCache=function(){"use strict";if(this.cachedVisibleStories===null)this.cachedVisibleStories=this.getAllStoriesInView();return this.cachedVisibleStories;};pa.prototype.invalidateVisibleStoriesCache=function(){"use strict";this.cachedVisibleStories=null;};pa.prototype.getAllStoriesInView=function(){"use strict";var qa=this.getAllStoriesFromCache(),ra={},sa=false,ta=0,ua=qa.length,va=1,wa=qa.length;if(this._indexOfLastVisibleStoryOnPreviousPass>ua/2){ta=ua-1;ua=-1;va=-va;}for(var xa=ta;xa!=ua;xa+=va){var ya=qa[xa],za=this.getHeightIfVisible(ya,false,Math.min(this.minSizeToBeVisible,this.minFractionToBeVisibleForTimetracking*o.getElementDimensions(ya).height));if(za>0||ya===this.focusedStory){if(ya.getAttribute('data-insertion-position')===null)ya.setAttribute('data-insertion-position',xa-this._headLoadStoryCount);var ab=this.getStoryID(ya);ra[ab]={story:ya,height:za,story_height:o.getElementDimensions(ya).height};sa=true;if(this.vpvdAnalysis){ra[ab].y=ba(ya).y;ra[ab].visible_position=xa;wa=Math.min(wa,xa);}}else if(sa){this._indexOfLastVisibleStoryOnPreviousPass=xa-va;break;}}if(this.vpvdAnalysis){this.numVisibleStories=0;for(ab in ra)if(ra.hasOwnProperty(ab)){ra[ab].visible_position-=wa;this.numVisibleStories++;}}return ra;};pa.prototype.getTimetrackingDataToLog=function(qa){"use strict";var ra={evt:da,vpvd_start_timestamp:qa.evp_ts,vpvd_time_delta:Math.round(qa.vpvd),story_height:o.getElementDimensions(qa.story).height,viewport_height:this.cachedViewportHeight};return {ft:ra};};pa.prototype.recordTimeStoryWasInView=function(qa){"use strict";if(this.isTimetrackingEnabled&&qa.vpvd>0){var ra=this.getTimetrackingDataToLog(qa),sa=y(qa.story,['ft']);z(ra.ft,sa.ft);var ta=!!sa.ft.ei&&(ra.ft.vpvd_time_delta>this.minTimeToReportImmediately);delete ra.ei;this.sendDataToLog(qa.story,ra,ta,false);}};pa.prototype.hasBeenVisible=function(qa){"use strict";return qa in this.readStoryIDs;};pa.prototype.isVisible=function(qa,ra,sa){"use strict";return this.getHeightIfVisible(qa,ra,sa)>0;};pa.prototype.getHeightIfVisible=function(qa,ra,sa){"use strict";if(ra===(void 0))ra=this.isLoose;if(sa===(void 0))sa=this.minSizeToBeVisible;var ta=v.getScrollPosition().y,ua=o.getViewportDimensions().height,va=ba(qa),wa=o.getElementDimensions(qa),xa=ua+this.maxScrollPosition-ta;if(!va.x&&!va.y&&!wa.x&&!wa.y)return false;if(ra&&va.y<xa)return true;var ya=Math.max(va.y,0),za=Math.min(va.y+wa.height,ua),ab=Math.min(wa.height,sa);return (za-ya)>=ab?(za-ya):0;};pa.prototype.getHeightInViewport=function(qa){"use strict";var ra=o.getViewportDimensions().height,sa=ba(qa),ta=o.getElementDimensions(qa);if(!sa.x&&!sa.y&&!ta.x&&!ta.y)return false;var ua=Math.max(sa.y,0),va=Math.min(sa.y+ta.height,ra);return va-ua;};pa.prototype.sendDataToLog=function(qa,ra,sa,ta){"use strict";if(this.useBanzai){var ua={};if(sa)ua.delay=3000;if(ta)ua.retry=true;var va=this.getSessionID();if(va)ra.ft.session_id=va;if(this.useWaterfallLogging&&ra.ft.evt==ea){ra.ft.should_waterfall_logging=1;ra.ft["interface"]='www';var wa=!this.initialStoriesLogged;this.waterfallLogStep(qa,'200_sent_to_banzai',wa);}i.post('feed_tracking',ra,ua);}else x(fa,qa,null,'FORCE',ra);};pa.prototype.waterfallLogStep=function(qa,ra,sa){"use strict";var ta=this.getStoryID(qa);if(this.loggedStoryIDs[ra]&&this.loggedStoryIDs[ra][ta])return;var ua=this.getWaterfallData(qa,ra,sa);new h(ga,ua).send();if(!this.loggedStoryIDs[ra])this.loggedStoryIDs[ra]={};this.loggedStoryIDs[ra][ta]=true;};pa.prototype.getWaterfallData=function(qa,ra,sa){"use strict";var ta=this.getDataToLog(qa),ua=y(qa,['ft']);z(ta.ft,ua.ft);var va=ta.ft;va.height_in_viewport=this.getHeightInViewport(qa);va.step=ra;va.is_initial_story=sa?1:0;va["interface"]='www';return va;};pa.prototype.addSeenClassToStory=function(qa){"use strict";k.addClass(qa,"_50nb");k.removeClass(qa,"_50mx");k.removeClass(qa,"_2z-5");};pa.prototype.markStoryRead=function(qa){"use strict";var ra=this.getStoryID(qa);if(!ra||this.hasBeenVisible(ra))return;this.readStoryIDs[ra]=true;this.annotatedStoryIDs[ra]=true;var sa=this.getDataToLog(qa),ta=y(qa,['ft']);z(sa.ft,ta.ft);delete sa.ei;this.sendDataToLog(qa,sa,this.banzaiNoDelay,this.banzaiRetry);k.addClass(qa,"_x72");if(this.vpvDebug)k.addClass(qa,"_5m7s");this.addSeenClassToStory(qa);};pa.prototype.logAnnotatedVPV=function(qa){"use strict";var ra=this.getStoryID(qa);if(!ra||ra in this.annotatedStoryIDs)return;this.annotatedStoryIDs[ra]=true;var sa=this.getDataToLog(qa),ta=y(qa,['ft']);z(sa.ft,ta.ft);delete sa.ei;sa.ft.vpv_ft_only=1;this.sendDataToLog(qa,sa,this.banzaiNoDelay,this.banzaiRetry);};e.exports=pa;},null);
__d("GroupViewportTracking",["DOM","csx","ViewportTracking","Banzai","$"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();for(var l in i)if(i.hasOwnProperty(l))n[l]=i[l];var m=i===null?null:i.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=i;function n(){"use strict";if(i!==null)i.apply(this,arguments);}n.prototype.getDataFromConfig=function(o){"use strict";this.timeout=o.record_delay;};n.prototype.getTimeout=function(){"use strict";return this.timeout;};n.prototype.getAllStories=function(){"use strict";return g.scry(k('pagelet_group_mall'),"._5pat");};n.prototype.getStoryID=function(o){"use strict";var p=JSON.parse(o.getAttribute('data-ft'));return p.id;};n.prototype.getDataToLog=function(o){"use strict";return JSON.parse(o.getAttribute('data-ft'));};n.prototype.sendDataToLog=function(o,p){"use strict";if(this.useBanzai)j.post('group_feed_tracking',p);};e.exports.init=function(o){n.instance=new n();n.instance.init(o);};e.exports.getInstance=function(){return n.instance;};},null);
__d("runAfterScrollingStops",["Arbiter","Event","Run","debounceAcrossTransitions","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();function l(w,x,y){if(x&&o[x])return;if(!n){g.subscribe('page_transition',v);n=true;}if(!m){w();return;}x&&(o[x]=1);p.push(w);if(!y){if(r){i.onLeave(v);r=false;}q.push(p.length-1);}}var m,n,o={},p=[],q=[],r=true,s=500,t=j(function(){m=false;var w=p;p=[];q=[];o={};for(var x=0,y=w.length;x<y;++x)w[x]();},s);function u(){m=true;t();}function v(){var w=q;q=[];r=true;for(var x=0,y=w.length;x<y;++x)p[w[x]]=k;}h.listen(window,'scroll',u);e.exports=l;},null);
__d("LitestandOffscreenController",["Arbiter","CSS","DOM","Event","NavigationMessage","Run","Style","SubscriptionsHandler","Vector","cx","csx","queryThenMutateDOM","runAfterScrollingStops","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();var u=1,v=9,w=10,x={},y=false,z,aa,ba,ca,da=[];function ea(){z&&z.release();z=null;y=false;}function fa(){x={};da=[];}function ga(){if(h.hasClass(document.body,"_5vb_"))return w;return v;}function ha(){ca=ca||o.getViewportDimensions().y;aa=o.getScrollPosition().y;ba=aa+ca;if(u){aa-=ca*u;ba+=ca*u;}for(var qa in x){var ra=x[qa];ra.position=o.getElementPosition(ra.element).y;if(!ra.hidden)ra.height=ra.element.offsetHeight;}}function ia(){var qa=[];for(var ra in x){var sa=x[ra],ta=sa.position,ua=ta+sa.height<aa,va=ta>ba;if(!sa.hidden&&(ua||va)){ja(sa);}else if(!ua&&!va){sa.pendingHide=false;if(sa.hidden){if(sa.dirty&&ta<aa){qa.push(ra);h.addClass(ka(sa),"_49nu");}else m.apply(sa.element,{height:'',marginBottom:''});h.show(ka(sa));sa.dirty=false;sa.hidden=false;}}}if(!qa.length)return;var wa=0;r(function(){for(var xa=0,ya=qa.length;xa<ya;xa++){var za=x[qa[xa]];wa+=za.height-ka(za).offsetHeight+m.getFloat(za.element,'marginBottom');}},function(){for(var xa=0,ya=qa.length;xa<ya;xa++){var za=x[qa[xa]];h.removeClass(ka(za),"_49nu");m.apply(za.element,{height:'',marginBottom:''});}wa&&(document.body.scrollTop-=wa);});}function ja(qa){if(!qa.pendingHide){da.push(qa);qa.pendingHide=true;}}function ka(qa){if(qa.wrapperElement)return qa.wrapperElement;var ra=qa.element;if(ra.firstElementChild)return (qa.wrapperElement=ra.firstElementChild);for(var sa=0;sa<ra.childNodes.length;sa++)if(ra.childNodes[sa].tagName)return (qa.wrapperElement=ra.childNodes[sa]);}function la(){var qa=ga()+'px';for(var ra=0;ra<da.length;ra++){var sa=da[ra];if(i.scry(sa.element,"._52fb").length)sa.pendingHide=false;if(sa&&sa.element&&sa.pendingHide&&!sa.hidden){m.apply(sa.element,{height:sa.height+'px',marginBottom:qa});h.hide(ka(sa));sa.hidden=true;sa.pendingHide=false;}}da=[];}function ma(){s(la,'LitestandOffscreenController/hide');r(ha,ia,'LitestandOffscreenController');}function na(qa,ra){var sa=false;ra.forEach(function(ta){var ua=x[ta];if(ua&&ua.hidden){ua.dirty=true;sa=true;if(ua.position>=aa){ua.hidden=false;ua.pendingHide=false;m.apply(ua.element,{height:'',marginBottom:''});h.show(ka(ua));}}});sa&&ia();}function oa(){l.onLeave(ea);z=new n();z.addSubscriptions(g.subscribe(k.NAVIGATION_BEGIN,fa),g.subscribe('LitestandStream/SubstreamsUpdated',na),j.listen(window,'scroll',t(ma)),j.listen(window,'resize',t(function(){ca=null;ma();})));y=true;}var pa={attachSubstream:function(qa){y||oa();x[i.getID(qa)]={element:qa};}};e.exports=pa;},null);
__d("LitestandComposer",["Animation","Arbiter","ComposerXController","ComposerXMarauderLogger","DOM","Run","SubscriptionsHandler","requireWeak"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o=null;n(['LitestandStream'],function(s){return o=s;});var p=600;function q(s,t){s&&i.reset(s);if(!o||!t)return;k.prependContent(o.getStreamRoot(),t);new g(t).from('opacity',0).to('opacity',1).duration(p).go();j.logCompleted(s);}var r={initComposer:function(s){var t=new m();t.addSubscriptions(h.subscribe('LitestandComposer/publish',function(u,v){if(v.composer_id===s)q(s,v.markup);}.bind(this)));l.onLeave(function(){t.release();});}};e.exports=r;},null);
__d("LitestandNewStoryController",["Animation","Arbiter","AsyncRequest","CSS","Event","LitestandMessages","LitestandStream","NavigationMessage","Run","Style","SubscriptionsHandler","TinyViewport","ge","getScrollPosition","memoize","$","queryThenMutateDOM","requestAnimationFrame","NewStoriesPillConfig"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){b.__markCompiled&&b.__markCompiled();var y=b('NewStoriesPillConfig').maintain_scroll_position,z=3,aa=500,ba=600,ca,da;function ea(){da&&clearTimeout(da);da=null;}function fa(){da=setTimeout(function(){da=null;ga();},aa);}function ga(){var za;w(function(){za=m.canInsertNewerStories();},function(){if(za){wa();}else fa();},'LitestandNewStoryController/tryShowingStories');}var ha=0,ia,ja=true,ka;function la(){if(!ka){ka=new q();ka.addSubscriptions(h.subscribe(n.NAVIGATION_BEGIN,ta),k.listen(window,'resize',ma),k.listen(window,'scroll',ra));o.onLeave(ta);}}function ma(){if(!oa())ta();}var na=u(function(){var za=s('blueBarNAXAnchor');return za&&j.hasClass(za,'fixed_elem');});function oa(){return na()&&!r.isTiny();}function pa(za,ab){var bb=s(za);if(bb)bb.style.marginTop=ab?ab+'px':'';}function qa(za){if(!oa()){za=0;}else za=Math.max(za,0);ha=za;pa('rightCol',za);pa('leftCol',za);}function ra(){var za=t(window).y;if(za<=0){ta();return;}if(za<ha){ja=false;qa(za);}}function sa(){if(!ja){ia&&ia.stop();ia=null;}}function ta(){if(ka){ka&&ka.release();ja=false;qa(0);ka=null;}}function ua(za,ab){ia=new g(za).from('opacity',0).to('opacity',1).duration(ba);if(ab){ja=true;for(var bb=0;bb<z;bb++)ia.checkpoint(1,sa).from('opacity',1).to('opacity',0).duration(ba).checkpoint().from('opacity',0).to('opacity',1).duration(ba);}ia.go();}function va(za){ea();if(!ca)return;if(za)var ab=t(window),bb=ca.nextSibling,cb=bb.offsetTop,db=function(){qa(ab.y+bb.offsetTop-cb);window.scrollTo(ab.x,ha);};p.apply(ca,{height:'',left:'',overflow:'',position:'',width:''});if(za){db();var eb=ca;x(function(){la();db();ua(eb,true);});}else ua(ca,false);h.inform(l.STORIES_INSERTED);h.inform(l.NEWER_STORIES_INSERTED);setTimeout(function(){h.inform('reflow');},0);new i().setURI('/ajax/litestand/update_filter_viewtime').setData({section_id:m.getSectionID()}).send();ca=null;h.inform(l.NEW_STORIES_DISPLAYED);}function wa(){va(y&&oa());}function xa(){va(false);}var ya={waitForDisplay:function(za){if(!ca)ca=v(za);if(m.canInsertNewerStories()){wa();}else fa();},showStoriesNow:function(za){ca=za;xa();}};e.exports=ya;},null);
__d("TrackingData",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g='mei',h='ei',i='cmf',j={hasAdToken:function(k){var l=k.getAttribute('data-ft')?JSON.parse(k.getAttribute('data-ft')):null;return l&&(l[g]||l[h]);},setContinueMainFeed:function(k){var l=k.getAttribute('data-ft')?JSON.parse(k.getAttribute('data-ft')):null;if(l){l[i]=1;k.setAttribute('data-ft',JSON.stringify(l));}}};e.exports=j;},null);
__d("LitestandStreamLoader",["Arbiter","AsyncRequest","CSS","csx","cx","DOM","DOMScroll","EntstreamStoryDeduper","Event","FbFeedHighlight","JSXDOM","LitestandMessages","LitestandNewStoryController","LitestandOffscreenController","LitestandStream","NavigationMessage","OnVisible","Run","throttle","UIPagelet","UserActivity","$","copyProperties","ge","getUnboundedScrollPosition","Vector","Parent","TrackingData","WaitBeforeNewStoryQE","NewStoriesPillConfig","requireWeak"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka){b.__markCompiled&&b.__markCompiled();var la;ka(['LiveFeedBar'],function(ic){la=ic;});var ma=false,na={},oa,pa,qa,ra,sa,ta,ua=0,va=false,wa,xa,ya=[],za=false,ab=false,bb,cb,db=false,eb=true,fb,gb=false,hb=false,ib=null,jb=false,kb=50,lb=0,mb,nb;function ob(){x.onLeave(qb);ya=[g.subscribe(r.PILL_VISIBILITY_UPDATED,function(ic,jc){va=jc.pill_visibility;}),g.subscribe(r.NEW_STORIES_DISPLAY_NOW,function(){s.showStoriesNow(nb);}),g.subscribe(r.NEW_STORIES_WAIT_DISPLAY,function(){s.waitForDisplay(l.getID(nb));}),g.subscribe(v.NAVIGATION_BEGIN,qb),g.subscribe(r.NEWER_STORIES_INSERTED,function(){nb=null;}),g.subscribe(r.UNREAD_ONLY_BEGIN,function(ic,jc){jb=true;var kc=pb(),lc=l.scry(bb,".unseenStoriesHeader")[0],mc=[];if(lc&&kc){za=true;var nc=l.scry(ta,u.getStoriesSelector()).slice(jc+1),oc=nc.length,pc=nc.filter(function(zc){return i.hasClass(zc,"_50mx")&&!i.hasClass(zc,"_x72")&&!ha.hasAdToken(zc);}),qc=pc.length,rc=fb.min_stories_to_skip;if(nc.length-pc.length<rc)pc=pc.slice(0,nc.length-pc.length-rc);var sc=pc.length,tc=-1,uc={};if(fb.move_skipped_unseen){var vc=q.div({className:"moved_stories"});pc.forEach(function(zc){var ad=ga.byClass(zc,"_4ikz");uc[l.getID(ad)]=1;l.appendContent(vc,zc);});g.inform('LitestandStream/SubstreamsUpdated',Object.keys(uc));l.insertAfter(lc,vc);tc=l.scry(bb,".moved_stories ._5jmm").length;}mc=l.scry(bb,u.getStoriesSelector());l.insertBefore(kc,bb);i.show(bb);mc.forEach(function(zc){i.show(zc);p.highlight(zc);});n.dedupeHide(u.getStreamRoot(),u.getStoriesSelector(),db);g.inform(r.STORIES_INSERTED);setTimeout(function(){m.scrollTo(lc,800,false,false,10);},0);rb();var wc=mc[0],xc=JSON.parse(wc.getAttribute('data-ft')),yc=xc.qid;sb('load',{all_unseen_stories:mc.length,qid:yc,main_feed_stories_skip:oc,unseen_stories_skipped:qc,unseen_stories_eligible_to_move:sc,unseen_stories_moved:tc});}else{if(!lc)sb('missed_stories_header_unavailable');if(!mc[0])sb('missed_stories_unseen_stories_unavailable');if(!kc)sb('missed_stories_more_pager_unavailable');}})];ma=true;}function pb(){if(pa.parentNode)return pa.parentNode;if(!ta)return;var ic=ta.children.length-1;while(ic>=0){if(ta.children[ic].id.lastIndexOf('more_pager',0)===0)return ta.children[ic];ic--;}return;}function qb(){g.inform(r.LEAVE_HOME);na={};xa=null;ua=0;ya.forEach(g.unsubscribe);ya=[];oa&&oa.remove();sa&&clearTimeout(sa);sa=null;ra=null;nb=null;wa&&wa.remove();wa=null;ma=false;lb=0;za=false;ab=false;hb=false;bb=null;cb=null;db=false;eb=true;fb=null;gb=false;jb=false;ib=null;}function rb(){na={};}function sb(ic,jc){var kc=-1,lc=-1,mc=-1,nc=l.scry(ta,".unread_session"),oc=0,pc=0,qc=null;for(var rc=0;rc<nc.length;++rc){var sc=l.scry(nc[rc],u.getStoriesSelector());for(var tc=0;tc<sc.length;++tc){var uc=sc[tc];if(!uc.getAttribute('data-dedupekey'))continue;++pc;if(i.shown(uc)){++oc;qc=uc;}}}lc=oc-1;if(qc){var vc=JSON.parse(qc.getAttribute('data-ft'));kc=vc.qid;mc=vc.mf_story_key;}var wc={qid:kc,finish_pos:lc,storyid:mc,feed_stream_id:u.getFeedStreamID(),all_unseen_stories:pc,num_unseen_sessions:nc.length};jc=typeof jc!=='undefined'?jc:{};for(var xc in wc)if(typeof jc[xc]==='undefined')jc[xc]=wc[xc];jc.action=ic;new h('/ajax/feed/pill/').setData(jc).send();}function tb(ic){if(sa)return;sa=setTimeout(function(){sa=null;ac();},ic);}function ub(){if(xa&&ra&&xa.pollIntervalMS&&xa.pollIntervalMS>1000){aa.setIdleTime(xa.newStoryIdleTime);tb(xa.pollIntervalMS);}}function vb(){oa=new w(l.find(pa,'a'),fc.bind(null),false,xa.bufferPixels);}function wb(){var ic=ea(window).y;return ic>xa.firstPagerScrollBuffer;}function xb(){if(wb()){vb();wa&&wa.remove();wa=null;}}function yb(){if(jb||!ib)return;var ic=l.scry(ta,u.getStoriesSelector()),jc=ba('leftCol'),kc=fa.getElementPosition(jc).y+fa.getElementDimensions(jc).y,lc=0;for(;lc<ic.length;lc++)if(!i.hasClass(ic[lc],"_2l4l")&&ic[lc].getAttribute('data-ft'))break;while(lc<ic.length&&fa.getElementPosition(ic[lc]).y<kc+kb)lc++;if(ic.length===lc)return;var mc=ic[lc],nc=ib.getElement();l.insertBefore(mc,nc);i.show(nc);ib.reflow();jb=true;}function zb(ic){yb();var jc=l.find(pa,'a');o.listen(jc,'click',function(event){fc();wa&&wa.remove();wa=null;event.preventDefault();});var kc=u.getVisibleStoryCount(ta),lc=xa.maxStories;if(lc&&kc>=lc)return;if(ic&&!wb()){wa=o.listen(window,'scroll',y(xb));}else vb();}function ac(){if(!ra)return;var ic=0;if(la)ic=la.getStoryCount();if(!aa.isActive(xa.newStoryIdleTime)){if(!ja.show_new_stories_pill||ic>=ia.maxNewStories){aa.subscribeOnce(ac);return;}}else if(!aa.isOnTab())if(ia.shouldStop&&ic>=ia.maxNewStories){aa.subscribeOnce(ac);return;}if(aa.hasBeenInactive()){aa.resetActiveStatus();var jc=xa.pollIntervalMS,kc=Date.now()-aa.getLastInActiveEnds();if(kc<jc){tb(jc-kc);return;}}if(ja.show_new_stories_pill){if(!u.canFetchNewerStories()){tb(xa.pollIntervalMS);return;}}else if(!u.canInsertNewerStories()){tb(xa.pollIntervalMS);return;}if(!nb){var lc=u.getStreamRoot();nb=q.div({style:{height:0,width:lc.offsetWidth+'px',left:'-10000px',opacity:0,overflow:'hidden',position:'absolute'}});l.prependContent(lc,nb);}var mc=q.div(null);l.prependContent(nb,mc);var nc=xa.crossPage?{crossPage:true}:null;z.loadFromEndpoint('LitestandNewerStoriesPagelet',mc,ca(ra,{cursor:mb,containerID:l.getID(nb)}),nc);g.inform(r.PILL_PAGELET_REQUEST_SENT);}function bc(){var ic=l.getID(pa);i.addClass(pa,'async_saving');var jc=dc(),kc=jc.cursor,lc=jc.storiesCount;if(na[kc])throw new Error('This cursor has been used before, stories will be '+'repeated. Cursor: '+kc);na[kc]=kc;var mc={cursor:kc,preload_next_cursor:cb,pager_config:qa,pager_id:ic,scroll_count:++ua,start_unread_session:za,start_continue_top_news_feed:ab,feed_stream_id:u.getFeedStreamID(),snapshot_time:fb?fb.snapshot_time:null,client_stories_count:lc};za=false;ab=false;z.loadFromEndpoint(xa.pagerController,l.getID(ta),mc,{append:true,automatic:true,usePipe:true,crossPage:xa.crossPage});}function cc(){return ec()[0].getAttribute('data-cursor');}function dc(){var ic=ec();ic=ic.filter(function(kc){return !kc.getAttribute('data-preload_unseen_story');});var jc={};jc.cursor=ic[ic.length-1].getAttribute('data-cursor');jc.storiesCount=ic.length;return jc;}function ec(){var ic=l.scry(ta,u.getStoriesSelector());return ic.filter(function(jc){return jc.getAttribute('data-cursor');});}function fc(){g.inform('FbFeedUnreadPillNavigation/startLoading');bc();oa&&oa.remove();oa=null;}function gc(){if(!bb||!ma)return [];var ic=l.scry(ta,u.getStoriesSelector()),jc=ic.filter(function(mc){return mc.getAttribute('data-dedupekey')&&!i.hasClass(mc,"preloadUnseenStory");}),kc={};for(var lc=0;lc<jc.length;lc++)kc[jc[lc].getAttribute('data-dedupekey')]=1;return l.scry(bb,u.getStoriesSelector()).filter(function(mc){var nc=mc.getAttribute('data-dedupekey'),oc=nc&&!kc[nc];kc[nc]=1;return oc;});}var hc={register:function(ic,jc,kc,lc,mc){ma||ob();xa=u.getStreamConfig(jc);za=false;ab=false;hb=false;bb=null;cb=null;db=false;eb=true;fb=null;gb=false;qa=kc;ta=ba(ic);mb=cc();ib=mc;jb=false;pa=lc;zb(true);ub();},replacePagerConfig:function(ic){qa=ic;},continueTopNewsFeed:function(){ab=true;hb=true;rb();sb('finish');},removeOldPager:function(ic,jc){if(ic)l.remove(ba(ic));i.show(ba(jc));},removeLoadingIndicator:function(ic,jc){var kc=da(ic);if(kc)l.remove(kc);i.show(jc);},moreStoriesInserted:function(ic){g.inform(r.STORIES_INSERTED,{substream_id:ic});var jc=ba(ic);if(hb)l.scry(jc,u.getStoriesSelector()).forEach(ha.setContinueMainFeed);if(u.hideOffscreenSubstreams())t.attachSubstream(jc);},attachNewPager:function(ic){!gb&&n.dedupeHide(u.getStreamRoot(),u.getStoriesSelector(),db);this.loadMoreUnseenStoriesIfNeeded();pa=ic;pa&&zb(false);},setPollerData:function(ic){if(ic){ra=ic;ub();}},headLoadCompleted:function(ic){mb=ic.newCursor;ub();var jc=ic.stories;if(jc&&jc.length>0){for(var kc=jc.length-1;kc>=0;kc--)jc[kc].setAttribute('data-insertion-position',--lb);var lc=u.getStoriesSelector();n.dedupe(u.getStreamRoot(),lc);var mc=l.scry(nb,lc);g.inform('Stream/totalHeadLoadedStories',{count:-lb,hiddenCount:mc.length});}},registerPreloadUnseenStories:function(ic,jc,kc,lc){bb=ic;cb=jc;db=kc;fb=lc;if(lc)gb=lc.disable_deduper;hc.loadMoreUnseenStoriesIfNeeded();},morePreloadUnseenStories:function(ic,jc,kc){cb=kc;if(ic>0){l.appendContent(bb,jc);this.loadMoreUnseenStoriesIfNeeded();}else{g.inform('FbFeedUnreadPillLoader/removeLoadingPill');g.inform('FbFeedUnreadPillNavigation/removePill');eb=true;sb('not_enough_remove',{all_unseen_stories:ic});}},setStopRecursiveUnseenLoad:function(ic){eb=ic;},loadMoreUnseenStoriesIfNeeded:function(){if(!fb||eb)return;var ic=gc();if(ic.length<fb.min_num){if(!bb||fb.disable_recursive){g.inform('FbFeedUnreadPillNavigation/removePill');eb=true;return;}z.loadFromEndpoint('LitestandUnseenStreamPagelet',bb,{unread_pill_config:fb,next_cursor:cb,mode:1},{append:true,automatic:true,usePipe:true,crossPage:xa.crossPage});}else{g.inform('FbFeedUnreadPillNavigation/enoughLoaded');if(fb.disable_recursive)eb=true;}},forceNewFetch:ac};e.exports=hc;},null);
__d("collectSubtreeData",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(i,j,k,l,m){if(i.offsetWidth===0&&i.offsetHeight===0)return m;var n={};if(i.getAttribute)for(r=0;r<j.length;r++){t=j[r];var o=i.getAttribute(k[t]);if(o){n[t]={};var p=JSON.parse(o);for(var q in l)if(p[q]!==(void 0)){n[t][q]=true;if(m[t]===(void 0))m[t]={};if(m[t][q]===(void 0))m[t][q]=[];if(l[q].length>0)m[t][q].push(l[q]);m[t][q].push('('+p[q]);}}}for(var r=0;r<i.childNodes.length;r++){var s=i.childNodes[r];g(s,j,k,l,m);}for(var t in n)for(var u in n[t]){var v=m[t][u][m[t][u].length-1];if(v.length>0&&v.charAt(0)=='('){m[t][u][m[t][u].length-1]=v.substr(1);}else m[t][u].push(')');}return m;}function h(i,j){var k={};for(var l=0;l<j.length;++l)k[j[l]]='data-'+j[l];var m={tn:"","tn-debug":","},n={};g(i,j,k,m,n);for(var o in n)for(var p in n[o])n[o][p]=n[o][p].join('');return n;}e.exports=h;},null);
__d("recordTNTreeData",["collectSubtreeData"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i,j){var k={},l=g(i,['ft']);for(var m in l.ft){k[m+'_tree']=l.ft[m];if(m==='tn-debug')i.setAttribute('tn-debug_subtree',l.ft[m]);}k.evt_value=i.offsetHeight;if(j)k.offset=Math.max(0,i.offsetTop-j.offsetTop);return k;}e.exports=h;},null);
__d("PhotosUploadWaterfallMixin",["Flash","PhotosUploadWaterfall","copyProperties","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=j,l={getUploaderApp:k,getWaterfallID:k,getAdditionalData:function(){return {};},logWaterfallStep:function(m,n,o){h.sendSignal(i({qn:this.getWaterfallID(),uploader:this.getUploaderApp(),step:m,flash_version:g.getVersion().join('.'),ref:this.getWaterfallSource&&this.getWaterfallSource()},this.getAdditionalData(),n),o);},logWaterfallStepUsingBanzai:function(m,n,o){h.sendBanzai(i({qn:this.getWaterfallID(),uploader:this.getUploaderApp(),step:m,ref:this.getWaterfallSource&&this.getWaterfallSource()},this.getAdditionalData(),n),o);}};e.exports=l;},null);
__d("PhotoSourceTypes",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();e.exports=g({COMPUTER:null,SYNCED_PHOTOS:null,SUGGESTIONS:null});},null);
__d("BaseSelectionContainer",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=0;function h(){"use strict";this.$BaseSelectionContainer0=(g++).toString();}h.prototype.getSelectionContainerID=function(){"use strict";return this.$BaseSelectionContainer0;};h.prototype.getSource=function(){"use strict";throw 'This must be implemented by the child class';};h.prototype.getName=function(){"use strict";return null;};h.prototype.getSize=function(){"use strict";return null;};h.prototype.hasPlaceholderUI=function(){"use strict";throw 'This must be implemented by the child class';};e.exports=h;},null);
__d("SelectionSource",["PhotoSourceTypes"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={FILE:'file',FLASH:'flash',VAULT:'vault',SUGGESTIONS:'suggestions',toPhotoSourceType:function(i){switch(i){case h.FILE:case h.FLASH:return g.COMPUTER;case h.VAULT:return g.SYNCED_PHOTOS;case h.SUGGESTIONS:return g.SUGGESTIONS;default:throw 'No mapping for SelectionSource: '+i;}}};e.exports=h;},null);
__d("FileSelectionContainer",["BaseSelectionContainer","SelectionSource"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();for(var i in g)if(g.hasOwnProperty(i))k[i]=g[i];var j=g===null?null:g.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=g;function k(l){"use strict";g.call(this);this.$FileSelectionContainer0=l;}k.prototype.getFile=function(){"use strict";return this.$FileSelectionContainer0;};k.prototype.getSource=function(){"use strict";return h.FILE;};k.prototype.getName=function(){"use strict";return this.$FileSelectionContainer0.fileName||this.$FileSelectionContainer0.name;};k.prototype.getSize=function(){"use strict";return this.$FileSelectionContainer0.fileSize||this.$FileSelectionContainer0.size;};k.prototype.hasPlaceholderUI=function(){"use strict";return false;};e.exports=k;},null);
__d("FilePickerEvent",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={BEGIN:'FilePickerEvent/BEGIN',SELECT_START:'FilePickerEvent/SELECT_START',SELECTED:'FilePickerEvent/SELECTED_FILES',ALBUM_LIMIT_EXCEEDED:'FilePickerEvent/ALBUM_LIMIT_EXCEEDED',SESSION_LIMIT_EXCEEDED:'FilePickerEvent/SESSION_LIMIT_EXCEEDED',SELECT_CANCELED:'FilePickerEvent/SELECT_CANCELED',FALLBACK:'FilePickerEvent/FALLBACK'};},null);
__d("FlashArbiterEvents",["Arbiter","Run"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(j){"use strict";this._flashID=j;this._subscriptions=[];h.onLeave(this.unsubscribeAll.bind(this));}i.prototype.subscribe=function(j,k){"use strict";var l=this._flashID;this._subscriptions.push(g.subscribe(j,function(m,n){if(l===n.divID)k(n);}));return this;};i.prototype.unsubscribeAll=function(){"use strict";while(this._subscriptions.length)g.unsubscribe(this._subscriptions.pop());};e.exports=i;},null);
__d("compareFlashVersions",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(i){return i.replace(/\d+/g,function(j){return '000'.substring(j.length)+j;});}function h(i,j){i=g(i);j=g(j);if(i>j){return 1;}else if(i<j)return -1;return 0;}e.exports=h;},null);
__d("FlashLoadEvent",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={READY:'flash/ready',FAILED:'flash/failed',MOUSE_CANCELED:'UploadEvent/SELECT_CANCELED',MOUSE_DOWN:'UploadEvent/SELECT_DOWN',MOUSE_OUT:'UploadEvent/SELECT_OUT',MOUSE_OVER:'UploadEvent/SELECT_OVER',MOUSE_UP:'UploadEvent/SELECT_UP',ERROR_FLASH_LOAD_TIMEOUT:1,ERROR_FLASH_LOAD_FAILURE:2,ERROR_FLASH_UPGRADE_REQUIRED:3};},null);
__d("UploadEvent",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={UPLOAD_START:'UploadEvent/UPLOAD_START',UPLOAD_HIRES_RESTART:'UploadEvent/UPLOAD_HIRES_RESTART',START:'UploadEvent/START',DONE:'UploadEvent/DONE',ERROR:'UploadEvent/ERROR',FINISHED_UPLOADING:'UploadEvent/FINISHED_UPLOADING',LOADED:'UploadEvent/LOADED',READY:'UploadEvent/READY',UPLOAD_FAILED:'UploadEvent/UPLOAD_FAILED',UPLOAD_PROGRESS:'UploadEvent/UPLOAD_PROGRESS',COMPRESS_PROGRESS:'UploadEvent/COMPRESS_PROGRESS',HI_RES_ATTACH_START:'UploadEvent/HI_RES_ATTACH_START',IMAGE_COMPRESS_ERROR:'UploadEvent/IMAGE_COMPRESS_ERROR',IMAGE_COMPRESS_BEGIN:'UploadEvent/IMAGE_COMPRESS_BEGIN',IMAGE_COMPRESSED:'UploadEvent/IMAGE_COMPRESSED',IMAGE_UPLOAD_ERROR:'UploadEvent/IMAGE_UPLOAD_ERROR',IMAGE_UPLOADED:'UploadEvent/IMAGE_UPLOADED',SELECT_START:'UploadEvent/SELECT_START',SELECT_CANCELED:'UploadEvent/SELECT_CANCELED',IMAGES_SELECTED:'UploadEvent/IMAGES_SELECTED',HEARTBEAT:'UploadEvent/HEARTBEAT',CANCELED_PROCESSING_PHOTO:'UploadEvent/CANCELED_PROCESSING_PHOTO',CANCELED_PHOTO_UPLOADED_ANYWAY:'UploadEvent/CANCELED_PHOTO_UPLOADED_ANYWAY'};e.exports=g;},null);
__d("FlashFilePicker",["Arbiter","ArbiterMixin","AsyncUploadBase","compareFlashVersions","ImageResizer","CSS","FilePickerEvent","Flash","FlashArbiterEvents","FlashLoadEvent","FlashUploaderConfig","HTML","Parent","PhotosUploadWaterfall","PhotosUploadWaterfallErrorCodes","PhotosUploadWaterfallMixin","PhotosUploadWaterfallXMixin","PUWApplications","UploadEvent","URI","PUWSteps","copyProperties","$"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca){b.__markCompiled&&b.__markCompiled();function da(ha){for(var ia=0;ia<ha.length;++ia)if(n.checkMinVersion(ha[ia].toString()))return true;return false;}function ea(ha){var ia=s.byClass(ha,'addPhotosDisabled');if(ia){l.removeClass(ia,'addPhotosDisabled');l.addClass(ia,'addPhotosEnabled');}}function fa(ha,ia){ia.style.width=ha.offsetWidth+'px';ia.style.height=ha.offsetHeight+'px';}function ga(ha,ia,ja){this._swfID=ha;this._button=ia;this._waterfallID=ja.qn;this._ref=ja.ref;this._beginInformed=false;this._isReady=false;this._fallbackHref=ja.fallbackHref;if(!da(q.flashVersionInfo.minimumVersion)){this.logWaterfallStep(t.UPGRADE_REQUIRED);this._flashError(u.FLASH_UPGRADE_REQUIRED||25);return;}if(ja.flashObjectsPerVersion)this._constructAndAppendFlashObject(ja.flashObjectsPerVersion);this._flashEvents=new o(this._swfID).subscribe(p.READY,this._handleReady.bind(this)).subscribe(p.FAILED,this._handleFailed.bind(this)).subscribe(p.MOUSE_OVER,this._handleMouseIn.bind(this)).subscribe(p.MOUSE_OUT,this._handleMouseOut.bind(this)).subscribe(y.SELECT_START||'UploadEvent/SELECT_START',this._handleSelectStart.bind(this)).subscribe(y.IMAGES_SELECTED,this._handleSelected.bind(this)).subscribe(y.SELECT_CANCELED,this._handleCancelSelected.bind(this));this._timeout=setTimeout(function(){if(!this._isReady)this._flashError(u.FLASH_LOAD_TIMEOUT||23);}.bind(this),q.flashLoadTimeout);ja.logDetailed&&this.logDetailed();}ba(ga.prototype,h,v,w,{_constructAndAppendFlashObject:function(ha){var ia=ha['default'];delete ha['default'];var ja=Object.keys(ha).sort(function(oa,pa){return j(pa,oa);}),ka=ia;for(var la=0;la<ja.length;la++){var ma=ja[la];if(n.checkMinVersion(ma)){ka=ha[ma];break;}}var na=r.replaceJSONWrapper(ka).getRootNode();this._button.parentNode.appendChild(na);},getUploaderApp:function(){return t.APP_FLASH;},getWaterfallID:function(){return this._waterfallID;},getWaterfallAppName:function(){return x.WEB_FLASH;},getWaterfallSource:function(){return this._ref;},logDetailed:function(){this.logWaterfallStep(t.VERSION,{version:n.getVersion().join('.')});if(i.isSupported()){this.logWaterfallStep(t.ASYNC_AVAILABLE);if(k.isSupported()){this.logWaterfallStep(t.RESIZER_AVAILABLE);}else this.logStep(aa.CLIENT_PROCESS_UNAVAILABLE,{error:'no_resizer'});}else this.logStep(aa.CLIENT_PROCESS_UNAVAILABLE,{error:'no_async_upload'});},_handleReady:function(ha){setTimeout(function(){return fa(this._button,ca(this._swfID));}.bind(this));ea(this._button);this._isReady=true;clearTimeout(this._timeout);g.inform(y.READY,{divID:this._swfID},g.BEHAVIOR_PERSISTENT);},_handleFailed:function(ha){this._flashError(u.FLASH_LOAD_FAILURE||24);},_flashError:function(ha){if(this._fallbackHref){var ia=z(this._fallbackHref).addQueryData({error:ha}).toString();this._button.removeAttribute('rel');this._button.removeAttribute('ajaxify');this._button.setAttribute('href',ia);ea(this._button);}this.logWaterfallStep(t.CLIENT_ERROR,{code:ha,scuba_tags:{fallback_simple:true}});this.logStep(aa.CLIENT_FLOW_FATAL,{error_code:ha,fallback_simple:true});},_handleMouseIn:function(ha){l.addClass(this._button,'selectOver');},_handleMouseOut:function(ha){l.removeClass(this._button,'selectOver');},_handleSelectStart:function(ha){if(!this._beginInformed){this._beginInformed=true;this.inform(m.BEGIN||'FilePickerEvent/BEGIN');}this.inform(m.SELECT_START);},_handleSelected:function(ha){var ia;if(ha.files){ia=ha.files;}else{ia=[{uploadID:ha.divID+'.'}];ia.length=ha.count;}this.inform(m.SELECTED,{sender:this,files:ia},g.BEHAVIOR_PERSISTENT);if(ha.albumLimitExceeded)this.inform(m.ALBUM_LIMIT_EXCEEDED,{},g.BEHAVIOR_PERSISTENT);if(ha.sessionLimitExceeded)this.inform(m.SESSION_LIMIT_EXCEEDED,{},g.BEHAVIOR_PERSISTENT);},_handleCancelSelected:function(ha){this.inform(m.SELECT_CANCELED);}});e.exports=ga;},null);
__d("HTML5FilePicker",["ArbiterMixin","BrowserSupport","CSS","DOM","FilePickerEvent","FileSelectionContainer","Parent","PhotosUploadID","PhotosUploadWaterfall","PhotosUploadWaterfallMixin","PhotosUploadWaterfallXMixin","PUWApplications","URI","PUWSteps","copyProperties","createArrayFromMixed","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){b.__markCompiled&&b.__markCompiled();function x(y,z){this._config=u({accept:(void 0),multiple:(void 0)},z);this._button=y;this._beginInformed=false;if(!h.hasFileAPI()){this.logStep(t.CLIENT_PROCESS_UNAVAILABLE,{error:'no_file_api'});if(this._config.hasOwnProperty('fallbackFunction')){this._config.fallbackFunction.call(this);return;}var aa=new s(this._button.getAttribute('ajaxify'));this._button.setAttribute('ajaxify',aa.addQueryData({app:o.APP_FLASH}).toString());this.logWaterfallStep(o.FALLBACK_TO_FLASH);return;}this._subscriptions=[];var ba=this._config.input||j.create('input',{type:'file',className:"_n"});if(this._config.hasOwnProperty('accept'))ba.accept=this._config.accept;if(this._config.hasOwnProperty('multiple'))ba.multiple=this._config.multiple;if(this._config.hasOwnProperty('title'))ba.title=this._config.title;var ca=j.create('label',{className:'accessible_elem','for':j.getID(ba)},ba.title),da=j.create('div',{className:"_3jk"},[ca,ba]);i.addClass(this._button,"_m");j.appendContent(this._button,da);this._button.setAttribute('rel','ignore');this._bindInput(ba);var ea=m.byClass(this._button,'addPhotosDisabled');if(ea){i.removeClass(ea,'addPhotosDisabled');i.addClass(ea,'addPhotosEnabled');}}u(x.prototype,g,p,q,{getUploaderApp:function(){return o.APP_HTML5;},getWaterfallID:function(){return this._config.qn;},getWaterfallAppName:function(){return r.WEB_HTML5;},getWaterfallSource:function(){return this._config.ref;},_constructFileList:function(){var y=v(this._input.files);y.forEach(function(z){z.uploadID=n.getNewID();});return y;},_constructFileSelectionContainerList:function(){var y=v(this._input.files);return y.map(function(z){return new l(z);});},cleanup:function(){if(this._input){this._input.onclick=null;this._input.onchange=null;}},_bindInput:function(y){this.cleanup();y.onclick=function(){this.logWaterfallStep(o.SELECT_START);if(!this._beginInformed){this._beginInformed=true;this.inform(k.BEGIN||'FilePickerEvent/BEGIN');}this.inform(k.SELECT_START);}.bind(this);y.onchange=function(){this.inform(k.SELECTED,{sender:this,files:this._constructFileList(),selections:this._constructFileSelectionContainerList()});this._bindInput(this._input.cloneNode(false));}.bind(this);if(this._input)j.replace(this._input,y);this._input=y;}});e.exports=x;},null);
__d("UploadSession",["AsyncRequest","FilePickerEvent","PhotosUploadWaterfall","PUWSteps","URI","arrayContains"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m={};function n(p){"use strict";this._sessionID=p;this._asyncBootstrapped=false;this._controller=null;this._overlay=null;this._pickers=[];this._pendingFileLists=[];this._beginLogged=false;this._albumLimitWasExceeded=false;this._sessionLimitWasExceeded=false;}n.prototype.addFilePicker=function(p){"use strict";if(!l(this._pickers,p)){this._pickers.push(p);p.subscribe(h.BEGIN,function(q,r){if(!this._beginLogged){this._beginLogged=true;p.logWaterfallStep(i.BEGIN);p.logStep(j.CLIENT_FLOW_BEGIN);}}.bind(this));p.subscribe(h.SELECTED,function(q,r){p.logStep(j.CLIENT_SELECT_SUCCESS,{volume:r.files.length});if(this._controller){this._controller.uploadFiles(r.files);}else this._pendingFileLists.push(r);if(this._asyncBootstrapped)return;var s=p._button,t=new k(s.getAttribute('ajaxify'));t.addQueryData('num_selected',r.files.length);g.bootstrap(t.toString(),s,true);this._asyncBootstrapped=true;}.bind(this));p.subscribe(h.SELECT_START,function(){p.logStep(j.CLIENT_SELECT_BEGIN);}.bind(this));p.subscribe(h.SELECT_CANCELED,function(){p.logStep(j.CLIENT_SELECT_CANCEL);if(!this._overlay){p.logStep(j.CLIENT_FLOW_CANCEL);this._beginLogged=false;}}.bind(this));p.subscribe(h.ALBUM_LIMIT_EXCEEDED,function(){if(this._controller){this._controller.albumLimitExceeded();}else this._albumLimitWasExceeded=true;}.bind(this));p.subscribe(h.SESSION_LIMIT_EXCEEDED,function(){if(this._controller){this._controller.sessionLimitExceeded();}else this._sessionLimitWasExceeded=true;}.bind(this));}};n.prototype.addController=function(p){"use strict";this._controller=p;this._asyncBootstrapped=true;var q=(this._controller.getWaterfallID)?this._controller.getWaterfallID():this._controller.getWaterfallConfig().waterfallID,r=(this._controller.getUploaderApp)?this._controller.getUploaderApp():this._controller.getWaterfallConfig().waterfallApp;if(!this._beginLogged){this._beginLogged=true;i.sendSignal({qn:q,step:i.BEGIN,uploader:r});}if(this._pendingFileLists.length){var s=[];this._pendingFileLists.forEach(function(t){s=s.concat(t.files);});this._controller.uploadFiles(s);}else i.sendSignal({qn:q,step:i.OVERLAY_FIRST,uploader:r});if(this._albumLimitWasExceeded)this._controller.albumLimitExceeded();if(this._sessionLimitWasExceeded)this._controller.sessionLimitExceeded();};n.prototype.addOverlay=function(p){"use strict";this._overlay=p;};n.prototype.addOverlayAndController=function(p,q){"use strict";this.addOverlay(p);this.addController(q);};n.addFilePickerToSession=function(p,q){"use strict";o(p).addFilePicker(q);};n.addControllerToSession=function(p,q){"use strict";o(p).addController(q);};n.addOverlayToSession=function(p,q){"use strict";o(p).addOverlay(q);};n.addOverlayAndControllerToSession=function(p,q,r){"use strict";o(p).addOverlayAndController(q,r);};function o(p){if(!m[p])m[p]=new n(p);return m[p];}e.exports=n;},null);
__d("StoryTopicMap",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={},h={registerTopics:function(i,j){g[i]=j;},getTopicsForFTID:function(i){return g[i]||[];}};e.exports=h;},null);
__d("XEventRelatedEventsPivotController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/events\/async\/related_events_pivot\/",{event_id:{type:"Int",required:true},attachment_id:{type:"String",required:true}});},null);
__d("XFeedAdsChainingController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/feed\/ads_chaining\/",{actor_id:{type:"String",required:true},ft_id:{type:"String"},origin:{type:"String",required:true},ei:{type:"String",required:true},data_ownerid:{type:"String",required:true}});},null);
__d("XPubcontentFeedChainingController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/pubcontent\/feed_chaining\/",{actor_id:{type:"String",required:true},content_id:{type:"String"},ft_id:{type:"String"},origin:{type:"String",required:true}});},null);
__d("XPubcontentRelatedShareChainingController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/pubcontent\/related_share\/",{attachment_div_id:{type:"String",required:true},global_share_id:{type:"Int",required:true},video_div_id:{type:"String"},link_url:{type:"String"},qid:{type:"String"},mf_story_key:{type:"String"},share_id:{type:"String"},is_auto_expand:{type:"Bool",defaultValue:false}});},null);
__d("XPubcontentRelatedVideoChainingController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/pubcontent\/related_video\/",{attachment_div_id:{type:"String",required:true},fbvideo_id:{type:"Int",required:true},qid:{type:"String"},mf_story_key:{type:"String"}});},null);
__d("XPubcontentTopicChainingController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/pubcontent\/topic_chaining\/",{pivotal_topic_ids:{type:"IntVector",defaultValue:[]}});},null);
__d("XPubcontentInlineStoryPivotChainingController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/pubcontent\/inline_story_pivot_chaining\/",{origin:{type:"String",required:true},storyid:{type:"String"},ftid:{type:"String"}});},null);
__d("XRelatedGamesChainingController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/games\/async\/related_games\/",{attachment_div_id:{type:"String",required:true},app_id:{type:"Int",required:true}});},null);
__d("XTopicConversationFeedPivotChainingController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/discussions\/creation_unit\/",{});},null);
__d("PubcontentFeedChainingController",["AggregatedLinkComposerConfig","Arbiter","AsyncRequest","AttachmentRelatedShareConstants","CreateTopicConversationChainingConfig","CSS","cx","DOM","DOMQuery","FeedAdsChainingConfig","PageAdsAttachmentLinkShareConstants","PageLikeButton","PubcontentFeedChainingConfig","PubcontentRelatedShareChainingConfig","PubcontentTopicChainingConfig","StoryInlinePivotChainingConfig","RelatedEventsPivotChainingConfig","StoryTopicMap","UFIFeedbackTargets","UFIUIEvents","XEventRelatedEventsPivotController","XFeedAdsChainingController","XPubcontentFeedChainingController","XPubcontentRelatedShareChainingController","XPubcontentRelatedVideoChainingController","XPubcontentTopicChainingController","XPubcontentInlineStoryPivotChainingController","XRelatedGamesChainingController","XTopicConversationFeedPivotChainingController"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia){b.__markCompiled&&b.__markCompiled();var ja='ei',ka='ad_fan_page_action',la='ad_like_page_post_action',ma='ad_share_attachment_click_action',na='page_story_like_action',oa='related_share_article_click',pa='related_share_video_click',qa='page_share_like_action',ra='topic_story_like_action',sa='story_click_for_pivot_action',ta='story_like_pivot_action',ua='event_join',va='comment_on_topic_conversation_target_action';function wa(){"use strict";this.$PubcontentFeedChainingController0=s;this.$PubcontentFeedChainingController1=p;this.$PubcontentFeedChainingController2=t;this.$PubcontentFeedChainingController3=u;this.$PubcontentFeedChainingController4=v;this.$PubcontentFeedChainingController5=w;this.$PubcontentFeedChainingController6=k;this.$PubcontentFeedChainingController7={};h.subscribe(r.LIKED,this.$PubcontentFeedChainingController8.bind(this));h.subscribe(z.UFIActionLinkLike,this.$PubcontentFeedChainingController9.bind(this));h.subscribe(z.UFIActionAddComment,this.$PubcontentFeedChainingControllera.bind(this));h.subscribe(j.ARTICLE_CLICK,this.$PubcontentFeedChainingControllerb.bind(this));h.subscribe(j.VIDEO_CLICK,this.$PubcontentFeedChainingControllerc.bind(this));h.subscribe(j.FBVIDEO_CLICK,this.$PubcontentFeedChainingControllerd.bind(this));h.subscribe(j.GAME_CLICK,this.$PubcontentFeedChainingControllere.bind(this));h.subscribe(q.LINK_ATTACHMENT_CLICK,this.$PubcontentFeedChainingControllerf.bind(this));h.subscribe(j.PHOTO_CLICK,this.$PubcontentFeedChainingControllerg.bind(this));h.subscribe(j.EVENT_JOIN,this.$PubcontentFeedChainingControllerh.bind(this));wa.instance=this;}wa.getAdClientTokenIndex=function(){"use strict";return ja;};wa.prototype.$PubcontentFeedChainingController8=function(xa,ya){"use strict";var za=this.findAdClientToken(ya.target);if(za){this.$PubcontentFeedChainingControlleri(ya.target,{origin:ka,actor_id:ya.profile_id,client_token:za});}else this.$PubcontentFeedChainingControllerj(ya.target,{origin:ya.origin,actor_id:ya.profile_id});};wa.prototype.$PubcontentFeedChainingControllera=function(xa,ya){"use strict";if(!ya.feedback)return;var za=this.$PubcontentFeedChainingControllerk(ya.target,{origin:va,data:ya});if(!za)return false;var ab=ia.getURIBuilder().getURI();new i(ab).setErrorHandler(this.$PubcontentFeedChainingControllerl.bind(this,za.story.id)).setRelativeTo(za.chainingWrapper).setMethod('POST').setData({story_id:ya.feedback.entidentifier}).send();return true;};wa.prototype.$PubcontentFeedChainingController9=function(xa,ya){"use strict";if(!ya.ft_id)return;if(!this.$PubcontentFeedChainingControllerm(this.findStory(ya.target)))return;y.getFeedbackTarget(ya.ft_id,function(za,ab){var bb=this.findAdClientToken(za);if(bb&&ab.isshare){this.$PubcontentFeedChainingControlleri(za,{actor_id:ab.actorid,origin:la,ft_id:ab.entidentifier,client_token:bb});}else if(ab.isownerpage){this.$PubcontentFeedChainingControllerj(za,{actor_id:ab.actorid,content_id:ab.entidentifier,origin:na});}else if(ab.isshare){this.$PubcontentFeedChainingControllerj(za,{actor_id:ab.actorid,content_id:ab.entidentifier,ft_id:ab.entidentifier,origin:qa});}else{var cb=x.getTopicsForFTID(ab.entidentifier);if(cb&&cb.length>0){this.$PubcontentFeedChainingControllern(za,{ft_id:ab.entidentifier,origin:ra,pivotal_topic_ids:cb});}else this.$PubcontentFeedChainingControllero(za,{origin:ta,ft_id:ab.entidentifier});}}.bind(this,ya.target));};wa.prototype.$PubcontentFeedChainingControllero=function(xa,ya){"use strict";var za=this.$PubcontentFeedChainingControllerk(xa,ya);if(!za)return false;var ab=(ga.getURIBuilder()).setString('origin',ya.origin);if(ya.story_id)ab.setString('storyid',String(ya.story_id));if(ya.ft_id)ab.setString('ftid',String(ya.ft_id));new i().setErrorHandler(this.$PubcontentFeedChainingControllerl.bind(this,za.story.id)).setRelativeTo(za.chainingWrapper).setURI(ab.getURI()).setAllowCrossPageTransition(true).send();return true;};wa.prototype.$PubcontentFeedChainingControllerg=function(xa,ya){"use strict";var za=this;za.$PubcontentFeedChainingControllero(ya.attachment,{origin:sa,story_id:ya.storyid});};wa.prototype.$PubcontentFeedChainingControllerb=function(xa,ya){"use strict";if(g.no_chained_related_stories==='true')return;ya.origin=oa;var za=this,ab=this.findStory(ya.attachment),bb=o.scry(o.getRootElement(),'#initial_browse_result').length>0;if(bb)return;var cb;if(ya.is_right_click){cb=0;}else cb=j.EVENT_DELAY;setTimeout(function(){if(ab){var db=za.findAttachment(ab);if(db)ya.attachment=db;}za.$PubcontentFeedChainingControllerp(ya.attachment,ya);},cb);};wa.prototype.$PubcontentFeedChainingControllerc=function(xa,ya){"use strict";ya.origin=pa;var za=this,ab=this.findStory(ya.attachment);setTimeout(function(){if(ab){var bb=za.findAttachment(ab);if(bb)ya.attachment=bb;}za.$PubcontentFeedChainingControllerp(ya.attachment,ya);},j.EVENT_DELAY);};wa.prototype.$PubcontentFeedChainingControllerd=function(xa,ya){"use strict";ya.origin=pa;var za=this,ab=this.findStory(ya.attachment);setTimeout(function(){if(ab){var bb=za.findAttachment(ab);if(bb)ya.attachment=bb;}za.$PubcontentFeedChainingControllerp(ya.attachment,ya);},j.EVENT_DELAY);};wa.prototype.$PubcontentFeedChainingControllere=function(xa,ya){"use strict";var za=this,ab=this.findStory(ya.attachment);setTimeout(function(){if(ab)var bb=za.findContainer(ab);za.$PubcontentFeedChainingControllerq(ab,ya.global_share_id,n.getID(bb));},j.EVENT_DELAY);};wa.prototype.$PubcontentFeedChainingControllerf=function(xa,ya){"use strict";var za=this.findAdClientToken(ya.attachment);if(za){ya.origin=ma;ya.client_token=za;this.$PubcontentFeedChainingControlleri(ya.attachment,ya);}};wa.prototype.$PubcontentFeedChainingControllerh=function(xa,ya){"use strict";var za=this.findStory(ya.attachment);if(za){var ab=this.findAttachment(za);if(ab)ya.attachment=ab;}this.$PubcontentFeedChainingControllerr(ya.attachment,{origin:ua,event_id:ya.event_id});};wa.prototype.$PubcontentFeedChainingControllers=function(xa){"use strict";return !!(xa&&xa.id&&!l.hasClass(xa,"_sf6")&&!(xa.id in this.$PubcontentFeedChainingController7));};wa.prototype.$PubcontentFeedChainingControllert=function(xa){"use strict";if(!xa)return false;if(xa.origin in this.$PubcontentFeedChainingController0||xa.origin in this.$PubcontentFeedChainingController2||xa.origin in this.$PubcontentFeedChainingController1||xa.origin in this.$PubcontentFeedChainingController4||xa.origin in this.$PubcontentFeedChainingController5||xa.origin in this.$PubcontentFeedChainingController6){return true;}else{var ya=this.$PubcontentFeedChainingController3[xa.origin];if(!ya||!ya.rate)return false;var za=Math.random();if(za>ya.rate)return false;return true;}};wa.prototype.$PubcontentFeedChainingControlleru=function(xa){"use strict";this.$PubcontentFeedChainingController7[xa]=true;};wa.prototype.$PubcontentFeedChainingControllerl=function(xa){"use strict";delete this.$PubcontentFeedChainingController7[xa];};wa.prototype.$PubcontentFeedChainingControllerm=function(xa){"use strict";if(!xa)return false;var ya="_3lkn",za=xa.nextSibling,ab=true;if(za&&za.firstChild){var bb=za.firstChild;ab=!(bb.hasChildNodes()&&l.hasClass(bb,ya));}if(!ab)return false;var cb=xa.children[0],db=xa.children[1],eb="_4_ck";if((cb&&l.hasClass(cb,eb))||(db&&l.hasClass(db,eb)))return false;return true;};wa.prototype.$PubcontentFeedChainingControllerk=function(xa,ya){"use strict";var za=this.findStory(xa);if(!this.$PubcontentFeedChainingControllers(za))return null;if(!this.$PubcontentFeedChainingControllert(ya))return null;this.$PubcontentFeedChainingControlleru(za.id);if(this.isSponsoredStory(za))return null;var ab;if(!ya.continued_chaining){ab=this.findContainer(za);if(!ab)return null;var bb=n.create('div'),cb=n.appendContent(ab,bb);if(cb.length!==1)return null;}else{ab=za;bb=n.create('div');cb=n.insertAfter(ab,bb);n.remove(ab);if(cb.length!==1)return null;}if(ya.is_auto_expand){return {chainingWrapper:cb[0],story:za,is_auto_expand:ya.is_auto_expand};}else return {chainingWrapper:cb[0],story:za};};wa.prototype.$PubcontentFeedChainingControlleri=function(xa,ya){"use strict";var za=this.$PubcontentFeedChainingControllerk(xa,ya);if(!za)return false;var ab=this.findStreamRoot(za.story);if(!ab)return false;var bb=ab.getAttribute('id'),cb=(ba.getURIBuilder()).setString('actor_id',ya.actor_id).setString('origin',ya.origin).setString('ei',ya.client_token).setString('data_ownerid',bb);if(ya.ft_id)cb.setString('ft_id',ya.ft_id);new i().setErrorHandler(this.$PubcontentFeedChainingControllerl.bind(this,za.story.id)).setRelativeTo(za.chainingWrapper).setURI(cb.getURI()).send();return true;};wa.prototype.$PubcontentFeedChainingControllerp=function(xa,ya){"use strict";if(!this.$PubcontentFeedChainingControllerm(this.findStory(xa)))return false;var za=this.$PubcontentFeedChainingControllerk(xa,ya);if(!za)return false;l.addClass(za.chainingWrapper,"_3lkn");var ab=null;if(ya.fbvideo_id){ab=ea.getURIBuilder();ab.setInt('fbvideo_id',ya.fbvideo_id);}else{ab=da.getURIBuilder();ab.setInt('global_share_id',ya.global_share_id);}ab.setString('attachment_div_id',n.getID(ya.attachment));if(ya.link_url)ab.setString('link_url',ya.link_url);if(ya.video_div_id)ab.setString('video_div_id',ya.video_div_id);if(ya.share_id)ab.setString('share_id',ya.share_id);var bb=JSON.parse(za.story.getAttribute('data-ft'))||{};if('qid' in bb&&'mf_story_key' in bb){ab.setString('qid',bb.qid);ab.setString('mf_story_key',bb.mf_story_key);}if(ya.is_auto_expand){this.$PubcontentFeedChainingControllerl(za.story.id);ab.setBool('is_auto_expand',ya.is_auto_expand);}var cb=new i().setErrorHandler(this.$PubcontentFeedChainingControllerl.bind(this,za.story.id)).setRelativeTo(za.chainingWrapper).setURI(ab.getURI());bb&&cb.setData(bb);cb.send();return true;};wa.prototype.$PubcontentFeedChainingControllerq=function(xa,ya,za){"use strict";if(!this.$PubcontentFeedChainingControllers(xa))return;this.$PubcontentFeedChainingControlleru(xa.id);var ab=(ha.getURIBuilder()).setInt('app_id',ya).setString('attachment_div_id',za);new i().setErrorHandler(this.$PubcontentFeedChainingControllerl.bind(this,xa.id)).setURI(ab.getURI()).send();return true;};wa.prototype.$PubcontentFeedChainingControllerj=function(xa,ya){"use strict";var za=this.$PubcontentFeedChainingControllerk(xa,ya);if(!za)return false;var ab=(ca.getURIBuilder()).setString('actor_id',ya.actor_id).setString('origin',ya.origin);if(ya.ft_id)ab.setString('ft_id',ya.ft_id);if(ya.content_id)ab.setString('content_id',ya.content_id);new i().setErrorHandler(this.$PubcontentFeedChainingControllerl.bind(this,za.story.id)).setRelativeTo(za.chainingWrapper).setURI(ab.getURI()).send();return true;};wa.prototype.$PubcontentFeedChainingControllern=function(xa,ya){"use strict";var za=this.$PubcontentFeedChainingControllerk(xa,ya);if(!za)return false;var ab=(fa.getURIBuilder()).setIntVector('pivotal_topic_ids',ya.pivotal_topic_ids).getURI();new i().setErrorHandler(this.$PubcontentFeedChainingControllerl.bind(this,za.story.id)).setRelativeTo(za.chainingWrapper).setURI(ab).send();return true;};wa.prototype.$PubcontentFeedChainingControllerr=function(xa,ya){"use strict";var za=this.$PubcontentFeedChainingControllerk(xa,ya);if(!za)return false;var ab=(aa.getURIBuilder()).setInt('event_id',ya.event_id).setString('attachment_id',n.getID(xa)).getURI();new i().setErrorHandler(this.$PubcontentFeedChainingControllerl.bind(this,za.story.id)).setRelativeTo(za.chainingWrapper).setURI(ab).send();return true;};e.exports=wa;},null);
__d("PubcontentLitestandClassicChainingController",["ContextualThing","DOM","PubcontentFeedChainingController","csx"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();for(var k in i)if(i.hasOwnProperty(k))m[k]=i[k];var l=i===null?null:i.prototype;m.prototype=Object.create(l);m.prototype.constructor=m;m.__superConstructor__=i;function m(){"use strict";if(i!==null)i.apply(this,arguments);}m.prototype.findStory=function(n){"use strict";var o="^div._4-u2",p=h.scry(n,o);return p.length===1?p[0]:null;};m.prototype.isSponsoredStory=function(n){"use strict";var o="._5paw";return h.scry(n,o).length>0;};m.prototype.findAttachment=function(n){"use strict";var o="div._6m2",p="div.iframeEmbed",q=h.scry(n,o)[0]||h.scry(n,p)[0];return q;};m.prototype.findContainer=function(n){"use strict";var o=h.create('div'),p=h.insertAfter(n,o);g.register(o,n);return p.length>=1?p[0]:null;};m.prototype.findStreamRoot=function(n){"use strict";var o="^div._4ikz";return h.scry(n,o)[0];};m.prototype.findAdClientToken=function(n){"use strict";var o=this.findStory(n);if(!o)return null;var p=o.getAttribute('data-ft');if(!p)return null;var q=JSON.parse(p);return q[i.getAdClientTokenIndex()];};e.exports=m;new m();},null);
__d("ShareNowController",["Dialog","Event","fbt"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=i._("Your share was posted."),k=i._("This post could not be shared at this time. Please try again later."),l,m={initMenu:function(n){var o=n.getTriggerElem();h.listen(o,'success',function(event){try{this.showDialog(event.data.response.payload.message);}catch(p){this.showDialog(j);}}.bind(this));h.listen(o,'error',function(event){try{this.showDialog(event.data.response.payload.message);}catch(p){this.showDialog(k);}}.bind(this));},showDialog:function(n){if(l)l.destroy();l=new g().setBody(n).setAutohide(2500).setModal(true).show();}};e.exports=m;},null);
__d("FeedAdsGapRuleViolationDetection",["Banzai","CSS","csx","cx","DOM","ge","isEmpty","merge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o='ei',p='qid',q='gap rule violation',r='non violating ads gap',s='first position violation',t='feed load',u='first position invalidation',v='spacing invalidation',w=[],x=[],y=[],z={},aa={registerFeedStories:function(ba,ca){if(ba.containerID=='substream_0'){w=[];x=[];}var da=l(ba.containerID);if(!da)return;z=n(ba.demoAdChecks,z);var ea=k.scry(da,"div._5jmm").map(this._convertStoryNodeToObject).filter(function(fa){return fa!==null;});if(ba.isLoggingEnabled&&ea.length!==0)this._logFeedLoad();if(ba.isNewerStories){w=ea.concat(w);}else w=w.concat(ea);if(m(z)){if(ba.isLoggingEnabled||ba.isFirstPosInvalidationEnabled)this._checkFirstPosViolation(ba,da);if(ba.isLoggingEnabled||ba.isGapRuleInvalidationEnabled)this._checkGapRuleViolation(ba);}},_convertStoryNodeToObject:function(ba){if(h.hasClass(ba,"_170y"))return null;var ca=ba.getAttribute('data-dedupekey');if(z[ca])return null;var da=k.scry(ba,"div._hye"),ea=k.scry(ba,"li._170x"),fa=[];if(da.length!==0){fa=da.map(function(ia){return ia.getAttribute('data-ft');}).filter(function(ia){return ia!==null;});}else if(ea.length!==0){fa=ea.map(function(ia){return ia.getAttribute('data-ft');}).filter(function(ia){return ia!==null;});}else if(ba.getAttribute('data-ft'))fa=[ba.getAttribute('data-ft')];if(!fa.length)return null;var ga=JSON.parse(fa[0]),ha={dataFTArray:fa,dedupKey:ca,isSponsored:!!ga[o],height:ba.offsetHeight,qid:parseInt(ga[p],10),nodeID:ba.id};return ha;},_checkFirstPosViolation:function(ba,ca){while(w.length>0&&w[0].isSponsored){var da={ftArray:w[0].dataFTArray,qid:w[0].qid,nodeid:w[0].nodeID,firstStoryType:ba.firstStoryType},ea=k.scry(ca,'.uiBoxRed')[0];if(ea){var fa=ea.textContent||ea.innerText;if(fa)da.error_msg=fa;}if(ba.isLoggingEnabled&&!(w[0].dedupKey in y)){this._logFirstPosViolation(da);y[w[0].dedupKey]=da;}if(ba.isFirstPosInvalidationEnabled){this._invalidateFirstPosAd(da);w.splice(0,1);}else break;}},_getMinGap:function(ba,ca,da){var ea=Math.min(ba?ba:Number.MAX_VALUE,ca?ca:Number.MAX_VALUE);return ea!==Number.MAX_VALUE?ea:da;},_getStoryDedupKeysJSONString:function(ba,ca){var da=[];for(var ea=ba;ea<=ca;ea++)da.push(w[ea].dedupKey);return JSON.stringify(da);},_checkGapRuleViolation:function(ba){var ca=null,da=null,ea=0;for(var fa=0;fa<w.length;fa++){var ga=w[fa];ea+=ga.height;if(ga.isSponsored){ea-=ga.height;var ha=false;if(ca!==null){var ia=fa-ca,ja=null,ka=this._getMinGap(ba.minGaps[da.dedupKey],ba.minGaps[ga.dedupKey],ba.defaultMinGap);if(ia<ka){ja=q;}else ja=r;var la={ftArray_A:da.dataFTArray,ftArray_B:ga.dataFTArray,dist:ia,pdist:ea,pos:fa+1,qid_A:da.qid,qid_B:ga.qid,event_type:ja,nodeid:ga.nodeID,dedupKeys:this._getStoryDedupKeysJSONString(ca,fa)};if(ba.isLoggingEnabled)if(!(ga.dedupKey in x)||x[ga.dedupKey].event_type!==ja){this._logGapRuleViolation(la);x[ga.dedupKey]=la;}if(ba.isGapRuleInvalidationEnabled&&ja==q){this._invalidateGapRuleViolatedAd(la);ha=true;w.splice(fa--,1);}}if(!ha){ca=fa;da=ga;ea=0;}}}},_logFirstPosViolation:function(ba){var ca={ft:ba.ftArray[0],event_type:s,intValues:{qid:ba.qid},first_story_type:ba.firstStoryType};if(ba.error_msg)ca.error_msg=ba.error_msg;g.post('feed_ads_gap_rule_violation',ca);},_logGapRuleViolation:function(ba){var ca={ft_A:ba.ftArray_A[0],ft_B:ba.ftArray_B[0],event_type:ba.event_type,intValues:{dist:ba.dist,pdist:ba.pdist,pos:ba.pos,qid_A:ba.qid_A,qid_B:ba.qid_B},dedup_keys:ba.dedupKeys};g.post('feed_ads_gap_rule_violation',ca);},_logFeedLoad:function(){var ba={event_type:t};g.post('feed_ads_gap_rule_violation',ba);},_invalidateFirstPosAd:function(ba){h.hide(l(ba.nodeid));var ca={ft_array:ba.ftArray,event_type:u};g.post('feed_ads_gap_rule_violation',ca);},_invalidateGapRuleViolatedAd:function(ba){var ca=l(ba.nodeid);ca&&h.hide(ca);var da={ft_array_A:ba.ftArray_A,ft_array_B:ba.ftArray_B,event_type:v};g.post('feed_ads_gap_rule_violation',da);}};e.exports=aa;},null);
__d("FeedErrorDetection",["Banzai","DOM","csx","ge"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=0,l={},m=false,n=false;function o(event,q,r,s){var t={event:event,shouldLogDetail:q,site:'www'};if(q){t.intValues=r;t.normalValues=s;}g.post('feed_error_detection',t,{delay:0});}var p={registerFeedStories:function(q,r){if(q=='substream_0'){k=0;l={};m=false;n=false;}var s=h.scry(j(q),"._5jmm"),t=s.length;if(!t&&!m){if(!n){n=true;return;}if(!k){o('empty_feed_js',r,{},{});}else o('end_of_feed_js',r,r?{stories_count:k}:{},{});m=true;return;}n=false;for(var u=0;u<t;u++){var v=s[u],w=v.getAttribute('data-dedupekey'),x=v.getAttribute('data-ft');if(!w||!x)continue;if(w in l){var y={};if(r)y={dedupKey:w,ft_A:x,ft_B:l[w]};o('duplicate_stories',r,{},{dup_field:y});}else{l[w]=x;k++;}}}};e.exports=p;},null);
__d("StoryPositionTracking",["DOM","LitestandStream","csx","ge"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=0;function l(o,p){var q=JSON.parse(o.getAttribute('data-ft'));if(q){q.insertion_position=p;o.setAttribute('data-ft',JSON.stringify(q));}}function m(o){return g.scry(o,"._5jmm");}var n={registerNewStories:function(o){if(o=='substream_0')k=0;var p=m(j(o)),q=p.length;for(var r=0;r<q;r++)l(p[r],k++);},updateAllStories:function(){var o=m(h.getStreamRoot()),p=o.length;k=0;for(var q=0;q<p;q++)l(o[q],k++);}};e.exports=n;},null);
__d("FbFeedKeyboardController",["CSS","DOM","DOMQuery","FeedBaseKeyboardController","Focus","JSXDOM","Parent","FbFeedHighlight","csx","cx","ge","getActiveElement"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();function s(x){if(x.previousElementSibling)return x.previousElementSibling;x=x.previousSibling;while(x&&!h.isElementNode(x))x=x.previousSibling;return x||null;}function t(x){if(x.nextElementSibling)return x.nextElementSibling;x=x.nextSibling;while(x&&!h.isElementNode(x))x=x.nextSibling;return x||null;}for(var u in j)if(j.hasOwnProperty(u))w[u]=j[u];var v=j===null?null:j.prototype;w.prototype=Object.create(v);w.prototype.constructor=w;w.__superConstructor__=j;function w(){"use strict";if(j!==null)j.apply(this,arguments);}w.prototype.getStories=function(x){"use strict";return h.scry(x||this.root,"._5jmm");};w.prototype.isHoldoutStory=function(x){"use strict";return !!x&&g.hasClass(x,'holdoutAdStory');};w.prototype.isRelevantStory=function(x){"use strict";return i.isElementNode(x)&&!this.isHoldoutStory(x);};w.prototype.isStory=function(x){"use strict";return g.hasClass(x,"_5jmm");};w.prototype.clickLike=function(){"use strict";this.click('.UFILikeLink');var x=this.getParentStory(r());if(x){var y=h.scry(x,'.UFILikeLink');for(var z=0;z<y.length;z++)if(!g.hasClass(y[z],'accessible_elem'))k.setWithoutOutline(y[z]);}};w.prototype.clickComment=function(){"use strict";this.click('.comment_link');};w.prototype.clickShare=function(){"use strict";this.click('.share_action_link');};w.prototype.clickSeeMore=function(){"use strict";this.click('.see_more_link');};w.prototype.clickLeft=function(){"use strict";this.click("._1mri");};w.prototype.clickRight=function(){"use strict";this.click("._2fu-");};w.prototype.openAttachment=function(){"use strict";this.click("._5dec","a._52c6","._4-eo",'.uiVideoThumb');};w.prototype.getHeadline=function(x){"use strict";return i.scry(x,"h5._5pbw")[0];};w.prototype.getPreviousSibling=function(x){"use strict";var y=s(x);if(y&&this.getParentStory(y))return y;y=null;var z=m.byClass(x,"_5pcb");if(z){var aa=h.scry(z,"._5jmm"),ba=aa.indexOf(x);while(ba>-1){if(ba===0){y=q('pagelet_composer');y=y&&m.byClass(y,"_5jmm");}else if(ba>0){y=aa[ba-1];if(y.offsetHeight>0)break;}ba--;}}return y||this.selected;};w.prototype.getPreviousStory=function(x){"use strict";var y=this.getPreviousSibling(x);while(y&&!this.isStory(y))y=this.getPreviousSibling(y);return y;};w.prototype.getParentStory=function(x){"use strict";return m.byClass(x,"_5jmm");};w.prototype.getNextSibling=function(x){"use strict";var y=t(x);if(y&&this.getParentStory(y))return y;y=null;var z=m.byClass(x,"_5pcb");if(z){var aa=h.scry(z,"._5jmm"),ba=aa.indexOf(x);if(ba>-1){y=aa[++ba];while(y&&y.offsetHeight===0)y=aa[++ba];}}else if(q('pagelet_composer',x))y=h.scry(document,"div._5pcb ._5jmm")[0];return y||this.selected;};w.prototype.getNextStory=function(x){"use strict";var y=this.getNextSibling(x);while(y&&!this.isStory(y))y=this.getNextSibling(y);return y;};w.prototype.setSelected=function(x,y){"use strict";if(x){var z="_5qdu",aa=i.scry(x,"._5qdu");if(!aa.length&&y)h.prependContent(x,l.div({className:z}));}if(y){this.selected&&this.setTabindexOnStory(this.selected,'-1');this.selected&&g.removeClass(this.selected,"_5qdv");this.selected=x;x&&this.setTabindexOnStory(x,'0');x&&g.addClass(x,"_5qdv");n.highlightSingle(x);}};w.init=function(x,y){"use strict";new w(x,y);};e.exports=w;},null);
__d("FbFeedViewportTracking",["Arbiter","LitestandMessages","LitestandStream","StreamViewportTracking","csx"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();for(var l in j)if(j.hasOwnProperty(l))n[l]=j[l];var m=j===null?null:j.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=j;function n(){"use strict";if(j!==null)j.apply(this,arguments);}n.prototype.initSubscriptions=function(){"use strict";this.subscriptions.addSubscriptions(g.subscribe([h.STORIES_INSERTED],this.invalidateAllStoriesCache.bind(this)),g.subscribe(h.LEAVE_HOME,this.updateTimeTrackingData.bind(this,true)));};n.prototype.getStorySelector=function(){"use strict";return "._5jmm";};n.prototype.getStream=function(){"use strict";return i.getStreamRoot();};n.prototype.getSessionID=function(){"use strict";return i.getFeedStreamID();};n.init=function(o){"use strict";n.instance=new n();n.instance.init(o);};n.getInstance=function(){"use strict";return n.instance;};e.exports=n;},null);
__d("PagerButtons",["ArbiterMixin","Button","DOMQuery","Event","mixin"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=k(g);for(var m in l)if(l.hasOwnProperty(m))o[m]=l[m];var n=l===null?null:l.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=l;function o(p,q,r){"use strict";this._prev=q;this._next=r;j.listen(p,'click',this._handleClick.bind(this));this._root=p;}o.prototype._handleClick=function(p){"use strict";var q=p.getTarget();if(i.contains(this._prev,q)){if(h.isEnabled(this._prev))this.inform('prev',this._prev);}else if(i.contains(this._next,q))if(h.isEnabled(this._next))this.inform('next',this._next);};o.prototype.setPrevEnabled=function(p){"use strict";h.setEnabled(this._prev,p);return this;};o.prototype.setNextEnabled=function(p){"use strict";h.setEnabled(this._next,p);return this;};o.prototype.getRoot=function(){"use strict";return this._root;};e.exports=o;},null);