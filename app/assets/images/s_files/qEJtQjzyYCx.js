/*!CK:2729175045!*//*1427333266,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["9IN3w"]); }

__d("MessageThreadViewSource",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={UNSPECIFIED:"unspecified",LEGACY:"legacy",LEGACY_MESSAGES_PREVIEW:"legacy_messages_preview",REFRESH_SPRINGBOARD:"springboard",REFRESH_MESSAGETAB:"message_tab",REFRESH_PERMALINK:"permalink",REFRESH_HIGHLANDER_JEWEL:"highlander_jewel",REFRESH_SEARCH_TYPEAHEAD:"search_typeahead",MTOUCH_MESSAGE_TAB:"mtouch_message_tab",MBASIC_MESSAGE_TAB:"mbasic_message_tab"};},null);
__d("ModuleErrorLogger",["Bootloader","ErrorUtils","ModuleDependencies","BanzaiScuba"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();function k(n){if(!n||!n.length)return 0;return n.reduce(function(o,p){return o+p;})/n.length;}function l(n){if(!n)return [];var o=[];for(var p in n)o.push(n[p]);return o;}var m={init:function(){h.addListener(function(n){if(n.name!=='ModuleError')return;var o=i.getNotLoadedModules(),p=Object.keys(o.loading),q=l(g.getLoadingUrls()),r=l(g.getLoadedUrlTimes()),s={};o.missing.forEach(function(v){s[v]=1;});var t={};p.forEach(function(v){t[v]=1;});var u=new j('module_errors',null,{addAsnFields:true,addPredictedGeographyFields:true,addBrowserFields:true,addMobileDeviceFields:true,addPageFields:true,addUserFields:true});u.addInteger('missing_count',o.missing.length).addInteger('loading_count',p.length).addInteger('error_url_count',g.getErrorUrls().length).addTagset('missing_modules',s).addTagset('loading_modules',t).addInteger('mean_url_loading_time',Math.floor(k(q))).addInteger('mean_url_loaded_time',Math.floor(k(r))).post();},true);}};e.exports=m;},null);
__d("BassWhitespaceListener",["Bootloader","Event","Parent","copyProperties","goURI"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();function l(m,n){this.link=n;h.listen(m,'click',this.onclicked.bind(this));}j(l.prototype,{onclicked:function(m){if(i.byTag(m.getTarget(),'A'))return;switch(this.link.getAttribute('rel')){case 'async':g.loadModules(["AsyncRequest"],function(o){o.bootstrap(this.link.getAttribute('ajaxify'),this.link);}.bind(this));break;case 'theater':var n=i.byClass(m.getTarget(),'fbPhotoSnowlift');g.loadModules(["PhotoViewer"],function(o){o.bootstrap(this.link.getAttribute('ajaxify'),this.link);}.bind(this));if(n)return false;break;default:k(this.link.getAttribute('href'));}}});e.exports=l;},null);
__d("legacy:ad-units-stream-whitespace",["BassWhitespaceListener"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();a.BassWhitespaceListener=b('BassWhitespaceListener');},3);
__d("BlueBar",["Arbiter","Event","Run","SubscriptionsHandler"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k;function l(event){if(g.inform('BlueBar/homeClick')===false)event.preventDefault();}function m(){if(k){k.release();k=null;}}var n={listen:function(o){if(!k){k=new j();i.onUnload(m);}k.addSubscriptions(h.listen(o,'click',l));}};e.exports=n;},null);
__d("BlueBarMinWidth",["DOM","DOMDimensions","Event","Locale","Style","Vector","csx","queryThenMutateDOM"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();f.init=function(){var o=g.find(document,"div._uaw"),p=g.find(o,"._59g8"),q,r=n.bind(null,function(){var s=h.getElementDimensions(o).width,t;if(j.isRTL()){t=-l.getElementPosition(o).x;}else t=l.getElementPosition(o).x+s-h.getViewportDimensions().width;var u=s-t-v;if(t>0&&u>0){var v=h.measureElementBox(o,'width',true);q=u+'px';}else q='';},function(){k.set(p,'width',q);},'BlueBarMinWidth');i.listen(window,'resize',r);r();};},null);
__d("CanvasRHCHeightController.react",["React","DOMQuery"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=g,j=i.PropTypes,k=g.createClass({displayName:"CanvasRHCHeightController",propTypes:{rhc:j.object},render:function(){var l=h.find(document,'#contentArea'),m=0;if(this.props.rhc.scrollHeight<l.scrollHeight)m=l.scrollHeight-this.props.rhc.scrollHeight;var n={height:m+'px'};return (g.createElement("div",{style:n}));}});e.exports=k;},null);
__d("Recaptcha",["AsyncRequest","Bootloader","CaptchaClientConfig","CSS","CurrentLocale","DOM","ge","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o,p={tabindex:0,callback:null},q={en_US:'en',en_GB:'en',en_PI:'en',nl_NL:'nl',nl_BE:'nl',fr_FR:'fr',fr_CA:'fr',de_DE:'de',es_LA:'es',es_ES:'es',es_CL:'es',es_CO:'es',es_MX:'es',es_VE:'es',ru_RU:'ru',tr_TR:'tr'},r=false,s={widget:null,timer_id:-1,fail_timer_id:-1,type:'image',ajax_verify_cb:null,audio_only:false,$:function(t){if(typeof(t)=="string"){return document.getElementById(t);}else return t;},setFocusOnLoad:function(t){r=t;},create:function(t,u){s.destroy();if(t)s.widget=s.$(t);s._init_options(u);s._call_challenge(i.recaptchaPublicKey);},destroy:function(){var t=s.$('recaptcha_challenge_field');if(t)t.parentNode.removeChild(t);if(s.timer_id!=-1)clearInterval(s.timer_id);s.timer_id=-1;var u=s.$('recaptcha_image');if(u)u.innerHTML="";if(s.widget){s.widget.style.display="none";s.widget=null;}},focus_response_field:function(){var t=s.$,u=t('captcha_response');try{u.focus();}catch(v){}},get_challenge:function(){if(typeof(a.RecaptchaState)=="undefined")return null;return a.RecaptchaState.challenge;},get_response:function(){var t=s.$,u=t('captcha_response');if(!u)return null;return u.value;},ajax_verify:function(t){s.ajax_verify_cb=t;var u=s._get_api_server()+"/ajaxverify"+"?c="+encodeURIComponent(s.get_challenge())+"&response="+encodeURIComponent(s.get_response());s._add_script(u);},_ajax_verify_callback:function(t){s.ajax_verify_cb(t);},_get_api_server:function(){var t=window.location.protocol,u;if(typeof(a._RecaptchaOverrideApiServer)!="undefined"){u=a._RecaptchaOverrideApiServer;}else u="www.google.com";return t+"//"+u;},_call_challenge:function(t){if(!s.audio_only)s.fail_timer_id=setTimeout(function(){if(s.fail_timer_id==-1)s.logAction('timeout');s.createCaptcha();},15000);var u=s._get_api_server()+"/recaptcha/api/challenge?k="+t+"&ajax=1&xcachestop="+Math.random();if(m('extra_challenge_params')!=null)u+="&"+m('extra_challenge_params').value;s._add_script(u);},_add_script:function(t){h.requestJSResource(t);},_init_options:function(t){var u=p,v=t||{};for(var w in v)u[w]=v[w];o=u;},challenge_callback:function(){if(!s.audio_only){clearTimeout(s.fail_timer_id);s._reset_timer();}if(window.addEventListener)window.addEventListener('unload',function(v){s.destroy();},false);if(s._is_ie()&&window.attachEvent)window.attachEvent('onbeforeunload',function(){});if(navigator.userAgent.indexOf("KHTML")>0){var t=document.createElement('iframe');t.src="about:blank";t.style.height="0px";t.style.width="0px";t.style.visibility="hidden";t.style.border="none";var u=document.createTextNode("This frame prevents back/forward cache problems in Safari.");t.appendChild(u);document.body.appendChild(t);}s._finish_widget();if(s.audio_only)s.switch_type('audio');s.logAction('shown');},_finish_widget:function(){var t=s.$,u=a.RecaptchaState,v=o,w=document.createElement("input");w.type="password";w.setAttribute("autocomplete","off");w.style.display="none";w.name="recaptcha_challenge_field";w.id="recaptcha_challenge_field";t('captcha_response').parentNode.insertBefore(w,t('captcha_response'));t('captcha_response').setAttribute("autocomplete","off");t('recaptcha_image').style.width='300px';t('recaptcha_image').style.height='57px';s.should_focus=false;if(!s.audio_only){s._set_challenge(u.challenge,'image');}else s._set_challenge(u.challenge,'audio');if(v.tabindex)t('captcha_response').tabIndex=v.tabindex;if(s.widget)s.widget.style.display='';if(v.callback)v.callback();t('recaptcha_loading').style.display="none";},switch_type:function(t){var u=s;u.type=t;u.$('recaptcha_type').value=t;u.reload(u.type=='audio'?'a':'v');},reload:function(t){var u=s,v=u.$,w=a.RecaptchaState;if(typeof(t)=="undefined")t='r';var x=w.server+"reload?c="+w.challenge+"&k="+w.site+"&reason="+t+"&type="+u.type+"&lang="+s.getLang();if(m('extra_challenge_params')!=null)x+="&"+m('extra_challenge_params').value;u.should_focus=t!='t';u._add_script(x);},finish_reload:function(t,u){a.RecaptchaState.is_incorrect=false;s._set_challenge(t,u);},_set_challenge:function(t,u){var v=s,w=a.RecaptchaState,x=v.$;w.challenge=t;v.type=u;x('recaptcha_challenge_field').value=w.challenge;x('recaptcha_challenge_field').defaultValue=w.challenge;x('recaptcha_image').innerHtml="";if(u=='audio'){x("recaptcha_image").innerHTML=s.getAudioCaptchaHtml();}else if(u=='image'){var y=w.server+'image?c='+w.challenge;x('recaptcha_image').innerHTML="<img style='display:block;' height='57' width='300' src='"+y+"'/>";}s._css_toggle("recaptcha_had_incorrect_sol","recaptcha_nothad_incorrect_sol",w.is_incorrect);s._css_toggle("recaptcha_is_showing_audio","recaptcha_isnot_showing_audio",u=='audio');if(v.should_focus)v.focus_response_field();v._reset_timer();},_reset_timer:function(){var t=a.RecaptchaState;clearInterval(s.timer_id);s.timer_id=setInterval(function(){return s.reload('t');},(t.timeout-60*5)*1000);},_clear_input:function(){var t=s.$('captcha_response');t.value="";},_displayerror:function(t){var u=s.$;l.empty('recaptcha_image');u('recaptcha_image').appendChild(document.createTextNode(t));},reloaderror:function(t){s._displayerror(t);},_is_ie:function(){return (navigator.userAgent.indexOf("MSIE")>0)&&!window.opera;},_css_toggle:function(t,u,v){var w=s.widget;if(!w)w=document.body;var x=w.className;x=x.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)"),' ');x=x.replace(new RegExp("(^|\\s+)"+u+"(\\s+|$)"),' ');x+=" "+(v?t:u);j.setClass(w,x);},playAgain:function(){var t=s.$;t("recaptcha_image").innerHTML=s.getAudioCaptchaHtml();},getAudioCaptchaHtml:function(){var t=s,u=a.RecaptchaState,v=u.server+"image?c="+u.challenge;if(v.indexOf("https://")==0)v="http://"+v.substring(8);var w=u.server+"/img/audiocaptcha.swf?v2",x;if(t._is_ie()){x='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" id="audiocaptcha" width="0" height="0" codebase="https://fpdownload.macromedia.com/get/flashplayer/current/swflash.cab"><param name="movie" value="'+w+'" /><param name="quality" value="high" /><param name="bgcolor" value="#869ca7" /><param name="allowScriptAccess" value="always" /></object><br/>';}else x='<embed src="'+w+'" quality="high" bgcolor="#869ca7" width="0" height="0" name="audiocaptcha" align="middle" play="true" loop="false" quality="high" allowScriptAccess="always" type="application/x-shockwave-flash" pluginspage="http://get.adobe.com/flashplayer" url="'+w+'"></embed> ';var y=(s.checkFlashVer()?'<br/><a class="recaptcha_audio_cant_hear_link" href="#" onclick="Recaptcha.playAgain(); return false;">'+n._("Play again")+'</a>':'')+'<br/><a class="recaptcha_audio_cant_hear_link" target="_blank" href="'+v+'">'+n._("Can't hear this")+'</a>';return x+y;},gethttpwavurl:function(){var t=a.RecaptchaState;if(s.type=='audio'){var u=t.server+"image?c="+t.challenge;if(u.indexOf("https://")==0)u="http://"+u.substring(8);return u;}return "";},checkFlashVer:function(){var t=(navigator.appVersion.indexOf("MSIE")!=-1)?true:false,u=(navigator.appVersion.toLowerCase().indexOf("win")!=-1)?true:false,v=(navigator.userAgent.indexOf("Opera")!=-1)?true:false,w=-1;if(navigator.plugins!=null&&navigator.plugins.length>0){if(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]){var x=navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"",y=navigator.plugins["Shockwave Flash"+x].description,z=y.split(" "),aa=z[2].split(".");w=aa[0];}}else if(t&&u&&!v)try{var ca=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),da=ca.GetVariable("$version");w=da.split(" ")[1].split(",")[0];}catch(ba){}return w>=9;},getLang:function(){return q[k.get()]||'en';},createCaptcha:function(){var t={};if(r)t.callback=s.focus_response_field;setTimeout(function(){return s.create('captcha',t);},0);},createAudioCaptcha:function(){setTimeout(function(){s._init_options({});s.audio_only=true;s._call_challenge(i.recaptchaPublicKey);},0);},logAction:function(t){new g().setURI('/ajax/captcha/recaptcha_log_actions.php').setData({action:t,ua:navigator.userAgent,location:window.location.href}).setMethod('GET').setReadOnly(true).send();}};e.exports=s;a.Recaptcha=s;},null);
__d("JPPhoneCaptcha",["AsyncRequest","AsyncSignal","CSS","Dialog","DOM","Event","Parent","$","cx","bind","copyProperties","emptyFunction","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();function t(u,v,w,x,y){var z=function(){this._dom=n(u);this._hash=w;this._altCaptcha=y;var aa=m.byTag(this._dom,'form'),ba=k.scry(aa,'.'+"_58me");ba&&i.hide(ba);var ca=k.find(this._dom,'img');ca.onerror=ca.onload=function(){if(ca.width==1&&ca.height==1)this.showAlternateCaptcha();}.bind(this);ca.src=v;l.listen(k.find(this._dom,'a.qr-skip-link'),'click',this.showAlternateCaptcha.bind(this));setTimeout(this.checkStatus.bind(this),t.initialPoll);t._currentInstance=this;}.bind(this);if(t._overrideDelay){x=false;delete t._overrideDelay;}if(x){t._delayedCaptcha=z;}else z();}t.initialPoll=5000;t.pollInterval=2000;t.createCaptcha=function(){if(t._currentInstance){t._currentInstance._destroyed=true;t._overrideDelay=true;delete t._currentInstance;}if(t._delayedCaptcha){t._delayedCaptcha();delete t._delayedCaptcha;}};q(t.prototype,{checkStatus:function(){new g('/captcha/qr_async.php').setData({hash:this._hash}).setOption('suppressErrorHandlerWarning',true).setErrorHandler(r).setReadOnly(true).setMethod('GET').setHandler(function(u){var v=u.getPayload();if(this._destroyed)return;if(v===false){this.showAlternateCaptcha();}else if(v===true){new j().setTitle(s._("You are almost there!")).setBody(s._("Please continue to the next page to finish the registration.")).setButtons(j.CLOSE).setCloseHandler(p(this,this.proceedToNux)).show();this._destroyed=true;}}.bind(this)).setFinallyHandler(function(){!this._destroyed&&setTimeout(this.checkStatus.bind(this),t.pollInterval);}.bind(this)).send();},proceedToNux:function(){var u=m.byTag(this._dom,'form'),v=k.scry(u,'#captcha_buttons input');if(v.length==1&&v[0].onclick){v[0].onclick();}else u.submit();this._destroyed=true;},showAlternateCaptcha:function(){t._alternateCaptchaShown=true;t._stupidGlobalFunction();k.setContent(this._dom,this._altCaptcha);this._destroyed=true;var u=m.byTag(this._dom,'form'),v=k.scry(u,'.'+"_58me");v&&i.show(v);new h('/captcha/qr_async.php',{skip:true,hash:this._hash}).send();return false;}});e.exports=t;},null);
__d("NotificationCounter",["Arbiter","DocumentTitle","JSLogger"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={messages:0,notifications:0,requests:0},k={init:function(l){g.subscribe('update_title',this._handleUpdate.bind(this));g.subscribe('jewel/count-updated',this._handleCountUpdate.bind(this));},getCount:function(){var l=0;for(var m in j){var n=Number(j[m]);if(typeof j[m]=='string'&&isNaN(n))return j[m];if(isNaN(n)||n<0){i.create('jewels').error('bad_count',{jewel:m,count:j[m]});continue;}l+=n;}return l;},updateTitle:function(){var l=this.getCount(),m=h.get();m=l?'('+l+') '+m:m;h.set(m,true);},_handleCountUpdate:function(l,m){j[m.jewel]=m.count;this.updateTitle();},_handleUpdate:function(l,m){this.updateTitle();}};e.exports=k;},null);
__d("XNotificationsSyncController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/notifications\/sync\/",{lastSync:{type:"Int",required:true}});},null);
__d("NotificationSync",["AsyncRequest","JSLogger","NotificationConstants","NotificationUpdates","Poller","SystemEvents","UserActivity","XNotificationsSyncController","setTimeoutAcrossTransitions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=1000*60*60,q='channel_reload',r='time_travel',s='online',t='inactive_refresh',u=h.create('notifications'),v,w=0;function x(ba){var ca=n.getURIBuilder().setInt('lastSync',w).getURI();ba.setHandler(y).setOption('suppressErrorAlerts',true).setErrorHandler(z).setMethod('GET').setReadOnly(true).setURI(ca).setAllowCrossPageTransition(true);}function y(ba){var ca=ba.getPayload();w=ca.lastSync;if(ca.syncPayload)j.handleUpdate(i.PayloadSourceType.SYNC,ca.syncPayload);}function z(ba){}var aa={start:function(ba,ca){if(v)return;w=ca;v=new k({interval:ba,setupRequest:x,clearOnQuicklingEvents:false,dontStart:true});o(v.start.bind(v),ba);function da(ea){v.request();u.bump(ea);}l.subscribe(l.TIME_TRAVEL,da.bind(null,r));l.subscribe(l.ONLINE,function(ea,fa){fa&&da(s);});m.subscribe(function(ea,fa){if(fa.idleness>p)da(t);});},sendRequest:function(){v.request();},setuplastSync:function(ba){w=ba;},sendReloadRequest:function(){var ba=new g();ba.setIsBackgroundRequest(true);x(ba);ba.send();u.bump(q);}};e.exports=aa;},null);
__d("NotificationJewelController",["Arbiter","ChannelConstants","Event","NotificationConstants","NotificationCounter","NotificationSeenState","NotificationSync","NotificationUpdates","createObjectFrom","curry"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=0;function r(t){g.inform('jewel/count-updated',{jewel:t,count:l.getUnseenIDs().length},g.BEHAVIOR_STATE);}function s(t,u,v,w,x,y){"use strict";k.init();var z=i.listen(t.getRoot(),'mouseover',function(){z.remove();z=null;u.open();});if(t.isOpen()){u.open();}else var aa=t.subscribe('opened',function(){aa.unsubscribe();aa=null;u.open();});var ba=u.pause.bind(u);t.subscribe('opened',function(){setTimeout(ba,0);});t.subscribe('closed',function(){u.unpause();r(t.name);});n.subscribe('seen-state-updated',p(r,t.name));n.handleUpdate(j.PayloadSourceType.INITIAL_LOAD,{seenState:o(v,q)});if(!y)m.start(w,x);if(y){m.setuplastSync(x);var ca=m.sendReloadRequest,da=h.ON_INVALID_HISTORY;g.subscribe(da,ca);}r(t.name);}e.exports=s;},null);
__d("NotificationJewelHeaderController",["DOM","Event","NotificationSeenState","NotificationUserActions","NotificationUpdates"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();function l(m,n){"use strict";h.listen(m,'click',function(){var o=i.getUnreadIDs();if(o.length)j.markNotificationsAsRead(o);});k.subscribe('read-state-updated',function(){if(n)g.setContent(n,i.getUnreadCount());});}e.exports=l;},null);
__d("NotificationGNFState",["NotificationUpdates","copyProperties","isEmpty"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={};g.subscribe('update-notifications',function(l,m){var n=m.nodes;if(!n||!n.length)return;var o={};m.nodes.forEach(function(p){var q=p.alert_id;if(j[q]!==p.gaveGNF)o[q]=p.gaveGNF;});if(!i(o)){j=h(j,o);g.didUpdateGNFState(Object.keys(o));}});g.subscribe('update-gnf',function(l,m){if(m.gnfState){j=h(j,m.gnfState);g.didUpdateGNFState(Object.keys(m.gnfState));}});var k={gaveGNF:function(l){return !!j[l];}};e.exports=k;},null);
__d("NotificationHiddenState",["NotificationUpdates","NotificationConstants","copyProperties","isEmpty"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={};g.subscribe('update-notifications',function(m,n){var o=n.nodes,p=n.payloadsource;if(p===h.PayloadSourceType.LIVE_SEND&&o&&o.length){var q={};o.forEach(function(r){var s=r.alert_id;if(k[s])q[s]=false;});if(!j(q)){k=i(k,q);g.didUpdateHiddenState(Object.keys(q));}}});g.subscribe('update-hidden',function(m,n){if(n.hiddenState){k=i(k,n.hiddenState);g.didUpdateHiddenState(Object.keys(n.hiddenState));}});var l={isHidden:function(m){if(k[m])return k[m];return false;}};e.exports=l;},null);
__d("NotificationList.react",["NotificationConstants","NotificationGNFState","NotificationHiddenState","NotificationSeenState","NotificationStore","NotificationUpdates","NotificationUserActions","React","getObjectValues","isEmpty","mapObject","merge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s=n,t=s.PropTypes,u=g.PayloadSourceType.LIVE_SEND,v=n.createClass({displayName:"NotificationList",propTypes:{businessID:t.string,hasEverBeenOpened:t.bool,maxHeight:t.number,negativeTracking:t.object,paused:t.bool,staticNotifs:t.object,tracking:t.string,useChevron:t.bool,numPerPage:t.number.isRequired,listRenderer:t.func.isRequired},getInitialState:function(){this._currentlyFetching=false;this._pendingNotifs={};this._shouldScroll=false;var w=q(this.props.staticNotifs,function(y){return y.seen_state==='SEEN_AND_READ';}),x=q(this.props.staticNotifs,function(y){return !!y.gaveGNF;});return {canFetchMore:!this.props.staticNotifs,notifs:this.props.staticNotifs||{},hiddenState:{},readState:w||{},gnfState:x||{},showingChevron:false};},componentWillMount:function(){if(this.props.staticNotifs)return;k.setBusinessID(this.props.businessID);this._subscriptions=[l.subscribe('notifications-updated',function(w,x){if(x.source==u&&!p(x.updates)){this._shouldScroll=true;if(this.props.paused!==false)this._pendingNotifs=r(this._pendingNotifs,x.updates);return;}this._fetchAndUpdate(k.getCount());}.bind(this)),l.subscribe(['hidden-state-updated','read-state-updated','gnf-state-updated'],function(w,x){if(w=='hidden-state-updated'){if(x.source!==u||!this.props.paused){var y={};Object.keys(x.updates).forEach(function(ba){y[ba]=i.isHidden(ba);});this.setState({hiddenState:r(this.state.hiddenState,y)});}}else if(w=='gnf-state-updated'){var z={};Object.keys(x.updates).forEach(function(ba){z[ba]=h.gaveGNF(ba);});this.setState({gnfState:r(this.state.gnfState,z)});}else{var aa={};Object.keys(x.updates).forEach(function(ba){aa[ba]=j.isRead(ba);});this.setState({readState:r(this.state.readState,aa)});}}.bind(this))];},componentWillUnmount:function(){if(this._subscriptions){while(this._subscriptions.length)this._subscriptions.pop().unsubscribe();this._subscriptions=null;}},_getNotifsWithCurrentOrder:function(w){var x=Object.keys(this.state.notifs),y=Object.keys(w).filter(function(aa){return !this.state.notifs[aa];}.bind(this));x=x.concat(y);var z={};x.forEach(function(aa){if(this._pendingNotifs[aa]){if(this.state.notifs[aa])z[aa]=this.state.notifs[aa];}else z[aa]=w[aa];}.bind(this));return z;},_fetchAndUpdate:function(w){if(this.props.staticNotifs)return;this._currentlyFetching=true;k.getNotifications(w,function(x){var y=p(this._pendingNotifs)?x:this._getNotifsWithCurrentOrder(x),z={},aa={},ba={};o(y).forEach(function(ca){var da=ca.alert_id;if(!this.state||!this.state.readState[da])z[da]=j.isRead(da);if(!this.state||!this.state.hiddenState[da])aa[da]=i.isHidden(da);if(!this.state||!this.state.gnfState[da])ba[da]=h.gaveGNF(da);});this._currentlyFetching=false;this.setState({notifs:y,canFetchMore:k.canFetchMore()||k.getCount()!=Object.keys(y).length,readState:r(this.state.readState,z),hiddenState:r(this.state.hiddenState,aa),gnfState:r(this.state.gnfState,ba)});}.bind(this));},_fetchAndUpdateAll:function(){var w={};Object.keys(this._pendingNotifs).forEach(function(x){var y=i.isHidden(x);if(y!=this.state.hiddenState[x])w[x]=i.isHidden(x);}.bind(this));if(!p(w))this.setState({hiddenState:r(this.state.hiddenState,w)});this._pendingNotifs={};this._fetchAndUpdate(k.getCount());},_fetchNextSet:function(){if(!this._currentlyFetching){var w=Object.keys(this.state.notifs).length;this._fetchAndUpdate(w+this.props.numPerPage);}},_onScrollAndUpdate:function(w){if(this._currentlyFetching||!this.state.canFetchMore)return;if(w)this._fetchNextSet();},_onChevronShow:function(){this.setState({showingChevron:true});},_onChevronHide:function(){this.setState({showingChevron:false});},componentDidUpdate:function(w){var x=j.getUnseenIDs();if(!p(this._pendingNotifs))x=x.filter(function(y){return !this._pendingNotifs[y];}.bind(this));if(x.length&&this.props.paused)m.markNotificationsAsSeen(x);if(!w.hasEverBeenOpened&&this.props.hasEverBeenOpened){if(x.length>this.props.numPerPage){this._fetchAndUpdate(x.length);}else this._fetchNextSet();return;}if(w.paused&&!this.props.paused){this._shouldScroll=false;setTimeout(this._fetchAndUpdateAll,0);return;}},render:function(){var w=this.props.listRenderer;return (n.createElement(w,{hasEverBeenOpened:this.props.hasEverBeenOpened,paused:this.props.paused,tracking:this.props.tracking,negativeTracking:this.props.negativeTracking,shortenTimestamp:this.props.shortenTimestamp,businessID:this.props.businessID,maxHeight:this.props.maxHeight,useChevron:this.props.useChevron,notifs:this.state.notifs,afterScroll:this._onScrollAndUpdate,onChevronShow:this._onChevronShow,onChevronHide:this._onChevronHide,canFetchMore:this.state.canFetchMore,hiddenState:this.state.hiddenState,readState:this.state.readState,gnfState:this.state.gnfState,showingChevron:this.state.showingChevron,shouldScroll:this._shouldScroll}));}});e.exports=v;},null);
__d("NotificationListPropTypes",["React"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=g,i=h.PropTypes,j={negativeTracking:i.object,tracking:i.string,useChevron:i.bool,notifs:i.object,afterScroll:i.func,onChevronShow:i.func,onChevronHide:i.func,canFetchMore:i.bool,hiddenState:i.object,readState:i.object,gnfState:i.object,showingChevron:i.bool,paused:i.bool,maxHeight:i.number,shouldScroll:i.bool};e.exports=j;},null);
__d("ReadToggle.react",["React","cx","emptyFunction","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=g,l=k.PropTypes,m=g.createClass({displayName:"ReadToggle",propTypes:{isRead:l.bool.isRequired,onClick:l.func,readLabel:l.node,unreadLabel:l.node},getDefaultProps:function(){return {onClick:i};},render:function(){if(this.props.isRead){return (g.createElement("div",{"aria-label":this.props.readLabel,className:this._getClasses(),"data-hover":"tooltip","data-tooltip-alignh":"center",onClick:this.props.onClick}));}else return (g.createElement("div",{"aria-label":this.props.unreadLabel,className:this._getClasses(),"data-hover":"tooltip","data-tooltip-alignh":"center",onClick:this.props.onClick,role:"button",tabIndex:"0"}));},_getClasses:function(){return j(this.props.className,((!this.props.isRead?"_5c9q":'')+(this.props.isRead?' '+"_5c9_":'')));}});e.exports=m;},null);
__d("VaultBoxURI",["URI"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={PHOTOS_SYNCED:'photos_synced',isVaultBoxURI:function(i){var j=new RegExp("\/"+h.PHOTOS_SYNCED+"\/?$");return i.getPath().match(j)&&i.getQueryData().hasOwnProperty('view_image');},isVaultArchiveURI:function(i){var j=new RegExp("\/"+h.PHOTOS_SYNCED+"\/?$");return i.getPath().match(j);},getSyncedTabURI:function(){return new g('/me/'+h.PHOTOS_SYNCED).getQualifiedURI();}};e.exports=h;},null);
__d("NotificationListItem.react",["AsyncResponse","BizSiteIdentifier.brands","BanzaiLogger","CloseButton.react","Event","FlexibleBlock.react","ImageBlock.react","Keys","List.react","NotificationPhotoThumbnail","NotificationTokens","NotificationURI","NotificationUserActions","React","TextWithEntities.react","ReadToggle.react","Timestamp.react","VaultBoxURI","XUIButton.react","PopoverMenu.react","ReactXUIMenu","MenuSeparator.react","cx","invariant","mergeObjects","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa){b.__markCompiled&&b.__markCompiled();var ga=aa.Item;function ha(ka,la){return t.createElement("span",{className:"fwb"},ka);}function ia(ka){return !!(ka&&ka.id&&!ka.is_facebook_app);}var ja=t.createClass({displayName:"NotificationListItem",getInitialState:function(){return {showingOptions:false,negativeFeedbackConfirmation:null,canReportAsSpam:false,spamReportConfirmation:null,sendingFeedback:false,mayUndoHide:false,genericNegativeFeedbackConfirmation:null,isBizSite:h.isBizSite()};},_onKeyDownItem:function(ka){if(k.getKeyCode(ka.nativeEvent)==n.RETURN)this._markItemRead();},_markItemReadIfUnreadFromReadButton:function(){if(!this.props.isRead)s.setNextIsFromReadButton(true);this._markItemReadIfUnread();},_markItemReadIfUnread:function(){!this.props.isRead&&this._markItemRead();},_markItemRead:function(){s.markNotificationsAsRead([this.props.alert_id]);},_onFeedbackError:function(ka){g.defaultErrorHandler(ka);this.setState({sendingFeedback:false});},_onHideSuccess:function(ka){var la=ka.getPayload();da(la.confirmation);this.setState({negativeFeedbackConfirmation:la.confirmation,canReportAsSpam:la.canReportAsSpam,sendingFeedback:false,showingOptions:true});},_onHideAppSuccess:function(ka){var la=ka.getPayload(),ma=la.confirmation,na=la.canReportAsSpam;da(ma);this.setState({negativeFeedbackConfirmation:ma,canReportAsSpam:na,mayUndoHide:true,sendingFeedback:false,showingOptions:true});},_onSpamReportSuccess:function(ka){var la=ka.getPayload().spamReportConfirmation;this.setState({negativeFeedbackConfirmation:null,spamReportConfirmation:la,sendingFeedback:false});},_onHide:function(){s.markNotificationAsHidden(this.props.alert_id,this._onHideSuccess,this._onFeedbackError);this.setState({sendingFeedback:true,mayUndoHide:true});},_onShowSuccess:function(){this.setState({genericNegativeFeedbackConfirmation:null,negativeFeedbackConfirmation:null,sendingFeedback:false,showingOptions:false});},_onShow:function(){var ka=this.props.negative?this.props.negative.subscription_level:null;s.markNotificationAsVisible(this.props.alert_id,ka,this._onShowSuccess,this._onFeedbackError);this.setState({sendingFeedback:true});},_onReportSpam:function(){s.markNotificationAsSpam(this.props.alert_id,this._onSpamReportSuccess,this._onFeedbackError);this.setState({sendingFeedback:true});},_markAppAsHidden:function(){s.markAppAsHidden(this.props.alert_id,this.props.application.id,this._onHideAppSuccess,this._onFeedbackError);this.setState({sendingFeedback:true});},_markAppAsVisible:function(){s.markAppAsVisible(this.props.alert_id,this.props.application.id,function(){this.setState({negativeFeedbackConfirmation:null,sendingFeedback:false,showingOptions:false,mayUndoHide:false});}.bind(this),this._onFeedbackError);this.setState({sendingFeedback:true});},_renderAttachedImage:function(ka){if(ka)return (t.createElement("img",{src:ka.uri,className:"_42td","aria-hidden":true}));return t.createElement("span",null);},_getModifiedTrackingString:function(ka){return JSON.stringify(ea(JSON.parse(this.props.tracking),ka));},_onClickCloseButton:function(){if(this.props.useChevron){this.showCloseOptionOnMenuClose=true;}else this.setState({showingOptions:true});},_onCancelNegativeFeedback:function(){this.setState({showingOptions:false});},shouldComponentUpdate:function(ka,la){return (this.props.visible!==ka.visible||this.props.isRead!==ka.isRead||this.props.timestamp!==ka.timestamp||this.props.gnfGiven!==ka.gnfGiven||this.state.showingOptions!==la.showingOptions||this.state.sendingFeedback!==la.sendingFeedback||this.state.canReportAsSpam!==la.canReportAsSpam||this.state.spamReportConfirmation!==la.spamReportConfirmation);},_onChevronHide:function(){this.props.onChevronHide();this._logChevronEvent('close');if(this.showCloseOptionOnMenuClose){this.showCloseOptionOnMenuClose=false;this._turnOff();}},_turnOff:function(){var ka=ia(this.props.application)?this._markAppAsHidden:this._onHide;ka();},_onChevronShow:function(){this.props.onChevronShow();this._logChevronEvent('open');},_logChevronEvent:function(ka){var la={event:ka,notif_type:this.props.notif_type,notif_id:parseInt(q.untokenizeIDs([this.props.alert_id])[0],10)};i.log('NotifJewelMenuLoggerConfig',la);},_onGenericSuccess:function(ka){this.setState({showingOptions:true,sendingFeedback:false,genericNegativeFeedbackConfirmation:ka});},_onClickGenericNegative:function(){this.setState({sendingFeedback:true,mayUndoHide:true});s.giveGenericNegativeFeedback(this.props.alert_id,this._onGenericSuccess,this._onFeedbackError);},_undoGenericNegative:function(){this.setState({sendingFeedback:true});s.undoGenericNegativeFeedback(this.props.alert_id,this._onShowSuccess,this._onFeedbackError);},_onOkayNegative:function(){this.setState({showingOptions:false,negativeFeedbackConfirmation:null,genericNegativeFeedbackConfirmation:null,spamReportConfirmation:null,mayUndoHide:false});},render:function(){if(!this.props.visible&&!this.state.mayUndoHide)return t.createElement("li",{className:"_4_62"});var ka=this.props.negative,la=this.props.negativeTracking,ma=(("_33c")+(!this.props.isRead?' '+"_4af":'')+(this.state.showingOptions?' '+"_4ag":'')+(this.state.sendingFeedback?' '+"_4m8s":''));if(this.state.negativeFeedbackConfirmation){var na=this.state.negativeFeedbackConfirmation,oa,pa;if(this.state.canReportAsSpam)if(!this.props.useChevron){oa=t.createElement("span",null,t.createElement("span",{className:"mhs"},"·"),t.createElement("a",{href:"#",onClick:this._onReportSpam},fa._("Report app for spam")));}else pa=t.createElement("li",null,t.createElement("a",{href:"#",onClick:this._onReportSpam,className:"mls"},fa._("Report app for spam")));var qa=ia(this.props.application)?this._markAppAsVisible:this._onShow,ra=!this.props.useChevron?t.createElement("a",{href:"#",onClick:qa,className:"mls"},fa._("Undo")):null,sa=this.props.useChevron?t.createElement(o,{border:"none",spacing:"small",className:"_jeq"},t.createElement("li",null,t.createElement("a",{href:"#",onClick:qa,className:"mls"},fa._("Undo"))),pa,t.createElement("li",null,t.createElement("a",{href:"#",onClick:this._onOkayNegative,className:"mls"},fa._("OK")))):null;return (t.createElement("li",{className:ma,"data-gt":this.props.tracking},t.createElement("div",{className:"_4ai"},t.createElement(u,{interpolator:ha,ranges:na.ranges,aggregatedranges:na.aggregated_ranges,text:na.text}),ra,oa),sa));}var ta=this.state.spamReportConfirmation;if(ta){var ua=this.props.useChevron?t.createElement(o,{border:"none",spacing:"small",className:"_jeq"},t.createElement("li",null,t.createElement("a",{href:"#",onClick:this._onOkayNegative,className:"mls"},fa._("OK")))):null;return (t.createElement("li",{className:ma,"data-gt":this.props.tracking},t.createElement("div",{className:"_4ai"},t.createElement(u,{interpolator:ha,ranges:ta.ranges,aggregatedranges:ta.aggregated_ranges,text:ta.text})),ua));}if(this.state.genericNegativeFeedbackConfirmation){na=this.state.genericNegativeFeedbackConfirmation;var va=ka?t.createElement("li",null,t.createElement("a",{href:"#","data-gt":bb,onClick:this._turnOff,className:"mls",ref:"closeButton"},ka.menu_option_text)):null;return (t.createElement("li",{className:ma,"data-gt":this.props.tracking},t.createElement("div",{className:"_4ai"},t.createElement(u,{interpolator:ha,ranges:na.ranges,aggregatedranges:na.aggregated_ranges,text:na.text})),t.createElement(o,{border:"none",spacing:"small",className:"_jeq"},t.createElement("li",null,t.createElement("a",{href:"#",onClick:this._undoGenericNegative,className:"mls"},fa._("Undo"))),va,t.createElement("li",null,t.createElement("a",{href:"#",onClick:this._onOkayNegative,className:"mls"},fa._("OK"))))));}if(this.state.showingOptions&&!this.props.useChevron){var wa=ia(this.props.application)?this._markAppAsHidden:this._onHide;return (t.createElement("li",{className:ma,"data-gt":this.props.tracking},t.createElement("div",{className:"_4ai"},t.createElement("div",null,t.createElement(u,{interpolator:ha,ranges:ka.confirm_question.ranges,aggregatedranges:ka.confirm_question.aggregated_ranges,text:ka.confirm_question.text})),t.createElement("div",{className:"mts"},t.createElement(y,{"data-gt":this._getModifiedTrackingString(la.confirm),href:{url:'#'},label:ka.turn_off,use:"confirm",onClick:wa,disabled:this.state.sendingFeedback}),t.createElement(y,{"data-gt":this._getModifiedTrackingString(la.cancel),href:{url:'#'},label:fa._("Keep On"),onClick:this._onCancelNegativeFeedback,disabled:this.state.sendingFeedback})))));}var xa=null;if(this.props.title)xa=t.createElement(u,{interpolator:ha,ranges:this.props.title.ranges,aggregatedranges:this.props.title.aggregated_ranges,text:this.props.title.text,renderEmoji:true,renderEmoticons:true});var ya=null,za=null;if(ka){var ab=this._onClickCloseButton,bb;bb=this._getModifiedTrackingString(la.click);var cb=(("_4ah")+(' '+"_55m9"));ya=t.createElement(j,{className:cb,"data-gt":bb,size:"medium",tooltip:ka.button_tooltip,onClick:ab,ref:"closeButton"});}var db=r.localize(this.props.url),eb=null;if(!this.props.noPhotoPreviews)eb=p.getThumbnail(this.props.attachments,this.props.attached_story,this.props.feedback_context);var fb=eb&&r.snowliftable(db),gb=r.isVaultSetURI(db),hb=r.isAlbumDraftRecoveryDialogURI(db),ib=t.createElement(v,{className:"_55m9",isRead:!!this.props.isRead,onClick:this._markItemReadIfUnreadFromReadButton,readLabel:fa._("Read"),unreadLabel:fa._("Mark as Read")}),jb=null;if(this.props.useChevron){ib=null;ya=null;var kb=(("_1_0c")+(' '+"_55m9")),lb=null,mb=null;if(!this.props.isRead){lb=t.createElement(ga,{onclick:this._markItemReadIfUnread},"Mark as read");mb=t.createElement(ba,null);}var nb=null;if(ka)nb=t.createElement(ga,{onclick:this._onClickCloseButton,"data-gt":bb,ref:"closeButton"},t.createElement("div",{className:"_3-y-"},ka.menu_option_title),t.createElement("div",{className:"_3-y_"},ka.menu_option_text));var ob=this.props.gnfGiven?t.createElement(ga,{onclick:this._undoGenericNegative},t.createElement("div",{className:"_3-y-"},fa._("You aren't interested in this")),t.createElement("div",{className:"_3-y_"},fa._("Undo"))):t.createElement(ga,{onclick:this._onClickGenericNegative},t.createElement("div",{className:"_3-y-"},fa._("Not interested in this?")),t.createElement("div",{className:"_3-y_"},fa._("Let us know"))),pb=t.createElement(aa,null,ob,nb,mb,lb);jb=t.createElement(z,{alignh:"right",menu:pb,className:kb,onShow:this._onChevronShow,onHide:this._onChevronHide},t.createElement("div",{className:"_1_0d"}));}var qb=(fb||gb||hb)?db:this.props.ajaxify_url,rb=null,sb=null,tb=gb?x.getSyncedTabURI().toString():db;if(fb){rb='theater';}else if(hb){rb='async-post';}else if(gb||qb)rb='dialog';var ub=null,vb=this.props.actors[0];if(vb)ub={backgroundImage:'url('+vb.profile_picture.uri+')'};var wb=false;this.props.attachments.forEach(function(xb){if(wb)return;wb=xb.style_list.indexOf("notification_target")>=0||xb.style_list.indexOf("question")>=0;if(wb)return;});return (t.createElement("li",{className:ma,"data-gt":this.props.tracking,onMouseLeave:za},t.createElement("div",{className:"anchorContainer"},t.createElement("a",{href:tb,ajaxify:qb,className:(("_33e")+(this.props.useChevron?' '+"_1_0e":'')),rel:rb,onClick:sb,onMouseDown:this._markItemRead,onKeyDown:this._onKeyDownItem},t.createElement(m,null,t.createElement("span",{style:ub,className:((!this.props.isNotifsPage?"_33h":'')+(this.props.isNotifsPage?' '+"_12u1":''))}),t.createElement(l,{flex:l.FLEX.left},t.createElement("div",{className:"_4l_v"},xa,t.createElement(m,{className:(("_33f")+(this.state.isBizSite?' '+"_2g48":''))},t.createElement("img",{className:"_10cu",src:this.props.icon.uri}),t.createElement("span",null,t.createElement(w,{shorten:this.props.shortenTimestamp,time:this.props.timestamp.time,text:this.props.timestamp.text,verbose:this.props.timestamp.verbose,className:"_33g"})))),this._renderAttachedImage(eb)))),ib,ya,jb)));}});e.exports=ja;},null);
__d("NotificationJewelList.react",["Animation","Event","LoadingIndicator.react","NotificationListPropTypes","NotificationListItem.react","React","ScrollableArea.react","Vector","cx","debounce","fbt","getObjectValues","isEmpty"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t=160,u=530,v=40,w=430,x=l.createClass({displayName:"NotificationJewelList",propTypes:j,_isLoadingIndicatorVisible:function(){var y=this.refs.loading;if(!y)return false;var z=l.findDOMNode(this.refs.scrollable),aa=n.getElementDimensions(z).y;if(aa===0)return false;var ba=n.getElementPosition(z).y+aa,ca=n.getElementPosition(l.findDOMNode(y)).y;ca-=v;return ca<ba;},_calculateHeight:function(){var y=n.getViewportDimensions().y;return Math.min(this.props.maxHeight||u,y-t);},_keepOnLoading:function(){if(this.isMounted())this.props.afterScroll(this._isLoadingIndicatorVisible());},_renderItems:function(){return r(this.props.notifs).map(function(y){var z=y.alert_id;return (l.createElement(k,l.__spread({key:z,visible:!this.props.hiddenState[z],isRead:this.props.readState[z],gnfGiven:this.props.gnfState[z],negativeTracking:this.props.negativeTracking,shortenTimestamp:this.props.shortenTimestamp,useChevron:this.props.useChevron,onChevronShow:this.props.onChevronShow,onChevronHide:this.props.onChevronHide,parent:this},y)));}.bind(this));},componentDidMount:function(){var y=l.findDOMNode(this.refs.scrollable);h.listen(window,'resize',p(function(){if(!s(this.props.notifs))new g(y).to('height',this._calculateHeight()+'px').duration(100).go();}.bind(this)));},componentDidUpdate:function(y){if(this.props.paused&&!y.paused)if(this.props.shouldScroll&&this.refs.scrollable)this.refs.scrollable.getArea().scrollToTop(false);setTimeout(this._keepOnLoading,0);},render:function(){var y=this.props.notifs,z=null,aa=null,ba=w,ca=null;if(!s(y)){z=l.createElement("ul",{"data-gt":this.props.tracking},this._renderItems());aa=this._calculateHeight();}else if(!this.props.canFetchMore)z=l.createElement("div",{className:"_572e"},q._("No new notifications"));if(this.props.canFetchMore)ca=l.createElement(i,{color:"white",size:"small",ref:"loading",className:"_33i"});var da=(("_50-t")+(this.props.showingChevron?' '+"_2iy1":''));return (l.createElement("div",{className:da},l.createElement(m,{ref:"scrollable",width:ba,height:aa,fade:true,persistent:true,onScroll:p(this._keepOnLoading)},z,ca)));}});e.exports=x;},null);
__d("NotificationJewelListController",["NotificationList.react","NotificationJewelList.react","React"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(k,l){"use strict";this.$NotificationJewelListController0=k;this.$NotificationJewelListController1=l;this.$NotificationJewelListController2=false;this.$NotificationJewelListController3=false;this.$NotificationJewelListController4();}j.prototype.open=function(){"use strict";this.$NotificationJewelListController2=true;this.$NotificationJewelListController4();};j.prototype.pause=function(){"use strict";this.$NotificationJewelListController3=true;this.$NotificationJewelListController4();};j.prototype.unpause=function(){"use strict";this.$NotificationJewelListController3=false;this.$NotificationJewelListController4();};j.prototype.$NotificationJewelListController4=function(){"use strict";i.render(i.createElement(g,{hasEverBeenOpened:this.$NotificationJewelListController2,paused:this.$NotificationJewelListController3,tracking:this.$NotificationJewelListController1.tracking,negativeTracking:this.$NotificationJewelListController1.negativeTracking,shortenTimestamp:this.$NotificationJewelListController1.shortenTimestamp,businessID:this.$NotificationJewelListController1.businessID,maxHeight:this.$NotificationJewelListController1.maxHeight,useChevron:this.$NotificationJewelListController1.useChevron,numPerPage:5,listRenderer:h}),this.$NotificationJewelListController0);};e.exports=j;},null);
__d("PagesMessengerThreadDialogLink.react",["AsyncDialog","AsyncRequest","Link.react","MessageThreadViewSource","PagesMessagingConst","ReactComponentWithPureRenderMixin","React","URI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=m,p=o.PropTypes,q=m.createClass({displayName:"PagesMessengerThreadDialogLink",mixins:[l],propTypes:{threadID:p.string.isRequired,viewer:p.string.isRequired,folder:p.string},getInitialState:function(){return {permalinkURI:'#'};},componentDidMount:function(){this._getPermalinkURI(this.props);},componentWillReceiveProps:function(r){if(r.threadID!==this.props.threadID||r.folder!==this.props.folder)this._getPermalinkURI(r);},render:function(){return (m.createElement(i,{className:this.props.className,href:"#",onClick:this._handleClick,role:"button"},this.props.children));},_handleClick:function(r){r.preventDefault();g.send(new h(this.state.permalinkURI).setRelativeTo(r.target));},_getPermalinkURI:function(r){this.setState(this.getInitialState());var s=r.threadID,t=r.viewer,u=r.folder;d(['MercuryServerRequests'],function(v){var w=v.getForFBID(t);w.getServerThreadID(s,function(x){this.isMounted()&&this.setState({permalinkURI:n(k.LOAD_MESSAGE_THREAD_URI).setQueryData({pageid:t,threadid:s,threadElementID:x,folder:u,source:j.REFRESH_HIGHLANDER_JEWEL}).toString()});}.bind(this));}.bind(this));}});e.exports=q;},null);
__d("legacy:connect-xd",["XD"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();a.UnverifiedXD=b('XD').UnverifiedXD;a.XD=b('XD').XD;},3);
__d("clearImmediatePolyfill",["ImmediateImplementation"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=a.clearImmediate||b('ImmediateImplementation').clearImmediate;},null);
__d("HashtagParser",["URLMatcher","getHashtagRegex"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=100,j=30,k=/@\[([0-9]+):([0-9]+):((?:[^\\\]]*(?:\\.)*)*)\]/g;function l(da){var ea=y(da),fa=0,ga=0;return n(da).map(function(ha){while(fa<ea.length){var ia=ea[fa],ja=ia.offset-ga;if(ja<ha.offset){ga+=ia.token.length-ia.name.length;fa++;}else break;}return {marker:ha.marker,tag:ha.hashtag,rawOffset:ha.offset+ga,offset:ha.offset};});}function m(da){return o(da,t(da));}function n(da){var ea=aa(da);return o(ea,p(da,ea));}function o(da,ea){return r(da).slice(0,j).filter(function(fa){var ga=v(fa.offset,fa.hashtag.length,ea);return !ga&&fa.hashtag.length<=i;});}function p(da,ea){return u(s(da),t(ea));}var q=h();function r(da){var ea=[];da.replace(q,function(fa,ga,ha,ia,ja){ea.push({marker:ha,hashtag:ia,offset:ja+ga.length});});return ea;}function s(da){return ba(da).map(function(ea){return [ea.offset,ea.name.length];});}function t(da){var ea=[],fa,ga=0;while((fa=g.permissiveMatch(da))){var ha=da.indexOf(fa);ea.push([ga+ha,fa.length]);da=da.substring(ha+fa.length);ga+=ha+fa.length;}return ea;}function u(da,ea){var fa=[],ga=0,ha=0,ia=0;while(ga<da.length&&ha<ea.length)if(da[ga][0]>ea[ha][0]){fa[ia++]=ea[ha++];}else fa[ia++]=da[ga++];return fa.concat(da.slice(ga),ea.slice(ha));}function v(da,ea,fa){if(!fa)return false;var ga=x(fa,da);return w(da,ea,fa,ga)||w(da,ea,fa,ga+1);}function w(da,ea,fa,ga){if(!fa[ga])return false;var ha=fa[ga][0],ia=fa[ga][1];return !((da+ea-1<ha)||(da>ha+ia-1));}function x(da,ea){var fa=0,ga=da.length-1;while(fa<=ga){var ha=Math.floor((fa+ga)/2),ia=da[ha][0];if(ia==ea){return ha;}else if(ia<ea){fa=ha+1;}else ga=ha-1;}return ga;}function y(da){var ea=[];da.replace(k,function(fa,ga,ha,ia,ja){ea.push({token:fa,id:ga,type:ha,name:ia,offset:ja});});return ea;}function z(da){return da?da.replace(/\\([^\\])/g,'$1').replace(/\\\\/g,'\\'):null;}function aa(da){return da.replace(k,function(ea,fa,ga,ha,ia){return z(ha);});}function ba(da){var ea=0,fa=0;return y(da).map(function(ga){var ha=da.indexOf(ga.token,fa);fa=ha+1;ha-=ea;var ia=z(ga.name);ea+=ga.token.length-ia.length;if(ha>=0)return {id:ga.id,name:ia,type:ga.type,offset:ha};});}var ca={};ca.parse=l;ca.parseWithoutMentions=m;e.exports=ca;},null);
__d("clearImmediate",["clearImmediatePolyfill"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();e.exports=g.bind(a);},null);
__d("clearInterval",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=a.clearInterval.bind(a);},null);
__d("clearTimeout",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=a.clearTimeout.bind(a);},null);
__d("setInterval",["TimerStorage","setIntervalAcrossTransitions"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();e.exports=function(){for(var i=[],j=0,k=arguments.length;j<k;j++)i.push(arguments[j]);var l=h.apply(a,i);g.push(g.INTERVAL,l);return l;};},null);
__d("setTimeout",["TimerStorage","setTimeoutAcrossTransitions"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();e.exports=function(){for(var i=[],j=0,k=arguments.length;j<k;j++)i.push(arguments[j]);var l=h.apply(a,i);g.push(g.TIMEOUT,l);return l;};},null);
__d("replaceNativeTimer",["clearInterval","clearTimeout","setInterval","setTimeout"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=false;function l(){if(!k){k=true;j.nativeBackup=a.setTimeout;h.nativeBackup=a.clearTimeout;i.nativeBackup=a.setInterval;g.nativeBackup=a.clearInterval;a.setTimeout=j;a.clearTimeout=h;a.setInterval=i;a.clearInterval=g;}}e.exports=l;},null);
__d("TimeSpentArray",["Banzai","pageID","setTimeoutAcrossTransitions"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=2,k=j*32,l,m,n,o,p,q,r,s,t,u={},v;function w(){return {timeoutDelayMap:u,nextDelay:v,timeoutInSeconds:n};}function x(){if(l){var fa=Date.now();if(fa>p)r=Math.min(k,Math.ceil((fa/1000)-o));var ga=ca();if(ga)l(ga,v);}ba();}function y(){z();m=i(x,n*1000);}function z(){if(m){clearTimeout(m);m=null;}}function aa(fa){o=fa;p=o*1000;q=[1];for(var ga=1;ga<j;ga++)q.push(0);r=1;s+=1;t+=1;var ha=t.toString()+'_delay';v=u[ha];if(typeof v=='undefined')v=u.delay;var ia=t.toString()+'_timeout',ja=u[ia];if(typeof ja=='undefined')ja=u.timeout;ja=Math.min(ja,k);n=ja||k;y();}function ba(){z();q=null;}function ca(){if(!q)return null;return {tos_id:h,start_time:o,tos_array:q.slice(0),tos_len:r,tos_seq:t,tos_cum:s};}function da(fa){if(fa>=p&&(fa-p)<1000)return;ea(Math.floor(fa/1000));}function ea(fa){var ga=fa-o;if(ga<0||ga>=k)x();if(!q){aa(fa);}else{q[ga>>5]|=(1<<(ga&31));r=ga+1;s+=1;p=fa*1000;}}e.exports={init:function(fa,ga,ha){s=0;t=-1;l=fa;if(typeof ga=='object'&&ga!==null){u=ga;}else u={};if(!ha)ha=Date.now();aa(Math.floor(ha/1000));g.subscribe(g.SHUTDOWN,x);},update:function(fa){da(fa);},get:function(){return ca();},ship:function(){x();},reset:function(){ba();},testState:function(){return w();}};},null);
__d("FacebarResultStoreUtils",["FacebarGlobalOptions"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={getQueryFeatures:function(i){var j={};if(g.enableBootstrapRanking){if(i.raw_text)j.FEATURE_QUERY_LENGTH=i.raw_text.length;if(i.tokens){j.FEATURE_QUERY_TOKENS=i.tokens.length;j.FEATURE_QUERY_TOKEN_LENGTH_SUM=0;for(var k=0;k<i.tokens.length;k++)j.FEATURE_QUERY_TOKEN_LENGTH_SUM+=i.tokens[k].length;}}return j;},addFeatures:function(i,j,k,l,m,n){if(!i.features)return;i.features={FEATURE_QUERY_LENGTH:l.FEATURE_QUERY_LENGTH,FEATURE_QUERY_TOKENS:l.FEATURE_QUERY_TOKENS,FEATURE_QUERY_TOKEN_LENGTH_SUM:l.FEATURE_QUERY_TOKEN_LENGTH_SUM};i.features.FEATURE_IS_EXACT_NAME_MATCH=m;i.features.FEATURE_IS_STOP_WORD_MATCH=n;if(j&&j.length>0){var o=j.split(' ').length,p=0;for(var q=0;q<i.termMatches.length;++q)if(j.search(i.termMatches[q])>=0)p++;i.features.FEATURE_TITLE_TOKEN_MATCH_FRACTION=p/o;}if(k.tokens&&k.tokens.length>0){var r=j.search(k.tokens[0]);i.features.FEATURE_FIRST_TERM_MATCH_POSITION=r;i.features.FEATURE_FIRST_TERM_MATCH_TOKEN=j.substring(0,r+k.tokens[0].length).split(' ').length;i.termMatches.some(function(s){if(s.search(k.tokens[0])===0){i.features.FEATURE_FIRST_TERM_MATCH_TOKEN_FRACTION=k.tokens[0].length/s.length;return true;}return false;});i.features.FEATURE_IN_ORDER_MATCH=1;if(k.tokens.length>1){r=j.search(k.tokens[1]);i.features.FEATURE_SECOND_TERM_MATCH_POSITION=r;i.features.FEATURE_SECOND_TERM_MATCH_TOKEN=j.substring(0,r+k.tokens[1].length).split(' ').length;i.termMatches.some(function(s){if(s.search(k.tokens[1])===0){i.features.FEATURE_FIRST_TERM_MATCH_TOKEN_FRACTION=k.tokens[0].length/s.length;return true;}return false;});if(i.features.FEATURE_SECOND_TERM_MATCH_TOKEN<i.features.FEATURE_FIRST_TERM_MATCH_POSITION)i.features.FEATURE_IN_ORDER_MATCH=0;}}return i;},processEntityResult:function(i,j,k,l,m,n,o,p,q){var r={semantic:j.toString(),structure:[{type:'ent:'+i,text:k,uid:j}],type:i,cost:l,cache_id_length:0,features:[]};r.tuid=JSON.stringify({semantic:r.semantic,structure:r.structure});if(g.enableBootstrapRanking){r.termMatches=o[j.toString()];r=this.addFeatures(r,k.toLowerCase(),m,n,p,q);}return r;},getRawTextFromStructured:function(i){var j=i.map(function(k){return k.getText();});return j.join('');},getTextFromResult:function(i){var j=i.structure,k='';j.forEach(function(l){k+=l.text;});return k;}};e.exports=h;},null);
__d("HashtagSearchResultUtils",["FacebarResultStoreUtils","HashtagParser","HashtagSearchResultConfig","URI","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l={getHashtagFromQuery:function(m){var n=h.parse(m);if(n&&n.length===1&&n[0].offset===0)return n[0].tag;return false;},makeTypeaheadResult:function(m){var n=k._("Hashtag");return {category:n,path:j('/hashtag/'+m).toString(),photo:i.image_url,rankType:null,replace_results:i.boost_result?true:false,scaled_score:1,score:0,text:'#'+m,type:'hashtag_exact',uid:'hashtag:'+m};},makeFacebarEntry:function(m){var n=k._("Hashtag");return {category:n,path:j('/hashtag/'+m).toString(),photo:i.image_url,replace_results:i.boost_result?true:false,text:'#'+m,type:'hashtag_exact',uid:'hashtag:'+m};},makeFacebarResult:function(m){var n=g.processEntityResult('hashtag_exact','hashtag:'+m,'#'+m,i.hashtag_cost);n.parse={display:[{type:'ent:hashtag_exact',uid:'hashtag:'+m}],remTokens:[],suffix:''};n.tags={hashtag:'hashtag'};return n;}};e.exports=l;},null);
__d("ContextualHelpSearchController",["Event","AsyncRequest","DOM","CSS","Focus","Input","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=400;function o(){this._token=null;this._timerID=0;this._lastQuery=null;this.typing_listener=null;this.clear_listener=null;this.async_request=null;}m(o.prototype,{init:function(p,q,r,s,t,u){this.loader=p;this.search_box=q;this.topics_area=r;this.results_area=s;this.clear_button=t;this.typing_listener=g.listen(this.search_box,'keyup',this.setTimer.bind(this));this.clear_listener=g.listen(this.clear_button,'click',this.clearResults.bind(this));if(u==null||u.focusSearchBox==null||u.focusSearchBox)k.set(this.search_box);},source:'contextual_help',clearResults:function(){this.show(this.topics_area);this._lastQuery='';l.reset(this.search_box);k.set(this.search_box);if(this.async_request!==null){this.async_request.abort();this.async_request=null;}j.addClass(this.clear_button,'hidden_elem');},update:function(){var p=l.getValue(this.search_box);if(p===this._lastQuery)return;this._lastQuery=p;if(p===''){this.clearResults();return;}this.show(this.loader);var q={query:p,width:this._width||n,source:this.source};this.async_request=new h('/help/ajax/search/').setData(q).setHandler(function(r){this._update(r);}.bind(this));this.async_request.send();},_update:function(p){this.async_request=null;var q=p.getPayload().results;i.setContent(this.results_area,q);this.show(this.results_area);if(l.getValue(this.search_box)===''){this.clearResults();}else j.removeClass(this.clear_button,'hidden_elem');},setTimer:function(){if(this._timerID!==0)clearTimeout(this._timerID);this._timerID=setTimeout(this.update.bind(this),300);if(this.async_request!=null){this.async_request.abort();this.async_request=null;}},show:function(p){var q=[this.loader,this.topics_area,this.results_area];for(var r=0;r<q.length;r++)j.addClass(q[r],'hidden_elem');j.removeClass(p,'hidden_elem');}});e.exports=o;},null);
__d("IndexLogoutSponsorship",["Event","URI","ge"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j;function k(n){return setTimeout(function(){h('/index.php').addQueryData({l_s:'r'}).go();},n);}function l(n,o){var p=false,q=function(){if(p)return;clearTimeout(j);j=k(o);},r=function(){clearTimeout(j);p=true;};g.listen(document,{mousedown:r,mouseup:r,click:r,keydown:r,mousemove:q});if(n!==null){g.listen(n,'mouseover',function(){g.listen(window,'blur',r);});var s=i('email');try{s.focus();}catch(t){}}}var m={init:function(n,o){j=k(o);l(n,o);}};e.exports=m;},null);
__d("IntlUtils",["AsyncRequest","Cookie","goURI"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={setXmode:function(k){(new g()).setURI('/ajax/intl/save_xmode.php').setData({xmode:k}).setHandler(function(){document.location.reload();}).send();},setAmode:function(k){new g().setURI('/ajax/intl/save_xmode.php').setData({amode:k,app:false}).setHandler(function(){document.location.reload();}).send();},setLocale:function(k,l,m,n){if(!m)m=k.options[k.selectedIndex].value;j.saveLocale(m,true,null,l,n);},saveLocale:function(k,l,m,n,o){new g().setURI('/ajax/intl/save_locale.php').setData({aloc:k,source:n,app_only:o}).setHandler(function(p){if(l){document.location.reload();}else i(m);}).send();},setLocaleCookie:function(k,l){h.set('locale',k,7*24*3600000);i(l);}};e.exports=j;},null);
__d("legacy:intl-base",["IntlUtils"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();a.intl_set_xmode=g.setXmode;a.intl_set_amode=g.setAmode;a.intl_set_locale=g.setLocale;a.intl_save_locale=g.saveLocale;a.intl_set_cookie_locale=g.setLocaleCookie;},3);
__d("FansJewel",["AsyncRequest"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i){"use strict";i.subscribe('marked-seen',function(){new g('/ajax/pages/fans_seen.php').setMethod('POST').send();});}e.exports=h;},null);
__d("RequestsJewel",["AccessibilityLogger","Arbiter","AsyncRequest","AsyncSignal","ChannelConstants","CSS","DOM","Event","LinkController","Parent","ScrollableArea","Vector","$","copyProperties","ge","shield","fbt","requireWeak"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){b.__markCompiled&&b.__markCompiled();var y=null;x(['FriendBrowserCheckboxController'],function(aa){return y=aa;});t(z,{instance:null,getInstance:function(){return z.instance;},replaceJewelTitle:function(aa,ba){m.setContent(s(aa),ba);},updateFromDOM:function(){if(z.instance)z.instance.fromDom();}});function z(aa,ba,ca){"use strict";z.instance=this;this.countNew=0;this.jewel=aa;this.jewelFlyoutCase=aa.getRoot();this.jewelFlyout=u('fbRequestsFlyout');this.newCountSpan=u('newRequestCount');this.folder=ba;this.doNewMarkRead=ca;this.openTimestamp=0;this.$RequestsJewel0={};this.$RequestsJewel1={};this.$RequestsJewel2=0;this.shouldClearPredictionAssocOnClick=false;var da=u('requestsMarkReadButton');if(da)n.listen(da,'click',v(this.$RequestsJewel3,this));this.jewel.subscribe('marked-seen',v(this.$RequestsJewel4,this));this.jewel.subscribe('closed',v(this.$RequestsJewel5,this));this.jewel.subscribe('updated',this.$RequestsJewel6.bind(this));this.jewel.subscribe('opened',this.$RequestsJewel7.bind(this));o.registerHandler(this.$RequestsJewel8.bind(this));h.subscribe(k.getArbiterType('jewel_requests_add'),this.$RequestsJewel9.bind(this));h.subscribe(k.getArbiterType('jewel_friending_notifs'),this.$RequestsJewela.bind(this));h.subscribe(k.getArbiterType('jewel_requests_remove_old'),this.$RequestsJewelb.bind(this));h.subscribe(k.getArbiterType('friend_requests_seen'),this.$RequestsJewelc.bind(this));n.listen(this.jewelFlyout,'submit',function(fa){var ga=p.byClass(fa.getTarget(),'objectListItem');if(ga){l.removeClass(ga,'jewelItemNew');l.addClass(ga,'jewelItemResponded');}}.bind(this));var ea=m.find(u('fbRequestsJewel'),'a[rel="toggle"]');n.listen(ea,'focus',function(fa){g.logFocusIn();}.bind(this));this.setupScroll();}z.prototype.setupScroll=function(){"use strict";var aa=m.scry(this.jewelFlyout,'.uiScrollableAreaWrap')[0];if(aa){this.$RequestsJeweld=aa;this.$RequestsJewele=0;this.$RequestsJewelf=n.listen(aa,'scroll',this.$RequestsJewelg.bind(this),n.Priority.$RequestsJewelh);}};z.prototype.fromDom=function(){"use strict";m.scry(this.jewelFlyout,'.jewelItemList li.objectListItem').forEach(function(aa){var ba=aa.getAttribute('id');if(ba){var ca=u(ba+'_status'),da=this.$RequestsJeweli(ba),ea=ca.getAttribute('data-ego');if(da.requester){this.$RequestsJewel0[da.requester]=ba;if(ea)this.$RequestsJewel1[ea]=ea;}++this.$RequestsJewel2;}}.bind(this));this.$RequestsJewelj();};z.prototype.$RequestsJewelk=function(aa){"use strict";var ba=aa.match(/^(\d+)_(\d+)/);return (ba)?{requester:ba[1],type:ba[2]}:(void 0);};z.prototype.$RequestsJeweli=function(aa){"use strict";var ba=aa?this.$RequestsJewelk(aa):(void 0),ca;if(ba&&ba.requester){ca=parseInt(ba.requester,10);if(isNaN(ca))ca=(void 0);}var da;if(ba&&ba.type){da=parseInt(ba.type,10);if(isNaN(da))da=(void 0);}return {requester:ca,type:da};};z.prototype.$RequestsJewell=function(){"use strict";if(this.countNew>0)this.countNew-=1;};z.prototype.$RequestsJewel8=function(aa,event){"use strict";var ba=p.byClass(aa,'jewelItemNew');if(ba&&p.byClass(ba,'fbRequestList')&&p.byClass(ba,'beeperEnabled')){var ca=this.$RequestsJewelk(ba.id);ca&&this.$RequestsJewel4(ca.requester,ca.type);this.$RequestsJewell();h.inform('jewel/count-updated',{jewel:'requests',count:this.countNew});l.removeClass(ba,'jewelItemNew');}return true;};z.prototype.$RequestsJewelg=function(){"use strict";var aa=m.scry(this.$RequestsJeweld,'.uiMorePager');if(!aa)return;var ba=aa.pop();if(ba){var ca=r.getElementPosition(ba,'viewport').y;if(ca>0)l.addClass(p.byClass(this.$RequestsJeweld,'uiScrollableArea'),'contentAfter');var da=m.find(ba,'a');if(!da)return;var ea=r.getElementPosition(da,'viewport').y;if(ea==this.$RequestsJewele)return;var fa=r.getElementPosition(this.$RequestsJeweld,'viewport').y+r.getElementDimensions(this.$RequestsJeweld).y;if(ea-300<fa&&ea>0){this.$RequestsJewele=ea;var ga=da.getAttribute('ajaxify');if(ga){new i(ga).setRelativeTo(da).setStatusElement(p.byClass(da,'stat_elem')).send();}else y&&y.getInstance('jewel').showMore();}}};z.prototype.$RequestsJewela=function(aa,ba){"use strict";if(!ba||this.jewel.isOpen())return;if(ba.obj.notif_type!=='friend_confirmed')return;if(u('fbRequestsJewelLoading')){new i().setURI('/ajax/requests/loader/').send();return;}var ca={};ca.reloadcontent=true;new i().setURI('/ajax/requests/loader/').setData(ca).send();};z.prototype.$RequestsJewel9=function(aa,ba){"use strict";if(!ba)return;var ca=ba.obj.from,da=ba.obj.suggester,ea=this.$RequestsJeweli(this.$RequestsJewel0[ca]).type,fa=ea===19&&!da;if(!fa&&(ea||this.jewel.isOpen()))return;if(u('fbRequestsJewelLoading')){new i().setURI('/ajax/requests/loader/').send();}else{var ga={};ga.reloadcontent=true;new i().setURI('/ajax/requests/loader/').setData(ga).send();}};z.prototype.$RequestsJewelb=function(aa,ba){"use strict";if(!ba||this.jewel.isOpen()||u('fbRequestsJewelLoading')!==null)return;var ca=this.$RequestsJewel0[ba.obj.from],da=ca&&u(ca);if(da){if(l.hasClass(da,'jewelItemNew')){this.$RequestsJewell();h.inform('jewel/count-updated',{jewel:'requests',count:this.countNew});}if(!l.hasClass(da,'jewelItemResponded')){m.remove(da);delete this.$RequestsJewel0[ba.obj.from];--this.$RequestsJewel2;this.$RequestsJewelj();}}};z.prototype.$RequestsJewel3=function(){"use strict";this.jewel.markSeen();this.$RequestsJeweln();};z.prototype.$RequestsJewel4=function(aa,ba){"use strict";var ca=m.scry(this.jewelFlyout,'li');new j('/ajax/gigaboxx/endpoint/UpdateLastSeenTime.php',{folder:this.folder,first_item:ca[0].id}).send();var da=typeof aa!='undefined'&&typeof ba!='undefined'?{requester:aa,type:ba}:{};this.doNewMarkRead&&new j('/ajax/requests/mark_read/',da).send();};z.prototype.$RequestsJewelc=function(aa,ba){"use strict";h.inform('jewel/count-updated',{jewel:'requests',count:0});};z.prototype.$RequestsJeweln=function(aa,ba){"use strict";m.scry(this.jewel.root,'li.jewelItemNew').forEach(function(ca){l.removeClass(ca,'jewelItemNew');});};z.prototype.$RequestsJewel6=function(aa,ba){"use strict";this.countNew=ba.count;l.conditionClass(this.jewelFlyout,'beeperUnread',this.countNew>0);l.conditionClass(this.jewelFlyoutCase,'showRequests',this.countNew>0);if(this.newCountSpan){var ca=this.countNew==1?w._("{num} NEW REQUEST",[w.param("num",this.countNew)]):w._({"*":"{num} NEW REQUESTS"},[w.param("num",this.countNew,[0])]);m.setContent(this.newCountSpan,ca);}};z.prototype.$RequestsJewelj=function(){"use strict";m.scry(this.jewelFlyout,'li.empty').forEach(function(aa){l.conditionShow(aa,this.$RequestsJewel2<=0);}.bind(this));};z.prototype.$RequestsJewel7=function(){"use strict";h.inform('requestsJewel/opened');var aa=m.scry(this.jewelFlyout,'.uiScrollableArea')[0];if(u('fbRequestsJewelLoading')){var ba=Date.now();if(this.openTimestamp+5000<ba){this.openTimestamp=ba;new i().setURI('/ajax/requests/loader/').setData({log_impressions:true}).send();}}else{var ca=Object.keys(this.$RequestsJewel0);if(ca.length>0){new i().setURI('/friends/requests/log_impressions').setData({ids:ca.join(','),ref:'jewel'}).send();var da=Object.keys(this.$RequestsJewel1);if(da.length>0)new i().setURI('/growth/jewel/impression_logging.php').setData({egodata:da}).send();}}aa&&q.poke(aa);};z.prototype.$RequestsJewel5=function(){"use strict";h.inform('requestsJewel/closed');this.$RequestsJeweln();};e.exports=z;},null);
__d("JewelX",["Event","Arbiter","ArbiterMixin","CSS","DOM","HTML","Keys","TabIsolation","Toggler","csx","copyProperties","emptyFunction","reportData","setTimeoutAcrossTransitions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();var u=function(v,w){v&&w&&this.init(v,w);};q(u,{_instancesByName:{},_resizeListener:null});q(u.prototype,i,{init:function(v,w){this.name=w.name;this.root=v;this.badge=w.badge;this.countNew=0;this.initialCount=0;this.escHandler=null;this.togglerInstance=o.createInstance(v).setSticky(false);if(w.keepOpenForSnowlift)this.togglerInstance.setPrePageTransitionCallback(this._onPrePageTransition.bind(this));u._instancesByName[this.name]=this;var x=this.getFlyout(),y=new n(x);o.createInstance(x).setSticky(false);o.listen('show',this.root,function(z){this._logFirstClick();this.hasNew()&&this.markSeen();this.reset();this.inform('opened');h.inform('layer_shown',{type:'Jewel'});y.enable();this.setupEvents();}.bind(this));o.listen('hide',this.root,function(z,aa){this.hasNew()&&this.markSeen();this.reset();this.inform('closed');h.inform('layer_hidden',{type:'Jewel'});y.disable();this.removeEvents();}.bind(this));h.subscribe('jewel/count-updated',function(z,aa){aa.jewel==this.name&&this.update(aa);}.bind(this));h.subscribe('jewel/count-initial',function(z,aa){aa.jewel==this.name&&this.setInitial(aa);}.bind(this));h.subscribe('jewel/reset',function(z,aa){aa.jewel==this.name&&this.reset();}.bind(this));h.subscribe('jewel/focus',function(z,aa){if(this.isOpen())o.hide(this.root);}.bind(this));u._resizeListener=u._resizeListener||(function(){var z=null;return g.listen(window,'resize',function(){clearTimeout(z);z=t(h.inform.bind(h,'jewel/resize'),100);});})();},getRoot:function(){return this.root;},getFlyout:function(){if(typeof this._flyout==='undefined')this._flyout=k.find(this.root,".__tw");return this._flyout;},hasNew:function(){return j.hasClass(this.root,'hasNew');},isOpen:function(){return j.hasClass(this.root,'openToggler');},reset:function(){j.removeClass(this.root,'hasNew');},setContent:function(v){var w=k.find(this.root,'ul.jewelItemList');k.setContent(w,l(v));},update:function(v){this.countNew=v.count;if(typeof this.countNew==='number'&&this.countNew<0)this.countNew=0;this.badge.setLegacyContent(this.countNew);var w=isNaN(this.countNew)||this.countNew>0;j.conditionClass(this.root,'hasNew',w);this.inform('updated',v);},setInitial:function(v){this.initialCount=v;},setupEvents:function(){this.escHandler=g.listen(document.documentElement,'keydown',function(v){if(v.keyCode===m.ESC&&this.isOpen())o.hide(this.root);}.bind(this));},removeEvents:function(){if(this.escHandler){this.escHandler.remove();this.escHandler=null;}},markSeen:function(){h.inform('jewel/count-updated',{jewel:this.name,count:0},h.BEHAVIOR_STATE);this.inform('marked-seen');},_onPrePageTransition:function(v,w){if(!this._isSnowliftURI(w.from)&&!this._isSnowliftURI(w.to))this.togglerInstance&&this.togglerInstance.hide();},_isSnowliftURI:function(v){return v&&v.getQueryData().hasOwnProperty('theater');},_logFirstClick:function(){this._logFirstClick=r;s('jewel_click',{gt:{count:this.countNew,initial:this.initialCount,jewel:this.name}});}});e.exports=u;},null);
__d("FormTypeABTester",["Base64","Event"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(j){var k=16,l=32,m=65,n=90,o=48,p=57,q=58,r=63,s=91,t=94,u=0,v=0,w=0,x=0,y=[],z=null,aa=[],ba=[],ca=[],da=[];for(var ea=0;ea<10;ea++){aa.push(0);ba.push(0);}for(var fa=0;fa<10;fa++){ba.push(0);ca.push(0);da.push(0);}var ga=function(ja){var ka=window.event?Date.now():ja.timeStamp,la=window.event?window.event.keyCode:ja.which;la%=128;if((la>=m&&la<=n)||la==l){u++;}else if(la>=o&&la<=p){v++;}else if(la>=q&&la<=r||la>=s&&la<=t){w++;}else x++;y[la]=ka;if(z){var ma=ka-z;if(ma>=0&&((la>=m&&la<=n)||la==l))if(ma<400){ba[Math.floor(ma/20)]++;}else if(ma<1000){ca[Math.floor((ma-400)/60)]++;}else if(ma<3000)da[Math.floor((ma-1000)/200)]++;}z=ka;},ha=function(ja){var ka=window.event?Date.now():ja.timeStamp,la=window.event?window.event.keyCode:ja.which,ma=ka-y[la%128];if(ma>=50&&ma<250)aa[Math.floor((ma-50)/20)]++;},ia=function(ja){var ka=Math.max.apply(Math,ja),la=[];ja.forEach(function(ma){la.push(Math.floor(ma*63/(ka||1)));});return la;};this.getDataVect=function(){var ja=ba.concat(ca,da);return ia(ja).concat(ia(aa),[u/2,v/2,w/2,x/2]);};this.getData=function(){return g.encodeNums(this.getDataVect());};h.listen(j,{keyup:ha.bind(this),keydown:ga.bind(this)});}e.exports=i;},null);
__d("legacy:onload-action",["PageHooks"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();a._domreadyHook=g._domreadyHook;a._onloadHook=g._onloadHook;a.runHook=g.runHook;a.runHooks=g.runHooks;a.keep_window_set_as_loaded=g.keepWindowSetAsLoaded;},3);
__d("LitestandNewsfeedCountUpdater",["Arbiter","AsyncRequest","LitestandMessages","LitestandSidebarBookmarkConfig","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l,m;function n(){m&&clearTimeout(m);if(l)return;m=setTimeout(o,j.nf_count_query_interval_ms);}function o(){if(l)return;new h().setURI('/ajax/litestand/newsfeed_count').setHandler(function(r){if(l)return;p(r.getPayload());n();}).setAllowCrossPageTransition(true).send();}function p(r){g.inform(i.UPDATE_HOME_COUNT,{count:r,onHome:l},g.BEHAVIOR_STATE);}var q={init:function(){q.init=k;g.subscribe(i.NEWSFEED_LOAD,function(){l=true;p(0);});g.subscribe(i.LEAVE_HOME,function(){l=false;n();});n();}};e.exports=q;},null);
__d("LitestandChromeHomeCount",["Arbiter","CSS","DOM","Event","LitestandMessages","LitestandNewsfeedCountUpdater","Parent","UserAgent_DEPRECATED","csx","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=20,r,s,t,u,v,w={init:function(x){v=x;s=i.find(document,"div._uaw ._5ahz");r=s.parentNode;t=m.byClass(r,"_1ayn");u=false;g.subscribe(k.UPDATE_HOME_COUNT,function(y,z){w.updateBadge(z.onHome?0:z.count);});j.listen(t,'click',function(event){var y=event.getModifiers();if(y.shift||(n.osx()&&y.meta)||(n.windows()&&y.control))w.updateBadge(0);});l.init();w.updateBadge(v);},updateBadge:function(x){v=x;var y=x>0;w.toggleBadge(y);if(y){var z=x>q?q+'+':x;i.setContent(s,z);}},toggleBadge:function(x){if(u===x)return;u=x;h.conditionClass(r,"_5ahy",!x);}};e.exports=w;},null);
__d("EagleEye",["Arbiter","CurrentUser","EagleEyeConfig","Env","ISB","PageEvents","TrackingConfig","WebStorage","SessionName"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=(window.location.protocol=='https:'&&document.cookie.match(/\bcsm=1/))?'; secure':'',q=o.TOKEN+o.getName()+'_',r=new Date(Date.now()+604800000).toGMTString(),s=window.location.hostname.replace(/^.*(facebook\..*)$/i,'$1'),t='; expires='+r+';path=/; domain='+s+p,u=0,v,w=i.sessionStorage&&n.getSessionStorage(),x=document.cookie.length,y=false,z=Date.now();function aa(ea){return q+(u++)+'='+encodeURIComponent(ea)+t;}function ba(){var ea=[],fa=false,ga=0,ha=0;this.isEmpty=function(){return !ea.length;};this.enqueue=function(ia,ja){if(ja){ea.unshift(ia);}else ea.push(ia);};this.dequeue=function(){ea.shift();};this.peek=function(){return ea[0];};this.clear=function(ia){x=Math.min(x,document.cookie.length);if(!y&&(new Date()-z>60000))y=true;var ja=!ia&&(document.cookie.search(o.TOKEN)>=0),ka=!!i.cookieHeaderLimit,la=i.cookieCountLimit||19,ma=i.cookieHeaderLimit||3950,na=la-5,oa=ma-1000;while(!this.isEmpty()){var pa=aa(this.peek());if(ka&&(pa.length>ma||(y&&pa.length+x>ma))){this.dequeue();continue;}if((ja||ka)&&((document.cookie.length+pa.length>ma)||(document.cookie.split(';').length>la)))break;document.cookie=pa;ja=true;this.dequeue();}var qa=Date.now();if(ia||!fa&&ja&&((ha>0)&&(Math.min(10*Math.pow(2,ha-1),60000)+ga<qa))&&g.query(l.NATIVE_ONLOAD)&&(!this.isEmpty()||(document.cookie.length>oa)||(document.cookie.split(';').length>na))){var ra=new Image(),sa=this,ta=m.domain||'';fa=true;ra.onload=function wa(){fa=false;ha=0;sa.clear();};ra.onerror=ra.onabort=function wa(){fa=false;ga=Date.now();ha++;};var ua=k.token?'&fb_isb='+k.token:'',va='&__user='+h.getID();ra.src=ta+'/ajax/nectar.php?asyncSignal='+(Math.floor(Math.random()*10000)+1)+ua+va+'&'+(!ia?'':'s=')+qa;}};}v=new ba();if(w){var ca=function(){var ea=0,fa=ea;function ga(){var ja=sessionStorage.getItem('_e_ids');if(ja){var ka=(ja+'').split(';');if(ka.length==2){ea=parseInt(ka[0],10);fa=parseInt(ka[1],10);}}}function ha(){var ja=ea+';'+fa;sessionStorage.setItem('_e_ids',ja);}function ia(ja){return '_e_'+((ja!==(void 0))?ja:ea++);}this.isEmpty=function(){return fa===ea;};this.enqueue=function(ja,ka){var la=ka?ia(--fa):ia();sessionStorage.setItem(la,ja);ha();};this.dequeue=function(){this.isEmpty();sessionStorage.removeItem(ia(fa));fa++;ha();};this.peek=function(){var ja=sessionStorage.getItem(ia(fa));return ja?(ja+''):ja;};this.clear=v.clear;ga();};v=new ca();}var da={log:function(ea,fa,ga){if(j.no_cookies)return;var ha=[o.getName(),Date.now(),ea].concat(fa);ha.push(ha.length);function ia(){var ja=JSON.stringify(ha);try{v.enqueue(ja,!!ga);v.clear(!!ga);}catch(ka){if(w&&(ka.code===1000)){v=new ba();w=false;ia();}}}ia();},getSessionID:function(){return o.getName();}};e.exports=da;a.EagleEye=da;},3);
__d("OptionStorage",["WebStorage","copyProperties"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(j,k,l){this.name=j;this.reviver=k||this._reviver;this.replacer=l||this._replacer;this._read();}h(i.prototype,{_read:function(j,k){this.options={};try{var m=g.getLocalStorage();if(m&&m[this.name])this.options=JSON.parse(m[this.name],this.reviver);}catch(l){}},_write:function(){try{var k=g.getLocalStorage();if(k){var l=h({},this.options);k[this.name]=JSON.stringify(l,this.replacer);}}catch(j){}},_reviver:function(j,k){if(k){var l=/^\[RegExp (.*)\]$/.test(k)&&RegExp.$1;if(l)k=new RegExp(l.replace(/^\/|\/$/g,''));return k;}},_replacer:function(j,k){if(k instanceof RegExp){k='[RegExp '+k+']';this[j]=k;}return k;},get:function(j,k){return j in this.options?this.options[j]:k;},set:function(j,k){if(k==null){delete this.options[j];}else this.options[j]=k;this._write();}});e.exports=i;},null);
__d("LoginFormController",["Event","ge","Button","Cookie"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();f.init=function(k,l,m){g.listen(k,'submit',function(){if(window.__cookieReload)window.clearInterval(window.__cookieReload);i.setEnabled(l,false);setTimeout(i.setEnabled.bind(null,l,true),15000);});var n=h('lgnjs');if(n){var o=Math.floor(Date.now()/1000);n.value=o;}var p=parseInt(j.get('m_ts'),10),q=m!=null;if(p>o-60)q=false;if(q){var r,s=function(){if(j.get('c_user')!=null){window.clearInterval(r);j.set('m_ts',Math.floor(Date.now()/1000),null,'/',false);window.location.href=m;}};r=window.setInterval(s,1000);s();}};},null);
__d("MercuryUnseenState",["MercuryFolders","KeyedCallbackManager","LogHistory","MercuryActionType","MercurySingletonMixin","MercuryThreadInfo","MercuryThreadlistConstants","MessagingTag","MercuryServerRequests","MercuryThreadInformer","MercuryThreads","copyProperties","createObjectFrom","isEmpty"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();var u=m.MAX_UNSEEN_COUNT,v='unseen_thread_hash',w='unseen_thread_list',x=i.getInstance('mercury_unseen_state');function y(na){this._fbid=na;this._serverRequests=o.getForFBID(this._fbid);this._threads=q.getForFBID(this._fbid);this._threadInformer=p.getForFBID(this._fbid);this._initialUnseenCount=null;this._lastSeenTimestamp=0;this._maxCount=false;this._pendingServerUpdates=false;this._unseenResources=new h();this._serverRequests.subscribe('update-unseen',function(oa,pa){ea(this,pa);}.bind(this));this._serverRequests.subscribe('update-thread-ids',function(oa,pa){ka(this,pa);}.bind(this));}r(y.prototype,{getUnseenCount:function(){if(this.exceedsMaxCount()){x.error('unguarded_unseen_count_fetch',{});return 0;}return da(this)||0;},exceedsMaxCount:function(){return this._maxCount||(da(this)>u);},markAsSeen:function(){var na=da(this);if(na===null){this._pendingServerUpdates=true;}else if(na>0||this._maxCount){this._serverRequests.markSeen();var oa=this._serverRequests.getLastActionTimestamp();fa(this,oa,[]);}}});r(y,k);function z(na,oa,pa){var qa={};qa[oa]=0;ha(na,qa,pa);}function aa(na,oa){na._unseenResources.setResource(v,oa);na._unseenResources.setResource(w,Object.keys(oa));}function ba(na,oa){var pa=na._unseenResources.executeOrEnqueue(v,oa),qa=na._unseenResources.getUnavailableResources(pa);if(qa.length)na._serverRequests.fetchUnseenThreadIDs();}function ca(na){return na._unseenResources.getResource(v);}function da(na){var oa=na._unseenResources.getResource(w);if(oa){return oa.length;}else return na._initialUnseenCount;}function ea(na,oa){var pa=ma(oa);if(oa.unseen_thread_fbids){oa.unseen_thread_fbids.forEach(function(ab){if(ab.folder!=n.INBOX)return;var bb=ab.thread_fbids||[];bb=bb.concat(ab.other_user_fbids||[]);var cb=ja(na,bb),db=na._lastSeenTimestamp;if(pa&&pa.seen_timestamp)db=pa.seen_timestamp;fa(na,db,cb);if(pa&&pa.unseen_count>u)na._maxCount=true;});}else if(pa&&pa.seen_timestamp){na._lastSeenTimestamp=pa.seen_timestamp;if(pa.unseen_count>u){na._maxCount=true;aa(na,{});}else{na._initialUnseenCount=pa.unseen_count;if(na._initialUnseenCount===0)aa(na,{});}}else{if(na._maxCount)return;var qa=oa.actions;if(!qa||!(qa.length))return;var ra={},sa={};for(var ta=0;ta<qa.length;ta++){var ua=qa[ta];if(ua.is_forward)continue;var va=ua.action_type,wa=ua.other_user_fbid?ua.other_user_fbid:ua.thread_fbid,xa=ua.thread_id?ua.thread_id:wa;if(va==j.MARK_THREAD_SEEN){z(na,xa,ua.persistent);continue;}if(!la(na,ua))continue;if(va==j.USER_GENERATED_MESSAGE||va==j.LOG_MESSAGE){var ya=ra[xa]?ua.timestamp>ra[xa]:false,za=ya||!ra[xa];if(ua.is_unread&&za)na._threads.getThreadMeta(xa,function(ab){var bb=false;if(ab&&ab.last_read_timestamp)if(ab.last_read_timestamp>=ua.timestamp)bb=true;if(!l.isMuted(ab)&&!bb)ra[xa]=ua.timestamp;});}else if(va==j.CHANGE_READ_STATUS&&ua.mark_as_read)sa[xa]=ua.timestamp;}ga(na,ra);ha(na,sa);}if(na._pendingServerUpdates){na._pendingServerUpdates=false;na.markAsSeen();}}function fa(na,oa,pa){var qa=ca(na);if(qa===(void 0)||oa>na._lastSeenTimestamp||na._maxCount){na._lastSeenTimestamp=oa;pa=pa||[];if(pa.length<=u)na._maxCount=false;var ra={},sa=ca(na)||{};for(var ta in sa)if(sa[ta]!==true){var ua=sa[ta];if(ia(na,ua))ra[ta]=ua;}var va=r(s(pa,true),ra);aa(na,va);na._threadInformer.updatedUnseenState();}}function ga(na,oa){if(na._maxCount)return;var pa={},qa=false;for(var ra in oa){var sa=oa[ra];if(ia(na,sa)){pa[ra]=sa;qa=true;}}if(!qa)return;ba(na,function(ta){for(var ua in pa){var va=pa[ua];if(!ta[ua]&&ia(na,va))ta[ua]=pa[ua];}aa(na,ta);na._threadInformer.updatedUnseenState();});}function ha(na,oa,pa){var qa=false;if(!t(oa))qa=true;if(qa)ba(na,function(ra){var sa=false;for(var ta in oa){var ua=oa[ta],va=ua>ra[ta];if(ra[ta]&&(!ua||va)){delete ra[ta];sa=true;}}if(sa){aa(na,ra);na._threadInformer.updatedUnseenState();if(pa&&da(na)===0)na._serverRequests.markSeen();}});}function ia(na,oa){return oa>na._lastSeenTimestamp;}function ja(na,oa){return oa.map(na._serverRequests.convertThreadIDIfAvailable,na._serverRequests);}function ka(na,oa){var pa=ca(na);if(!pa)return;for(var qa in oa){var ra=oa[qa];if(pa[qa]){pa[ra]=pa[qa];delete pa[qa];}}aa(na,pa);}function la(na,oa){var pa=oa.thread_id?na._threads.getThreadMetaNow(oa.thread_id):null,qa=pa?g.getFromMeta(pa):oa.folder;return qa===n.INBOX||qa===(void 0);}function ma(na){var oa=(na.message_counts||[]);for(var pa=0;pa<oa.length;pa++)if(oa[pa].folder==n.INBOX)return oa[pa];return null;}e.exports=y;},null);
__d("MercuryJewelCountControl",["Arbiter","DOM","copyProperties","shield","UserActivity","MercuryServerRequests","MercuryThreadInformer","MercuryUnseenState"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=b('MercuryServerRequests').get(),m=b('MercuryThreadInformer').get(),n=b('MercuryUnseenState').get(),o,p,q,r=function(t){if(t||(q.isOpen()&&k.isActive()))n.markAsSeen();},s=function(t,u){o=t;p=h.find(o,'#mercurymessagesCountValue');q=u;this.render();l.subscribe('model-update-completed',function(v,w){r(false);});m.subscribe('unseen-updated',this.render.bind(this));q.subscribe('marked-seen',j(r,this,true));};i(s.prototype,{render:function(){g.inform('jewel/count-updated',{jewel:'mercurymessages',count:n.getUnseenCount()},g.BEHAVIOR_STATE);}});e.exports=s;},null);
__d("MercuryThreadlistContainer.react",["Bootloader","immutable","MercuryAPIArgsSource","MercuryThreadlistConstants","P2PNUXRenderer.react","React","SubscriptionsHandler"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=l,o=n.PropTypes,p='search',q=l.createClass({displayName:"MercuryThreadlistContainer",propTypes:{ChildClass:o.func.isRequired,viewer:o.string.isRequired,folder:o.string.isRequired},getInitialState:function(){return {isLoading:true,isSearching:false,threads:h.Map()};},componentDidMount:function(){g.loadModules(["MercuryOrderedThreadlist","MercuryThreadInformer","MercuryThreads"],function(r,s,t){this._threadlist=r.getForFBID(this.props.viewer);this._threads=t.getForFBID(this.props.viewer);this._informer=s.getForFBID(this.props.viewer);this._subscriptions=new m();this._subscriptions.addSubscriptions(this._informer.subscribe('threadlist-updated',function(u,v){this._updateThreads(this.props.folder);}.bind(this)));this._handleFolderChange(this.props.folder);}.bind(this));},componentWillReceiveProps:function(r){if(r.folder!==this.props.folder)this._handleFolderChange(r.folder);},componentWillUnmount:function(){this._cancelThreadsCallback();this._cancelThreadlistCallback();this._subscriptions&&this._subscriptions.release();},render:function(){var r=this.props,s=r.ChildClass,t=r.folder,u=(function(w,x){var y={},z=Object.prototype.hasOwnProperty;if(w==null)throw new TypeError();for(var aa in w)if(z.call(w,aa)&&!z.call(x,aa))y[aa]=w[aa];return y;})(r,{ChildClass:1,folder:1}),v=this.state.isSearching?this.state.threads.get(p)||[]:this.state.threads.get(t)||[];return (l.createElement(s,l.__spread({},u,{isLoaded:!!this._threadlist&&this._threadlist.hasLoadedThreadlist(t),isLoading:this.state.isLoading,isSearching:this.state.isSearching,onLoadMoreRequest:this._loadMoreThreads,onQuery:this._handleQuery,onSearchResults:this._handleSearchResults,p2pNUX:this._renderP2PNUX(),threads:v})));},_renderP2PNUX:function(){return (l.createElement(k,{type:"jewel"}));},_handleFolderChange:function(r){if(!this._hasInitialThreads(r)){this._loadThreads(r,j.JEWEL_THREAD_COUNT+1);}else if(this.state.isLoading){this.setState({isLoading:false},function(){this._updateThreads(r);}.bind(this));}else this._updateThreads(r);},_loadMoreThreads:function(){if(!this.state.isSearching&&!this.state.isLoading&&!this._threadlist.hasLoadedThreadlist(this.props.folder))this._loadThreads(this.props.folder,this._getThreadCount(this.props.folder)+j.JEWEL_MORE_COUNT+1);},_loadThreads:function(r,s){if(!this._threadlist)return;this._cancelThreadlistCallback();this.setState({isLoading:true},function(){var t=this._threadlist.getThreadlist(j.RECENT_THREAD_OFFSET,s,r,function(u){return this.setState({isLoading:false});}.bind(this),true,i.JEWEL);this._threadlistSub={subscriberID:t,folder:r};}.bind(this));},_updateThreads:function(r,s){if(!this._threadlist||!this._threads)return;this._cancelThreadsCallback();var t=s||this._threadlist.getAvailableThreadlistNow(r);this._threadsSub=this._threads.getMultiThreadMeta(t,function(u){this.setState({threads:this.state.threads.set(r,t.map(function(v){return u[v];}))});}.bind(this));},_hasInitialThreads:function(r){return !!(this._threadlist&&(this._threadlist.getThreadCount(r)>=j.JEWEL_THREAD_COUNT+1||this._threadlist.hasLoadedThreadlist(r)));},_getThreadCount:function(r){var s=this.state.threads.get(r);return s?s.length:0;},_cancelThreadsCallback:function(){this._threads&&this._threadsSub&&this._threads.unsubscribe(this._threadsSub);},_cancelThreadlistCallback:function(){this._threadlist&&this._threadlistSub&&this._threadlist.unsubscribe(this._threadlistSub.subscriberID,this._threadlistSub.folder);},_handleSearchResults:function(r,s){this.setState({isLoading:s,searchThreads:[]},function(){return this._updateThreads(p,r);}.bind(this));},_handleQuery:function(r){this.setState({isSearching:!!r});}});e.exports=q;},null);
__d("MercuryThreadlistRowContainer.react",["immutable","ImmutableObject","MercuryParticipants","React","StoreAndPropBasedStateMixin","shallowEqual"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=j,n=m.PropTypes,o=j.createClass({displayName:"MercuryThreadlistRowContainer",mixins:[k(i)],propTypes:{ChildClass:n.func.isRequired,thread:n.instanceOf(h).isRequired,viewer:n.string.isRequired},statics:{calculateState:function(p){return {participants:g.Map(g.Seq(p.thread.participants).map(function(q){return [q,i.getOrFetch(q)];}))};}},shouldComponentUpdate:function(p,q){return (!l(p,this.props)||!g.is(q.participants,this.state.participants));},render:function(){var p=this.props,q=p.ChildClass,r=(function(s,t){var u={},v=Object.prototype.hasOwnProperty;if(s==null)throw new TypeError();for(var w in s)if(v.call(s,w)&&!v.call(t,w))u[w]=s[w];return u;})(p,{ChildClass:1});return (j.createElement(q,j.__spread({},r,{participants:this.state.participants})));}});e.exports=o;},null);
__d("MercuryPresenceIndicator.react",["Arbiter","AvailableListConstants","MercuryIDs","PresenceStatus","ReactComponentWithPureRenderMixin","React","SubscriptionsHandler","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=l,q=p.PropTypes,r=l.createClass({displayName:"MercuryPresenceIndicator",mixins:[k],propTypes:{threadID:q.string.isRequired},componentDidMount:function(){this._subscriptions=new m();this._subscriptions.addSubscriptions(g.subscribe(h.ON_AVAILABILITY_CHANGED,function(){return this.forceUpdate();}.bind(this)));},componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release();},render:function(){var s=this._getPresence();return (l.createElement("span",{className:this._getClasses(s)},l.createElement("span",{className:"accessible_elem"},this._getLabel(s))));},_getPresence:function(){if(!i.isCanonical(this.props.threadID)){return null;}else{var s=i.getUserIDFromThreadID(this.props.threadID);return j.get(s);}},_getClasses:function(s){return (("presenceIndicator")+(i.isMultichat(this.props.threadID)?' '+"groupThread":'')+(s==h.ACTIVE?' '+"presenceActive":'')+(s==h.MOBILE?' '+"presenceMobile":''));},_getLabel:function(s){switch(s){case h.ACTIVE:return (o._("Active"));case h.MOBILE:return (o._("Mobile"));default:return null;}}});e.exports=r;},null);
__d("MercurySeenIndicator.react",["MercuryDelayedRoger","MercuryIDs","React","SubscriptionsHandler","cx"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=i,m=l.PropTypes,n=i.createClass({displayName:"MercurySeenIndicator",propTypes:{thread:m.object.isRequired,viewer:m.string.isRequired},componentDidMount:function(){this._subscriptions=new j();this._subscriptions.addSubscriptions(g.subscribe('state-changed',function(o,p){p[this.props.thread.thread_id]&&this.forceUpdate();}.bind(this)));},componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release();},render:function(){var o=this._separateParticipants(),p=o.viewer,q=o.others,r=this._viewerLastToReply(p),s=this._seenByAll(q);return (i.createElement("span",{className:(("MercuryRepliedIndicator")+(r?' '+"repliedLast":'')+(r&&s?' '+"seenByAll":''))}));},_separateParticipants:function(){var o=h.getParticipantIDFromUserID(this.props.viewer),p=this.props.thread.participants.filter(function(q){return q!==o;});return {viewer:o,others:p};},_viewerLastToReply:function(o){var p=this.props.thread.participants;return p.length>0&&p[0]===o;},_seenByAll:function(o){var p=this.props.thread.thread_id;return g.getSeenBy(p).length===o.length;}});e.exports=n;},null);
__d("MercuryThreadPermalink.react",["HighlanderFinchGating","Link.react","PagesMessengerThreadDialogLink.react","ReactComponentWithPureRenderMixin","React","WebMessengerThreadPermalinks"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=k,n=m.PropTypes,o=k.createClass({displayName:"MercuryThreadPermalink",mixins:[j],propTypes:{threadID:n.string.isRequired,viewer:n.string.isRequired,folder:n.string,onClick:n.func},getInitialState:function(){return {permalinkURI:'#'};},componentDidMount:function(){this._getPermalinkURI(this.props);},componentWillReceiveProps:function(p){if(p.threadID!==this.props.threadID||p.folder!==this.props.folder)this._getPermalinkURI(p);},render:function(){if(g.HIGHLANDER_FINCH_GATING)return (k.createElement(i,{className:this.props.className,threadID:this.props.threadID,viewer:this.props.viewer,folder:this.props.folder},this.props.children));return (k.createElement(h,{className:this.props.className,href:this.state.permalinkURI,onClick:this.props.onClick,role:"button"},this.props.children));},_getPermalinkURI:function(p){if(g.HIGHLANDER_FINCH_GATING)return;this.setState(this.getInitialState());l.getThreadURI(p.threadID,function(q){return this.isMounted()&&this.setState({permalinkURI:q});}.bind(this),p.folder);}});e.exports=o;},null);
__d("MercuryThreadReadToggle.react",["MercuryThreadActions","ReactComponentWithPureRenderMixin","React","ReadToggle.react","fbt","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=i,n=m.PropTypes,o=i.createClass({displayName:"MercuryThreadReadToggle",mixins:[h],propTypes:{threadID:n.string.isRequired,viewer:n.string.isRequired,unreadCount:n.number.isRequired},render:function(){l(this.props.unreadCount>=0);return (i.createElement(j,{isRead:this.props.unreadCount===0,onClick:this._handleClick,readLabel:k._("Mark as unread"),unreadLabel:k._("Mark as read")}));},_handleClick:function(p){p.preventDefault();p.stopPropagation();var q=g.getForFBID(this.props.viewer);this.props.unreadCount>0?q.markRead(this.props.threadID):q.markUnread(this.props.threadID);}});e.exports=o;},null);
__d("MercuryThreadSnippet.react",["immutable","MercuryAttachmentSnippet.react","MercuryIDs","React","TextWithEmoticons.react","fbt","shallowEqual"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=j,o=n.PropTypes,p=j.createClass({displayName:"MercuryThreadSnippet",propTypes:{participants:o.instanceOf(g.Map).isRequired,shouldRenderYou:o.bool,thread:o.object.isRequired,viewer:o.string.isRequired},shouldComponentUpdate:function(q,r){return (!m(q,this.props)||!g.is(q.participants,this.props.participants));},render:function(){return (j.createElement("span",{className:this.props.className},this._renderAttachmentIndicator(),this._renderSnippet()));},_renderAttachmentIndicator:function(){if(!this.props.thread.snippet||!this._hasAttachments())return null;return j.createElement("span",{className:"MercuryAttachmentIndicator"});},_renderSnippet:function(){var q=this.props.thread,r=i.getParticipantIDFromUserID(this.props.viewer),s=this._renderInnerSnippet(),t=q.participants.length;if(q.is_subscribed)t--;if(this._hasAttachments()||!q.snippet_sender)return s;if(q.snippet_sender===r){if(!this.props.shouldRenderYou)return s;return (l._("You: {conversation_snippet}",[l.param("conversation_snippet",s)]));}if(t<=1)return s;var u=this.props.participants.get(q.snippet_sender);if(!u||!u.short_name)return s;return (l._("{name}: {conversation_snippet}",[l.param("name",u.short_name),l.param("conversation_snippet",s)]));},_renderInnerSnippet:function(){var q=this.props.thread,r=q.snippet;if(r&&r.startsWith('?OTR'))return (l._("[encrypted message]"));if(r)return (j.createElement(k,{renderEmoticons:true,renderEmoji:true,text:r.replace(/\r\n|[\r\n]/g,' ')}));if(this._hasAttachments())return (j.createElement(h,{thread:q,viewer:this.props.viewer}));return null;},_hasAttachments:function(){var q=this.props.thread;return (q.snippet_has_attachment&&q.snippet_attachments&&q.snippet_attachments.length>0);}});e.exports=p;},null);
__d("MercuryThreadTimestamp.react",["ReactComponentWithPureRenderMixin","React","formatDate","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=h,l=k.PropTypes,m=h.createClass({displayName:"MercuryThreadTimestamp",mixins:[g],propTypes:{time:l.number,title:l.string,text:l.string},render:function(){var n=this.props.time;if(!n)return h.createElement("abbr",null);return (h.createElement("abbr",{className:j(this.props.className,'timestamp'),title:this.props.title||(new Date(n)).toLocaleDateString(),"data-utime":n/1000},this.props.text||i(new Date(n),'g:ia')));}});e.exports=m;},null);
__d("MessagesJewelInlineThumbnail.react",["MercuryAttachmentType","React","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=h,k=j.PropTypes,l=h.createClass({displayName:"MessagesJewelInlineThumbnail",propTypes:{thread:k.object.isRequired},render:function(){var m=this._getPhotoAttachments();if(m.length===0)return h.createElement("span",null);var n=m[0].thumbnail_url;if(!n)return h.createElement("span",null);var o=h.createElement("span",{className:"_56hv"},h.createElement("i",{style:{backgroundImage:("url("+n+")")}}));if(m.length>1)o=h.createElement("span",null,h.createElement("span",{className:"_56hy"}),o);return o;},_getPhotoAttachments:function(){var m=this.props.thread;if(!m.snippet_attachments)return [];return m.snippet_attachments.filter(function(n){return n.attach_type===g.PHOTO;});}});e.exports=l;},null);
__d("MessagesJewelThreadListRow.react",["ImageBlock.react","immutable","ImmutableObject","MercuryPresenceIndicator.react","MercurySeenIndicator.react","MercuryThreadImage.react","MercuryThreadPermalink.react","MercuryThreadReadToggle.react","MercuryThreadSnippet.react","MercuryThreadTimestamp.react","MercuryThreadTitle.react","MessagesJewelInlineThumbnail.react","ReactComponentWithPureRenderMixin","React","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();'use strict';var v=t,w=v.PropTypes,x=t.createClass({displayName:"MessagesJewelThreadListRow",mixins:[s],propTypes:{onClick:w.func,participants:w.instanceOf(h.Map).isRequired,showPresence:w.bool,thread:w.instanceOf(i).isRequired,viewer:w.string.isRequired,wasSeenByAll:w.bool},render:function(){return (t.createElement("li",{className:((this.props.thread.unread_count>0?"jewelItemNew":''))},t.createElement(m,{className:"messagesContent",threadID:this.props.thread.thread_id,viewer:this.props.viewer,folder:this.props.thread.folder,onClick:this.props.onClick},t.createElement(g,{spacing:"medium"},t.createElement("div",{className:"MercuryThreadImage"},t.createElement(l,{thread:this.props.thread,viewer:this.props.viewer})),t.createElement("div",{className:"content"},t.createElement("div",{className:"author"},t.createElement("strong",null,t.createElement(q,{thread:this.props.thread,viewer:this.props.viewer,showUnreadCount:true})),this._renderPresenceIndicator()),t.createElement("div",{className:"snippet preview"},t.createElement(k,{thread:this.props.thread,viewer:this.props.viewer}),t.createElement(o,{participants:this.props.participants,thread:this.props.thread,viewer:this.props.viewer})),t.createElement("div",{className:"time"},t.createElement(p,{time:this.props.thread.timestamp,title:this.props.thread.timestamp_absolute,text:this.props.thread.timestamp_relative}))),t.createElement("div",null,t.createElement(r,{thread:this.props.thread}),t.createElement("div",{className:"x_div"},t.createElement(n,{threadID:this.props.thread.thread_id,viewer:this.props.viewer,unreadCount:this.props.thread.unread_count})))))));},_renderPresenceIndicator:function(){if(!this.props.showPresence)return null;return (t.createElement(j,{threadID:this.props.thread.thread_id}));}});e.exports=x;},null);
__d("MessagesJewelThreadlistRowContainer.react",["ImmutableObject","MercuryDelayedRoger","MercuryThreadlistRowContainer.react","MessagesJewelThreadListRow.react","ReactComponentWithPureRenderMixin","React","StoreAndPropBasedStateMixin","requireWeak"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=l,p=o.PropTypes,q;n(['ChatOpenTab'],function(s){q=s;});var r=l.createClass({displayName:"MessagesJewelThreadlistRowContainer",mixins:[k,m(h)],propTypes:{thread:p.instanceOf(g).isRequired,viewer:p.string.isRequired},statics:{calculateState:function(s){return {wasSeenByAll:h.wasSeenByAll(s.thread.thread_id)};}},componentDidMount:function(){if(!q)n(['ChatOpenTab'],function(s){this.forceUpdate();}.bind(this));},render:function(){return (l.createElement(i,{ChildClass:j,onClick:this._handleClick,showPresence:q&&q.canOpenTab(),thread:this.props.thread,viewer:this.props.viewer,wasSeenByAll:this.state.wasSeenByAll}));},_handleClick:function(s){if(s.button===1||s.altKey||s.ctrlKey||s.metaKey||s.shiftKey)return;if(q&&q.canOpenTab()){s.preventDefault();q.openThread(this.props.thread.thread_id,'jewel');}}});e.exports=r;},null);
__d("MessagesJewelThreadList.react",["ImmutableObject","ScrollableArea.react","Link.react","MessagesJewelThreadlistRowContainer.react","React","XUISpinner.react","cx","fbt","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=k,q=p.PropTypes,r=k.createClass({displayName:"MessagesJewelThreadList",propTypes:{isLoaded:q.bool,isLoading:q.bool,onLoadMoreRequest:q.func,p2pNUX:q.element,threads:q.arrayOf(q.instanceOf(g)).isRequired,viewer:q.string.isRequired},render:function(){return (k.createElement(h,{onScroll:o(this._handleScroll,50),ref:"scrollable"},k.createElement("ul",{className:"jewelContent"},this.props.p2pNUX?k.createElement("li",null,this.props.p2pNUX):null,this.props.threads.map(function(s){return k.createElement(j,{key:s.thread_id,thread:s,viewer:this.props.viewer});}.bind(this))),this._renderLoadMoreLink()));},_renderLoadMoreLink:function(){if(this.props.isLoaded)return null;if(this.props.isLoading)return (k.createElement("div",{className:"_v8y"},k.createElement(l,null)));return (k.createElement("div",{className:"_v8y"},k.createElement(i,{href:"#",onClick:this._handleLoadMoreClick},n._("Show Older"))));},_handleScroll:function(){if(this.props.isLoaded)return;var s=this.refs.scrollable.getArea();if(s.getScrollTop()+s.getClientHeight()>=s.getScrollHeight()-1)this.props.onLoadMoreRequest&&this.props.onLoadMoreRequest();},_handleLoadMoreClick:function(s){s.preventDefault();this.props.onLoadMoreRequest&&this.props.onLoadMoreRequest();}});e.exports=r;},null);
__d("MercuryJewelThreadlistControl",["ArbiterMixin","CurrentUser","CSS","DOM","Event","JSLogger","MercuryThreadlistConstants","MercuryThreadlistContainer.react","MessagesJewelThreadList.react","MessagingTag","React","copyProperties","csx","cx","fbt","MercuryThreadInformer","MercuryUnreadState"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();var v=b('MercuryThreadInformer').get(),w=b('MercuryUnreadState').get(),x=l.create('mercury_jewel');function y(ca){this._threadlistContainer=j.find(ca,"._3v_l");this._currentFolder=p.INBOX;this._jewelFolderLinks={};this._jewelFolderLinks[p.INBOX]=j.find(ca,"._1sde");this._jewelFolderLinks[p.OTHER]=j.find(ca,"._1sdf");this._jewelFolderCounts={};this._jewelFolderCounts[p.INBOX]=j.find(ca,"._1sdg");this._jewelFolderCounts[p.OTHER]=j.find(ca,"._1sdh");aa.bind(this)();this._markAllReadLink=j.find(ca,"._1c1m");k.listen(this._jewelFolderLinks[p.INBOX],'click',z.bind(this,p.INBOX));k.listen(this._jewelFolderLinks[p.OTHER],'click',z.bind(this,p.OTHER));k.listen(this._markAllReadLink,'click',function(da){w.markFolderAsRead(this._currentFolder);da.kill();}.bind(this));v.subscribe('unread-updated',aa.bind(this));this.render();x.bump('opened_threadlist_'+this._currentFolder);}r(y,{EVENT_THREADS_LOADED:'threads-loaded',EVENT_THREADS_RENDERED:'threads-rendered'});r(y.prototype,g);r(y.prototype,{render:function(){q.render(q.createElement(n,{ChildClass:o,viewer:h.getID(),folder:this._currentFolder}),this._threadlistContainer,function(){return this.inform(y.EVENT_THREADS_RENDERED);}.bind(this));}});function z(ca){if(this._currentFolder!=ca){x.bump('opened_threadlist_'+ca);i.addClass(this._jewelFolderLinks[ca],"_1sdd");i.removeClass(this._jewelFolderLinks[this._currentFolder],"_1sdd");this._currentFolder=ca;this.render();}}function aa(){ba.bind(this)(p.INBOX);ba.bind(this)(p.OTHER);}function ba(ca){var da;if(w.exceedsMaxCount(ca)){da=m.MAX_UNREAD_COUNT;}else da=w.getUnreadCount(ca);var ea=this._jewelFolderCounts[ca];if(da>0){if(da==m.MAX_UNREAD_COUNT)da+='+';j.setContent(ea,u._("({unread_count})",[u.param("unread_count",da)]));}else j.setContent(ea,'');}e.exports=y;},null);
__d("MercuryJewel",["MercuryJewelCountControl","MercuryServerRequests","MercuryChannelHandler"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();b('MercuryChannelHandler').get().turnOn();var i=false;function j(k,l){"use strict";h.get().handleUpdate(l);var m=k.getRoot(),n=k.getFlyout();this.$MercuryJewel0=new g(m,k);if(k.getRoot()&&k.isOpen()){this.$MercuryJewel1(n);}else k.subscribe('opened',this.$MercuryJewel1.bind(this,n));}j.prototype.$MercuryJewel1=function(k){"use strict";this.$MercuryJewel2=this.$MercuryJewel3=true;if(!i){d(['MercuryJewelThreadlistControl'],function(l){this.$MercuryJewel4=new l(k);this.$MercuryJewel4.subscribe(l.EVENT_THREADS_LOADED,this.$MercuryJewel5.bind(this));this.$MercuryJewel4.subscribe(l.EVENT_THREADS_RENDERED,this.$MercuryJewel6.bind(this));}.bind(this));i=true;}};j.prototype.$MercuryJewel5=function(){"use strict";if(this.$MercuryJewel2)this.$MercuryJewel2=false;};j.prototype.$MercuryJewel6=function(){"use strict";if(this.$MercuryJewel3)this.$MercuryJewel3=false;};e.exports=j;},null);
__d("RenderManager",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){"use strict";this._isDirty=false;this._obj=h;}g.prototype.dirty=function(){"use strict";if(!this._isDirty){this._isDirty=true;setTimeout(this._doPaint.bind(this),0);}};g.prototype._doPaint=function(){"use strict";this._isDirty=false;this._obj.paint();};e.exports=g;},null);
__d("CounterDisplay",["Arbiter","CSS","DOM","RenderManager","Run","$","copyProperties","removeFromArray"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();function o(p,q,r,s,t,u){m(this,{_name:p,_valueNode:l(q),_wrapperNode:l(r)||null,_statusClass:t,_rm:new j(this),_arbiterSubscription:null,_count:0});var v=this._valueNode.firstChild;if(v){var w=parseInt(v.nodeValue,10);if(!isNaN(w))this._count=w;}this._statusNode=s?l(s):null;this._subscribeAll();o.instances.push(this);if(!u)k.onLeave(this._destroy.bind(this),true);}m(o,{EVENT_TYPE_ADJUST:'CounterDisplay/adjust',EVENT_TYPE_UPDATE:'CounterDisplay/update',instances:[],adjustCount:function(p,q){g.inform(o.EVENT_TYPE_ADJUST+'/'+p,q);},setCount:function(p,q){g.inform(o.EVENT_TYPE_UPDATE+'/'+p,q);}});m(o.prototype,{_destroy:function(){delete this._valueNode;delete this._wrapperNode;if(this._arbiterSubscription){this._arbiterSubscription.unsubscribe();delete this._arbiterSubscription;}n(o.instances,this);},adjustCount:function(p){this._count=Math.max(0,this._count+p);this._rm.dirty();return this;},setCount:function(p){this._count=Math.max(0,p);this._rm.dirty();return this;},paint:function(){i.setContent(this._valueNode,this._count);this._toggleNodes();},_toggleNodes:function(){if(this._wrapperNode)h.conditionClass(this._wrapperNode,'hidden_elem',this._count<=0);if(this._statusClass&&this._statusNode)h.conditionClass(this._statusNode,this._statusClass,this._count>0);},_subscribeAll:function(){var p=[o.EVENT_TYPE_ADJUST+'/'+this._name,o.EVENT_TYPE_UPDATE+'/'+this._name];this._arbiterSubscription=g.subscribe(p,this._onInform.bind(this),g.SUBSCRIBE_NEW);},_onInform:function(p,q){q=parseInt(q);if(isNaN(q))return;if(p.indexOf(o.EVENT_TYPE_ADJUST)!=-1){this.adjustCount(q);}else if(p.indexOf(o.EVENT_TYPE_UPDATE)!=-1){this.setCount(q);}else return;return;}});e.exports=o;},null);
__d("MessagingEvents",["Arbiter","ChannelConstants","arrayContains","copyProperties","isEmpty"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l={},m=new g();function n(o){if(!k(l))return;for(var p in o)m.inform('count/'+p,o[p]);}m.subscribe('mark-as-read',function(o,p){(p.tids||p.chat_ids||[]).forEach(function(q){q=''+q;if(!(q in l)){l[q]=true;var r=function(){m.unsubscribe(s);clearTimeout(t);delete l[q];},s=m.subscribe('read',function(u,v){if(i((v.tids||[]),q)||i((v.chat_ids||[]),q))r();}),t=setTimeout(r,60000);}});});g.subscribe(h.getArbiterType('messaging'),function(o,p){var q=j({},p.obj),event=q.event||'';delete q.type;delete q.event;m.inform(event,q);if('unread_counts' in q){var r=q.unread_counts;n({unread:r.inbox,other_unseen:r.other});}});g.subscribe(h.getArbiterType('inbox'),function(o,p){var q=j(p.obj);delete q.type;n(q);});a.MessagingEvents=e.exports=m;},3);
__d("TitanLeftNav",["CounterDisplay","MessagingEvents"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={initialize:function(){h.subscribe('count/other_unseen',function(j,k){g.setCount('other_unseen',k);});}};e.exports=i;},null);
__d("AccessibilityShortcut",["AccessibilityLogger","Event","Focus","ge","onEnclosingPageletDestroy","warning"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m={init:function(n,o){var p=h.listen(n,'click',function(q){q.preventDefault();var r=j(o);if(r){i.set(r);g.logSRKey();}else l(r,'Failed to set focus on element with ID: %s',o);});k(n,function(){return p.remove();});}};e.exports=m;},null);
__d("AccessibleMenu",["Event","CSS","DOM","Keys","TabbableElements","Toggler"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m,n,o;function p(){var x=i.scry(m,'a[rel="toggle"]')[0];x&&x.focus();l.getInstance(m).hide();}function q(x){if(!x)return false;h.removeClass(x,'selected');x.setAttribute('aria-selected','false');}function r(x){if(!x)return false;h.addClass(x,'selected');x.setAttribute('aria-selected','true');var y=k.find(x);if(y[0])y[0].focus();}function s(x){var y=i.scry(m,'.selected')[0],z=n.indexOf(y)+x,aa=n[z];if(!aa)return false;q(y);r(aa);}function t(x){if(!l.isShown()||l.getActive()!==m||h.hasClass(m,w.MENU_HIDDEN))return true;var y=g.getKeyCode(x);switch(y){case j.TAB:s(x.shiftKey?-1:1);g.prevent(x);break;case j.ESC:p();g.prevent(x);break;case j.UP:case j.DOWN:s(y===j.UP?-1:1);g.prevent(x);break;}}function u(x,y){m=y.getActive();n=i.scry(m,'[role="menuitem"]');if(!o)o=g.listen(document.documentElement,'keydown',t);}function v(){if(l.getActive()==m)q(i.scry(m,'.selected')[0]);}var w={init:function(x){l.listen('show',x,u);l.listen('hide',x,v);},MENU_HIDDEN:'menu_hidden'};e.exports=w;},null);
__d("ClickRefUtils",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={get_intern_ref:function(h){if(!!h){var i={profile_minifeed:1,gb_content_and_toolbar:1,gb_muffin_area:1,ego:1,bookmarks_menu:1,jewelBoxNotif:1,jewelNotif:1,BeeperBox:1,searchBarClickRef:1};for(var j=h;j&&j!=document.body;j=j.parentNode){if(!j.id||typeof j.id!=='string')continue;if(j.id.substr(0,8)=='pagelet_')return j.id.substr(8);if(j.id.substr(0,8)=='box_app_')return j.id;if(i[j.id])return j.id;}}return '-';},get_href:function(h){var i=(h.getAttribute&&(h.getAttribute('ajaxify')||h.getAttribute('data-endpoint'))||h.action||h.href||h.name);return typeof i==='string'?i:null;},should_report:function(h,i){if(i=='FORCE')return true;if(i=='INDIRECT')return false;return h&&(g.get_href(h)||(h.getAttribute&&h.getAttribute('data-ft')));}};e.exports=g;},null);
__d("setUECookie",["Env"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i){if(!g.no_cookies)document.cookie="act="+encodeURIComponent(i)+"; path=/; domain="+window.location.hostname.replace(/^.*(\.facebook\..*)$/i,'$1');}e.exports=h;},null);
__d("ClickRefLogger",["Arbiter","Banzai","ClickRefUtils","Env","ScriptPath","SessionName","Vector","$","collectDataAttributes","copyProperties","ge","pageID","setUECookie"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t={delay:0,retry:true};function u(y){if(!q('content'))return [0,0,0,0];var z=n('content'),aa=m.getEventPosition(y);return [aa.x,aa.y,z.offsetLeft,z.clientWidth];}function v(y,z,event,aa){var ba='r',ca=[0,0,0,0],da,ea;if(!!event){da=event.type;if(da=='click'&&q('content'))ca=u(event);var fa=0;event.ctrlKey&&(fa+=1);event.shiftKey&&(fa+=2);event.altKey&&(fa+=4);event.metaKey&&(fa+=8);if(fa)da+=fa;}if(!!z)ea=i.get_href(z);var ga=o(!!event?(event.target||event.srcElement):z,['ft','gt']);p(ga.ft,aa.ft||{});p(ga.gt,aa.gt||{});if(typeof(ga.ft.ei)==='string')delete ga.ft.ei;var ha=[y._ue_ts,y._ue_count,ea||'-',y._context,da||'-',i.get_intern_ref(z),ba,a.URI?a.URI.getRequestURI(true,true).getUnqualifiedURI().toString():location.pathname+location.search+location.hash,ga].concat(ca).concat(r).concat(k.getScriptPath());return ha;}g.subscribe("ClickRefAction/new",function(y,z){if(i.should_report(z.node,z.mode)){var aa=v(z.cfa,z.node,z.event,z.extra_data);s(z.cfa.ue);var ba=[l.getName(),Date.now(),'act'];h.post('click_ref_logger',Array.prototype.concat(ba,aa),t);}});function w(y){function z(ha){var ia='';for(var ja=0;ja<ha.length;ja++)ia+=String.fromCharCode(1^ha.charCodeAt(ja));return ia;}function aa(ha,ia,ja,ka){var la=ia[ja];if(la&&ha&&la in ha)if(ja+1<ia.length){aa(ha[la],ia,ja+1,ka);}else{var ma=ha[la],na=function(){setTimeout(ka.bind(null,arguments));return ma.apply(this,arguments);};na.toString=ma.toString.bind(ma);Object.defineProperty(ha,la,{configurable:false,writable:true,value:na});}}var ba={},ca={},da=false;function ea(ha,ia){if(ca[ha])return;ca[ha]=ba[ha]=1;}var fa=y[z('jiri')];if(fa){var ga=[];z(fa).split(',').map(function(ha,ia){var ja=ha.substring(1).split(':'),ka;switch(ha.charAt(0)){case '1':ka=new RegExp('\\b('+ja[0]+')\\b','i');ga.push(function(la){var ma=ka.exec(Object.keys(window));if(ma)ea(ia,''+ma);});break;case '2':ka=new RegExp(ja[0]);aa(window,ja,2,function(la){var ma=la[ja[1]];if(typeof ma==='string'&&ka.test(ma))ea(ia,ha);});break;case '3':aa(window,ja,0,function(){for(var la=ga.length;la--;)ga[la]();var ma=Object.keys(ba);if(ma.length){ba={};setTimeout(h[z('qnru')].bind(h,z('islg'),{m:''+ma}),5000);}});break;case '4':da=true;break;}});}}try{w(j);}catch(x){}},null);
__d("QuicklingAugmenter",["URI"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=[],i={addHandler:function(j){h.push(j);},augmentURI:function(j){var k=[],l=g(j);h.forEach(function(m){var n=m(l);if(!n)return l;k.push(m);l=l.addQueryData(n);});h=k;return l;}};e.exports=i;},null);
__d("Quickling",["AjaxPipeRequest","Arbiter","CSSClassTransition","DocumentTitle","DOM","HTML","PageHooks","PageEvents","PageTransitions","QuicklingAugmenter","QuicklingConfig","Run","URI","UserAgent_DEPRECATED","PHPQuerySerializer","TimerStorage","cancelAnimationFrame","clearImmediate","clearInterval","clearTimeout","goOrReplace","isEmpty","replaceNativeTimer"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca){b.__markCompiled&&b.__markCompiled();var da=q.version,ea=q.sessionLength,fa=new RegExp(q.inactivePageRegex),ga=0,ha,ia='',ja={isActive:function(){return true;},isPageActive:function(ra){if(ra=='#')return false;ra=new s(ra);if(ra.getDomain()&&ra.getDomain()!=s().getDomain())return false;if(ra.getPath()=='/l.php'){var sa=ra.getQueryData().u;if(sa){sa=s(unescape(sa)).getDomain();if(sa&&sa!=s().getDomain())return false;}}var ta=ra.getPath(),ua=ra.getQueryData();if(!ba(ua))ta+='?'+u.serialize(ua);return !fa.test(ta);},getLoadCount:function(){return ga;}};function ka(ra){ra=ra||'Facebook';j.set(ra);if(t.ie()){ia=ra;if(!ha)ha=window.setInterval(function(){var sa=ia,ta=j.get();if(sa!=ta)j.set(sa);},5000,false);}}function la(ra){var sa=document.getElementsByTagName('link');for(var ta=0;ta<sa.length;++ta){if(sa[ta].rel!='alternate')continue;k.remove(sa[ta]);}if(ra.length){var ua=k.find(document,'head');ua&&k.appendContent(ua,l(ra[0]));}}for(var ma in g)if(g.hasOwnProperty(ma))oa[ma]=g[ma];var na=g===null?null:g.prototype;oa.prototype=Object.create(na);oa.prototype.constructor=oa;oa.__superConstructor__=g;function oa(ra){"use strict";var sa={version:da};this._isQuickling=true;g.call(this,ra,{quickling:sa});}oa.prototype._preBootloadFirstResponse=function(ra){"use strict";return true;};oa.prototype._fireDomContentCallback=function(){"use strict";this._request.cavalry&&this._request.cavalry.setTimeStamp('t_domcontent');o.transitionComplete();this._onPageDisplayed&&this._onPageDisplayed(this.pipe);na._fireDomContentCallback.call(this);};oa.prototype._fireOnloadCallback=function(){"use strict";if(this._request.cavalry){this._request.cavalry.setTimeStamp('t_hooks');this._request.cavalry.setTimeStamp('t_layout');this._request.cavalry.setTimeStamp('t_onload');}na._fireOnloadCallback.call(this);};oa.prototype.isPageActive=function(ra){"use strict";return ja.isPageActive(ra);};oa.prototype._versionCheck=function(ra){"use strict";if(ra.version==da)return true;var sa=['quickling','ajaxpipe','ajaxpipe_token'];aa(window.location,s(ra.uri).removeQueryData(sa),true);return false;};oa.prototype._processFirstResponse=function(ra){"use strict";var sa=ra.getPayload();ka(sa.title);la(sa.syndication||[]);window.scrollTo(0,0);i.go(document.body,sa.body_class||'',o.getMostRecentURI(),ra.getRequest().getURI());h.inform('quickling/response');};oa.prototype.getSanitizedParameters=function(){"use strict";return ['quickling'];};function pa(){ga++;return ga>=ea;}function qa(ra){g.setCurrentRequest(null);if(pa())return false;ra=p.augmentURI(ra);if(!ja.isPageActive(ra))return false;v.popAll(v.TIMEOUT,z);v.popAll(v.INTERVAL,y);v.popAll(v.IMMEDIATE,x);v.popAll(v.ANIMATION_FRAME,w);window.ExitTime=Date.now();r.__removeHook(m.ONLOAD_HOOK);r.__removeHook(m.DOMREADY_HOOK);m.runHooks('onleavehooks');h.inform(n.AJAXPIPE_ONUNLOAD,true);new oa(ra).setCanvasId('content').send();return true;}ca();r.onAfterLoad(function ra(){o.registerHandler(qa,1);});e.exports=a.Quickling=ja;},null);
__d("StringTransformations",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={unicodeEscape:function(g){return g.replace(/[^A-Za-z0-9\-\.\:\_\$\/\+\=]/g,function(h){var i=h.charCodeAt().toString(16);return '\\u'+('0000'+i.toUpperCase()).slice(-4);});},unicodeUnescape:function(g){return g.replace(/(\\u[0-9A-Fa-f]{4})/g,function(h){return String.fromCharCode(parseInt(h.slice(2),16));});}};},null);
__d("UserActionHistory",["Arbiter","ClickRefUtils","ScriptPath","throttle","WebStorage"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l={click:1,submit:1},m=false,n={log:[],len:0},o=j.acrossTransitions(function(){try{m._ua_log=JSON.stringify(n);}catch(r){m=false;}},1000);function p(){var r=k.getSessionStorage();if(r){m=r;m._ua_log&&(n=JSON.parse(m._ua_log));}else m=false;n.log[n.len%10]={ts:Date.now(),path:'-',index:n.len,type:'init',iref:'-'};n.len++;g.subscribe("UserAction/new",function(s,t){var u=t.ua,v=t.node,event=t.event;if(!event||!(event.type in l))return;var w={path:i.getScriptPath(),type:event.type,ts:u._ue_ts,iref:h.get_intern_ref(v)||'-',index:n.len};n.log[n.len++%10]=w;m&&o();});}function q(){return n.log.sort(function(r,s){return (s.ts!=r.ts)?(s.ts-r.ts):(s.index-r.index);});}p();e.exports={getHistory:q};},null);
__d("isEmail",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=/^[\w!#\$%&'\*\+\/\=\?\^`\{\|\}~\-]+(:?\.[\w!#\$%&'\*\+\/\=\?\^`\{\|\}~\-]+)*@(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?$/i;function h(i){return g.test(i);}e.exports=h;},null);
__d("userAction",["Arbiter","Banzai","copyProperties"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=50,k=[],l={},m={};function n(v,w,x,y,event){"use strict";var z=v+'/'+w,aa=u(y);i(this,{ue:z,_uai_logged:false,_uai_timeout:null,_primary:{},_fallback:{},_default_ua_id:aa||'-',_default_action_type:event?event.type:'-',_ts:v,_ns:x,_start_ts:v,_prev_event:'s',_ue_ts:v,_ue_count:w,_data_version:1,_event_version:2,_info_version:2});this._log('ua:n',[1,z]);}n.prototype._log=function(v,w){"use strict";var x=l[v]===true,y=o(v,this._ns,'ua_id',this._get_ua_id()),z=o(v,this._ns,'action',this._get_action_type()),aa=(y!==(void 0)||z!==(void 0)),ba=aa?(y||z):x;if(h.isEnabled('useraction')&&ba)h.post(v,w,p);};n.prototype._get_action_type=function(){"use strict";return (this._primary._action_type||this._fallback._action_type||this._default_action_type);};n.prototype._get_ua_id=function(){"use strict";return (this._primary._ua_id||this._fallback._ua_id||this._default_ua_id);};n.prototype._log_uai=function(){"use strict";var v=[this._info_version,this.ue,this._ns,this._get_ua_id(),this._get_action_type()];this._log('ua:i',v);this._uai_logged=true;this._uai_timeout=null;};n.prototype.uai=function(v,w,x){"use strict";if(!this._uai_logged){this._uai_timeout&&clearTimeout(this._uai_timeout);this._primary._ua_id=w;this._primary._action_type=v;if(x===(void 0)){this._log_uai();}else if(x===false){this._uai_logged=true;}else{var y=this;x=x||0;this._uai_timeout=setTimeout(function(){y._log_uai.apply(y);},x);}}return this;};n.prototype.uai_fallback=function(v,w,x){"use strict";if(!this._uai_logged){var y=this;this._uai_timeout&&clearTimeout(this._uai_timeout);this._fallback._ua_id=w;this._fallback._action_type=v;x=(x===(void 0))?j:x;this._uai_timeout=setTimeout(function(){y._log_uai.apply(y);},x);}return this;};n.prototype.add_event=function(v,w,x){"use strict";w=w||0;var y=(Date.now()-w),z=y-this._ts,aa=y-(x?x:this._ue_ts),ba=[this._event_version,this.ue,this._ns,this._get_ua_id(),this._prev_event,v,z,aa];if(this._get_ua_id()){this._log('ua:e',ba);this._ts=y;this._prev_event=v;}return this;};n.prototype.add_data=function(v){"use strict";var w=[this._data_version,this.ue,v];this._log('ua:d',w);return this;};function o(v,w,x,y){var z=v in m?m[v]:{},aa=w in z?z[w]:{},ba;if(x in aa)if('*' in aa[x]){ba=aa[x]['*'];}else if(y in aa[x])ba=aa[x][y];return ba;}var p={store:true,delay:3000,retry:true},q=0,r=0,s=null;function t(v,w,event,x){x=x||{};var y=Date.now();if(!w&&event)w=event.getTarget();if(w&&s)if(y-r<j&&w==s&&x.mode=="DEDUP")return k[k.length-1];var z=new n(y,q,v,w,event);s=w;k.push(z);while(k.length>10)k.shift();g.inform("UserAction/new",{ua:z,node:w,mode:x.mode,event:event});r=y;q++;return z;}function u(v){if(!v||!v.nodeName)return null;return v.nodeName.toLowerCase();}t.setUATypeConfig=function(v){i(l,v);};t.setCustomSampleConfig=function(v){i(m,v);};t.getCurrentUECount=function(){return q;};e.exports=a.userAction=t;},null);
__d("NotificationJewelReminder",["Arbiter","ContextualDialog","ContextualDialogXUITheme","DOM","Event","ImageBlock.react","LayerFadeOnHide","LayerFadeOnShow","NotificationConstants","NotificationStore","NotificationUpdates","React","SubscriptionsHandler","Toggler","$","cx","fbt","intlList"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){b.__markCompiled&&b.__markCompiled();var y=2;z.init=function(aa){"use strict";new z(aa);};function z(aa){"use strict";this.$NotificationJewelReminder0=aa;if(p.getCount()){this.$NotificationJewelReminder1();return;}q.subscribeOnce('update-notifications',function(ba,ca){if(ca.payloadsource===o.PayloadSourceType.INITIAL_LOAD)this.$NotificationJewelReminder1();}.bind(this));}z.prototype.$NotificationJewelReminder1=function(){"use strict";p.getNotifications(p.getCount(),this.$NotificationJewelReminder3.bind(this));};z.prototype.$NotificationJewelReminder3=function(aa){"use strict";var ba=t.getInstance(u('fbNotificationsJewel'));if(ba&&ba.isShown())return;var ca=[],da,ea=Object.keys(aa);for(var fa=0;fa<ea.length;fa++){if(!aa[ea[fa]].showBeep)continue;var ga=aa[ea[fa]].actors;if(ga.length===0)continue;for(var ha=0;ha<ga.length;ha++){da=da||ga[ha].profile_picture.uri;if(ca.length<y&&ga[ha].name&&ca.indexOf(ga[ha].name)===-1)ca.push(ga[ha].name);}if(ca.length===y)break;}if(ca.length===0||!da)return;var ia=r.createElement("div",{className:"_5bov"},r.createElement(l,null,r.createElement("img",{className:"_5bow",src:da}),r.createElement("div",null,this.$NotificationJewelReminder4(ea.length,ca)))),ja=j.create('div');r.render(ia,ja);var ka=new h({alignment:'right',contextSelector:'#fbNotificationsJewel',offsetY:-10,position:'below',theme:i,width:210},ja);ka.enableBehaviors([n,m]);this.$NotificationJewelReminder5(ka);};z.prototype.$NotificationJewelReminder4=function(aa,ba){"use strict";ba=ba.map(function(ca){return r.createElement("b",null,ca);});return (w._({"*":{"notifications":"{number} notifications from {notification senders}","notification":"{number} notification from {notification senders}"}},[w.param("number",aa,[0]),w['enum'](aa>1?'notifications':'notification',{notifications:"notifications",notification:"notification"}),w.param("notification senders",x(ba))]));};z.prototype.$NotificationJewelReminder5=function(aa){"use strict";aa.show();this.$NotificationJewelReminder6=aa;var ba=aa.getRoot();this.$NotificationJewelReminder7=setTimeout(this.$NotificationJewelReminder8.bind(this),this.$NotificationJewelReminder0.show_time);this.$NotificationJewelReminder9=new s();this.$NotificationJewelReminder9.addSubscriptions(g.subscribe('layer_shown',function(ca,da){if(da&&da.type==='Jewel')this.$NotificationJewelReminder8();}.bind(this)),k.listen(ba,'mouseenter',function(){clearTimeout(this.$NotificationJewelReminder7);}.bind(this)),k.listen(ba,'mouseleave',this.$NotificationJewelReminder8.bind(this)),k.listen(ba,'click',function(){this.$NotificationJewelReminder8();t.show(u('fbNotificationsJewel'));}.bind(this)));};z.prototype.$NotificationJewelReminder8=function(){"use strict";clearTimeout(this.$NotificationJewelReminder7);this.$NotificationJewelReminder6.hide();this.$NotificationJewelReminder9.release();};e.exports=z;},null);
__d("PagesVoiceBar",["$","Arbiter","AsyncRequest","ChannelConstants","DOM","URI","ViewportBounds","csx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o='PagesVoiceBar/initialized',p='PagesVoiceBar/switchVoice',q='page_transition',r='pages_voice_bar_sync',s=null,t=null,u=null,v=false,w=m.addTop(0);function x(da,ea){new i('/ajax/pages/switch_voice.php').setData(ea).setHandler(function(fa){ba();}).send();}function y(){s=null;}function z(da,ea){if(ea.obj.profile_id&&ea.obj.profile_id===s)ba();}function aa(da){h.subscribe(o,da);}function ba(){l.getNextURI().go();}var ca={initVoiceBar:function(){if(v)return;t=g('pagesVoiceBarContent');h.subscribe(p,x);h.subscribe(q,y);h.subscribe(j.getArbiterType(r),z);v=true;u=k.scry(t,"^div._4f7n")[0];h.inform(o,null,h.BEHAVIOR_STATE);},update:function(da,ea){aa(function(){s=ea;k.setContent(t,da);var fa=t.offsetHeight;if(!u&&w.getSize()!==fa){w.remove();w=m.addTop(m.getTop()+fa);}});}};e.exports=ca;},null);
__d("UnityObject",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=function(){var h="Unity Player",i="application/vnd.unity",j=document,k=navigator,l="https://ssl-webplayer.unity3d.com/download_webplayer-3.x/",m="_unity_triedjava",n="_unity_triedclickonce",o="undefined",p="installed",q="missing",r="broken",s="unsupported",t="standard",u="java",v="clickonce",w=function(){var ia=k.userAgent,ja=k.platform,ka=/chrome/i.test(ia),la=false;if(/msie/i.test(ia)){la=parseFloat(ia.replace(/^.*msie ([0-9]+(\.[0-9]+)?).*$/i,"$1"));}else if(/Trident/i.test(ia))la=parseFloat(ia.replace(/^.*rv:([0-9]+(\.[0-9]+)?).*$/i,"$1"));var ma={w3:typeof j.getElementById!=o&&typeof j.getElementsByTagName!=o&&typeof j.createElement!=o,win:ja?/win/i.test(ja):/win/i.test(ia),mac:ja?/mac/i.test(ja):/mac/i.test(ia),ie:la,ff:/firefox/i.test(ia),op:/opera/i.test(ia),ch:ka,sf:/safari/i.test(ia)&&!ka,wk:/webkit/i.test(ia)?parseFloat(ia.replace(/^.*webkit\/(\d+(\.\d+)?).*$/i,"$1")):false,x64:/win64/i.test(ia)&&/x64/i.test(ia),moz:/mozilla/i.test(ia)?parseFloat(ia.replace(/^.*mozilla\/([0-9]+(\.[0-9]+)?).*$/i,"$1")):0,mobile:/ipad/i.test(ja)||/iphone/i.test(ja)||/ipod/i.test(ja)||/android/i.test(ia)||/windows phone/i.test(ia)};ma.clientBrand=ma.ch?'ch':ma.ff?'ff':ma.sf?'sf':ma.ie?'ie':ma.op?'op':'??';ma.clientPlatform=ma.win?'win':ma.mac?'mac':'???';var na=j.getElementsByTagName("script");for(var oa=0;oa<na.length;++oa){var pa=na[oa].src.match(/^(.*)3\.0\/uo\/UnityObject\.js$/i);if(pa){l=pa[1];break;}}function qa(ta,ua){for(var va=0;va<Math.max(ta.length,ua.length);++va){var wa=(va<ta.length)&&ta[va]?Number(ta[va]):0,xa=(va<ua.length)&&ua[va]?Number(ua[va]):0;if(wa<xa)return -1;if(wa>xa)return 1;}return 0;}function ra(ta){try{return new ActiveXObject("JavaWebStart.isInstalled."+ta+".0")!=null;}catch(ua){return false;}}function sa(ta){try{return new ActiveXObject("JavaPlugin.160_"+ta)!=null;}catch(ua){return false;}}ma.java=function(){if(k.javaEnabled()){var ta=(ma.win&&ma.ff),va=false;if(ta||va){if(typeof k.mimeTypes!=o){var wa=ta?[1,6,0,12]:[1,4,2,0];for(var xa=0;xa<k.mimeTypes.length;++xa)if(k.mimeTypes[xa].enabledPlugin){var ya=k.mimeTypes[xa].type.match(/^application\/x-java-applet;(?:jpi-)?version=(\d+)(?:\.(\d+)(?:\.(\d+)(?:_(\d+))?)?)?$/);if(ya!=null)if(qa(wa,ya.slice(1))<=0)return true;}}}else if(ma.win&&ma.ie)if(typeof ActiveXObject!=o){if(ra("1.7.0"))return true;if(ma.ie>=8){if(ra("1.6.0")){for(xa=12;xa<=50;++xa)if(sa(xa))if(ma.ie==9&&ma.moz==5&&xa<24){continue;}else return true;return false;}}else return ra("1.6.0")||ra("1.5.0")||ra("1.4.2");}}return false;}();ma.co=function(){if(ma.win&&ma.ie&&!ma.x64){var ta=ia.match(/(\.NET CLR [0-9.]+)|(\.NET[0-9.]+)/g);if(ta!=null){var va=[3,5,0];for(var wa=0;wa<ta.length;++wa){var xa=ta[wa].match(/[0-9.]{2,}/g)[0].split(".");if(qa(va,xa)<=0)return true;}}}return false;}();return ma;}();function x(ia){var ja=new RegExp(escape(ia)+"=([^;]+)");if(ja.test(j.cookie+";")){ja.exec(j.cookie+";");return RegExp.$1;}return false;}function y(ia,ja){document.cookie=escape(ia)+"="+escape(ja)+"; path=/";}function z(ia){var ja=0;if(ia){var ka=ia.toLowerCase().match(/^(\d+)(?:\.(\d+)(?:\.(\d+)([dabfr])?(\d+)?)?)?$/);if(ka&&ka[1]){var la=ka[1],ma=ka[2]?ka[2]:0,na=ka[3]?ka[3]:0,oa=ka[4]?ka[4]:'r',pa=ka[5]?ka[5]:0;ja|=((la/10)%10)<<28;ja|=(la%10)<<24;ja|=(ma%10)<<20;ja|=(na%10)<<16;ja|={d:2<<12,a:4<<12,b:6<<12,f:8<<12,r:8<<12}[oa];ja|=((pa/100)%10)<<8;ja|=((pa/10)%10)<<4;ja|=(pa%10);}}return ja;}function aa(ia){var ja=null,ka=j.getElementsByTagName("body")[0],la=j.createElement("object");if(ka&&la){la.setAttribute("type",i);la.style.visibility="hidden";ka.appendChild(la);var ma=0;(function(){if(typeof la.GetPluginVersion==o){if(ma++<10)setTimeout(arguments.callee,10);}else{ja={};ja.plugin=la.GetPluginVersion();ja.unity=la.GetUnityVersion("");}})();ka.removeChild(la);}ia(ja);}function ba(ia){var ja=q,ka=null;k.plugins.refresh();if(w.clientBrand==="??"||w.clientPlatform==="???"||w.mobile){ja=s;}else if(w.op&&w.mac){ja=s;}else if(typeof k.plugins!=o&&k.plugins[h]&&typeof k.mimeTypes!=o&&k.mimeTypes[i]&&k.mimeTypes[i].enabledPlugin){ja=p;aa(function(qa){if(!qa||!qa.plugin){ja=r;}else if(w.mac&&w.ch&&(z(qa.plugin)<=z("2.6.1f3"))){ja=r;}else ka=qa.plugin;ia(ja,ka);});return;}else if(w.ie){var la=false;try{if(ActiveXObject.prototype!=null)la=true;}catch(ma){}if(!la||w.x64){ja=s;}else{ja=q;try{var na=new ActiveXObject("UnityWebPlayer.UnityWebPlayer.1");ka=na.GetPluginVersion();ja=p;if(ka=="2.5.0f5"){var oa=/Windows NT \d+\.\d+/.exec(k.userAgent);if(oa&&oa.length>0){var pa=parseFloat(oa[0].split(' ')[2]);if(pa>=6)ja=r;}}}catch(ma){}}}ia(ja,ka);}function ca(ia){var ja=q,ka=null;if(typeof k.mimeTypes!=o&&k.mimeTypes[i]&&k.mimeTypes[i].enabledPlugin){ja=p;var la=k.mimeTypes[i].enabledPlugin.description;ka=la.replace("Unity Player ","");}ia(ja,ka);}function da(ia){ba(function(ja,ka){var la='javascript:window.open("http://unity3d.com/webplayer/");',ma=ja;if(ja!=s&&ja!=r)if(w.java&&!x(m)){la="";ma=u;}else if(w.co&&!x(n)){la="";ma=v;}else if(w.win){la=l+(w.x64?"UnityWebPlayer64.exe":"UnityWebPlayer.exe");ma=t;}else if(k.platform=="MacIntel"){la=l+"webplayer-mini.dmg";ma=t;}else if(k.platform=="MacPPC"){la=l+"webplayer-mini.dmg";ma=t;}ia(la,ma);});}function ea(){y(m,true);var ia={type:"application/x-java-applet",archive:l+"3.0/jws/UnityWebPlayer.jar",code:"UnityWebPlayer",name:"Unity Web Player",width:1,height:1},ja=j.createElement("div"),ka=j.body.lastChild;j.body.insertBefore(ja,ka.nextSibling);var la={jnlp_href:l+"3.0/jws/UnityWebPlayer.jnlp",classloader_cache:false,installer:ha(),image:"http://webplayer.unity3d.com/installation/unitylogo.png",centerimage:true,boxborder:false,scriptable:true,mayscript:true};if(w.win&&w.ie){var ma="";for(var na in ia)ma+=' '+na+'="'+ia[na]+'"';var oa="";for(var pa in la)oa+='<param name="'+pa+'" value="'+la[pa]+'" />';ja.outerHTML='<object'+ma+'>'+oa+'</object>';}else{var qa=j.createElement("object");for(na in ia)qa.setAttribute(na,ia[na]);for(pa in la){var ra=j.createElement("param");ra.name=pa;ra.value=la[pa];qa.appendChild(ra);}ja.parentNode.replaceChild(qa,ja);}}function fa(ia){if(!ia)y(n,true);var ja=l+"3.0/co/UnityWebPlayer.application?installer="+encodeURIComponent(l+"UnityWebPlayer.exe");ga(ja);}function ga(ia){var ja=document.createElement("IFRAME");ja.setAttribute("src",ia);ja.style.width=1+"px";ja.style.height=1+"px";ja.style.border="none";document.body.appendChild(ja);}function ha(){return l+(w.win?"UnityWebPlayer.exe":"UnityPlayer.plugin.zip");}return {kInstalled:p,kMissing:q,kUnsupported:s,kJava:u,kClickOnce:v,triedJavaCookie:m,detectUnity:function(ia){if(w.w3&&!(w.wk&&w.wk<312)&&ia){ba(ia);}else if(ia)ia(q);},detectOnlyUnity:function(ia){ca(ia);},genInstallUnity:function(ia){da(ia);},doJavaInstall:function(){ea();},doClickOnceInstall:function(ia){fa(ia);},doStandardInstall:function(ia){ga(ia);}};}();e.exports.kInstalled=g.kInstalled;e.exports.kMissing=g.kMissing;e.exports.kUnsupported=g.kUnsupported;e.exports.kJava=g.kJava;e.exports.kClickOnce=g.kClickOnce;e.exports.triedJavaCookie=g.triedJavaCookie;e.exports.detectUnity=function(h){g.detectUnity(function(i,j){h(i,j);});};e.exports.detectOnlyUnity=function(h){g.detectOnlyUnity(function(i,j){h(i,j);});};e.exports.genInstallUnity=function(h){g.genInstallUnity(function(i,j){h(i,j);});};e.exports.doJavaInstall=function(){g.doJavaInstall();};e.exports.doClickOnceInstall=function(h){g.doClickOnceInstall(h);};e.exports.doStandardInstall=function(h){g.doStandardInstall(h);};e.exports.callbackWhenUnityDetected=function(h){var i=function(){g.detectUnity(function(j,k){if(j==g.kInstalled){h(j,k);}else setTimeout(i,3000);});};i();};},null);
__d("UnityLogging",["AsyncRequest","UnityObject","UserAgent_DEPRECATED"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=function(k){return function(l,m){var n={status:l,version:m,reason:k};new g().setURI('/ajax/platform/unity/logging').setData(n).send();};};e.exports.dailyLogUnityVersion=function(){if((i.webkit()>=537.71&&!i.chrome())||i.chrome()>=32){h.detectOnlyUnity(j('daily'));return;}h.detectUnity(j('daily'));};e.exports.logAfterInstallComplete=function(){h.detectOnlyUnity(function(k,l){j('install_complete')(k,l);if(k!=h.kInstalled)h.detectUnity(j('install_complete_backup'));});};e.exports.logUntilInstalled=function(){h.detectUnity(function(k,l){j('canvas')(k,l);if(k!=h.kInstalled)h.callbackWhenUnityDetected(j('state_change'));});};},null);
__d("PluginSendToMobile",["DOMEventListener","Form"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={listen:function(j,k){g.add(j,'click',function(l){h.bootstrap(k);});}};e.exports=i;},null);
__d("XPrivacyCheckupSpawnDialogController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/privacy\/checkup\/dialog\/show\/",{source:{type:"Enum",enumType:1}});},null);
__d("PrivacyLiteFlyout",["Animation","Arbiter","ArbiterMixin","AsyncDialog","AsyncRequest","Banzai","CSS","DOM","Ease","Event","Parent","PrivacyConst","Style","SubscriptionsHandler","Toggler","XPrivacyCheckupSpawnDialogController","XPrivacyRemindersDismissController","copyProperties","csx","cx","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){b.__markCompiled&&b.__markCompiled();var ba='PrivacyLiteFlyout/expandingSection',ca={},da={};function ea(na,oa,pa){var qa=oa?0:na.offsetHeight;s.set(na,'height',qa+'px');s.set(na,'overflow','hidden');m.show(na);var ra=oa?na.scrollHeight:0,sa=n.getID(na);ca[sa]&&ca[sa].stop();ca[sa]=new g(na).to('height',ra).ondone(function(){ca[sa]=null;s.set(na,'height','');s.set(na,'overflow','');ra||m.hide(na);pa();}).duration(Math.abs(ra-qa)*1.5).ease(o.sineOut).go();}function fa(na){return new k().setURI(na).send();}function ga(){return fa('/ajax/privacy/privacy_lite/increment_masher_tip_count');}function ha(){return fa('/ajax/privacy/privacy_lite/dismiss_masher_tip');}function ia(na){var event='other_section';switch(na){case 'who_can_see':case 'who_can_contact':case 'how_to_stop':event=na;break;}return event;}var ja=null,ka=false,la=false,ma=x({loadBody:function(){this._loadBody(false);},loadBodyFromMegaphone:function(){this._loadBody(true);},_loadBody:function(na){if(!ka&&aa('fbPrivacyLiteFlyoutLoading')){ka=true;new k('/ajax/privacy/privacy_lite/loader').setData({from_megaphone:na}).send();}},_addListener:function(na,event,oa){return p.listen(na,'click',function(){l.post('privacy_lite',{event:event,exit_point:oa});});},addLoggingElem:function(na,event,oa){var pa=this._loggingElements.length,qa={elem:na,event:event,exit:oa};this._loggingElements[pa]=qa;},registerSettingsAndBasicsLinkLogging:function(na,event,oa,pa){var qa=n.scry(na,"._5cw0")[0],ra=n.scry(na,"._3djx")[0];if(qa){this._settingsLinkListener&&this._settingsLinkListener.release();this._settingsLinkListener=this._addListener(qa,event,oa);}if(ra){this._privacyBasicsLinkListener&&this._privacyBasicsLinkListener.release();this._privacyBasicsLinkListener=this._addListener(ra,event,pa);}},_subscribeListeners:function(){this._loggingElements&&this._loggingElements.forEach(function(na){this._subscriptions&&this._subscriptions.addSubscriptions(this._addListener(na.elem,na.event,na.exit));},this);},renderBody:function(na,oa){var pa=aa('fbPrivacyLiteFlyoutLoading');if(pa){n.replace(pa,na);ma.registerCallback(function(){ma.inform('load',null,h.BEHAVIOR_STATE);},oa);}},hideCleanup:function(na){h.inform(ba);var oa=n.scry(na,"._2va0").forEach(function(pa){m.removeClass(pa,"_2va0");});},registerFlyoutToggler:function(na,oa,pa){this._loggingElements=[];ja=oa;var qa=u.createInstance(na);qa.setSticky(false);u.listen(['show','hide'],oa,function(ra){ma.inform(ra);la=ra==='show';if(!la){ma.hideCleanup(na);qa.hide();this._subscriptions&&this._subscriptions.release();this._subscriptions=null;h.inform('layer_hidden',{type:'PrivacyShortcutsFlyout'});}else{h.inform('layer_shown',{type:'PrivacyShortcutsFlyout'});if(pa){pa.start(this);pa=null;}h.subscribeOnce(ba,function(){this._subscriptions&&this._subscriptions.release();this._subscriptions=new t();this._subscribeListeners();}.bind(this));l.post('privacy_lite',{event:'show_flyout',exit_point:null});}}.bind(this));},isFlyoutVisible:function(){return ja&&u.getActive()===ja;},exists:function(){return !!n.scry(document.body,"._59fc")[0];},setFlyoutVisible:function(na){na?u.show(ja):u.hide(ja);},showSection:function(na){var oa=da[na];if(!oa)return;if(!oa.sublist_container){ma.inform('expanded',na,h.BEHAVIOR_STATE);return;}var pa=oa.chevron,qa=oa.sublist_container;h.inform(ba,pa);if(ma.inform('expand',na)!==false){m.removeClass(pa,"_9or");m.addClass(pa,"_9os");ea(qa,true,function(){ma.inform('expanded',na);});}},hideSection:function(na,oa,pa){var qa=da[na],ra=qa.chevron,sa=qa.sublist_container;if(pa===ra)return;if(ma.inform('collapse',na)!==false){m.addClass(ra,"_9or");m.removeClass(ra,"_9os");ea(sa,false,function(){ma.inform('collapsed',na);});}},toggleSection:function(na){var oa=da[na].chevron;u.getInstance(oa).hide();if(m.hasClass(oa,"_9or")){ma.showSection(na);l.post('privacy_lite',{event:ia(na)+'_expand',exit_point:null});new k('/ajax/privacy/privacy_lite/log_section_expand').setData({section:na}).send();}else{ma.hideSection(na);l.post('privacy_lite',{event:ia(na)+'_collapse',exit_point:null});}},registerSection:function(na,oa){da[na]=oa;if(oa.sublist_container){h.subscribe(ba,ma.hideSection.bind(null,na));p.listen(oa.section_block,'click',ma.toggleSection.bind(null,na));}ma.inform(na);},registerInlineHelpOnAudienceChangeNewSelector:function(na,oa,pa,qa){na=na.getInstance();na.subscribe('changed',function(ra){this._registerInlineHelpOnAudienceChange(oa,pa,qa,na.getSelectedBaseValue());}.bind(this));},registerSelectorLogging:function(na,oa,pa,qa){na=na.getInstance();na.subscribe('open',function(){l.post('privacy_lite',{event:oa,exit_point:null});});na.subscribe('close',function(){l.post('privacy_lite',{event:pa,exit_point:null});});na.subscribe('changed',function(){l.post('privacy_lite',{event:qa,exit_point:null});});},_registerInlineHelpOnAudienceChange:function(na,oa,pa,qa){var ra=n.find(na,"._9o_"),sa=n.find(na,"._2v9_");if(pa){var ta=n.find(na,"._5n9w"),ua=(qa==r.BaseValue.EVERYONE);m.conditionShow(ta,ua);m.conditionShow(ra,!ua);if(ta&&ua){var va=(w.getURIBuilder()).setString('type','delta_everyone').setBool('log_plite',true).getURI();new k(va).send();}}else m.show(ra);m.hide(sa);if(oa)new k('/ajax/privacy/privacy_lite/kill_intro').send();},registerInlineHelpXOutOnClick:function(na,oa,pa){p.listen(na,'click',function(){m.addClass(oa,"_9p0");});},registerBlockUnhideOnFocus:function(na,oa){p.listen(na,'focus',function(pa){m.show(pa);l.post('privacy_lite',{event:'block_user_input_click',exit_point:null});}.bind(this,oa));},registerMessageFilterSettingOnClick:function(na,oa){var pa=n.find(na,"._fv0");p.listen(na,'click',function(){if(pa.checked){new k('/ajax/mercury/change_filtering_type.php').setData({filtering_type:oa,source:'privacy_lite'}).send();}else{var event='basic_filtering';if(oa==='strict')event='strict_filtering';l.post('privacy_lite',{event:event,exit_point:null});}});},registerMasher:function(na,oa){var pa=false;h.subscribe(ba,function(qa,ra){var sa=true;if(ra)sa=!!n.scry(q.byTag(ra,'li'),"._571t").length;if(pa||!sa)return;pa=!!(ga());});p.listen(oa,'click',function(){n.remove(na);ha();});},registerPrivacyCheckupListener:function(na){p.listen(na,'click',function(){this.setFlyoutVisible(false);j.send(new k((v.getURIBuilder()).setEnum('source','plite').getURI()));l.post('privacy_lite',{event:'exit_flyout',exit_point:'privacy_checkup'});}.bind(this));},displayPrivacyCheckup:function(na){na.show();}},i);e.exports=ma;},null);
__d("PrivacyLiteFlyoutHelp",["Event","Arbiter","AsyncRequest","Banzai","ContextualHelpSearchController","CSS","DOM","Parent","copyProperties","csx","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r,s;function t(u,v,w,x,y){this._width=315;s=m.find(v,'input');var z=m.create('div');this.init(u,s,z,w,x,{focusSearchBox:false});r=n.byClass(v,"_8-a");g.listen(y,'click',function(){this._hideSearch(this);j.post('privacy_lite',{event:'plite_search_collapse',exit_point:null});}.bind(this));h.subscribe('PrivacyLiteFlyout/expandingSection',this._hideSearch.bind(this));var aa=m.scry(r,"._d1r")[0];aa&&g.listen(aa,'click',function(){l.addClass(r,"_aw6");s.focus();j.post('privacy_lite',{event:'plite_search_expand',exit_point:null});if(!this.suggestedResults)new i('/ajax/privacy/privacy_lite/help_suggestions').setHandler(function(ba){var ca=ba.getPayload().searchSuggestions,da=m.find(r,"._4_8m");m.setContent(da,ca);l.addClass(r,"_4_8l");}.bind(this)).send();}.bind(this));}o(t.prototype,new k(),{source:'privacy_shortcuts',_hideSearch:function(){this.clearResults();l.removeClass(r,"_aw6");},show:function(u){if(u===this.topics_area){l.removeClass(r,"_aw7");return;}else if(u===this.loader){l.addClass(r,"_aw7");l.hide(this.results_area);}else l.hide(this.loader);l.show(u);}});e.exports=t;},null);
__d("ViewasChromeBar",["Event","Arbiter","AsyncRequest","CSS","DOM","Focus","ModalMask","PageTransitions","Parent","cx","csx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r='ViewasChromeBar/initialized',s=null,t=false;function u(x){h.subscribe(r,x);}function v(x){j.addClass(x,"_7g7");var y=k.find(x,"._7g0");l.set(k.find(y,'.textInput'));}var w={initChromeBar:function(x){if(t)return;s=x;t=true;h.inform(r,null,h.BEHAVIOR_STATE);},update:function(x,y){u(function(){k.setContent(s,x);if(y)new i('/ajax/privacy/glasgow/viewas_bar_flyout_open').send();});},registerSpecificModeOnClick:function(x){g.listen(x,'click',v.bind(null,o.byClass(x,"_7f-")));},registerFlyoutModalMask:function(){m.show();n.registerHandler(m.hide,10);}};e.exports=w;},null);
__d("XRegistrationFormLoggingController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/registration\/log\/",{action:{type:"String"},reg_instance:{type:"String"},category:{type:"Enum",enumType:1},type:{type:"Enum",enumType:1},field:{type:"Enum",enumType:1}});},null);
__d("RegistrationLogger",["AsyncSignal","RegistrationClientConfig","XRegistrationFormLoggingController"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={bumpInlineValidation:function(k,l,m){if(!h.logging.enabled)return;var n=i.getURIBuilder().setEnum('category',h.logging.categories.INLINE).setEnum('type',l).setEnum('field',k).setString('reg_instance',m).getURI();new g(n.toString(),{}).setHandler(this.handleResponse).send();},logFormFocus:function(k,l){var m=i.getURIBuilder().setString('action',k).setString('reg_instance',l).getURI();new g(m.toString(),{}).setHandler(this.handleResponse).send();},handleResponse:function(k){!k;}};e.exports=j;},null);
__d("RegistrationController",["Animation","AsyncRequest","CSS","DataStore","DOM","Event","Focus","Form","HTML","JPPhoneCaptcha","Promise","Recaptcha","RegistrationClientConfig","RegistrationInterstitialCaptcha","RegistrationLogger","Style","$","cx","ge","goURI","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){b.__markCompiled&&b.__markCompiled();var ba={init:function(da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa){this.captchaPaneShown=false;this.errorField=null;this.hasLoggedFocus=false;this.focusListeners=[];this.regForm=da;this.logFocusName=fa;this.responseCallback=this.handleResponse;this.tosContainerNode=ja;this.regPagesMsgNode=ka;this.captchaButtonsNode=la;this.regButton=ga;this.captchaRegButton=ha;this.asyncStatus=ma;this.captchaAsyncStatus=na;this.contactpointVariant=oa;this.confirmComponent=pa;this.initListeners(ga,ha,ia);this.childValidators=this.childValidators||[];this.shownFlyout=this.shownFlyout||null;this.confirmationDialog=this.confirmationDialog||null;},initListeners:function(da,ea,fa){this.focusListeners=[l.listen(this.regForm,'click',this.logFormFocus.bind(this)),l.listen(this.regForm,'keypress',this.logFormFocus.bind(this))];l.listen(da,'click',this.validateForm.bind(this));l.listen(ea,'click',this.validateForm.bind(this));l.listen(fa,'click',(function(){this.hideCaptcha();this.showRegistrationPane();}).bind(this));d(['FormTypeABTester'],function(ha){this.regForm.ab_tester=new ha(document);l.listen(da,'click',ca.bind(this,this.regForm));l.listen(ea,'click',ca.bind(this,this.regForm));}.bind(this));if(this.contactpointVariant==='hide'){var ga=this.getField(s.fields.EMAIL);l.listen(ga,'focus',function(ha){i.show(this.confirmComponent);}.bind(this));}},validateForm:function(){if(this.confirmationDialog)this.confirmationDialog.copyContactpointToConfirmationField();var da=this.childValidators.map(function(ea){return ea.runAllValidations();});q.all(da).done(function(){return this.preSubmitForm();}.bind(this),function(){for(var ea=0;ea<this.childValidators.length;++ea){var fa=this.childValidators[ea];if(!fa.fieldIsValid())return fa.focusField();}aa(false);}.bind(this));},preSubmitForm:function(){if(this.confirmationDialog){this.confirmationDialog.show();}else this.submitForm();},submitForm:function(){var da=n.serialize(this.regForm);if(!this.captchaPaneShown){da.ignore='captcha';}else this.disableMarketingButton(this.captchaRegButton);if(this.errorField&&y(this.errorField))w(this.errorField).setAttribute('title','');i.show(this.asyncStatus);i.show(this.captchaAsyncStatus);this.disableMarketingButton(this.regButton);new h().setURI('/ajax/register.php').setData(da).setHandler(this.responseCallback.bind(this)).setErrorHandler(this.handleErrorResponse.bind(this)).send();},disableMarketingButton:function(da){da.disabled=true;i.addClass(da,("_67u"));},enableMarketingButton:function(da){da.disabled=false;i.removeClass(da,("_67u"));},handleErrorResponse:function(da){i.hide(this.asyncStatus);i.hide(this.captchaAsyncStatus);this.enableMarketingButton(this.regButton);this.fadeInValidationError();},handleResponse:function(da){i.hide(this.asyncStatus);i.hide(this.captchaAsyncStatus);var ea=da.getPayload();if(ea.redirect){i.show(this.captchaAsyncStatus);z(ea.redirect);}else if(ea.field_validation_succeeded){this.handleFieldValidationSucceeded(ea);}else{this.enableMarketingButton(this.regButton);if(ea.bad_captcha){this.handleBadCaptcha(ea);}else if(ea.tooyoung){this.handleTooYoung(ea);}else if(ea.tos_error){this.handleTOSError(ea);}else if(ea.ask_to_login_instead){var fa=y('email');if(fa)fa.value=ea.ask_to_login_instead;var ga=y('asked_to_login');if(ga)ga.value=1;}else if(ea.registration_succeeded){this.handleRegistrationSucceeded(ea);}else this.handleValidationError(ea);}},handleValidationError:function(da){this.showValidationError(da.field,da.error);},handleRegistrationSucceeded:function(da){var ea=w('confirmation_email_form'),fa=w('confirmation_email');fa.value=da.email;ea.submit();},handleBadCaptcha:function(da){this.enableMarketingButton(this.captchaRegButton);k.setContent(w('outer_captcha_box'),da.xhp);this.showCaptchaPane();this.showValidationError('captcha_response',da.error);},handleFieldValidationSucceeded:function(da){this.hideValidationError();this.showCaptchaPane();if(da.show_captcha_interstitial)t.show();},handleTooYoung:function(da){k.setContent(this.regForm,da.xhp);},handleTOSError:function(da){this.showCaptchaPane();this.enableMarketingButton(this.captchaRegButton);this.showValidationError('captcha_response',da.error);},showCaptchaPane:function(){i.hide('reg_form_box');var da=w('captcha'),ea=j.get(da,'captcha-class','FacebookCaptcha');if(ea=='ReCaptchaCaptcha'){r.createCaptcha();}else if(ea=='JPPhoneCaptcha')p.createCaptcha();i.show('reg_captcha');i.show(this.tosContainerNode);i.hide(this.regPagesMsgNode);i.show(this.captchaButtonsNode);try{y('captcha_response').focus();}catch(fa){}this.captchaPaneShown=true;},hideCaptcha:function(){y('reg_captcha')&&i.hide('reg_captcha');i.hide(this.tosContainerNode);i.hide(this.captchaButtonsNode);this.hideValidationError();this.captchaPaneShown=false;},showValidationError:function(da,ea){i.hide(this.regPagesMsgNode);this.hideValidationError();var fa=w('reg_error_inner');if(!da)da=y('name')?'name':'firstname';this.errorField=da;try{w(da).setAttribute('title',ea.replace(/<.+?>/g,''));w(da).focus();}catch(ga){}k.setContent(fa,o(ea));this.fadeInValidationError();},fadeInValidationError:function(){var da=w('reg_error');v.set(da,'opacity',0);new g(da).show().to('height','auto').duration(100).checkpoint().from('opacity',0).to('opacity',1).duration(400).go();m.set(da);},hideValidationError:function(){if(i.shown(w('reg_error'))&&v.getOpacity(w('reg_error'))>0)i.hide(w('reg_error'));},showRegistrationPane:function(){i.show('reg_form_box');i.show(this.regPagesMsgNode);},logFormFocus:function(){if(this.hasLoggedFocus)return;var da=this.logFocusName,ea=this.regForm.reg_instance&&this.regForm.reg_instance.value;u.logFormFocus(da,ea);this.hasLoggedFocus=true;this.focusListeners.forEach(function(fa){fa.remove();});this.focusListeners=[];},getField:function(da){aa(this.regForm);return this.regForm[da];},getRegInstance:function(){var da=this.getField('reg_instance');return da&&da.value;},enrollChildValidator:function(da){this.childValidators=this.childValidators||[];this.childValidators.push(da);da.addListener('show',function(ea){if(this.shownFlyout)this.shownFlyout.hide();ea.show();this.shownFlyout=ea;},this);da.addListener('hide',function(ea){ea.hide();},this);},registerContactpointDialog:function(da){this.confirmationDialog=da;}};function ca(da){da.ab_test_data.value=da.ab_tester.getData();return true;}e.exports=ba;},null);
__d("ErrorContextualDialogXUITheme",["cx"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={wrapperClassName:"_572t",arrowDimensions:{offset:12,length:22}};e.exports=h;},null);
__d("RegistrationFieldValidator",["ContextualDialog","ErrorContextualDialogXUITheme","CSS","csx","DOM","DOMQuery","Event","EventEmitter","Focus","LayerAutoFocus","LayerRefocusOnHide","Deferred","RegistrationClientConfig","RegistrationController","RegistrationLogger","cx","getActiveElement","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){b.__markCompiled&&b.__markCompiled();'use strict';for(var y in n)if(n.hasOwnProperty(y))aa[y]=n[y];var z=n===null?null:n.prototype;aa.prototype=Object.create(z);aa.prototype.constructor=aa;aa.__superConstructor__=n;function aa(ba,ca,da,ea){n.call(this);this.wrapper=ba;this.field=ca;this.position=da;this.behavior=ea;this.flyout=null;this.steps=[];this.stepContexts=[];this.stepMarkups=[];this.stepLoggingTypes=[];this.stepArgs=[];this.isValid=true;this.stepCounter=null;this.stepProgress=null;t.enrollChildValidator(this);this.addListener('validated',this.maybeShowPersistent,this);this.addListener('validated',this.maybeDismissFlyout,this);this.setupListenersForField();this.setupListenersForFeedbackIcon("._5dbc");this.setupListenersForFeedbackIcon("._5dbd");}aa.prototype.setupListenersForField=function(){m.listen(this.field,'focus',this.dismissPersistent.bind(this));m.listen(this.field,'focus',this.maybeShowFlyout.bind(this));m.listen(this.field,'blur',this.dismissFlyout.bind(this));switch(this.behavior){case 'follow':m.listen(this.field,'blur',this.validateField.bind(this,0,[]));break;case 'follow-except-empty':m.listen(this.field,'blur',this.validateField.bind(this,0,[s.logging.types.IS_EMPTY]));break;case 'follow-none':break;default:x(false);break;}};aa.prototype.setupListenersForFeedbackIcon=function(ba){var ca=l.scry(this.wrapper,ba);for(var da=0;da<ca.length;da++)m.listen(ca[da],'click',this.focusField.bind(this));};aa.prototype.getField=function(){return this.field;};aa.prototype.getFieldName=function(){return this.field.name;};aa.prototype.getFlyoutContext=function(){return this.field;};aa.prototype.addValidationStep=function(ba,ca,da,ea){this.stepMarkups.push(ca);this.stepLoggingTypes.push(ba);this.steps.push(da);this.stepContexts.push(ea);this.stepArgs.push(Array.prototype.slice.call(arguments,4));};aa.prototype.validateField=function(ba,ca){if(this.stepCounter===null&&ba===0){x(this.stepProgress===null);this.stepCounter=0;this.stepProgress=new r();}else if(this.stepCounter!==null&&this.stepCounter+1===ba){this.stepCounter=ba;}else return;x(0<=this.stepCounter);x(this.stepCounter<=this.steps.length);x(this.stepProgress!==null);if(this.stepCounter<this.steps.length){ba=this.stepCounter;if(ca.indexOf(this.stepLoggingTypes[ba])>=0){this.validateField(ba+1,ca);}else{var da=this.steps[ba].apply(this.stepContexts[ba],[this.getField()].concat(this.stepArgs[ba]));da.done(function(){return this.validateField(ba+1,ca);}.bind(this),function(){return this.$RegistrationFieldValidator0();}.bind(this));}}else{this.isValid=true;this.emit('validated',true);this.stepProgress.resolve();this.stepCounter=null;this.stepProgress=null;}};aa.prototype.$RegistrationFieldValidator0=function(){this.isValid=false;var ba=this.stepMarkups[this.stepCounter].cloneNode(true),ca=this.stepLoggingTypes[this.stepCounter];if(!this.flyout){this.flyout=new g({context:this.getFlyoutContext(),position:this.position,theme:h},ba).disableBehavior(p).disableBehavior(q);}else this.flyout.setInnerContent(ba);this.stepCounter=null;this.emit('validated',false);this.stepProgress.reject();this.stepProgress=null;var da=t.getRegInstance();u.bumpInlineValidation(this.getFieldName(),ca,da);this.field.setAttribute('aria-describedby',k.getID(ba));};aa.prototype.runAllValidations=function(){this.validateField(0,[]);return this.stepProgress.getPromise();};aa.prototype.isFocused=function(){return w()===this.field;};aa.prototype.focusField=function(){o.set(this.field);};aa.prototype.fieldIsValid=function(){return this.isValid;};aa.prototype.maybeShowFlyout=function(){if(this.isFocused()&&!this.isValid){x(this.flyout);this.emit('show',this.flyout);this.field.setAttribute('aria-invalid','true');}};aa.prototype.maybeShowPersistent=function(){i.conditionClass(this.wrapper,"_5634",!this.isFocused()&&!this.isValid);};aa.prototype.dismissPersistent=function(){i.removeClass(this.wrapper,"_5634");};aa.prototype.dismissFlyout=function(){if(this.flyout)this.emit('hide',this.flyout);};aa.prototype.maybeDismissFlyout=function(){if(this.isValid){this.dismissFlyout();this.field.removeAttribute('aria-invalid');this.field.removeAttribute('aria-describedby');}};e.exports=aa;},null);
__d("RegistrationMultipleInputValidator",["DataStore","DOM","Event","Focus","RegistrationClientConfig","RegistrationFieldValidator","getActiveElement","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';for(var o in l)if(l.hasOwnProperty(o))q[o]=l[o];var p=l===null?null:l.prototype;q.prototype=Object.create(p);q.prototype.constructor=q;q.__superConstructor__=l;function q(r,s,t,u,v,w){this.fieldType=v;var x;switch(this.fieldType){case k.validators.types.SELECTORS:x='select';break;case k.validators.types.RADIO:x='input[type="radio"]';break;default:n(false);}this.inputs=[];var y=h.scry(s,x);this.inputs.push.apply(this.inputs,y);n(this.inputs.length===w);l.call(this,r,s,t,u);}q.prototype.setupListenersForField=function(){n(this.inputs!=null);this.inputs.forEach(function(r){i.listen(r,'focus',this.dismissPersistent.bind(this));i.listen(r,'focus',this.maybeShowFlyout.bind(this));if(this.fieldType===k.validators.types.RADIO){i.listen(r,'click',function(){if(!this.isFocused())this.emit('fieldblur');}.bind(this));}else i.listen(r,'blur',function(){setTimeout((function s(){if(!this.isFocused())this.emit('fieldblur');}).bind(this),0);}.bind(this));},this);this.addListener('fieldblur',this.dismissFlyout,this);switch(this.behavior){case 'follow':this.addListener('fieldblur',this.validateField.bind(this,0,[]));break;case 'follow-except-empty':this.addListener('fieldblur',this.validateField.bind(this,0,[k.logging.types.IS_EMPTY]));break;case 'follow-none':break;default:n(false);break;}};q.prototype.getField=function(){return this.inputs;};q.prototype.getFieldName=function(){return g.get(this.field,'name');};q.prototype.getFlyoutContext=function(){return this.inputs[0];};q.prototype.isFocused=function(){var r=m();for(var s=0;s<this.inputs.length;s++)if(this.inputs[s]===r)return true;return false;};q.prototype.focusField=function(){j.set(this.inputs[0]);};e.exports=q;},null);
__d("XRegistrationValidateController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/ajax\/registration\/validation\/{type}\/",{type:{type:"Enum",required:true,enumType:1},contactpoint:{type:"String"}});},null);
__d("RegistrationInlineValidations",["AsyncRequest","DataStore","Promise","RegistrationClientConfig","RegistrationController","RegistrationFieldValidator","RegistrationMultipleInputValidator","XRegistrationValidateController","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';function p(ca){return new i(function(da,ea){if(!ca.value||/^\s*$/.exec(ca.value)){ea();}else da();});}function q(ca){return new i(function(da,ea){for(var fa=0;fa<ca.length;fa++)if(!ca[fa].value||ca[fa].value==='0'){ea();return;}da();});}function r(ca){return new i(function(da,ea){for(var fa=0;fa<ca.length;fa++)if(ca[fa].checked){da();return;}ea();});}var s=/@|\d/;function t(ca){return new i(function(da,ea){function fa(ia){var ja=ia.getPayload();if(ja.valid===true){da();}else ea();}function ga(ia){da();}if(!s.exec(ca.value)){ea();}else{var ha=(n.getURIBuilder()).setEnum('type',j.logging.types.CONTACTPOINT_INVALID).setString('contactpoint',ca.value).getURI();(new g()).setURI(ha).setMethod('GET').setReadOnly(true).setHandler(fa).setErrorHandler(ga).send();}});}function u(ca,da){return new i(function(ea,fa){var ga=k.getField(da);if(ga.value===ca.value){ea();}else fa();});}function v(ca){var da=j.logging.types.IS_EMPTY,ea=j.messages.INCORRECT_NAME;ca.addValidationStep(da,ea,p);}function w(ca){var da=j.logging.types.IS_EMPTY,ea=j.messages.INCORRECT_CONTACTPOINT;ca.addValidationStep(da,ea,p);da=j.logging.types.CONTACTPOINT_INVALID;ea=j.messages.INVALID_CONTACTPOINT;ca.addValidationStep(da,ea,t);}function x(ca){var da=j.logging.types.IS_EMPTY,ea=j.messages.INCORRECT_CONTACTPOINT_CONF;ca.addValidationStep(da,ea,p);da=j.logging.types.CONTACTPOINT_MATCH;ea=j.messages.CONTACTPOINT_RETYPE_DIFFERENT;var fa=j.fields.EMAIL;ca.addValidationStep(da,ea,u,null,fa);}function y(ca){var da=j.logging.types.IS_EMPTY,ea=j.messages.PASSWORD_BLANK;ca.addValidationStep(da,ea,p);}function z(ca){var da=j.logging.types.IS_EMPTY,ea=j.messages.INCOMPLETE_BIRTHDAY;ca.addValidationStep(da,ea,q);}function aa(ca){var da=j.logging.types.IS_EMPTY,ea=j.messages.NO_GENDER;ca.addValidationStep(da,ea,r);}function ba(ca,da,ea,fa){var ga=null,ha=h.get(da,'type');switch(ha){case j.validators.types.TEXT:ga=new l(ca,da,ea,fa);break;case j.validators.types.SELECTORS:var ia=3;ga=new m(ca,da,ea,fa,ha,ia);break;case j.validators.types.RADIO:var ja=2;ga=new m(ca,da,ea,fa,ha,ja);break;default:o(false);}switch(ga.getFieldName()){case j.fields.FIRSTNAME:case j.fields.LASTNAME:v(ga);break;case j.fields.EMAIL:w(ga);break;case j.fields.EMAIL_CONFIRMATION:x(ga);break;case j.fields.PASSWORD:y(ga);break;case j.fields.BIRTHDAY_WRAPPER:z(ga);break;case j.fields.GENDER_WRAPPER:aa(ga);break;default:o(false);}}e.exports=e.exports||{};e.exports.register=ba;},null);
__d("SearchFunnelTypeaheadLogger",["Arbiter","Banzai","DOM","Event","PageEvents","PageTransitions","SubscriptionsHandler","URI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o='search_funnel',p='search_end_to_end',q={focus:'entrant',render:'results_displayed',keydown:'interaction',select:'search'},r,s={init:function(t,u){if(!t||!u)return;this._isColdStart=true;this._sampleRates=u;this._core=t.getCore();this._data=t.getData();this._view=t.getView();this._handler=new m();this.log=this.log.bind(this);this.onKeydown=this.onKeydown.bind(this);this.onSelect=this.onSelect.bind(this);this.onTypeaheadImpression=this.onTypeaheadImpression.bind(this);this._transitionInProgress=true;this.onTypeaheadImpression();},onTypeaheadImpression:function(t){this._initTime=this._getInitTime();this.e2eMarkers=[];if(this._transitionInProgress&&i.scry(document.body,'.fbPhotoSnowlift').length===0)this.log('impression',{funnel_path:n.getNextURI().path});this.reset();this._handler.addSubscriptions(this._core.subscribeOnce('focus',this.log),this._view.subscribeOnce('render',this.log),this._view.subscribeOnce('select',this.onSelect));j.listen(this._core.getElement(),'keydown',this.onKeydown);l.registerHandler(function(){this._transitionInProgress=true;}.bind(this));l.registerCompletionCallback(this.onTypeaheadImpression);},onKeydown:function(event){if(!this._sawKeydown){this._sawKeydown=true;this.log('keydown',event);}},onSelect:function(event,t){t.funnel_data={selected_position:t.selected.globalIndex,selected_type:t.selected.type};if(t.selected.isNullState){t.funnel_data.interaction_type='null_state';}else if(t.selected.isSingleState){t.funnel_data.interaction_type='single_state';}else t.funnel_data.interaction_type='typed';this._endToEndPath=n.getMostRecentURI().path;r=null;g.subscribe('BigPipe/init',function(event,u){if(!u.arbiter)return;var v={arbiter:u.arbiter,event:k.AJAXPIPE_ONLOAD,markers:this.e2eMarkers,init_time:this._initTime,from_path:this._endToEndPath};setTimeout(function(){this.setupE2EPerfLogging(v);}.bind(this),0);}.bind(this));this.log(event,t);},reset:function(){this._handler.release();this._handler.engage();this._sawKeydown=false;this._transitionInProgress=false;},log:function(t,u){if(q[t])t=q[t];this.e2eMarkers.push({event:t,time:String(Date.now()-this._initTime)});if(!this._sampleRates[t])return;u=u||{};u.funnel_data=u.funnel_data||{};u.funnel_data.sample_rate=this._sampleRates[t];u.funnel_data.current_event_time=Date.now();if(this._prevTime&&this._prevEvt){u.funnel_data.previous_event_time=this._prevTime;u.funnel_data.previous_event=this._prevEvt;}this._prevTime=u.funnel_data.current_event_time;this._prevEvt=t;h.post(o,{funnel_data:u.funnel_data,path:u.funnel_path||l.getMostRecentURI().path,stage:t},h.VITAL);},setupE2EPerfLogging:function(t){return t.arbiter.subscribeOnce(t.event,function(u){if(r)return;r=true;t.markers.push({event:'end',time:String(Date.now()-t.init_time)});h.post(p,{from_path:this._endToEndPath,to_path:n.getNextURI().path,markers:t.markers,cold_start:this._isColdStart},h.VITAL);this._isColdStart=false;}.bind(this));},_getInitTime:function(){if(window.ExitTime)return window.ExitTime;var t=window.performance||window.msPerformance;if(!t||!t.timing)return;return t.timing.navigationStart;}};e.exports=s;},null);
__d("SearchSingleState",["fbt"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(j,k,l,m){return {classNames:'grammar',groupIndex:0,indexInGroup:j,path:k,text:l,type:'grammar',uid:m};}var i={getSuggestions:function(j,k,l){if(l==='ent:user'){return this.getSuggestionsForUser(j,k);}else if(l==='ent:page'){return this.getSuggestionsForPage(j,k);}else if(l==='ent:app'){return this.getSuggestionsForApp(j,k);}else if(l==='ent:group')return this.getSuggestionsForGroup(j,k);},getSuggestionsForUser:function(j,k){return [h(0,'/search/'+j+'/photos-of',g._("photos of {full name}",[g.param("full name",k)]),'photos_of_user'),h(1,'/search/'+j+'/friends',g._("friends of {full name}",[g.param("full name",k)]),'friends_of_user'),h(2,'/search/'+j+'/pages-liked',g._("favourite Pages of {full name}",[g.param("full name",k)]),'pages_liked_user'),h(3,'/search/str/'+k+'/users-named',g._("find all people named \"{full name}\"",[g.param("full name",k)]),'people_named_text')];},getSuggestionsForPage:function(j,k){return [h(0,'/search/'+j+'/photos-of',g._("photos of {name of page}",[g.param("name of page",k)]),'photos_of_page'),h(1,'/search/'+j+'/likers',g._("people who like {name of page}",[g.param("name of page",k)]),'page_likers'),h(2,'/search/str/'+k+'/pages-named',g._("find all Pages named \"{name of page}\"",[g.param("name of page",k)]),'pages_named_text')];},getSuggestionsForGroup:function(j,k){return [h(0,'/search/'+j+'/members',g._("{name of group} members",[g.param("name of group",k)]),'members_of_group'),h(1,'/search/'+j+'/photos-in',g._("photos in {name of groups}",[g.param("name of groups",k)]),'photos_in_group'),h(2,'/search/'+j+'/creators',g._("{name of group} creators",[g.param("name of group",k)]),'creators_of_group'),h(3,'/search/'+j+'/admins',g._("{name of group} administrators",[g.param("name of group",k)]),'admins_of_group')];},getSuggestionsForApp:function(j,k){return [h(0,'/search/'+j+'/apps-similar-to',g._("apps similar to {name of app}",[g.param("name of app",k)]),'similar_apps'),h(1,'/search/'+j+'/app-users',g._("people who use {name of app}",[g.param("name of app",k)]),'app_users'),h(2,'/search/str/'+k+'/pages-named',g._("find all apps named \"{name of page}\"",[g.param("name of page",k)]),'apps_named_text')];}};e.exports=i;},null);
__d("SearchDataSource",["Event","Arbiter","AsyncResponse","DataSource","HashtagSearchResultUtils","copyProperties","createArrayFromMixed","PageTransitions","SearchSingleState","UnicodeCJK"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q='/typeahead/search/facebar/nullstate/';for(var r in j)if(j.hasOwnProperty(r))t[r]=j[r];var s=j===null?null:j.prototype;t.prototype=Object.create(s);t.prototype.constructor=t;t.__superConstructor__=j;function t(u){"use strict";this._token=u.token||'';this._lazyonload=u.lazyonload===false?false:true;this._extraTypes=u.extraTypes;this._buckets=u.buckets;this._noMultiFetch=u.noMultiFetch||false;this._nullStateConfig=u.nullStateConfig||{};var v=u.maxResults||8;j.call(this,u);this._numResults={min:3,max:v};this.recordingRoute=u.recordingRoute||'non_banzai';this._enabledHashtag=u.enabledHashtag||false;this.logBackendQueriesWindow=u.logBackendQueriesWindow||25;this._genTime=u.genTime;this._bootstrapError=false;this.cacheUnicodeMatch.setConfigs({prefix_hangul_conjoining_jamo:true,prefix_kana_drop_trailing_latin:u.cjkDropLatinInCjTokens,prefix_kana_hiragana_to_katakana:u.cjkUiCacheHiraganaToKatakana});this.backendUnicodeMatch.setConfigs({prefix_kana_drop_trailing_latin:u.cjkDropLatinInCjTokens});}t.prototype.init=function(){"use strict";s.init.call(this);this._leanPayload=null;this._bootstrapRequestsPending=0;this._criticalOnly=true;this._updateMaxResults();g.listen(window,'resize',this._updateMaxResults.bind(this));if(this._nullStateConfig.singleState){h.subscribe('page_transition',this.handlePageTransition.bind(this));h.subscribe('search/updateNullState',this.updateNullState.bind(this));}if(this._nullStateConfig.recent)h.subscribe('search/refreshRecentSearchesNullstate',this.refreshRecentSearches.bind(this));};t.prototype.refreshRecentSearches=function(){"use strict";this.nullStateData=null;};t.prototype.handlePageTransition=function(){"use strict";this.nullStateParams={};};t.prototype.updateNullState=function(event,u){"use strict";this.nullStateParams=u;this.fetchNullState();};t.prototype.fetchNullState=function(u){"use strict";if(!this._nullStateConfig.hasNullState)return;var v=null;if(this.nullStateParams&&this.nullStateParams.uid){this.nullStateParams.query=u||'';v=this._fetchDataForSingleState();}else v=this._fetchDataForNullState();if(v)this.inform('respond',{value:this.nullStateParams?this.nullStateParams.query:'',results:v,isAsync:false,nullState:true});};t.prototype._fetchDataForSingleState=function(){"use strict";if(this.nullStateDataWithProfile&&this.nullStateParams.uid===this.nullStateDataWithProfile.profileID)return this.nullStateDataWithProfile.data;if(this.nullStateParams.type==='ent:app'||this.nullStateParams.type==='ent:group'||this.nullStateParams.type==='ent:page'){this.fetch(q,{profile_id:this.nullStateParams.uid,ent_type:this.nullStateParams.type},{singleState:true});this.nullStateDataWithProfile={profileID:this.nullStateParams.uid};return;}var u=o.getSuggestions(this.nullStateParams.uid,this.nullStateParams.text,this.nullStateParams.type);if(!u)return this._fetchDataForNullState();this.nullStateDataWithProfile={data:u,profileID:this.nullStateParams.uid};return u;};t.prototype._shouldRefreshNullState=function(){"use strict";if(!this._nullStateConfig.recent)return false;var u=window.location.href;if(!u)return false;if(u.contains('allactivity')&&u.contains('log_filter=search'))return true;return false;};t.prototype._fetchDataForNullState=function(){"use strict";if(this.nullStateData&&!this._shouldRefreshNullState()){setTimeout(function(){this.inform('respond',{value:'',results:this.nullStateData,isAsync:true,nullState:true});}.bind(this),0);return;}if(!this.fetchingNullState){this.fetchingNullState=true;this.fetch(q,{value:""},{nullState:true,value:''});}return null;};t.prototype.dirty=function(){"use strict";s.dirty.call(this);this._bootstrapError=false;this._fetchOnUseRequests=[];};t.prototype.asyncErrorHandler=function(u,v){"use strict";if(v.nullState)this.fetchingNullState=false;if(v.bootstrap)this._bootstrapError=true;this.inform('fetchError',{response:u,fetch_context:v});if(window.Dialog&&window.Dialog.getCurrent()==null&&u.getError()==1400003)i.verboseErrorHandler(u);};t.prototype.fetch=function(u,v,w){"use strict";w=w||{};w.fetch_start=Date.now();var x=n.getMostRecentURI().path;v=l(v,{path:x});s.fetch.call(this,u,v,w);};t.prototype.fetchHandler=function(u,v){"use strict";if(v.nullState){this.fetchingNullState=false;this.nullStateData=u.getPayload().entries;this.inform('respond',{value:'',results:u.getPayload().entries,isAsync:true,nullState:true});return;}if(v.singleState){this.nullStateDataWithProfile.data=u.getPayload().entries;this.inform('respond',{results:u.getPayload().entries,isAsync:true,value:this.nullStateParams?this.nullStateParams.query:'',nullState:true});return;}var w=u.getPayload(),x=l({fetch_end:Date.now()},v),y=x.value?h.BEHAVIOR_EVENT:h.BEHAVIOR_PERSISTENT;this.inform('beginFetchHandler',{response:u});if(v.bootstrap)this._bootstrapError=false;if(v.type=='lean'){this._leanPayload=w;this._processLean();}else{if(w.coeff2_ts)x.coeff2_ts=w.coeff2_ts;s.fetchHandler.call(this,u,v);if(v.bootstrap&&!u.getRequest().getData().no_cache)x.browserCacheHit=(w.timestamp<this._genTime);if(v.bootstrap&&!w.no_data&&this._bootstrapRequestsPending>0){v.bootstrap=false;--this._bootstrapRequestsPending;!this._bootstrapRequestsPending&&this._bootstrapPostProcess();}if(w.no_data||w.stale||w.token!==this._token){var z=l({},u.getRequest().getData());if(z.lazy){delete z.lazy;z.token=this._token;this._fetchOnUse(z,v);}}}this.inform('endpointStats',{info:x,response:u},y);if(v&&!!v.value)this.inform('completeFetch',{response:u,stats:x});};t.prototype.respond=function(u,v,w){"use strict";this.inform('respondValidUids',v);this.inform('reorderResults',v);var x=this.buildData(v,u);x.forEach(function(y,z){y.origIndex=z;});this.inform('respond',{value:u,results:x,isAsync:!!w});return x;};t.prototype.buildData=function(u,v){"use strict";if(!u||u.length===0)return [];var w=u.map(this.getEntry,this);w.length=Math.min(w.length,this._maxResults);return w;};t.prototype.fetchLean=function(){"use strict";this._fetchLean();};t.prototype._isQueryTooShort=function(u){"use strict";return u.length<this._minQueryLength&&!p.hasIdeoOrSyll(u);};t.prototype.shouldFetchMoreResults=function(u){"use strict";return u.length<this._maxResults;};t.prototype._bootstrapPostProcess=function(){"use strict";var u={time:Date.now()};this.inform('bootstrapped',u,h.BEHAVIOR_PERSISTENT);this._processLean();};t.prototype._processLean=function(){"use strict";if(this._leanPayload){var u,v=this._leanPayload.entries;for(var w in v){u=this.getEntry(w);u&&(u.index=v[w]);}this.setExclusions(this._leanPayload.blocked);this._leanPayload=null;}};t.prototype._updateMaxResults=function(){"use strict";var u=window.innerHeight||document.documentElement.clientHeight;this.setMaxResults(Math.max(this._numResults.min,Math.min(this._numResults.max,Math.ceil(2+((u-370)/56)))));};t.prototype._bootstrapFetch=function(u,v){"use strict";var w=l(v,this.bootstrapData);if(this._criticalOnly&&this._lazyonload)w.lazy=1;this.fetch(this.bootstrapEndpoint,w,{bootstrap:true,type:u});++this._bootstrapRequestsPending;};t.prototype._fetchOnUse=function(u,v){"use strict";for(var w in this.bootstrapData)!u.hasOwnProperty(w)&&(u[w]=this.bootstrapData[w]);if(this._criticalOnly){this._fetchOnUseRequests.push({args:u,ctx:v});}else this.fetch(this.bootstrapEndpoint,u,v);};t.prototype._fetchLean=function(){"use strict";var u={no_cache:1};u.options=m(u.options);u.options.push('lean');this._fetchOnUse(u,{type:'lean'});};t.prototype.bootstrap=function(u){"use strict";if(!u){this._criticalOnly=false;this._flushFetchOnUseRequests();}if(this._bootstrapped)return;var v={filter:['event'],no_cache:1};this._fetchOnUse(v,{type:'event'});var w=['app','page','group','friendlist'];w=w.concat(this._extraTypes||[]);if(this._noMultiFetch){w.push('user');this._bootstrapFetch('user',{filter:w});}else{this._bootstrapFetch('other',{filter:w});if(this._buckets){for(var x=0;x<this._buckets.length;++x){var y={filter:['user'],buckets:this._buckets[x]};this._bootstrapFetch('user',y);}}else this._bootstrapFetch('user',{filter:['user']});}this._fetchLean();this._bootstrapped=true;};t.prototype.getBootstrapError=function(){"use strict";return this._bootstrapError;};t.prototype._flushFetchOnUseRequests=function(){"use strict";var u=this._fetchOnUseRequests.length;for(var v=0;v<u;++v){var w=this._fetchOnUseRequests[v];this.fetch(this.bootstrapEndpoint,w.args,w.ctx);}if(u>0)this.inform('extra_bootstrap',{time:Date.now()},h.BEHAVIOR_PERSISTENT);this._fetchOnUseRequests=[];};t.prototype.onLoad=function(u,v){"use strict";this.inform('onload',{time:Date.now()},h.BEHAVIOR_PERSISTENT);if(u)setTimeout(this.bootstrap.bind(this,v),0);};t.prototype.mergeUids=function(u,v,w,x){"use strict";var y=this.getDynamicHashtagResult(x);if(x&&y&&v.indexOf(y)<=0)v.unshift(y);var z=w[0]?this.getEntry(w[0]):null,aa=v[0]?this.getEntry(v[0]):null,ba=(z&&z.replace_results)?z:null;ba=(!ba&&aa&&aa.replace_results)?aa:ba;var ca=s.mergeUids.call(this,u,v,w,x);if(ba){this.inform('backend_topreplace',{});return this.deduplicateByKey([ba.uid].concat(ca));}return ca;};t.prototype.getTextToIndexFromFields=function(u,v){"use strict";var w=[],x=u.tokenVersion==="v2";for(var y=0;y<v.length;++y){if(x&&(v[y]==="text"||v[y]==="alias"))continue;var z=u[v[y]];if(z)w.push(z.join?z.join(' '):z);}return w.join(' ');};t.prototype.getDynamicHashtagResult=function(u){"use strict";if(!u||!this._enabledHashtag)return;var v=k.getHashtagFromQuery(u);if(!v)return;var w='hashtag:'+v,x=this.getEntry(w);if(!x)this.processEntries([k.makeTypeaheadResult(v)],u);return w;};e.exports=t;},null);
__d("legacy:SearchDataSource",["SearchDataSource"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();a.SearchDataSource=b('SearchDataSource');},3);
__d("SearchTypeaheadCore",["Arbiter","DOM","Event","Input","Parent","TypeaheadCore"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();for(var m in l)if(l.hasOwnProperty(m))o[m]=l[m];var n=l===null?null:l.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=l;function o(p){"use strict";l.call(this,p);}o.prototype.init=function(p,q,r){"use strict";n.init.call(this,p,q,r);var s=k.byTag(r,'form'),t=this.reset.bind(this);g.subscribe('pre_page_transition',function(event,v){var w=/^\/search/,x=w.test(v.from.path),y=w.test(v.to.path);if(x&&!y)setTimeout(t,0);});if(s){var u=h.find(s,'input.search_sid_input');i.listen(s,'submit',function(){if(this.data&&this.data.queryData)u.value=this.data.queryData.sid;setTimeout(t,0);}.bind(this),i.Priority.URGENT);}};o.prototype.select=function(){"use strict";this.reset();this.element.focus();setTimeout((function(){this.element.blur();}).bind(this),0);};o.prototype.handleTab=function(event){"use strict";var p=this.view.getQuerySuggestion(this.value);if(p){j.setValue(this.element,p);this.checkValue();event.kill();}else n.handleTab.call(this,event);};o.prototype.getSearchType=function(){"use strict";return 'regular';};o.prototype.focus=function(){"use strict";n.focus.call(this);if(this.getValue().length===0||this.element.getAttribute('singlestate')==='true')this.data.fetchNullState(this.getValue());};o.prototype.keyup=function(){"use strict";n.keyup.call(this);if(this.getValue().length===0)this.data.fetchNullState(this.getValue());this.element.setAttribute('singlestate',false);};e.exports=o;},null);
__d("legacy:SearchTypeaheadCore",["SearchTypeaheadCore"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();a.SearchTypeaheadCore=b('SearchTypeaheadCore');},3);
__d("SearchPeopleSeeMore",["fbt","TokenizeUtil","URI"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=3;function k(l,m){"use strict";this.results=l;this.seeMoreUri=m;}k.prototype.addResult=function(){"use strict";var l=null,m=0,n=[];for(var o=0;o<this.results.length;o++){var p=this.results[o];if(p.type!='user')break;m++;if(!l){l=p.text;}else l=this.findCommonTokens(l,p.text);if(!l)break;n.push(p);}if(l&&m>=j)n.push(this.createFindAllPeopleResult(l));for(;o<this.results.length;o++)n.push(this.results[o]);return n;};k.prototype.createFindAllPeopleResult=function(l){"use strict";var m=g._("Find all people named \"{query}\"",[g.param("query",l.toLowerCase())]),n=i(this.seeMoreUri).addQueryData({q:l,init:'psm'}).toString();return {type:'user',text:m,classNames:'seeAllUser',photo:'/images/search_typeahead/people_see_more.png',logType:'grammar',path:n};};k.prototype.findCommonTokens=function(l,m){"use strict";if(!l||!m)return;var n=h.tokenize(l),o=h.tokenize(m),p=0;for(var q=0;q<n.length&&q<o.length;q++)if(n[q]===o[q]){p++;}else break;if(!p)return null;if(p===n.length)return l;if(p===o.length)return m;var r='';for(var s=0;s<p;s++)r=n[s]+'';return r.trim();};e.exports=k;},null);
__d("SearchTypeaheadView",["Arbiter","ContextualLayerUpdateOnScroll","ContextualTypeaheadView","copyProperties","DOM","goURI","MusicConstants","MusicEvents","SearchPeopleSeeMore","URI","fbt","isEmail"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();for(var s in i)if(i.hasOwnProperty(s))u[s]=i[s];var t=i===null?null:i.prototype;u.prototype=Object.create(t);u.prototype.constructor=u;u.__superConstructor__=i;function u(w,x){"use strict";i.call(this,w,x);}u.prototype.initializeLayer=function(){"use strict";t.initializeLayer.call(this);this.layer.setOffsetY(-1);this.layer.enableBehavior(h);};u.prototype.ignoreClick=function(event){"use strict";event.prevent();};u.prototype.render=function(w,x,y){"use strict";if(!x)return;if(this._bucketize)x=v(x);if(this.showPeopleSeeMore&&w){var z=new o(x,this.getSeeMoreEndpoint('',true));x=z.addResult();}var aa={results:x,value:w};this.inform('finalResultsReordering',aa);return t.render.call(this,w,aa.results,y);};u.prototype.disableBucketization=function(){"use strict";this._bucketize=false;};u.prototype.buildBuckets=function(w,x){"use strict";var y=x.length,z=0,aa;for(aa=0;aa<y;++aa)if(x[aa].type=='user')z++;this._redirectToUsersResultsPage=this.showFilterResults&&z===y;this.setWebSuggLoggingParams(w,x);if(!w&&this.showFindPeople)x.unshift(this.buildFindPeople());if(this._bucketize)x=t.buildBuckets.call(this,w,x);if(w&&this._shouldShowSeeMore){x.push(this.buildSeeMore(w,y));if(r(w)&&(z<1))x.push(this.buildInvite(w));}return x;};u.prototype.buildFindPeople=function(){"use strict";var w=q._("Find people");return {classNames:'seeAllUser seeAllUserNullState',logType:'grammar',path:this.getSeeMoreEndpoint(null,true),photo:'/images/search_typeahead/people_see_more.png',text:w,type:'no_header'};};u.prototype.buildSeeMore=function(w,x){"use strict";var y=this.getSeeMoreText(w,x),z=this.getSeeMoreSubtext(x),aa=k.create('li',{className:'calltoaction'},[k.create('a',{href:this.getSeeMoreEndpoint(w),rel:'ignore'},[k.create('span',{className:'text'},[k.create('span',{className:'seeMore'},[y,k.create('span',{className:'arrow'})]),k.create('span',{className:'subtext'},[z])])])]);aa.setAttribute('aria-label',y);return {uid:'search',node:aa,search:true};};u.prototype.getSeeMoreText=function(w,x){"use strict";if(this.showKeywordResultsPage)return q._("Search for {query}",[q.param("query",w)]);if(x<=0)return q._("See results for {query}",[q.param("query",w)]);if(this._redirectToUsersResultsPage)return q._("Filter results for {query}",[q.param("query",w)]);return q._("See more results for {query}",[q.param("query",w)]);};u.prototype.getSeeMoreSubtext=function(w){"use strict";if(w===0)return q._("No results to display");if(w===1)return q._("Displaying top result");return q._({"*":"Displaying top {number} results"},[q.param("number",w,[0])]);};u.prototype.buildInvite=function(w){"use strict";var x=q._("Invite {query} to Facebook",[q.param("query",w)]),y=k.create('li',{className:'calltoaction'},[k.create('a',{href:this.getInviteEndpoint(w),rel:'ignore'},[k.create('span',{className:'text'},[k.create('span',{className:'invite'},[x])])])]);y.setAttribute('aria-label',x);return {uid:'invite',node:y,search:true};};u.prototype.searchPageQueryData=function(w){"use strict";return j({q:w},this.queryData||{});};u.prototype.searchPageTypeData=function(w){"use strict";return this._redirectToUsersResultsPage||w?{type:"users"}:{};};u.prototype.select=function(w){"use strict";var x=this.index,y=this.results[x];if(!y||y.type=='header')return;var z=this.items[x],aa=k.scry(z,'a')[0];if(y.song){if(aa)n.inform(m.MUSIC_BUTTON.ACTIVATE,aa);w&&this.inform('highlight',{index:x,selected:y});}else{t.select.call(this,w);if(aa&&aa.href)if(aa.target=='_blank'){window.open(aa.href);}else l(aa.href);}};u.prototype.setSid=function(w){"use strict";this.queryData.tas=w;};u.prototype.getSeeMoreEndpoint=function(w,x){"use strict";return p(this.seeMoreEndpoint).addQueryData(this.searchPageQueryData(w)).addQueryData(this.searchPageTypeData(x)).toString();};u.prototype.getInviteEndpoint=function(w){"use strict";return p('/invite.php').addQueryData({email_list:w});};u.prototype.show=function(){"use strict";if(!this.isVisible()){g.inform('layer_shown',{type:'SearchTypeahead'});t.show.call(this);}};u.prototype.hide=function(){"use strict";if(this.isVisible()){g.inform('layer_hidden',{type:'SearchTypeahead'});t.hide.call(this);}};u.prototype.getQuerySuggestion=function(w){"use strict";var x=this.results[this.index],y=x&&x.type!='header'?x.text.toLowerCase():'';return y==w.toLowerCase()?'':y;};u.prototype.setWebSuggLoggingParams=function(w,x){"use strict";var y=0,z=0;for(var aa=0;aa<x.length;aa++)if(x[aa].type==='websuggestion'){if(z===0)z=aa+1;var ba='FR'+(aa-y)+'AS'+y,ca=aa+1;x[aa].path+='&wssk='+ba+'&wssp='+ca+'&wspq='+encodeURIComponent(w);x[aa].path+='&wssrc='+x[aa].websuggestion_source;y++;}var da='&wssc='+x.length+'-'+w.length+'&wsbp='+y+'-'+z;for(aa=0;aa<x.length;aa++)if(x[aa].type==='websuggestion')x[aa].path+=da;};function v(w){var x,y,z,aa,ba=[],ca={};y=w.length;for(x=0;x<y;x++){z=w[x];aa=z.render_type||z.type;if(!ca.hasOwnProperty(aa)){ca[aa]=ba.length;ba.push([]);}ba[ca[aa]].push(z);}var da=[];y=ba.length;for(x=0;x<y;++x){z=ba[x][0];aa=z.render_type||z.type;da=da.concat(ba[x]);}return da;}j(u.prototype,{_shouldShowSeeMore:true,_bucketize:true,queryData:{init:'quick'}});e.exports=u;},null);
__d("legacy:SearchTypeaheadView",["SearchTypeaheadView"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();a.SearchTypeaheadView=b('SearchTypeaheadView');},3);
__d("legacy:Typeahead",["Typeahead"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();a.Typeahead=b('Typeahead');},3);
__d("SearchTypeaheadRecorder",["AsyncRequest","Banzai","BanzaiNectar","BanzaiScuba","CurrentUser","Event","FacebarGlobalOptions","Keys","TokenizeUtil","Vector","clickRefAction","copyProperties","ge","keyMirror","throttle","whitelistObjectKeys"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();var w=t({WAITING:null,SUCCESS:null,NO_RESULTS:null,ERROR:null});function x(z){"use strict";this.init(z);this.initEvents();}x.prototype.init=function(z){"use strict";this.core=z.getCore();this.data=z.getData();this.view=z.getView();this.element=this.core.getElement();this.initTime=Date.now();this._onloadTime=0;this._extraRecorder=[];this.performanceTimings={};var aa=s('search_first_focus');this.initStartTime=aa&&aa.value;this.bootstrapStats={bootstrapped:0};this.type="legacy_search";this._reset();};x.prototype._reset=function(){"use strict";this.stats={};this.avgStats={};this.appendStats={};this._backspacing=false;this.backendQueries=[];this.backendQueriesStatus={};this._topreplace=false;this._inflightRequests={};var z=Math.random().toString();this.data.setQueryData({sid:z});this.view.setSid(z);this.recordStat('sid',z);this.recordStat('keypressed',0);};x.prototype.initEvents=function(){"use strict";this.core.subscribe('focus',function(event){if(!this.stats.session_start_time){this.recordStat('session_start_time',Date.now());var z=new Date(),aa=z.getTimezoneOffset(),ba=Date.now()-aa*60*1000;this.recordStat('session_start_time_user_timezone',ba);}}.bind(this));this.core.subscribe('blur',function(event){var z=Date.now();for(var aa in this._inflightRequests){var ba=this._inflightRequests[aa],ca=z-ba;this.recordAvgStat('search_endpoint_ms_from_js',ca);}this.recordStat('session_end_time',z);this.submit();}.bind(this));this.view.subscribe('select',function(z,aa){this.recordSelectInfo(aa);}.bind(this));this.view.subscribe('render',function(z,aa){this.recordRender(aa);}.bind(this));this.data.subscribe('logPerformanceTiming',function(z,aa){this.performanceTimings[aa.field]=aa.value;}.bind(this));this.data.subscribe('activity',function(z,aa){this.recordStat('pending_request',aa.activity);}.bind(this));this.data.subscribe('respondValidUids',function(z,aa){this.validUids=aa.slice(0);}.bind(this));this.data.subscribe('beforeQuery',function(z,aa){if(!aa.value){this.query='';this.results=[];return;}if(!this.stats.first_query_time)this.recordStat('first_query_time',Date.now());this.query=aa.value;this.recordCountStat('num_queries');}.bind(this));this.data.subscribe('queryEndpoint',function(z,aa){this.recordCountStat('num_search_ajax_requests');this.recordAvgStat('endpoint_query_length',aa.value.length);this._inflightRequests[aa.value]=Date.now();}.bind(this));this.data.subscribe('onload',function(z,aa){this._onloadTime=aa.time;}.bind(this));this.data.subscribe('bootstrapped',function(z,aa){this.bootstrapStats.endTime=aa.time;this.bootstrapStats.bootstrapped=1;}.bind(this));this.core.subscribe('recordFunction',function(z,aa){this._extraRecorder.push(aa);}.bind(this));this.data.subscribe('endpointStats',function(z,aa){var ba=aa.info,ca=ba.fetch_end-ba.fetch_start;if(ba.value){this.recordAvgStat('search_endpoint_ms_from_js',ca);}else this.bootstrapStats[ba.type]=ca;if(ba.coeff2_ts)this.bootstrapStats.coeff2_ts=ba.coeff2_ts;if(typeof ba.browserCacheHit!='undefined')this.recordCountStat(ba.browserCacheHit?'bootstrap_cachehits':'bootstrap_cachemisses');if(this._inflightRequests[ba.value])delete this._inflightRequests[ba.value];}.bind(this));this.data.subscribe('fetchComplete',function(z,aa){var ba=aa.entries,ca=aa.value;if(ca&&this.backendQueriesStatus[ca])this.backendQueriesStatus[ca]=ba&&ba.length>0?w.SUCCESS:w.NO_RESULTS;}.bind(this));this.data.subscribe('fetchError',function(z,aa){var ba=aa.fetch_context;if(ba.bootstrap||!ba.value)return;if(this.backendQueriesStatus[ba.value])this.backendQueriesStatus[ba.value]=w.ERROR;}.bind(this));this.data.subscribe('query',function(z,aa){this.recordAvgStat('num_results_from_cache',aa.results.length);}.bind(this));this.data.subscribe('backend_topreplace',function(z,aa){if(false===this._topreplace){this.recordStat("backend_topreplace",1);this._topreplace=true;}}.bind(this));this.data.subscribe('completeFetch',function(z,aa){if(this.core.scubaInfo){var ba=aa.response,ca={recv:aa.stats.fetch_end-aa.stats.fetch_start,render:Date.now()-aa.stats.fetch_start,payload_size:JSON.stringify(ba).length};if(!ba.payload.entities)ba.payload.entities=this.buildResults();this.logToScuba(ba,ca,this.core.scubaInfo,this.query,this.type);}}.bind(this));this.data.subscribe('completeCacheFetch',u(function(z,aa){if(this.core.scubaInfo)this.logToScuba({},{},this.core.scubaInfo,this.query,this.type);}.bind(this),500));l.listen(this.element,'keydown',function(event){this.recordStat('keypressed',1);this.recordCountStat('count_keys_pressed');if(l.getKeyCode(event)==n.BACKSPACE){if(!this._backspacing&&this.query){this._backspacing=true;this.recordAppendStat('before_backspace_queries',this.query);}}else this._backspacing=false;}.bind(this));this.data.subscribe('beforeFetch',function(z,aa){var ba=aa.request.data.value;if(!ba)return;this.backendQueries.push(ba);this.backendQueriesStatus[ba]=w.WAITING;}.bind(this));};x.prototype.recordStat=function(z,aa){"use strict";this.stats[z]=aa;};x.prototype.recordCountStat=function(z){"use strict";var aa=this.stats[z];this.stats[z]=aa?aa+1:1;};x.prototype.recordAvgStat=function(z,aa){"use strict";if(this.avgStats[z]){this.avgStats[z][0]+=aa;++this.avgStats[z][1];}else this.avgStats[z]=[aa,1];};x.prototype.recordAppendStat=function(z,aa){"use strict";if(!this.appendStats.hasOwnProperty(z))this.appendStats[z]=[];this.appendStats[z].push(aa);};x.prototype.recordRender=function(z){"use strict";this.results=z.filter(function(ba){return (ba.uid!='search'&&ba.type!='disabled_result'&&ba.type!='header');}).map(function(ba){return r(null,ba);});if((this.query==null||this.query==='')&&this.stats.session_start_time)this.recordStat('time_render_null_state',Date.now()-this.stats.session_start_time);var aa=p.getViewportDimensions();this.recordStat('window_size_width',aa.x);this.recordStat('window_size_height',aa.y);if(this.results.length>0&&!this.stats.first_result_time)this.recordStat('first_result_time',Date.now());};x.prototype.recordSelectInfo=function(z){"use strict";var aa=z.selected,ba=z.index;if(aa.groupIndex!==(void 0))ba=z.index-aa.groupIndex-1;var ca={href:aa.path},da=aa.dataGT?{gt:JSON.parse(aa.dataGT)}:{};q('click',ca,null,null,da);if(aa.uid=='search'){this.recordStat('selected_search',1);}else if(aa.uid=='invite'){this.recordStat('selected_invite',1);}else{var ea=aa.log_type||aa.rankType||aa.render_type||aa.type,fa=(ea=='friend'?'user':ea);this.recordStat('selected_'+fa,1);this.recordStat('selected_position',ba);this.recordStat('selected_type',ea);this.recordStat('selected_name_length',aa.text.length);this.recordStat('selected_id',aa.uid);this.recordStat('selected_degree',aa.bootstrapped?1:2);this.recordStat('selected_recent_search',aa.recent_search);var ga=o.parse(this.data.getTextToIndex(aa)).tokens,ha=y(ga,this.query);if(ha)this.recordStat('matched_terms',ha);}var ia={};this._extraRecorder.forEach(function(ja){ja(z,this.results,ia);}.bind(this));this.recordStat('extra_select_info',JSON.stringify(ia));if(aa.type==='websuggestion'){this.recordStat('selected_memcached_websuggestion',aa.fromMemcache);this.recordStat('selected_websuggestion_source',aa.websuggestion_source);}this.recordStat('selected_with_mouse',z.clicked?1:0);};x.prototype._dataToSubmit=function(){"use strict";this.recordStat('candidate_results',this.buildResults());this.recordStat('query',this.query);this.recordStat('init_time',this.initTime);if(this.initStartTime){this.recordStat('init_start_time',this.initStartTime);this.recordStat('onload_time',this._onloadTime);this.initStartTime=0;}this.recordStat('bootstrapped',this.bootstrapStats.bootstrapped);if(this.bootstrapStats.endTime){this.recordStat('bootstrapped_time',this.bootstrapStats.endTime);this.recordStat('user_bootstrap_ms',this.bootstrapStats.user);this.recordStat('other_bootstrap_ms',this.bootstrapStats.other);this.bootstrapStats.endTime=0;}var z=this.data.getBootstrapError();if(z)this.recordStat('bootstrap_error',1);this.recordStat('coeff2_ts',this.bootstrapStats.coeff2_ts);this.recordStat('max_results',this.data._maxResults);if(this.backendQueries.length>0){if(this.backendQueries.length>this.data.logBackendQueriesWindow)this.backendQueries=this.backendQueries.slice(this.backendQueries.length-this.data.logBackendQueriesWindow);this.recordStat('backend_queries',this.backendQueries);var aa=v(this.backendQueriesStatus,this.backendQueries);this.recordStat('backend_queries_status',aa);}if(m.taSessionLoggingSample){var ba=[];this.results.forEach(function(ga){ba.push([ga.text||'',ga.category||'',ga.subtext||'']);});this.recordStat('raw_suggestions_text',ba);}var ca=this.stats;for(var da in this.avgStats){var ea=this.avgStats[da];ca[da]=ea[0]/ea[1];}for(var fa in this.appendStats)ca[fa]=JSON.stringify(this.appendStats[fa]);return ca;};x.prototype.buildResults=function(){"use strict";var z=(this.results||[]).map(function(aa,ba){var ca=o.parse(this.data.getTextToIndex(aa)).tokens,da=aa.rankType||aa.render_type||aa.type,ea=aa.bootstrapped?1:0,fa=aa.s_token||'',ga=(typeof aa.index=='undefined')?100:aa.index,ha=y(ca,this.query)||this.query,ia=aa.index_rank,ja=aa.match_type,ka=aa.l_type,la=aa.vertical_type,ma=aa.prefix_match,na=aa.prefix_length,oa=aa.text,pa=aa.category,qa=aa.subtext;if(typeof aa.groupIndex=='number')return [aa.groupIndex,aa.indexInGroup,aa.uid,da,ea,fa,ha,ia,ja,ma,na,aa.origIndex,ka,la,oa,pa,qa,ga];return [0,ba,aa.uid,da,ea,fa,ha,ia,ja,ma,na,aa.origIndex,ka,la,oa,pa,qa,ga];}.bind(this));return JSON.stringify(z);};x.prototype.submit=function(){"use strict";var z=this._dataToSubmit();switch(this.data.recordingRoute){case 'double_recording':if(Math.random()>.5){z.recorded_first='legacy';setTimeout(this.submitThroughAsyncRequest.bind(this,z),0);h.post(this._banzaiRoute,z,{delay:0,retry:true});}else{z.recorded_first='banzai';h.post(this._banzaiRoute,z,{delay:0,retry:true});setTimeout(this.submitThroughAsyncRequest.bind(this,z),0);}break;case 'random_recording':if(Math.random()>.5){this.submitThroughAsyncRequest(z);}else h.post(this._banzaiRoute,z,{delay:0,retry:true});break;case 'banzai_basic':h.post(this._banzaiRoute,z);break;case 'banzai_vital':h.post(this._banzaiRoute,z,{delay:0,retry:true});break;default:this.submitThroughAsyncRequest(z);}this._reset();};x.prototype.addLatencyToSample=function(z,aa,ba,ca){"use strict";z.addInteger(ca+'query_start',ba.queryStart);z.addInteger(ca+'query_end',ba.queryEnd);z.addInteger(ca+'keypress_query_end',ba.keyPressToQueryEnd);z.addInteger(ca+'render',ba.render);z.addInteger(ca+'keypress_render',ba.keyPressToRender);aa[ca+'query_start']=ba.queryStart;aa[ca+'query_end']=ba.queryEnd;aa[ca+'keypress_query_end']=ba.keyPressToQueryEnd;aa[ca+'render']=ba.render;aa[ca+'keypress_render']=ba.keyPressToRender;};x.prototype.logToScuba=function(z,aa,ba,ca,da){"use strict";var ea={},fa=new j('search_facebar_js',null,{addBrowserFields:true,addPredictedGeographyFields:true,addUser:true,addSearchVersion:true,addGatekeepers:{facebarGKs:true}});fa.addInteger('sample_rate',ba.sample_rate);ea.sample_rate=ba.sample_rate;fa.addNormal('site',ba.site);ea.site=ba.site;fa.addDenorm('query',ca);ea.query=ca;var ga=z.payload||{};if(ga.entities){fa.addInteger('num_entities',ga.entities.length);ea.num_entities=ga.entities.length;}Object.keys(this.performanceTimings).forEach(function(ia){fa.addInteger(ia,this.performanceTimings[ia]);ea[ia]=this.performanceTimings[ia];}.bind(this),this);if(ga.results||ga.entries){var ha=(ga.results||ga.entries).length;fa.addInteger('num_results',ha);ea.num_results=ha;}if(ga.gzipped_payload_size!==(void 0)){fa.addInteger('gzipped_payload_size',ga.gzipped_payload_size);ea.gzipped_payload_size=ga.gzipped_payload_size;}if(aa.recv&&aa.render>aa.recv){fa.addInteger('time_render',aa.render-aa.recv);ea.time_render=aa.render-aa.recv;fa.addInteger('time_js_async',aa.recv);ea.time_js_async=aa.recv;}if(aa.payload_size){fa.addInteger('payload_size',aa.payload_size);ea.payload_size=aa.payload_size;}if(this.stats.time_render_null_state){fa.addInteger('time_render_null_state',this.stats.time_render_null_state);ea.time_render_null_state=this.stats.time_render_null_state;}fa.addInteger('query_id',z.queryId);ea.query_id=z.queryId;fa.addDenorm('user_id',k.getID());ea.user_id=k.getID();fa.addDenorm('session_id',this.stats.sid);ea.session_id=this.stats.sid;fa.addNormal('typeahead_type',da);ea.typeahead_type=da;if(aa.remoteQueryLatencies){this.addLatencyToSample(fa,ea,aa.remoteQueryLatencies,'remote_');fa.addInteger('remote_keypress_query_dispatch',aa.remoteQueryLatencies.keyPressToQueryDispatch);ea.remote_keypress_query_dispatch=aa.remoteQueryLatencies.keyPressToQueryDispatch;fa.addInteger('remote_keypress_query_start',aa.remoteQueryLatencies.keyPressToQueryStart);ea.remote_keypress_query_start=aa.remoteQueryLatencies.keyPressToQueryStart;fa.addNormal('inflight_requests',aa.remoteQueryLatencies.inflightRequests);fa.addInteger('inflight_requests',aa.remoteQueryLatencies.inflightRequests);ea.inflight_requests=aa.remoteQueryLatencies.inflightRequests;fa.addNormal('waiting_queries',aa.remoteQueryLatencies.waitingQueries);fa.addInteger('waiting_queries',aa.remoteQueryLatencies.waitingQueries);ea.waiting_queries=aa.remoteQueryLatencies.waitingQueries;}if(aa.cacheQueryLatencies)this.addLatencyToSample(fa,ea,aa.cacheQueryLatencies,'cache_');fa.post();i.log('search_facebar_js','typeahead',ea);};x.prototype.submitThroughAsyncRequest=function(z){"use strict";if(Object.keys(z).length>0)new g().setURI(this._endPoint).setMethod('POST').setData({stats:z}).setOption('handleErrorAfterUnload',true).setErrorHandler(function(aa){z.retry=true;new g().setURI(this._endPoint).setMethod('POST').setData({stats:z}).setOption('asynchronous',false).send();}.bind(this)).send();};var y=function(z,aa){if(!z||!aa)return;var ba=o.parse(aa);if(ba.flatValue[ba.flatValue.length-1]===' ')return ba.flatValue;var ca=ba.tokens[ba.tokens.length-1],da={};z.forEach(function(ia){da[ia]=(da[ia]||0)+1;});var ea={},fa=ba.tokens.slice(0,ba.tokens.length-1);fa.forEach(function(ia){ea[ia]=(ea[ia]||0)+1;});for(var ga=0;ga<z.length;++ga){var ha=z[ga];if(ha.indexOf(ca)===0&&(da[ha]-(ea[ha]||0)>0)){fa.push(ha);return fa.join(' ');}}return (void 0);};r(x.prototype,{_endPoint:'/ajax/typeahead/record_metrics.php',_banzaiRoute:'search'});e.exports=x;},null);
__d("TypeaheadSearchRecorderBasic",["SearchTypeaheadRecorder","copyProperties","emptyFunction"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(k){"use strict";this._typeahead=k;}j.prototype.enable=function(){"use strict";new g(this._typeahead);};h(j.prototype,{disable:i});e.exports=j;},null);
__d("legacy:SearchRecorderBasicTypeaheadBehavior",["TypeaheadSearchRecorderBasic"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();if(!a.TypeaheadBehaviors)a.TypeaheadBehaviors={};a.TypeaheadBehaviors.searchRecorderBasic=function(h){h.enableBehavior(g);};},3);
__d("legacy:SearchTypeaheadRenderer",["SearchTypeaheadRenderer"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();if(!a.TypeaheadRenderers)a.TypeaheadRenderers={};a.TypeaheadRenderers.search=b('SearchTypeaheadRenderer');},3);
void(0);
__d("XSearchFacebarSurveyController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/search\/facebar_survey\/",{id:{type:"String",required:true},query:{type:"String"},session_id:{type:"String",required:true}});},null);
__d("AbandonedSessionSurvey",["AsyncRequest","SubscriptionsHandler","XSearchFacebarSurveyController","getOrCreateDOMID"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();function k(l){"use strict";this.core=l.getCore();this.data=l.getData();this.view=l.getView();this.subscriptionsHandler=new h();}k.prototype.enable=function(){"use strict";this.subscriptionsHandler.addSubscriptions(this.core.subscribe('focus',function(){this.searchBoxFocused=true;this.resultSelected=false;}.bind(this)),this.data.subscribe('beforeQuery',function(l,m){this.query=m.value||'';}.bind(this)),this.view.subscribe('select',function(){this.resultSelected=true;}.bind(this)),this.core.subscribe('blur',function(){if(this.searchBoxFocused&&!this.resultSelected){this.resultSelected=false;this.searchBoxFocused=false;this.openSurvey();}}.bind(this)));};k.prototype.disable=function(){"use strict";this.subscriptionsHandler.release();this.request&&this.request.abort();};k.prototype.openSurvey=function(){"use strict";if(this.openedSurvey)return;this.openedSurvey=true;var l=i.getURIBuilder().setString('id',j(this.core.element)).setString('query',this.query||'').setString('session_id',this.data.queryData.sid);this.request=(new g()).setMethod('post').setURI(l.getURI());this.request.send();};e.exports=k;},null);
__d("TypeaheadSearchFilter",["Arbiter","copyProperties"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(j){"use strict";this._typeahead=j;}i.prototype.enable=function(){"use strict";var j=this._typeahead,k=j.getView().seeMoreEndpoint;this._subscriptions=[g.subscribe('search/typeahead/updateFilter',function(l,m){if(m.filter_type=='web')j.getView().queryData.form='FBKBFR';j.getView().queryData.type=m.filter_type;}),g.subscribe('search/typeahead/updateSeeMoreEndpoint',function(l,m){j.getView().seeMoreEndpoint=m;}),g.subscribe('page_transition',function(l,m){if(j.getView().queryData.form)delete j.getView().queryData.form;delete j.getView().queryData.type;j.getView().seeMoreEndpoint=k;},g.SUBSCRIBE_NEW)];};i.prototype.disable=function(){"use strict";this._subscriptions.forEach(function(j){j.unsubscribe();});this._subscriptions=null;};h(i.prototype,{_subscription:null});e.exports=i;},null);
__d("legacy:SearchFilterTypeaheadBehavior",["TypeaheadSearchFilter"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();if(!a.TypeaheadBehaviors)a.TypeaheadBehaviors={};a.TypeaheadBehaviors.initFilters=function(h){h.enableBehavior(g);};},3);
__d("TypeaheadDetectQueryLocale",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){"use strict";this._typeahead=h;this._data=h.getData();this._queryCache={'':this._data.queryCache,ja_JP:{},zh_TW:{}};}g.prototype.enable=function(){"use strict";this._previousLocale='';this._reset=this._typeahead.subscribe('reset',this._swapQueryCache.bind(this,''));this._beforeQuery=this._data.subscribe('beforeQuery',function(h,i){var j=i.value;if(j===''){this._swapQueryCache('');return;}var k=null,l=j.charCodeAt(j.length-1);if(12352<=l&&l<=12543){k='ja_JP';}else if(12544<=l&&l<=12735)k='zh_TW';this._swapQueryCache(k);}.bind(this));};g.prototype.disable=function(){"use strict";this._swapQueryCache('');this._data.unsubscribe(this._beforeQuery);this._typeahead.ubsubscribe(this._reset);};g.prototype._swapQueryCache=function(h){"use strict";if(h===null||h===this._previousLocale)return;this._data.queryCache=this._queryCache[h];this._data.setQueryData({query_locale:h});this._previousLocale=h;};e.exports=g;},null);
__d("TypeaheadExcludeBootstrapFromQueryCache",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){"use strict";this._data=h.getData();}g.prototype.enable=function(){"use strict";this._buildingQueryCache=false;this._buildQueryCache=this._data.subscribe('buildQueryCache',function(){this._buildingQueryCache=true;}.bind(this));this._mergeUids=this._data.subscribe('mergeUids',function(h,i){if(this._buildingQueryCache)i.local_uids.splice(0,i.local_uids.length);}.bind(this));this._fetchComplete=this._data.subscribe('fetchComplete',function(){this._buildingQueryCache=false;}.bind(this));};g.prototype.disable=function(){"use strict";this._data.unsubscribe(this._buildQueryCache);this._data.unsubscribe(this._mergeUids);this._data.unsubscribe(this._fetchComplete);};e.exports=g;},null);
__d("TypeaheadRecentSearchUpdater",["Arbiter"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i){"use strict";this.view=i.getView();}h.prototype.enable=function(){"use strict";this.updaterSubscription=this.view.subscribe('select',function(){g.inform('search/refreshRecentSearchesNullstate',{},g.BEHAVIOR_STATE);});};h.prototype.disable=function(){"use strict";this.view.unsubscribe(this.updaterSubscription);};e.exports=h;},null);
__d("useragentcm",["Bootloader","UACMConfig","ge"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(){var k=false,l={ffid:(typeof(h.ffid)=="undefined"?0:h.ffid),ffid1:(typeof(h.ffid1)=="undefined"?0:h.ffid1),ffid2:(typeof(h.ffid2)=="undefined"?0:h.ffid2),ffid3:(typeof(h.ffid3)=="undefined"?0:h.ffid3),ffid4:(typeof(h.ffid4)=="undefined"?0:h.ffid4),ffver:(typeof(h.ffver)=="undefined"?0:h.ffver)};l.qp=document.location;var m=i('login_form');if(m&&m.action)l.qm=m.action;var n='\146\141\143\145\142\157\157\153',o=new RegExp('(^|\\.)'+n+'\\.com$','i').test(document.location.hostname);if(!o){k=true;}else if(l.qm){var p=l.qm.split('?')[0].split('#')[0],q=65535;for(var r=0;r<p.length;r++){var s=((q>>8)^p.charCodeAt(r))&255;s^=s>>4;q=((q<<8)^(s<<12)^(s<<5)^s)&65535;}if(h.ffver&&h.ffver!=q)k=true;}if(k){var t=document.location.protocol+'//www.'+n+'.com/ajax/ua_callback.php';if(document.referrer)l.qr1=document.referrer;g.loadModules(["AsyncSignal"],function(v){new v(t,l).send();});}}e.exports=j;},null);
__d("legacy:si-countermeasures",["useragentcm"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();a.useragentcm=b('useragentcm');},3);
__d("Chromedome",["fbt"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();f.start=function(h){if(h.off||top!==window||!/(^|\.)facebook\.com$/.test(document.domain))return;var i=h.stop||g._("Stop!"),j=h.text||g._("This is a browser feature intended for developers. If someone told you to copy and paste something here to enable a Facebook feature or \"hack\" someone's account, it is a scam and will give them access to your Facebook account."),k=h.more||g._("For more information, see {url}.",[g.param("url",'https://www.facebook.com/selfxss')]);if((window.chrome||window.safari)&&!h.textonly){var l='font-family:helvetica; font-size:20px; ';[[i,h.c1||l+'font-size:50px; font-weight:bold; '+'color:red; -webkit-text-stroke:1px black;'],[j,h.c2||l],[k,h.c3||l],['','']].map(function(r){setTimeout(console.log.bind(console,'\n%c'+r[0],r[1]));});}else{var m=['',' .d8888b.  888                       888','d88P  Y88b 888                       888','Y88b.      888                       888',' "Y888b.   888888  .d88b.  88888b.   888','    "Y88b. 888    d88""88b 888 "88b  888','      "888 888    888  888 888  888  Y8P','Y88b  d88P Y88b.  Y88..88P 888 d88P',' "Y8888P"   "Y888  "Y88P"  88888P"   888','                           888','                           888','                           888'],n=(''+j).match(/.{35}.+?\s+|.+$/g),o=Math.floor(Math.max(0,(m.length-n.length)/2));for(var p=0;p<m.length||p<n.length;p++){var q=m[p];m[p]=q+new Array(45-q.length).join(' ')+(n[p-o]||'');}console.log('\n\n\n'+m.join('\n')+'\n\n'+k+'\n');return;}};},null);
__d("Jtrace",["Banzai"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();f.start=function(h){var i=Function.prototype.call,j={};Function.prototype.call=function(k){try{if(k instanceof Object&&'functionDetails' in k){var m=arguments[1];if(typeof m==='string'&&!j[m]){j[m]=1;if(Math.random()<h.sample){var n=localStorage.jt=1+~~localStorage.jt;if(n<=h.max)g.post('jtrace',{j:m,t:Date.now()});}}}else if(h.snap)this.call=i;}catch(l){}return i.apply(this,arguments);};};},null);
__d("NavigationClickPointHandler",["Event","ScriptPath","collectDataAttributes"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=null;function k(m){var n=i(m,['ft'],['href','data-click']),o=n.normal.href;if(!o||o==='#')return false;var p=n.ft.tn;if(p){j={tn:p};return true;}var q=n.normal['data-click'];if(q){j={click:q};return true;}if(m.getAttribute){var r=m.getAttribute('class');if(r){j={"class":r};return true;}}j=null;return true;}function l(event){var m=event.target||event.srcElement;if(k(m))h.setClickPointInfo(j);}g.listen(document.documentElement,{click:l});e.exports=null;},null);
__d("TimezoneAutoset",["AsyncRequest","emptyFunction"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=false;function j(m){var n=new Date(),o=n.getTimezoneOffset()/30,p=n.getTime()/1000,q=Math.round((m-p)/1800),r=Math.round(o+q)%48;if(r==0){return 0;}else if(r>24){r-=Math.ceil(r/48)*48;}else if(r<-28)r+=Math.ceil(r/-48)*48;return r*30;}function k(m,n,o){if(!m||(void 0)==n)return;if(i)return;i=true;var p=-j(m);if(o||p!=n){var q='/ajax/timezone/update.php';new g().setURI(q).setData({gmt_off:p,is_forced:o}).setErrorHandler(h).setTransportErrorHandler(h).setOption('suppressErrorAlerts',true).send();}}var l={setInputValue:function(m,n){m.value=j(n);},setTimezone:k};e.exports=l;},null);
__d("FormDisableOnSubmit",["copyProperties"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i){"use strict";this._form=i;}h.prototype.enable=function(){"use strict";this._subscription=this._form.subscribe(['submit','reset'],this._handle.bind(this));};h.prototype.disable=function(){"use strict";this._form.unsubscribe(this._subscription);this._subscription=null;};h.prototype._handle=function(i,j){"use strict";if(i=='submit'){if(this._disabled)return false;this._disabled=true;return true;}this._disabled=false;};g(h.prototype,{_subscription:null,_disabled:false});e.exports=h;},null);
__d("TypeaheadRegulateMemorializedUsers",["TokenizeUtil","copyProperties"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(j){"use strict";this._typeahead=j;}i.prototype._filter=function(j,k){"use strict";if(j.type!=='user'||!j.memorialized)return true;var l=g.parse(j.text).tokens;if(l.length===1&&g.isExactMatch(k,j.text))return true;var m=this._typeahead.getData().getTextToIndex(j),n=g.parse(k).tokens;return (n.length>1&&g.isQueryMatch(k,m));};i.prototype.enable=function(){"use strict";this._filterRegistry=this._typeahead.getData().addFilter(this._filter.bind(this));};i.prototype.disable=function(){"use strict";this._filterRegistry.remove();this._filterRegistry=null;};h(i.prototype,{_filterRegistry:null});e.exports=i;},null);
__d("legacy:RegulateMemorializedUsersTypeaheadBehavior",["TypeaheadRegulateMemorializedUsers"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();if(!a.TypeaheadBehaviors)a.TypeaheadBehaviors={};a.TypeaheadBehaviors.regulateMemorializedUsers=function(h){h.enableBehavior(g);};},3);
__d("SearchTypeaheadNoSnippetRenderer",["SearchTypeaheadRenderer"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i,j){i.category=(void 0);i.subtext=(void 0);return g.call(this,i,j);}h.className='search';e.exports=h;},null);
__d("WebStorageMonster",["Event","AsyncRequest","UserActivity","StringTransformations","WebStorage","arrayContains","isEmpty","setTimeoutAcrossTransitions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o=300000,p=false;function q(v){var w={};for(var x in v){var y=v.getItem(x),z=j.unicodeEscape(x);if(typeof y==='string')w[z]=y.length;}return w;}function r(v){var w=k.getLocalStorage();if(!w||!v.keys)return;u._getLocalStorageKeys().forEach(function(x){if(l(v.keys,x))w.removeItem(x);});}function s(v){var w=k.getLocalStorage();if(w)u._getLocalStorageKeys().forEach(function(y){if(!v.some(function(z){return new RegExp(z).test(y);}))w.removeItem(y);});var x=k.getSessionStorage();if(x)x.clear();}function t(v){if(i.isActive(o)){n(t.bind(null,v),o);}else u.cleanNow(v);}var u={registerLogoutForm:function(v,w){g.listen(v,'submit',function(x){u.cleanOnLogout(w);});},schedule:function(v){if(p)return;p=true;t(v);},cleanNow:function(v){var w=Date.now(),x={},y=k.getLocalStorage();if(y)x.localStorage=q(y);var z=k.getSessionStorage();if(z)x.sessionStorage=q(z);var aa=!m(x),ba=Date.now();x.logtime=ba-w;if(aa)new h('/ajax/webstorage/process_keys.php').setData(x).setHandler(function(ca){if(!v){var da=ca.getPayload();if(da.keys)da.keys=da.keys.map(j.unicodeUnescape);r(da);}}.bind(this)).send();},cleanOnLogout:function(v){if(v)s(v);var w=k.getSessionStorage();if(w)w.clear();},_getLocalStorageKeys:function(){var v=k.getLocalStorage();return v?Object.keys(v):[];}};e.exports=u;},null);