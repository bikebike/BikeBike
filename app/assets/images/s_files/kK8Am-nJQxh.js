/*!CK:2049557034!*//*1427086765,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["bHQzg"]); }

__d("BlackbirdUpsellConstants",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={ACTION_EDUCATE:"educate",ACTION_UPSELL:"upsell",CLICK_TYPE_DISMISS_PROMO:"dismiss_promo",CLICK_TYPE_ENABLE_CHAT:"enable_chat",CLICK_TYPE_OPEN_SETTINGS:"open_settings"};},null);
__d("PUWErrorCodes",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={BAD_JPEG:9901,WORKER_TERMINATED:9902,UNKNOWN_RESIZE_ERROR:9903,WORKER_ABORT:9904};},null);
__d("AdsPagerConstants",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g({ADD_PAGE:null,PAGE_TRANSITION:null,REQUEST_PAGE:null}),i=g({VIEW_ACTION:null,SERVER_ACTION:null});e.exports={ActionTypes:h,PayloadSources:i};},null);
__d("AdsPagerDispatcher",["AdsPagerConstants","Dispatcher","copyProperties"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=g.PayloadSources;function k(m){return function(n){this.dispatch({payloadSource:m,action:n});};}var l=i(new h(),{handleUpdateFromViewAction:k(j.VIEW_ACTION),handleUpdateFromServerAction:k(j.SERVER_ACTION)});e.exports=l;},null);
__d("AdsRefreshHandler",["AdsMouseStateStore","AdsPagerDispatcher","AdsPagerConstants","Arbiter","Animation","DOM","Event","SubscriptionsHandler","UIPagelet","csx","debounceAcrossTransitions","mergeObjects"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s=g.STATES,t=600;function u(v,w,x){"use strict";if(!x.data||!x.pid)return;this.$AdsRefreshHandler0=v;this.$AdsRefreshHandler1=Date.now();this.$AdsRefreshHandler2=w;this.$AdsRefreshHandler3=x;this.$AdsRefreshHandler4=0;this.$AdsRefreshHandler5=false;this.$AdsRefreshHandler6=true;this.$AdsRefreshHandler7=q(this.reloadAdsIfNeeded.bind(this),this.$AdsRefreshHandler2.delay);this.$AdsRefreshHandler8=new n();this.$AdsRefreshHandler8.addSubscriptions(m.listen(this.$AdsRefreshHandler0,'mouseenter',this.setMouseOver.bind(this,true)),m.listen(this.$AdsRefreshHandler0,'mouseleave',this.setMouseOver.bind(this,false)),g.subscribe('change',this.onMouseStateStoreChange.bind(this)),j.subscribe('AdsPreferencesDialog/opened',this.stopRefreshingRHC.bind(this)),j.subscribe('AdsPreferencesDialog/closed',this.startRefreshingRHC.bind(this)));h.register(this.handlePageDispatch.bind(this));}u.prototype.handlePageDispatch=function(v){"use strict";var w=v.action||{};if(w.actionType===i.ActionTypes.REQUEST_PAGE)this.reloadAds();};u.prototype.setMouseOver=function(v){"use strict";this.$AdsRefreshHandler9=v;};u.prototype.subscribeDefaultEventsForRefresh=function(){"use strict";this.$AdsRefreshHandler8.addSubscriptions(m.listen(window,'scroll',this.$AdsRefreshHandler7),m.listen(window,'resize',this.$AdsRefreshHandler7));return this;};u.prototype.reloadWithDebounce=function(){"use strict";this.$AdsRefreshHandler7();};u.prototype.reloadWithoutDebounce=function(){"use strict";this.reloadAdsIfNeeded();};u.prototype.stopRefreshingRHC=function(v,w){"use strict";this.$AdsRefreshHandler6=false;};u.prototype.startRefreshingRHC=function(v,w){"use strict";this.$AdsRefreshHandler1=Date.now();this.$AdsRefreshHandler6=true;};u.prototype.forceLoadIfEnoughTimePassed=function(v){"use strict";if(Date.now()-this.$AdsRefreshHandler1>v)this.reloadAds();};u.prototype.containsPremium=function(){"use strict";var v=l.scry(this.$AdsRefreshHandler0,"div._4u8");return !!v.filter(function(w){return JSON.parse(w.getAttribute('data-ad')).segment==='premium';}).length;};u.prototype.reloadAdsIfNeeded=function(){"use strict";if(!this.$AdsRefreshHandler0)return;j.inform('AdsRefreshHandler/CheckingReload');if(this.$AdsRefreshHandler2.stateRefresh){this.reloadAdsIfNeededStateBased();return;}if(this.containsPremium()||this.$AdsRefreshHandler9||!this.$AdsRefreshHandler2.interval)return;if(Date.now()-this.$AdsRefreshHandler1>=this.$AdsRefreshHandler2.interval)this.reloadAds();};u.prototype.reloadAdsIfNeededStateBased=function(){"use strict";if(Date.now()-this.$AdsRefreshHandler1<this.$AdsRefreshHandler2.interval)return;if(this.containsPremium())return;if(!this.$AdsRefreshHandler2.interval)return;this.$AdsRefreshHandler5=true;j.inform('AdsRefreshHandler/RefreshScheduled');this.checkScheduledRefresh();};u.prototype.getRefreshScheduled=function(){"use strict";return this.$AdsRefreshHandler5;};u.prototype.onMouseStateStoreChange=function(){"use strict";this.checkScheduledRefresh();};u.prototype.checkScheduledRefresh=function(){"use strict";if(!this.$AdsRefreshHandler5)return;if(this.$AdsRefreshHandler9)return;var v=g.getState(),w=false;switch(v){case s.HOVER:case s.NO_INTENT:w=true;break;default:break;}if(!w)return;this.$AdsRefreshHandler5=false;this.reloadAds();};u.prototype.reloadAds=function(){"use strict";if(!this.$AdsRefreshHandler0)return;this.$AdsRefreshHandler1=Date.now();if(!this.$AdsRefreshHandler6)return;var v=this.$AdsRefreshHandler3&&this.$AdsRefreshHandler3.data,w=r(v,{refresh_num:++this.$AdsRefreshHandler4});o.loadFromEndpoint('WebEgoPane',this.$AdsRefreshHandler0,{dom_id:l.getID(this.$AdsRefreshHandler0),pid:this.$AdsRefreshHandler3.pid,data:w},{bundle:false,handler:this.onLoadHandler.bind(this)});j.inform('AdsRefreshHandler/AdsLoading');};u.prototype.onLoadHandler=function(){"use strict";j.inform('AdsRefreshHandler/AdsLoaded');if(!this.$AdsRefreshHandler2.fade)return;(new k(this.$AdsRefreshHandler0)).from('opacity',0).to('opacity',1).duration(t).go();};u.prototype.cleanup=function(){"use strict";this.$AdsRefreshHandler0=null;this.$AdsRefreshHandler8.release();this.$AdsRefreshHandler7.reset();};e.exports=u;},null);
__d("HomeRHCAdsBasicRefresh",["AdsRefreshHandler","Arbiter","NavigationMessage","Run","SubscriptionsHandler","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m,n,o,p;function q(){if(m){m.cleanup();m=null;}if(n){n.release();n=null;}o=null;}function r(){var u=l(p);if(u&&o){u.appendChild(o);o=null;}}function s(u,v){o=v;m&&m.forceLoadIfEnoughTimePassed(0);}var t={init:function(u,v,w){p=u;m=new g(l(u),v,w).subscribeDefaultEventsForRefresh();n=new k();n.addSubscriptions(h.subscribe(i.NAVIGATION_BEGIN,q),h.subscribe('ProfileQuestionAnswered',s),h.subscribe('AdsRefreshHandler/AdsLoaded',r));j.onLeave(q);}};e.exports=t;},null);
__d("nullthrows",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=function(h){if(h!=null)return h;throw new Error("Got unexpected null or undefined");};e.exports=g;},null);
__d("TreeMap",["Map","nullthrows"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';function i(w,x,y){this.key=w;this.value=x;this.time=y;}function j(w){this.$TreeMap0=function(x,y){var z=w(x,y);return z!==0?z:x.time-y.time;};this.$TreeMap1=new g();this.$TreeMap2=null;this.$TreeMap3=0;this.size=this.$TreeMap1.size;}j.prototype.clear=function(){this.$TreeMap1=new g();this.$TreeMap2=null;this.size=this.$TreeMap1.size;};j.prototype.has=function(w){return this.$TreeMap1.has(w);};j.prototype.set=function(w,x){if(this.has(w))this["delete"](w);var y=new i(w,x,this.$TreeMap3++);this.$TreeMap1.set(w,y);this.$TreeMap2=q(this.$TreeMap2,y,this.$TreeMap0);this.size=this.$TreeMap1.size;return this;};j.prototype.get=function(w){return this.has(w)?this.$TreeMap1.get(w).value:(void 0);};j.prototype["delete"]=function(w){if(!this.has(w))return false;var x=this.$TreeMap1.get(w);this.$TreeMap2=r(this.$TreeMap2,x,this.$TreeMap0);this.$TreeMap1["delete"](w);this.size=this.$TreeMap1.size;return true;};j.prototype.keys=function(){var w=[];v(this.$TreeMap2,w,function(x){return x.key;});return w;};j.prototype.values=function(){var w=[];v(this.$TreeMap2,w,function(x){return x.value;});return w;};j.prototype.entries=function(){var w=[];v(this.$TreeMap2,w,function(x){return {key:x.key,value:x.value};});return w;};j.prototype.range=function(w,x){var y=[],z=null;if(w)z=new i(w.key,w.value,-1);var aa=null;if(x)aa=new i(x.key,x.value,this.$TreeMap3);v(this.$TreeMap2,y,function(ba){return {key:ba.key,value:ba.value};},this.$TreeMap0,z,aa);return y;};j.prototype.min=function(){if(!this.$TreeMap2)return undefined;var w=s(h(this.$TreeMap2)),x=w.key,y=w.value;return {key:x,value:y};};j.prototype.max=function(){if(!this.$TreeMap2)return undefined;var w=t(h(this.$TreeMap2)),x=w.key,y=w.value;return {key:x,value:y};};j.prototype.__testRoot=function(){};function k(w){if(!w)return w;p(w);if(w.balanceFactor<-1){if(w.right&&w.right.balanceFactor<=0){return l(w);}else return m(w);}else if(w.balanceFactor>1){if(w.left&&w.left.balanceFactor>=0){return n(w);}else return o(w);}else return w;}function l(w){var x=w,y=h(x.right),z=y.left;x.right=z;p(x);h(y).left=x;p(y);return y;}function m(w){var x=w,y=h(x.right),z=h(y.left),aa=z.left,ba=z.right;x.right=aa;p(x);y.left=ba;p(y);z=h(z);z.left=x;z.right=y;p(z);return z;}function n(w){var x=w,y=h(x.left),z=y.right;x.left=z;p(x);y.right=x;p(y);return y;}function o(w){var x=w,y=h(x.left),z=h(y.right),aa=z.left,ba=z.right;y.right=aa;p(y);x.left=ba;p(x);z.left=y;z.right=x;p(z);return z;}function p(w){var x=w.left?w.left.height:-1,y=w.right?w.right.height:-1;w.height=Math.max(x,y)+1;w.balanceFactor=x-y;}function q(w,x,y){if(w==null)return k(x);var z=y(x,w);if(z<0){w.left=q(w.left,x,y);return k(w);}else{w.right=q(w.right,x,y);return k(w);}}function r(w,x,y){if(w==null)return null;if(w===x)if(w.left&&w.right){var z=t(w.left);w.left=u(w.left);z.left=w.left;z.right=w.right;return k(z);}else if(w.left){return k(w.left);}else if(w.right){return k(w.right);}else return null;var aa=y(x,w);if(aa<0){w.left=r(w.left,x,y);return k(w);}else{w.right=r(w.right,x,y);return k(w);}}function s(w){while(w.left)w=w.left;return w;}function t(w){while(w.right)w=w.right;return w;}function u(w){if(!w)return null;if(w.right==null)return k(w.left||null);w.right=u(w.right);return k(w);}function v(w,x,y,z,aa,ba){if(w==null)return;var ca=!z||!aa||z(w,aa)>=0,da=!z||!ba||z(w,ba)<=0;if(ca)v(w.left,x,y,z,aa,ba);if(ca&&da)x.push(y(w));if(da)v(w.right,x,y,z,aa,ba);}e.exports=j;},null);
__d("Cache",["DateConsts","Map","TreeMap"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';function j(){this.$Cache0=new h();}j.prototype.has=function(k){return this.$Cache0.has(k);};j.prototype.get=function(k,l){var m=this.__getRaw(k);if(!m)return l;return m.$Cache1;};j.prototype.getAll=function(k,l){var m=new h();k.forEach(function(n){return m.set(n,this.get(n,l));}.bind(this));return m;};j.prototype["delete"]=function(k){var l=this.__getRaw(k);if(l&&l.$Cache2)clearTimeout(l.$Cache2);return this.$Cache0["delete"](k);};j.prototype.clear=function(){this.$Cache0.forEach(function(k){if(k&&k.$Cache2)clearTimeout(k.$Cache2);});this.$Cache0.clear();};j.prototype.set=function(k,l,m,n){if(!this.shouldUpdate(k,m))return false;var o=this.__getRaw(k);if(!o)o=this.__getNewRawObject();delete o.$Cache1;delete o.$Cache3;if(o.$Cache2)clearTimeout(o.$Cache2);delete o.$Cache2;o.$Cache1=l;if(m!=null)o.$Cache3=m;if(n!=null&&n>=0)o.$Cache2=setTimeout(this["delete"].bind(this,k),n*g.MS_PER_SEC*g.SEC_PER_MIN);this.__setRaw(k,o);return true;};j.prototype.shouldUpdate=function(k,l){var m=this.__getRaw(k);return (m==null||m.$Cache3==null||l==null||l>m.$Cache3);};j.prototype.size=function(){return this.$Cache0.size;};j.prototype.__getRaw=function(k){return this.$Cache0.get(k);};j.prototype.__setRaw=function(k,l){this.$Cache0.set(k,l);};j.prototype.__getNewRawObject=function(){return {$Cache1:null,$Cache2:null,$Cache3:null,$Cache4:null,$Cache5:null};};j.prototype.__keys=function(){return this.$Cache0.keys();};e.exports=j;},null);
__d("BlackbirdUpsell",["Event","Arbiter","AsyncRequest","LegacyContextualDialog","DOM","LayerDestroyOnHide","LayerHideOnTransition","PresencePrivacy","copyProperties","BlackbirdUpsellConfig","BlackbirdUpsellConstants","BlackbirdUpsellTemplates"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s='/ajax/chat/blackbird/update_clicks.php',t='/ajax/chat/blackbird/update_impressions.php',u='/ajax/chat/blackbird/dismiss.php',v=235,w=null,x=null,y=false,z=false;function aa(){}o(aa,{shouldShow:function(){if(this._dialogDismissed)return false;if(this.isEducation()){return !p.EducationDismissed&&p.EducationImpressions<p.EducationImpressionLimit;}else return !!p.UpsellGK&&!p.UpsellDismissed&&p.UpsellImpressions<p.UpsellImpressionLimit&&p.FriendCount>=p.UpsellMinFriendCount;},isEducation:function(){return p.TimeOffline<=p.EducationTimeOfflineThresdhold;},getOfflineContent:function(){if(this.isEducation()){return this._getEducationContent();}else return this._getUpsellContent();},_getEducationContent:function(){ga();var ka=r[':fb:chat:blackbird:offline-educate'].build(),la=ka.getNode('chatSettingsButton');g.listen(la,'click',function(){h.inform('chat/advanced-settings-dialog-opened');ja(q.CLICK_TYPE_OPEN_SETTINGS);da();});return ka.getRoot();},_getUpsellContent:function(){fa();var ka=r[':fb:chat:blackbird:upsell'].build(),la=ka.getNode('chatSettingsButton');g.listen(la,'click',function(){h.inform('chat/advanced-settings-dialog-opened');ia(q.CLICK_TYPE_OPEN_SETTINGS);ca();});var ma=ka.getNode('enableChatButton');g.listen(ma,'click',function(){ia(q.CLICK_TYPE_ENABLE_CHAT);ca();});return ka.getRoot();},getBlackbirdContent:function(ka){ga();switch(ka){case n.ONLINE:return r[':fb:chat:blackbird:most-friends-educate'].build().getRoot();case n.OFFLINE:return r[':fb:chat:blackbird:some-friends-educate'].build().getRoot();}},showOfflineDialog:function(ka){this.showDialog(ka,this.getOfflineContent.bind(this));},showBlackbirdDialog:function(ka,la){this.showDialog(ka,this.getBlackbirdContent.bind(null,la));},showDialog:function(ka,la){!w&&this._constructDialog();k.setContent(x,la());w.setContext(ka);w.show();},hide:function(){if(w&&w.isShown())w.hide();},dismiss:function(){this.hide();if(this.isEducation()){da();}else ca();},registerDismissClick:function(){if(this.isEducation()){ja(q.CLICK_TYPE_DISMISS_PROMO);}else ia(q.CLICK_TYPE_DISMISS_PROMO);},isVisible:function(){return z&&!y;},_constructDialog:function(){var ka=r[':fb:chat:blackbird:dialog-frame'].build();x=ka.getNode('dialogContent');w=new j();w.init(ka.getRoot());w.setPosition('above').setWidth(v).setFixed(true).disableBehavior(l).disableBehavior(m);g.listen(ka.getNode('dialogCloseButton'),'click',this.dismiss.bind(this));g.listen(ka.getNode('dialogCloseButton'),'click',this.registerDismissClick.bind(this));}});function ba(ka,la){if(!y&&z){y=true;n.inform('privacy-user-presence-changed');var ma=new i(u);ma.setData({source:ka,impressions:la,time_offline:p.TimeOffline});ma.setErrorHandler(function(){y=false;});ma.send();}}function ca(){ba(q.ACTION_UPSELL,p.UpsellImpressions);}function da(){ba(q.ACTION_EDUCATE,p.EducationImpressions);}function ea(ka,la){if(!z){z=true;var ma=new i(t);ma.setData({action:ka,impressions:la,time_offline:p.TimeOffline});ma.setErrorHandler(function(){z=false;});ma.send();}}function fa(){ea(q.ACTION_UPSELL,p.UpsellImpressions);}function ga(){ea(q.ACTION_EDUCATE,p.EducationImpressions);}function ha(ka,la,ma,na){var oa=new i(s);oa.setData({action:ka,impressions:ma,source:la,time_offline:na});oa.send();}function ia(ka){ha(ka,q.ACTION_UPSELL,p.UpsellImpressions,p.TimeOffline);}function ja(ka){ha(ka,q.ACTION_EDUCATE,p.EducateImpressions,p.TimeOffline);}h.subscribe('chat/advanced-settings-dialog-opened',aa.dismiss.bind(aa));h.subscribe('chat-visibility/go-online',aa.dismiss.bind(aa));h.subscribe('chat-visibility/go-offline',aa.dismiss.bind(aa));e.exports=aa;},null);
__d("Chat",["Arbiter"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={buddyListNub:'buddylist-nub/initialized',sidebar:'sidebar/initialized'};function i(k,l){g.subscribe(h[k],function(event,m){l(m);});}var j={openBuddyList:function(){i('buddyListNub',function(k){k.show();i('sidebar',function(l){l.enable();});});},closeBuddyList:function(){i('buddyListNub',function(k){k.hide();});},toggleSidebar:function(){i('sidebar',function(k){k.toggle();});}};e.exports=j;},null);
__d("ChatOptions",["Arbiter","ChannelConstants","JSLogger","PresenceUtil","copyProperties","ChatOptionsInitialData"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=i.create('chat_options'),m={};(function(){var o=b('ChatOptionsInitialData');for(var p in o){var q=o[p];m[p]=!!q;}})();var n=k(new g(),{getSetting:function(o){return m[o];},setSetting:function(o,p,q){if(this.getSetting(o)==p)return;if(q){q='from_'+q;l.log(q,{name:o,new_value:p,old_value:this.getSetting(o)});}m[o]=!!p;g.inform('chat/option-changed',{name:o,value:p});}});g.subscribe(h.getArbiterType('setting'),function(o,p){var q=p.obj;if(q.window_id===j.getSessionID())return;n.setSetting(q.setting,!!q.value,'channel');});g.subscribe(i.DUMP_EVENT,function(o,p){p.chat_options=m;});e.exports=n;},null);
__d("ChatQuietLinks",["Event","DOM","UserAgent_DEPRECATED","DataStore","Parent"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l={},m={silenceLinks:function(q){n(q,this.removeEmptyHrefs.bind(this));},nukeLinks:function(q){n(q,this.removeAllHrefs.bind(this));},removeEmptyHrefs:function(q){o(q,function(r){return !r||r==='#';});},removeAllHrefs:function(q){o(q);}};function n(q,r){var s=!!i.chrome(),t=!!i.chrome()||i.ie()>=9||i.firefox()>=4;if(l[h.getID(q)])return;l[h.getID(q)]=true;if(!t)return;if(!s){r&&r(q);return;}g.listen(q,'mouseover',function u(v){var w=k.byTag(v.getTarget(),'a');if(w){var x=w.getAttribute('href');if(p(x)){j.set(w,'stashedHref',w.getAttribute('href'));w.removeAttribute('href');}}});g.listen(q,'mouseout',function u(v){var w=k.byTag(v.getTarget(),'a'),x=w&&j.remove(w,'stashedHref');if(p(x))w.setAttribute('href',x);});g.listen(q,'mousedown',function(u){if(!u.isDefaultRequested())return true;var v=k.byTag(u.getTarget(),'a'),w=v&&j.get(v,'stashedHref');if(p(w))v.setAttribute('href',w);});}function o(q,r){var s=h.scry(q,'a');if(r)s=s.filter(function(t){return r(t.getAttribute('href'));});s.forEach(function(t){t.removeAttribute('href');t.setAttribute('tabindex',0);});}function p(q){return q&&q!=='#';}e.exports=m;},null);
__d("OrderedFriendsList",["AvailableListConstants","PresenceStatus","SearchableEntry","ShortProfiles","WorkModeConfig","createArrayFromMixed","isValidUniqueID","InitialChatFriendsList"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=[],o=[],p={},q=[],r={},s=[],t={contains:function(u){return u in p;},getList:function(){if(k.is_work_user)return l(n);t.reRank();var u=l(n);u=u.filter(function(v){var w=j.getNowUnsafe(v);return !w||w.type=="friend";});return u;},getSearchableEntries:function(u,v){var w=t.getList();j.getMulti(w.slice(0,u),function(x){var y=[];for(var z in x)y.push(t.normalizeProfileEntry(x[z]));var aa=t.getGroups().map(t.normalizeThreadEntry);v(y.concat(aa).filter(function(ba){return !!ba;}).sort(function(ba,ca){return ba.getOrder()-ca.getOrder();}));});},normalizeProfileEntry:function(u){var v=u.searchTokens||[];return new i({uniqueID:u.id,keywordString:v.join(' '),order:t.getRank(u.id),photo:u.thumbSrc,title:u.name,type:u.type,uri:u.uri,auxiliaryData:{isMessengerUser:u.is_messenger_user}});},normalizeThreadEntry:function(u,v){var w=u.mercury_thread,x=u.participants_to_render,y=u.text,z=null;if(!y)y=w.name;var aa=x.map(function(ca){return ca.name;}).join(', ');if(!y){y=aa;}else z=aa;var ba=u.uid;if(!y||!m(ba))return null;return new i({uniqueID:ba,order:v,photo:w.image_src,title:y,subtitle:z,type:'thread',auxiliaryData:{participantsToRender:x,thread:w}});},getRank:function(u){return u in p?p[u]:n.length;},getActiveList:function(){if(q.length>0)return q;return t.getList();},getActiveRank:function(u){return u in r?r[u]:t.getRank(u);},reRank:function(){n=[];var u=0;s.forEach(function(v){var w=v.slice(0,-2),x=v.slice(-1);if(h.get(w)==x){n[u]=w;p[w]=u++;}});},rankActive:function(){var u=0;s.forEach(function(v){var w=v.slice(0,-2),x=v.slice(-1);if(x==g.ACTIVE){q[u]=w;r[w]=u++;}});},getGroups:function(){return o;}};(function(){var u=b('InitialChatFriendsList');n=u.list.length?u.list:[];o=u.groups||[];if(!k.is_work_user){s=n.slice();t.rankActive();t.reRank();}else n.forEach(function(v,w){p[v]=w;});})();e.exports=a.OrderedFriendsList||t;},null);
__d("ChatSortUsers",["AvailableListConstants","OrderedFriendsList","PresencePrivacy","PresenceStatus","ShortProfiles","TokenizeUtil"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();function m(q,r){var s=i.allows(q),t=i.allows(r);if(s!==t)return s?-1:1;return 0;}var n={};function o(q){if(n[q])return n[q];var r=(k.getNowUnsafe(q)||{}).name;if(r)return n[q]=l.flatten(r);return '~';}var p={sortAlphabetical:function(q,r){var s=o(q),t=o(r);if(s!==t)return s<t?-1:1;return 0;},sortMobile:function(q,r){var s=j.get(q)===g.MOBILE,t=j.get(r)===g.MOBILE;if(s!==t)return t?-1:1;return p.sortAlphabetical(q,r);},sortCoefficient:function(q,r){var s=h.getRank(q),t=h.getRank(r);if(s!==t)return s-t;return p.sortAlphabetical(q,r);},sort:function(q,r){var s=m(q,r);if(s!==0)return s;return p.sortCoefficient(q,r);}};e.exports=p;},null);
__d("ChatDispatcher",["Dispatcher"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';e.exports=new g();},null);
__d("ChatTabActions",["ChatDispatcher","keyMirror"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=h({CLOSE_TAB:null,CLOSE_ALL_TABS:null,CLOSE_FRAGILE_TABS:null,LOWER_TAB:null,PERSIST_LOCAL_STATE:null,PROMOTE_TAB:null,RAISE_TAB:null}),j={Types:i,closeTab:function(k,l){g.dispatch({actionType:i.CLOSE_TAB,reason:l,threadID:k});},closeAllTabs:function(){g.dispatch({actionType:i.CLOSE_ALL_TABS});},closeFragileTabs:function(){g.dispatch({actionType:i.CLOSE_FRAGILE_TABS});},lowerTab:function(k){g.dispatch({actionType:i.LOWER_TAB,threadID:k});},persistLocalState:function(){g.dispatch({actionType:i.PERSIST_LOCAL_STATE});},promoteTab:function(k){g.dispatch({actionType:i.PROMOTE_TAB,threadID:k});},raiseTab:function(k,l,m){g.dispatch({actionType:i.RAISE_TAB,signatureID:m,threadID:k,userAction:l});}};e.exports=j;},null);
__d("ChatSidebarComposeLink.react",["ChatOpenTab","React","TooltipLink.react","URI","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=h,m=l.PropTypes,n=h.createClass({displayName:"ChatSidebarComposeLink",propTypes:{className:m.string.isRequired},componentDidMount:function(){g.listenOpenEmptyTab(h.findDOMNode(this),'sidebar');},render:function(){var o=k._("New Message");return (h.createElement(i,{ajaxify:new j('/ajax/messaging/composer.php'),className:this.props.className,tooltip:o,rel:"dialog"}));}});e.exports=n;},null);
__d("ChatSidebarConstants",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={LITESTAND_CLASSIC_SIZE:32,IMAGE_SIZE:28};Object.assign(g,{getImageSize:function(h){if(h===false)return g.IMAGE_SIZE;return g.LITESTAND_CLASSIC_SIZE;},getItemHeight:function(h){if(h===false)return g.IMAGE_SIZE+4;return g.LITESTAND_CLASSIC_SIZE+4;}});e.exports=g;},null);
__d("ChatBehavior",["Arbiter","AvailableList","AvailableListConstants","copyProperties","MercuryConstants"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=b('MercuryConstants').ChatNotificationConstants,l=false,m=h.getWebChatNotification(),n=l,o=true,p=j(new g(),{ON_CHANGED:'changed',notifiesUserMessages:function(){return m!==k.NO_USER_MESSAGE_NOTIFICATION;},ignoresRemoteTabRaise:function(){return n;},showsTabUnreadUI:function(){return o;}});function q(){p.inform(p.ON_CHANGED);}h.subscribe(i.ON_CHAT_NOTIFICATION_CHANGED,function(){var r=m,s=h.getWebChatNotification();m=s;if(r!=s)q();});g.subscribe('chat/set_does_page_occlude_tabs',function(r,s){n=!!s;q();});g.subscribe('chat/set_show_tab_unread_ui',function(r,s){o=!!s;q();});e.exports=p;},null);
__d("ChatSidebarSheet",["ArbiterMixin","BlackbirdUpsell","ChannelConnection","ChannelConstants","ChatBehavior","ChatConfig","ChatVisibility","CSS","DOM","Event","JSLogger","PresencePrivacy","copyProperties","fbt","mixin","setTimeoutAcrossTransitions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();var w=q.create('sidebar_sheet');function x(da){switch(da){case j.HINT_AUTH:return t._("Your session has timed out. Please log in.");case j.HINT_CONN:return t._("Facebook {Chat} is currently unavailable.",[t.param("Chat",t._("Chat"))]);case j.HINT_MAINT:return t._("Facebook {Chat} is currently down for maintenance.",[t.param("Chat",t._("Chat"))]);default:return t._("Facebook {Chat} is currently unavailable.",[t.param("Chat",t._("Chat"))]);}}function y(da){var ea;if(da===null||false===navigator.onLine){ea=t._("Unable to connect to chat. Check your Internet connection.");}else if(da>l.get('warning_countdown_threshold_msec')){var fa=o.create('a',{href:'#',className:'fbChatReconnectLink'},t._("Try again"));ea=t._("Unable to connect to chat. {try-again-link}",[t.param("try-again-link",fa)]);}else if(da>1000){ea=t._("Unable to connect to chat. Reconnecting in {seconds}...",[t.param("seconds",Math.floor(da/1000))]);}else ea=t._("Unable to connect to chat. Reconnecting...");return ea;}var z=u(g);for(var aa in z)if(z.hasOwnProperty(aa))ca[aa]=z[aa];var ba=z===null?null:z.prototype;ca.prototype=Object.create(ba);ca.prototype.constructor=ca;ca.__superConstructor__=z;function ca(da){"use strict";this._root=da;this._message=o.find(da,'div.fbChatSidebarMessage div.message');i.subscribe([i.CONNECTED,i.SHUTDOWN,i.RECONNECTING],this._handleConnectionChange.bind(this));i.subscribe([i.MUTE_WARNING,i.UNMUTE_WARNING],this._render.bind(this));r.subscribe('privacy-user-presence-changed',this._render.bind(this));k.subscribe(k.ON_CHANGED,this._render.bind(this));this._render();}ca.prototype._handleConnectionChange=function(da,ea){"use strict";this._channelStatus=da;this._channelData=ea;this._render();};ca.prototype._renderChannelDisconnect=function(){"use strict";if(this._channelStatus===i.SHUTDOWN){return o.setContent(this._message,x(this._channelData));}else if(this._channelStatus===i.RECONNECTING){var da=this._channelData;o.setContent(this._message,y(da));if(da>1000){if(da>l.get('warning_countdown_threshold_msec'))this._warningMsgEventListener=p.listen(this._message,'click',function(event){if(n.hasClass(event.getTarget(),'fbChatReconnectLink')){i.reconnect();return false;}});this._showWarningTimeout=v(this._handleConnectionChange.bind(this,i.RECONNECTING,da-1000),1000);}}};ca.prototype._renderOffline=function(){"use strict";var da='fbChatGoOnlineLink',ea=t._("Turn on chat"),fa=o.create('a',{href:'#',className:da},ea),ga=t._("{=Go online} to see who's available.",[t.param("=Go online",fa)]);o.setContent(this._message,ga);this._goOnlineEventListener=p.listen(this._message,'click',function(event){if(n.hasClass(event.getTarget(),da)){w.log('sidebar_go_online');m.goOnline();return false;}});};ca.prototype._renderBlackbirdUpsell=function(){"use strict";o.setContent(this._message,h.getOfflineContent());};ca.prototype._renderBlackbird=function(da){"use strict";o.setContent(this._message,h.getBlackbirdContent(da));};ca.prototype._clear=function(){"use strict";if(this._showWarningTimeout){clearTimeout(this._showWarningTimeout);this._showWarningTimeout=null;}if(this._warningMsgEventListener){this._warningMsgEventListener.remove();this._warningMsgEventListener=null;}if(this._goOnlineEventListener){this._goOnlineEventListener.remove();this._goOnlineEventListener=null;}n.removeClass(this._root,'upsell');n.removeClass(this._root,'offline');n.removeClass(this._root,'blackbird');n.removeClass(this._root,'error');n.removeClass(this._root,'notice');o.empty(this._message);};ca.prototype._render=function(){"use strict";this._clear();if(h.shouldShow()){if(m.hasBlackbirdEnabled()){var da=m.isOnline()?'blackbird':'upsell';n.addClass(this._root,da);this._renderBlackbird(r.getVisibility());}else if(!m.isOnline()){n.addClass(this._root,'upsell');this._renderBlackbirdUpsell();}}else if(!m.isOnline()){n.addClass(this._root,'offline');this._renderOffline();}else if(i.disconnected()){n.addClass(this._root,'error');this._renderChannelDisconnect();}else if(!k.notifiesUserMessages()){n.addClass(this._root,'notice');var ea=t._("Alerts are off while you use another client to chat.");o.setContent(this._message,ea);}this.inform('updated');};s(ca.prototype,{_channelStatus:null,_channelData:null,_showWarningTimeout:null,_warningMsgEventListener:null,_goOnlineEventListener:null});e.exports=ca;},null);
__d("SidebarFitWindowHeight",["Arbiter","ArbiterMixin","Event","Style","SubscriptionsHandler","TinyViewport","Vector","mixin","queryThenMutateDOM"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=n(h);for(var q in p)if(p.hasOwnProperty(q))s[q]=p[q];var r=p===null?null:p.prototype;s.prototype=Object.create(r);s.prototype.constructor=s;s.__superConstructor__=p;function s(t){"use strict";this.$SidebarFitWindowHeight0=t;this.onViewportUpdate();l.subscribe('change',this.onViewportUpdate.bind(this));}s.prototype.onViewportUpdate=function(){"use strict";if(l.isTiny()){this.onScroll();var t=this.onScroll.bind(this);this.$SidebarFitWindowHeight1=new k();this.$SidebarFitWindowHeight1.addSubscriptions(i.listen(window,'scroll',t),g.subscribe('dom-scroll',t));}else{if(this.$SidebarFitWindowHeight2!==0){j.set(this.$SidebarFitWindowHeight0,'margin-top','0');this.$SidebarFitWindowHeight2=0;}this.$SidebarFitWindowHeight1&&this.$SidebarFitWindowHeight1.release();}};s.prototype.onScroll=function(){"use strict";o(this.updateScrollPosition.bind(this),this.resizeSidebar.bind(this),'SidebarFitWindowHeight/scroll');};s.prototype.updateScrollPosition=function(){"use strict";this.$SidebarFitWindowHeight3=m.getScrollPosition().y;this.$SidebarFitWindowHeight4||(this.$SidebarFitWindowHeight4=this.$SidebarFitWindowHeight0.offsetHeight);};s.prototype.resizeSidebar=function(){"use strict";var t=-Math.max(Math.min(this.$SidebarFitWindowHeight3,this.$SidebarFitWindowHeight4),0);j.set(this.$SidebarFitWindowHeight0,'margin-top',t+'px');if(t!=this.$SidebarFitWindowHeight2){this.$SidebarFitWindowHeight2=t;this.inform('resized',t);}};s.prototype.getOffset=function(){"use strict";return this.$SidebarFitWindowHeight2;};e.exports=s;},null);
__d("ChatSidebar",["Arbiter","ArbiterMixin","AsyncRequest","Banzai","BanzaiLogger","Bootloader","BootloaderConfig","ChatConfig","ChatImpressionLogger","ChatOptions","ChatSidebarComposeLink.react","ChatSidebarConstants","ChatSidebarSheet","CSS","DOM","DOMDimensions","Event","JSLogger","KeyEventController","LitestandClassicPlaceHolders","MercuryConfig","OrderedFriendsList","Parent","PresencePrivacy","React","ScrollableArea","SidebarFitWindowHeight","Style","ViewportBounds","copyProperties","createArrayFromMixed","csx","cx","debounce","emptyFunction","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa){b.__markCompiled&&b.__markCompiled();var qa,ra=null,sa,ta=false,ua=false,va=false,wa=false,xa=false,ya=false,za,ab,bb=false,cb,db,eb,fb,gb,hb,ib,jb=null,kb,lb=x.create('chat_sidebar'),mb='succeeded',nb=null;function ob(){t.removeClass(document.documentElement,'sidebarMode');if(!xa||(!zb.isVisible()&&!wa)){g.inform('reflow');return;}va=false;wa=false;jb=null;fb.hide();hb.getCore().reset();t.hide(db);if(bb){t.hide(ab);t.hide(cb);t.removeClass(document.documentElement,'miniSidebar');t.removeClass(db,"_51xq");za&&za.setProps({shown:false},function(){return ub(false);});lb.log('minisidebar_hide');}else lb.log('sidebar_hide');g.inform('sidebar/hide',zb);g.inform('reflow');}function pb(){var ac=zb.shouldShowSidebar(),bc=zb.shouldShowMiniSidebar();if(zb.isEnabled()&&(ac||bc)){if(ac){sb();tb();}else vb();}else ob();if(!xa){yb();xa=true;}jb=null;}function qb(){if(hb&&zb.isVisible())hb.getCore().getElement().focus();}function rb(ac){var bc=ib.height;ac.forEach(function(cc){if(cc&&cc!==qa)bc-=v.getElementDimensions(cc).height;});if(kb)bc-=kb.getOffset();if(gb)bc-=v.getElementDimensions(gb).height;return Math.max(0,bc);}function sb(){if(zb.isVisible())return;if(bb){t.hide(ab);t.show(cb);t.removeClass(document.documentElement,'miniSidebar');t.removeClass(db,"_51xq");za&&za.setProps({shown:false},function(){return ub(false);});}va=true;wa=false;jb=null;t.show(db);t.addClass(document.documentElement,'sidebarMode');fb.show();lb.log('sidebar_show');g.inform('sidebar/show',zb);z.destroy('sidebar');}function tb(){var ac=rb(ka(cb.childNodes)),bc=fb.getItemHeight(),cc=8,dc=Math.floor((ac-cc)/bc);ha.set(qa,'height',ac+'px');fb.setNumTopFriends(dc);var ec=Math.floor((ac-cc)/bc);ec=(ec-2)>0?ec-2:0;hb.getData().setMaxResults(ec);g.inform('sidebar/resized',zb);g.inform('reflow');}function ub(ac){if(db===null)return;t.conditionClass(db,"_2e4g",ac);}function vb(){t.hide(cb);t.show(ab);t.show(db);t.addClass(document.documentElement,'sidebarMode');t.addClass(document.documentElement,'miniSidebar');t.addClass(db,"_51xq");var ac=rb([]),bc=r.getItemHeight(true),cc=Math.floor(ac/bc)-4;if(!za){l.loadModules(["ChatMiniSidebar.react","ChatMiniSidebarSearchSource"],function(dc,ec){if(!sa)sa=new ec({queryRequests:[{uri:'/ajax/mercury/composer_query.php'}]});za=ea.render(ea.createElement(dc,{dataSource:sa,height:ac,maxEntries:Math.max(cc,0),onClickSearch:ub,onToggleSidebar:zb.toggle,shown:true}),ab);});}else za.setProps({height:ac,maxEntries:Math.max(cc,0),shown:true});va=false;wa=true;z.destroy('sidebar');lb.log('minisidebar_show');g.inform('minisidebar/show',zb);g.inform('reflow');}function wb(){p.setSetting('sidebar_mode',zb.isEnabled(),'sidebar');new i('/ajax/chat/settings.php').setHandler(oa).setErrorHandler(oa).setData({sidebar_mode:zb.isEnabled()}).setAllowCrossPageTransition(true).send();}function xb(){return ba.getActiveList().length<=n.get('sidebar.min_friends');}function yb(){var ac=true;if(!zb.isEnabled()){lb.log('state_not_enabled');ac=false;}if(!zb.isViewportCapable())if(!bb){lb.log('state_not_shown_viewport');ac=false;}else if(!zb.isViewportCapableForMiniSidebar()){lb.log('state_not_shown_viewport_mini');ac=false;}if(ua){lb.log('state_not_shown_hidden');ac=false;}if(xb()){lb.log('state_not_shown_num_friends');ac=false;}lb.log(ac?'state_shown':'state_not_shown');}var zb={init:function(ac,bc,cc,dc){zb.init=oa;ya=true;db=ac;fb=bc;hb=cc;eb=dc;qa=u.find(ac,'div.fbChatSidebarBody');ab=u.find(ac,"._51x-");cb=u.find(ac,"._51x_");gb=u.find(ac,"._5qqe");bb=n.get('www_mini_sidebar',false);var ec=u.find(ac,"._x1u");ec&&ea.render(ea.createElement(q,{className:"_3a-4 _5q85"}),ec);w.listen(window,'resize',pb);y.registerKey('q',function(event){if(va){if(!ra)ra=u.scry(ac,'.inputsearch')[0];if(ra){ra.focus();event.prevent();}}});var fc=new s(ac);fc.subscribe('updated',pb);fb.setScrollContainer(ca.byClass(fb.getRoot(),'uiScrollableAreaWrap'));fb.subscribe(['render','show','hide'],na(function(hc){var ic=fa.getInstance(fb.getRoot());ic&&ic.adjustGripper();}));g.subscribe('chat/option-changed',function(hc,ic){if(ic.name=="sidebar_mode"){ta=!!p.getSetting('sidebar_mode');pb();}if(ic.name==='hide_groups')pb();});cc.getCore().subscribe('sidebar/typeahead/active',zb.updateOnActiveTypeahead);if(aa.SidebarClearTypeaheadGK){cc.subscribe('blur',function(){if(!fb.isVisible())zb.updateOnActiveTypeahead(null,false);});cc.subscribe('focus',function(){if(fb.isVisible()&&cc.getCore().getValue())zb.updateOnActiveTypeahead(null,true);});}cc.subscribe('reset',function(){if(!cc.getCore().getValue()&&!fb.isVisible())zb.updateOnActiveTypeahead(null,false);});g.subscribe('buddylist-nub/initialized',function(hc,ic){w.listen(ic.getButton(),'click',function(event){var jc=ua;ua=false;zb.enable();var kc=zb.shouldShowSidebar()||zb.shouldShowMiniSidebar();ua=jc&&!kc;return !kc;});});ta=!!p.getSetting('sidebar_mode');da.subscribe('privacy-user-presence-changed',pb);pb();o.init(fb);ia.addPersistentRight(zb.getVisibleWidth);zb.inform('sidebar/initialized',zb,g.BEHAVIOR_PERSISTENT);g.inform('sidebar/initialized',zb,g.BEHAVIOR_PERSISTENT);kb=new ga(gb);kb.subscribe('resized',pb);if(n.get('chat_sidebar_load_log')){var gc={event:mb,session_token:dc.session_token,country_code:dc.viewer_country_code,buddylist_short:n.get('buddylist_short_group'),bootloader_retry:m.retry_on_timeout};if(!nb)nb=k.create(ja({retry:true},j.VITAL));nb.log('MessagesSidebarLoadLoggerConfig',gc);}},updateOnActiveTypeahead:function(ac,bc){if(!va)return;if(bc){fb.hide();}else{hb.getView().clearContent();fb.show();pb();}},isInitialized:function(){return xa;},disable:function(){if(!zb.isEnabled())return;ta=false;wb();ob();},enable:function(){if(zb.isEnabled())return;ta=true;wb();pb();setTimeout(qb,0);},ensureLoaded:function(){if(!ta)return;if(ya)return;if(pa('pagelet_sidebar'))return;d(['UIPagelet'],function(ac){var bc=u.create('div',{id:'pagelet_sidebar'});u.appendContent(document.body,bc);ac.loadFromEndpoint('SidebarPagelet','pagelet_sidebar');});ya=true;},hide:function(){if(ua)return;ua=true;ob();},unhide:function(){if(!ua)return;ua=false;pb();},getBody:function(){return qa;},getRoot:function(){return db;},getVisibleWidth:function(){if((!va&&!wa)||!db)return 0;if(jb===null){jb=db.offsetWidth;if(wa)jb=206;}return jb;},isEnabled:function(){return ta;},isViewportCapable:function(){ib=v.getViewportWithoutScrollbarDimensions();var ac=n.get('sidebar.minimum_width');return ib.width>ac;},shouldShowSidebar:function(){var ac=zb.isViewportCapable();return ac&&!ua&&!xb();},isViewportCapableForMiniSidebar:function(){ib=v.getViewportWithoutScrollbarDimensions();var ac=n.get('sidebar.minimum_width'),bc=n.get('minisidebar.minimum_width');return ib.width>bc&&ib.width<=ac;},shouldShowMiniSidebar:function(){if(!bb)return false;var ac=zb.isViewportCapableForMiniSidebar();return ac&&!ua&&!xb();},isVisible:function(){return va;},resize:pb,toggle:function(){zb.isEnabled()?zb.disable():zb.enable();}};ja(zb,h);e.exports=zb;},null);
__d("ChatTypeaheadBehavior",["ChatOpenTab","CSS","MercuryConfig","Parent","Rect","copyProperties","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();function n(p,q){var r=j.byClass(p,"_4oes");if(r)h.conditionClass(r,"_5q83",q);}function o(p){"use strict";this._typeahead=p;}o.prototype.enable=function(){"use strict";var p=this._typeahead;this._subscriptions=[p.subscribe('focus',function(){p.getData().refreshData();n(p.getElement(),true);}),p.subscribe('blur',function(q){if(!i.SidebarClearTypeaheadGK)p.getCore().reset();n(p.getElement(),false);}),p.subscribe('respond',function(q,r){if(r.value&&r.value===p.getCore().getValue()){if(!r.results.length){var s=r.value.toLowerCase(),t=p.getData().getQueryCache();if(!r.isAsync&&!t.hasOwnProperty(s))return;p.getView().showNoResults();}h.addClass(p.getElement(),'hasValue');}}),p.subscribe('reset',function(){h.removeClass(p.getElement(),'hasValue');}),p.subscribe('select',function(q,r){var s=r.selected.uid;if(r.selected.mercury_thread&&!r.selected.mercury_thread.is_canonical)s=r.selected.mercury_thread.thread_fbid;p.getView().hide();g.openTabByType(s,r.selected.type,'typeahead');}),p.subscribe('highlight',function(q,r){if(r.index>=0){var s=p.getView().getItems()[r.index];if(s){var t=new k(s),u=s.offsetParent,v=t.boundWithin(new k(u)).getPositionVector();t.getPositionVector().sub(v).scrollElementBy(u);}}})];};o.prototype.disable=function(){"use strict";this._subscriptions.forEach(function(p){this._typeahead.unsubscribe(p);},this);this._subscriptions=null;};l(o.prototype,{_subscriptions:null});e.exports=o;},null);
__d("SyncRequestTitle.react",["React","fbt","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=g,k=j.PropTypes,l=g.createClass({displayName:"SyncRequestTitle",propTypes:{appName:k.string.isRequired,isSender:k.bool.isRequired,receiverName:k.string.isRequired,senderName:k.string.isRequired},render:function(){if(this.props.isSender){return (g.createElement("div",null,h._("Waiting for {receiver} to accept your invite to play {app_name}.",[h.param("receiver",g.createElement("span",{className:"_dg4"},this.props.receiverName)),h.param("app_name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}else return (g.createElement("div",null,h._("{sender} wants to play {app_name} with you, right now.",[h.param("sender",g.createElement("span",{className:"_dg4"},this.props.senderName)),h.param("app_name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}});e.exports=l;},null);
__d("SyncRequestAcceptedMessage.react",["React","fbt","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=g,k=j.PropTypes,l=g.createClass({displayName:"SyncRequestAcceptedMessage",propTypes:{appName:k.string.isRequired,isSender:k.bool.isRequired,receiverName:k.string.isRequired,senderName:k.string.isRequired},render:function(){if(this.props.isSender){return (g.createElement("div",null,h._("{receiver} accepted your invite to play {app name}.",[h.param("receiver",g.createElement("span",{className:"_dg4"},this.props.receiverName)),h.param("app name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}else return (g.createElement("div",null,h._("You accepted an invite from {sender} to play {app name}.",[h.param("sender",g.createElement("span",{className:"_dg4"},this.props.senderName)),h.param("app name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}});e.exports=l;},null);
__d("SyncRequestRejectedMessage.react",["AsyncRequest","Link.react","React","URI","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=i,n=m.PropTypes,o=i.createClass({displayName:"SyncRequestRejectedMessage",propTypes:{requestId:n.string.isRequired,app:n.object.isRequired,isSender:n.bool.isRequired,receiver:n.object.isRequired,sender:n.object.isRequired},render:function(){if(this.props.isSender){return (i.createElement("div",null,l._("{receiver} declined your invite to play {app_name}.",[l.param("receiver",i.createElement("span",{className:"_dg4"},this.props.receiver.name)),l.param("app_name",i.createElement("span",{className:"_dg5"},this.props.app.name))])));}else return (i.createElement("div",null,l._("You declined an invite from {sender} to play {app_name}.",[l.param("sender",i.createElement("span",{className:"_dg4"},this.props.sender.name)),l.param("app_name",i.createElement("span",{className:"_dg5"},this.props.app.name))]),i.createElement("div",{className:"_13n7"},i.createElement("div",null,i.createElement(h,{onClick:this._submitBlockApp},l._("Block {app}",[l.param("app",this.props.app.name)]))),i.createElement("div",null,i.createElement(h,{onClick:this._submitBlockUser},l._("Block requests from {sender}",[l.param("sender",this.props.sender.name)]))))));},_submitBlockApp:function(){var p=new j('/games/block_app/'),q=new g().setURI(p);q.setData({app_id:this.props.app.id,source:'sync_request'});q.send();},_submitBlockUser:function(){var p=new j('/games/block_user/'),q=new g().setURI(p);q.setData({app_id:this.props.app.id,blockee_uid:this.props.sender.id});q.send();}});e.exports=o;},null);
__d("SyncRequestExpiredMessage.react",["React","fbt","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=g,k=j.PropTypes,l=g.createClass({displayName:"SyncRequestExpiredMessage",propTypes:{appName:k.string.isRequired,isSender:k.bool.isRequired,receiverName:k.string.isRequired,senderName:k.string.isRequired},render:function(){if(this.props.isSender){return (g.createElement("div",null,h._("{receiver} missed your invite to play {app name}.",[h.param("receiver",g.createElement("span",{className:"_dg4"},this.props.receiverName)),h.param("app name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}else return (g.createElement("div",null,h._("You missed an invite from {sender} to play {app name}.",[h.param("sender",g.createElement("span",{className:"_dg4"},this.props.senderName)),h.param("app name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}});e.exports=l;},null);
__d("SyncRequestCanceledMessage.react",["React","cx","fbt"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=g,k=j.PropTypes,l=g.createClass({displayName:"SyncRequestCanceledMessage",propTypes:{appName:k.string.isRequired,isSender:k.bool.isRequired,receiverName:k.string.isRequired,senderName:k.string.isRequired},render:function(){if(this.props.isSender){return (g.createElement("div",null,i._("You canceled an invite to {receiver} to play {app name}.",[i.param("receiver",g.createElement("span",{className:"_dg4"},this.props.receiverName)),i.param("app name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}else return (g.createElement("div",null,i._("{sender} canceled an invitation to play {app name}.",[i.param("sender",g.createElement("span",{className:"_dg4"},this.props.senderName)),i.param("app name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}});e.exports=l;},null);
__d("SyncRequestTimer.react",["React","fbt"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=g,j=i.PropTypes;function k(m){if(m){m=Math.ceil(m);var n=m%60;if(n<10)n='0'+n;var o=Math.floor(m/60);return o+':'+n;}else return "0:00";}var l=g.createClass({displayName:"SyncRequestTimer",propTypes:{timeRemaining:j.number.isRequired,isSender:j.bool.isRequired,receiverName:j.string.isRequired},render:function(){if(this.props.isSender){return (g.createElement("div",null,h._("({time_remaining} remaining)",[h.param("time_remaining",k(this.props.timeRemaining))])));}else return (g.createElement("div",null,h._("You have {time_remaining} to accept.",[h.param("time_remaining",k(this.props.timeRemaining))])));}});e.exports=l;},null);
__d("XSyncRequestSubmitController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/platform\/games\/sync_requests\/submit\/",{request_id:{type:"Int",required:true},sender:{type:"Int",required:true},action:{type:"Int",required:true}});},null);
__d("SyncRequest.react",["Arbiter","AsyncRequest","ChannelConstants","React","SyncRequestStatusEnum","SyncRequestTitle.react","SyncRequestAcceptedMessage.react","SyncRequestRejectedMessage.react","SyncRequestExpiredMessage.react","SyncRequestCanceledMessage.react","SyncRequestTimer.react","XUIButton.react","XSyncRequestSubmitController","cx","fbt","getObjectValues"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();var w=j,x=w.PropTypes,y=j.createClass({displayName:"SyncRequest",propTypes:{app:x.object.isRequired,creationTime:x.number.isRequired,requestId:x.string.isRequired,receiver:x.object.isRequired,sender:x.object.isRequired,status:x.oneOf(v(k)).isRequired,timeout:x.number.isRequired,timeRemaining:x.number.isRequired,viewerId:x.number.isRequired,onStatusUpdate:x.func},componentWillMount:function(){if(this.props.status===k.PENDING){var z=g.subscribe(i.getArbiterType('sync_request_updated'),function(ca,da){da=da.obj;if(da.id.toString()!==this.props.requestId)return;this.setState({status:da.status});}.bind(this));this.setState({statusEvent:z});}var aa=null;if(this.props.status===k.PENDING){var ba=function(){this.setState({time_remaining:(this.state.time_remaining-1)});if(this.state.time_remaining<=0){clearInterval(this.state.counter);var ca={counter:null,time_remaining:0};if(this.state.status===k.PENDING)ca.status=k.EXPIRED;this.setState(ca);}};aa=setInterval(ba.bind(this),1000);}this.setState({time_remaining:this.props.timeRemaining,counter:aa});},componentWillUnmount:function(){if(this.state.counter)clearInterval(this.state.counter);g.unsubscribe(this.state.statusEvent);},getInitialState:function(){return {buttonsDisabled:false,time:Date.now(),status:this.props.status,viewerIsSender:this.props.viewerId===this.props.sender.id};},componentDidUpdate:function(z,aa){if(this.props.status!=k.PENDING)this.state.status=this.props.status;if(this.props.onStatusUpdate)this.props.onStatusUpdate(this.state.status,aa.status);},render:function(){var z;switch(this.state.status){case k.PENDING:var aa;if(!this.state.viewerIsSender){aa=[j.createElement(r,{use:"confirm",onClick:this._handleAccept,disabled:this.state.buttonsDisabled,label:u._("Accept")}),j.createElement(r,{use:"default",onClick:this._handleReject,disabled:this.state.buttonsDisabled,label:u._("Decline")})];}else aa=j.createElement(r,{use:"default",onClick:this._handleCancel,disabled:this.state.buttonsDisabled,label:u._("Cancel")});z=(j.createElement("div",null,j.createElement("div",{className:"_372m"},j.createElement(l,{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name})),j.createElement("div",{className:"_372n"},j.createElement(q,{isSender:this.state.viewerIsSender,timeRemaining:this.state.time_remaining,receiverName:this.props.receiver.name})),j.createElement("div",{className:"_372o"},aa)));break;case k.ACCEPTED:z=j.createElement("div",{className:"_372p mvs"},j.createElement(m,{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;case k.REJECTED:z=j.createElement("div",{className:"_372p mvs"},j.createElement(n,{requestId:this.props.requestId,app:this.props.app,isSender:this.state.viewerIsSender,receiver:this.props.receiver,sender:this.props.sender}));break;case k.EXPIRED:z=j.createElement("div",{className:"_372p mvs"},j.createElement(o,{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;case k.CANCELED:z=j.createElement("div",{className:"_372p mvs"},j.createElement(p,{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;default:throw new Error('The request status `%s` is unknown.',this.state.status);}return (j.createElement("div",{className:"_372q"},z));},_handleAccept:function(){this._handleStatusUpdate(k.ACCEPTED);var z=window.open(this.props.app.uri);if(z)z.focus();},_handleReject:function(){this._handleStatusUpdate(k.REJECTED);},_handleCancel:function(){this._handleStatusUpdate(k.CANCELED);},_handleStatusUpdate:function(z){this.setState({status:z,buttonsDisabled:true});var aa=s.getURIBuilder().setInt('request_id',this.props.requestId).setInt('sender',this.props.sender.id).setInt('action',z).getURI();new h().setURI(aa).setHandler(function(ba){this.setState({status:z});}.bind(this)).setErrorHandler(function(ba){this.setState({buttonsDisabled:false});}.bind(this)).send();}});e.exports=y;},null);
__d("ProgressBar.react",["React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=g,k=j.PropTypes,l=g.createClass({displayName:"UIProgressBar",propTypes:{value:k.number.isRequired,label:k.string,min:k.number,max:k.number,size:k.oneOf(['small','large']),typesetting:k.oneOf(['float','inline']),isRounded:k.bool},getDefaultProps:function(){return {min:0,max:100,size:'large',typesetting:'inline',isRounded:false};},_calculatePercentage:function(){var m=this.props,n=Math.min(Math.max((m.value-m.min)/(m.max-m.min)*100,0),100);return n;},_hasLabel:function(){return this.props.label!=null&&this.props.size!=='small';},_isFloatingLabel:function(){return this._hasLabel()&&this.props.typesetting==='float';},_getLabel:function(){if(!this._hasLabel())return null;return this.props.label;},_getSpacer:function(){if(this._isFloatingLabel())return g.createElement("div",{className:"_6a"}," ");return null;},_getFillArea:function(){var m=Math.round(this._calculatePercentage()),n=(("_5e4k")+(m===0?' '+"_5e2d":'')+(m===100?' '+"_5e4j":'')),o=this._getLabel();if(o)o=g.createElement("span",{className:"_5e2h"},o);var p=g.createElement("div",{className:n,style:{width:m+'%'}},this._getSpacer(),o);return p;},_getUnfillArea:function(){var m=this._getLabel();if(!m)return null;m=g.createElement("span",{className:"_5e2h _5e2n"},m);if(this._isFloatingLabel()){var n=this._calculatePercentage(),o={left:n+'%',width:n+'%'},p=g.createElement("div",{className:"_5e2g",style:o},this._getSpacer(),m);return p;}return m;},render:function(){var m=(("_5e4h")+(!this._isFloatingLabel()?' '+"_5e2k":'')+(this._isFloatingLabel()?' '+"_5e2j":'')+(this.props.size==='small'?' '+"_5e2l":'')+(this.props.isRounded===true?' '+"_5e2m":''));if(this._isFloatingLabel()){return (g.createElement("div",g.__spread({},this.props,{className:i(this.props.className,m)}),g.createElement("div",{className:"_5e2k"},this._getUnfillArea(),this._getFillArea())));}else return (g.createElement("div",g.__spread({},this.props,{className:i(this.props.className,m)}),this._getUnfillArea(),this._getFillArea()));}});e.exports=l;},null);
__d("XUIBadge.react",["React","cx","invariant","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=g,l=k.PropTypes;function m(o){return parseInt(o,10)===o;}var n=g.createClass({displayName:"XUIBadge",propTypes:{type:l.oneOf(['regular','special']),count:l.number.isRequired,maxcount:l.number},getDefaultProps:function(){return {type:'regular',maxcount:20};},render:function(){var o=this.props.type,p=this.props.count,q=this.props.maxcount;i(m(p));i(m(q));var r=(("_5ugh")+(p>q?' '+"_5ugi":'')+(o==='regular'?' '+"_5ugf":'')+(o==='special'?' '+"_5ugg":'')+(p===0?' '+"hidden_elem":''));return (g.createElement("span",g.__spread({},this.props,{className:j(this.props.className,r),type:null}),p>q?q+'+':p));}});e.exports=n;},null);
__d("SimpleXUIDialog",["DialogX","LayerDestroyOnHide","LayerFadeOnHide","LayerFadeOnShow","LayerHideOnBlur","LayerHideOnEscape","React","XUIDialogCancelButton.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogOkayButton.react","XUIDialogTitle.react"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();'use strict';var s=445,t={show:function(u,v,w,x){var y=m.createElement(q,{action:"cancel",use:"confirm"});this.showEx(u,v,y,w,x);},showConfirm:function(u,v,w,x){var y=false,z=m.createElement("div",null,m.createElement(n,{onClick:function(){y=false;}}),m.createElement(q,{action:"cancel",use:"confirm",onClick:function(){y=true;}}));function aa(){w(y);}this.showEx(u,v,z,aa,x);},showEx:function(u,v,w,x,y){y=y||{};var z=[h,j,i,l];if(y.hideOnBlur!==false)z.push(k);var aa={width:s,xui:true,addedBehaviors:z};if(v)v=m.createElement(r,{showCloseButton:true},v);if(w)w=m.createElement(p,null,w);var ba=m.createElement("div",null,v,m.createElement(o,null,u),w),ca=new g(aa,ba);if(x)ca.subscribe('hide',x);ca.show();}};e.exports=t;},null);
__d("updatePhotoProgressBar",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';function g(h,event){if(event.loaded!=event.total){h.setPosition(50*event.loaded/event.total);}else{h.setPosition(50);h.setTarget(100,2000);}}e.exports=g;},null);
__d("WebMessengerEvents",["Arbiter","copyProperties"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=h(new g(),{MASTER_DOM_CHANGED:'master-dom-changed',DETAIL_DOM_CHANGED:'detail-dom-changed',FOCUS_COMPOSER:'focus-composer',FOCUS_SEARCH:'focus-search',FOCUS_AND_SELECT_SEARCH:'focus-and-select-search',STICKER_CLICKED:'sticker-clicked',SUBMIT_REPLY:'submit-reply',UPDATE_SELECTION:'update-selection',masterDOMChanged:function(){this.inform(i.MASTER_DOM_CHANGED);},detailDOMChanged:function(){this.inform(i.DETAIL_DOM_CHANGED);},focusComposer:function(){this.inform(i.FOCUS_COMPOSER);},focusSearch:function(){this.inform(i.FOCUS_SEARCH);},focusAndSelectSearch:function(){this.inform(i.FOCUS_AND_SELECT_SEARCH);},updateSelection:function(j){this.inform(i.UPDATE_SELECTION,j);},stickerClicked:function(j,k){this.inform(i.STICKER_CLICKED,{packID:j,stickerID:k});},submitReply:function(){this.inform(i.SUBMIT_REPLY);}});e.exports=i;},null);
__d("WebMessengerSubscriptionsHandler",["SubscriptionsHandler"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=new g('webmessenger');e.exports=h;},null);
__d("isWebMessengerURI",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){return (/^(\/messages)/).test(h.getPath());}e.exports=g;},null);
__d("WebMessengerWidthControl",["Arbiter","CSS","CSSClassTransition","DOM","DOMDimensions","Event","Style","URI","ViewportBounds","WebMessengerEvents","WebMessengerSubscriptionsHandler","$","cx","csx","isWebMessengerURI","requestAnimationFrame","setTimeoutAcrossTransitions","shield","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){b.__markCompiled&&b.__markCompiled();var z=205,aa=981,ba=257,ca=18,da=848,ea=724,fa=.57,ga=56,ha,ia,ja;function ka(pa,qa,ra){this.masterChanged=pa;this.detailChaned=qa;q.addSubscriptions(l.listen(window,'resize',y(x(la,this,this),100)),g.subscribe(['sidebar/initialized','sidebar/show','sidebar/hide','minisidebar/show'],x(la,this,this),g.SUBSCRIBE_NEW));var sa=oa()?ga:0;if(ra)sa=z;this._width=oa()?0:da;ja=true;la(this,sa);}function la(pa,qa){var ra=o.getRight()+o.getLeft();ra=ra||qa||0;var sa=k.getViewportWithoutScrollbarDimensions().width-ra,ta=Math.round(Math.max(0,sa/2-aa/2));sa=aa+ta-ba;sa-=ca;sa=Math.max(ea,Math.min(da,sa));if(!isNaN(sa)&&pa._width!==sa){pa._width=sa;var ua=Math.round(sa/(1+fa)),va=sa-ua;pa.masterChanged(va);pa.detailChaned(ua);if(oa()){var wa=sa+ba;ma(function(){if(ia){document.body.className=ia;ia='';}na(wa+'px');h.removeClass(document.body,"_5uj5");ja&&p.detailDOMChanged();ja=false;},ia);}}}function ma(pa,qa){qa&&h.addClass(document.documentElement,"_5uj6");v(pa);qa&&w(h.removeClass.bind(null,document.documentElement,"_5uj6"),1000);}function na(pa){m.set(j.find(document,"div._uaw"),'width',pa);m.set(r('globalContainer'),'width',pa);}function oa(){if(!ha)ha=h.hasClass(document.body,"_6nw");return ha;}i.registerHandler(function(pa,qa,ra,sa){function ta(ua){return oa()&&u(n(ua));}if(ta(sa)){ia=qa;return true;}else if(ta(ra)){ma(function(){pa.className=qa;na('');},true);return true;}});e.exports=ka;},null);
__d("Dock",["Event","shield","Arbiter","ArbiterMixin","ChatQuietLinks","CSS","DataStore","DOM","Parent","Style","Toggler","Vector","copyProperties","csx","emptyFunction","WebMessengerWidthControl"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();b('WebMessengerWidthControl');function v(){}s(v,j,{MIN_HEIGHT:140,INITIAL_FLYOUT_HEIGHT_OFFSET:10,init:function(w){this.init=u;this.rootEl=w;this.calculateViewportDimensions();this.calculateFlyoutHeightOffset();k.removeEmptyHrefs(this.rootEl);g.listen(w,'click',this._onClick.bind(this));g.listen(window,'resize',this._onWindowResize.bind(this));q.subscribe(['show','hide'],function(x,y){var z=y.getActive();if(!n.contains(w,z))return;if(l.hasClass(z,'fbNub')){this.notifyNub(z,x);if(x==='show')this._resizeNubFlyout(z);}else{var aa=o.byClass(z,'fbNubFlyout');if(aa)l.conditionClass(aa,'menuOpened',x==='show');}}.bind(this));this.inform('init',{},i.BEHAVIOR_PERSISTENT);},calculateViewportDimensions:function(){return (this.viewportDimensions=r.getViewportDimensions());},calculateFlyoutHeightOffset:function(){this.flyoutHeightOffset=this.INITIAL_FLYOUT_HEIGHT_OFFSET+r.getElementDimensions(this.rootEl).y;var w=n.scry(document,"div._4f7n")[0];if(w){var x=p.isFixed(w)?'viewport':'document';this.flyoutHeightOffset+=r.getElementPosition(w,x).y+r.getElementDimensions(w).y;}},toggle:function(w){var x=this._findFlyout(w);if(!x)return;this.subscribe('init',function(){q.toggle(w);});},show:function(w){this.subscribe('init',function(){q.show(w);});},showNub:function(w){l.show(w);},hide:function(w){this.subscribe('init',function(){var x=q.getInstance(w);n.contains(w,x.getActive())&&x.hide();});},hideNub:function(w){l.hide(w);this.hide(w);},setUseMaxHeight:function(w,x){l.conditionClass(w,'maxHeight',x!==false);this._resizeNubFlyout(w);},_resizeNubFlyout:function(w){var x=this._findFlyout(w);if(!x||!(l.hasClass(w,'openToggler')||l.hasClass(w,'opened')))return;var y=n.find(x,'div.fbNubFlyoutOuter'),z=n.find(y,'div.fbNubFlyoutInner'),aa=n.find(z,'div.fbNubFlyoutBody'),ba=aa.scrollTop,ca=aa.offsetHeight;p.set(aa,'height','auto');var da=r.getElementDimensions(x),ea=r.getElementDimensions(aa),fa=this.getMaxFlyoutHeight(w);p.set(x,'max-height',fa+'px');p.set(y,'max-height',fa+'px');da=r.getElementDimensions(x);var ga=r.getElementDimensions(z),ha=ga.y-ea.y,ia=da.y-ha,ja=parseInt(aa.style.height||aa.clientHeight,10),ka=ia!==ja;if(da.y>ha&&ka)p.set(aa,'height',ia+'px');l.removeClass(x,'swapDirection');var la=r.getElementPosition(x).x;l.conditionClass(x,'swapDirection',function(){if(la<0)return true;return (la+da.x>this.viewportDimensions.x);}.bind(this)());if(ka&&ba+ca>=ea.y){aa.scrollTop=aa.scrollHeight;}else aa.scrollTop=ba;this.notifyNub(w,'resize');},getMaxFlyoutHeight:function(w){var x=this._findFlyout(w),y=r.getElementPosition(x,'viewport'),z=r.getElementDimensions(x),aa=Math.max(this.MIN_HEIGHT,this.viewportDimensions.y-this.flyoutHeightOffset)-(this.viewportDimensions.y-y.y-z.y);return Math.max(aa,0);},resizeAllFlyouts:function(){var w=this._getAllNubs(),x=w.length;while(x--)this._resizeNubFlyout(w[x]);},hideAllFlyouts:function(){var w=this._getAllNubs(),x=w.length;while(x--)this.hide(w[x]);},_getAllNubs:function(){var w=n.scry(this.rootEl,"div._50-v.openToggler");return w.concat(n.scry(this.rootEl,"div._50-v.opened"));},_onClick:function(event){var w=event.getTarget(),x=o.byClass(w,'fbNub');if(x){if(o.byClass(w,'fbNubFlyoutTitlebar')){var y=o.byTag(w,'a'),z=w.nodeName=='INPUT'&&w.getAttribute('type')=='submit';if(!y&&!z){this.hide(x);return false;}}this.notifyNub(x,'click');}},_onWindowResize:function(event){this.calculateViewportDimensions();this.resizeAllFlyouts();},_findFlyout:function(w){return l.hasClass(w,'fbNubFlyout')?w:n.scry(w,'div.fbNubFlyout')[0]||null;},registerNubController:function(w,x){m.set(w,'dock:nub:controller',x);x.subscribe('nub/button/content-changed',h(this.inform,this,'resize',w));x.subscribe('nub/flyout/content-changed',h(this._resizeNubFlyout,this,w));},unregisterNubController:function(w){m.remove(w,'dock:nub:controller');},notifyNub:function(w,x,y){var z=m.get(w,'dock:nub:controller');z&&z.inform(x,y);}});e.exports=a.Dock||v;},null);
__d("BootloadedComponent.react",["React"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g,i=h.PropTypes,j=g.createClass({displayName:"BootloadedComponent",propTypes:{bootloadPlaceholder:i.element.isRequired,bootloadComponent:i.func.isRequired},getInitialState:function(){return {component:null};},componentDidMount:function(){this.props.bootloadComponent(this.onComponentLoaded);},render:function(){var k=this.state.component;if(!k)return this.props.bootloadPlaceholder;return (g.createElement(k,g.__spread({},this.props),this.props.children));},onComponentLoaded:function(k){this.setState({component:k});}});e.exports=j;},null);
__d("Emscripten",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={isSupported:function(){return (typeof Int32Array!=='undefined'&&typeof Float64Array!=='undefined'&&!!new Int32Array(1).subarray&&!!new Int32Array(1).set);}};},null);
__d("XHRHttpError",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g='HTTP_CLIENT_ERROR',h='HTTP_PROXY_ERROR',i='HTTP_SERVER_ERROR',j='HTTP_TRANSPORT_ERROR',k='HTTP_UNKNOWN_ERROR';function l(m,n){if(n===0){var o=m.getProtocol();if(o==='file'||o==='ftp')return null;return j;}else if(n>=100&&n<200){return h;}else if(n>=200&&n<300){return null;}else if(n>=400&&n<500){return g;}else if(n>=500&&n<600){return i;}else if(n>=12001&&n<12156){return j;}else return k;}e.exports={getErrorCode:l,HTTP_CLIENT_ERROR:g,HTTP_PROXY_ERROR:h,HTTP_SERVER_ERROR:i,HTTP_TRANSPORT_ERROR:j,HTTP_UNKNOWN_ERROR:k};},null);
__d("xhrSimpleDataSerializer",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){var i=[],j;for(j in h)i.push(encodeURIComponent(j)+'='+encodeURIComponent(h[j]));return i.join('&');}e.exports=g;},null);
__d("XHRRequest",["ErrorUtils","TimeSlice","URI","XHRHttpError","getSameOriginTransport","invariant","xhrSimpleDataSerializer"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n={errorCode:null,errorMsg:null,errorType:null},o={loadedBytes:null,totalBytes:null};function p(q){"use strict";this.setURI(q);this.setMethod('POST');this.setTransportBuilder(k);this.setDataSerializer(m);this.$XHRRequest0=this.$XHRRequest0.bind(this);}p.prototype.setURI=function(q){"use strict";this.$XHRRequest1=new i(q);return this;};p.prototype.getURI=function(){"use strict";return this.$XHRRequest1;};p.prototype.setMethod=function(q){"use strict";this.$XHRRequest2=q;return this;};p.prototype.getMethod=function(){"use strict";return this.$XHRRequest2;};p.prototype.setData=function(q){"use strict";this.$XHRRequest3=q;return this;};p.prototype.getData=function(){"use strict";return this.$XHRRequest3;};p.prototype.setRawData=function(q){"use strict";this.$XHRRequest4=q;return this;};p.prototype.setRequestHeader=function(q,r){"use strict";if(!this.$XHRRequest5)this.$XHRRequest5={};this.$XHRRequest5[q]=r;return this;};p.prototype.setTimeout=function(q){"use strict";this.$XHRRequest6=q;return this;};p.prototype.setResponseHandler=function(q){"use strict";this.$XHRRequest7=q;return this;};p.prototype.setErrorHandler=function(q){"use strict";this.$XHRRequest8=q;return this;};p.prototype.setAbortHandler=function(q){"use strict";this.$XHRRequest9=q;return this;};p.prototype.setTimeoutHandler=function(q){"use strict";this.$XHRRequesta=q;return this;};p.prototype.setUploadProgressHandler=function(q){"use strict";this.$XHRRequestb=q;return this;};p.prototype.setTransportBuilder=function(q){"use strict";this.$XHRRequestc=q;return this;};p.prototype.setDataSerializer=function(q){"use strict";this.$XHRRequestd=q;return this;};p.prototype.send=function(){"use strict";var q=this.$XHRRequest6,r=this.$XHRRequestc(),s=this.getURI();this.$XHRRequeste=r;var t;l(this.$XHRRequest2==='POST'||!this.$XHRRequest4);if(this.$XHRRequest2==='GET'||this.$XHRRequest4){s.addQueryData(this.$XHRRequest3);t=this.$XHRRequest4;}else t=this.$XHRRequestd(this.$XHRRequest3);r.onreadystatechange=h.guard(this.$XHRRequest0,'XHRRequest onreadystatechange');if(r.upload&&this.$XHRRequestb)r.upload.onprogress=this.$XHRRequestf.bind(this);if(q)this.$XHRRequestg=setTimeout(this.$XHRRequesth.bind(this),q);r.open(this.$XHRRequest2,s.toString(),true);if(this.$XHRRequest5)for(var u in this.$XHRRequest5)r.setRequestHeader(u,this.$XHRRequest5[u]);r.send(t);};p.prototype.abort=function(){"use strict";this.$XHRRequesti();if(this.$XHRRequest9)g.applyWithGuard(this.$XHRRequest9,null,null,null,'XHRRequest:_abortHandler');};p.prototype.$XHRRequesti=function(){"use strict";var q=this.$XHRRequeste;if(q){q.onreadystatechange=null;q.abort();}this.$XHRRequestj();};p.prototype.$XHRRequesth=function(){"use strict";this.$XHRRequesti();if(this.$XHRRequesta)g.applyWithGuard(this.$XHRRequesta,null,null,null,'XHRRequest:_abortHandler');};p.prototype.$XHRRequest0=function(){"use strict";var q=this.$XHRRequeste,r=q,s=r.readyState;if(s>=2){var t=s===4,u=this.getURI(),v=j.getErrorCode(u,q.status),w=this.$XHRRequest7;if(v!==null){if(t){n.errorCode=v;n.errorMsg=q.responseText;n.errorType='HTTP';if(this.$XHRRequest8)g.applyWithGuard(this.$XHRRequest8,null,[n],null,'XHRRequest:_errorHandler');}}else if(w){var x=null;if(w.includeHeaders)x=q.getAllResponseHeaders();if(t||(w.parseStreaming&&s===3))g.applyWithGuard(w,null,[q.responseText,x,t],null,'XHRRequest:handler');}if(t)this.$XHRRequestj();}};p.prototype.$XHRRequestf=function(q){"use strict";o.loadedBytes=q.loaded;o.totalBytes=q.total;if(this.$XHRRequestb)g.applyWithGuard(this.$XHRRequestb,null,[o],null,'XHRRequest:_uploadProgressHandler');};p.prototype.$XHRRequestj=function(){"use strict";clearTimeout(this.$XHRRequestg);delete this.$XHRRequeste;};e.exports=p;},null);
__d("getCrossOriginTransport",["ex","invariant"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(){try{var k=new XMLHttpRequest();if(!('withCredentials' in k)&&typeof XDomainRequest!=='undefined')k=new XDomainRequest();return k;}catch(j){throw new Error(g('getCrossOriginTransport: %s',j.message));}}i.withCredentials=function(){var j=i();h('withCredentials' in j);var k=j.open;j.open=function(){k.apply(this,arguments);this.withCredentials=true;};return j;};e.exports=i;},null);
__d("WebWorker",["BanzaiLogger","WebWorkerConfig","BlobFactory","EventListener","URI","areSameOrigin","destroyOnUnload","SubscriptionsHandler","XHRRequest","arrayContains","emptyFunction","getCrossOriginTransport","performanceNow","invariant","memoize","merge","filterObject"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){b.__markCompiled&&b.__markCompiled();var x=a.URL||a.webkitURL;function y(ea){"use strict";this.$WebWorker0=false;this.$WebWorker1=null;this.$WebWorker2=ea;this.$WebWorker3=null;this.$WebWorker4=q;this.$WebWorker5=q;this.$WebWorker6=[];this.$WebWorker7=false;this.$WebWorker8=new n();m(function(){if(!this.$WebWorker7)this.terminate();}.bind(this));this.$WebWorker9('constructed');}y.prototype.setMessageHandler=function(ea){"use strict";this.$WebWorker4=ea||q;return this;};y.prototype.setErrorHandler=function(ea){"use strict";this.$WebWorker5=ea||q;return this;};y.prototype.postMessage=function(ea,fa){"use strict";t(!this.isCurrentState('constructed'));t(!this.isCurrentState('terminated'));if(this.isCurrentState('preparing')){this.$WebWorker6.push(this.postMessage.bind(this,ea,fa));return this;}var ga={type:'message',message:ea};if(fa){this.$WebWorker3.postMessage(ga,fa);}else this.$WebWorker3.postMessage(ga);return this;};y.prototype.terminate=function(){"use strict";if(this.isCurrentState('executing'))this.$WebWorker3.terminate();if(!this.isCurrentState('terminated')){this.$WebWorker9('terminated');this.$WebWorker3=null;this.$WebWorkera();this.$WebWorker6=[];}return this;};y.prototype.execute=function(){"use strict";t(!this.isCurrentState('terminated'));if(['preparing','executing'].some(this.isCurrentState,this))return this;this.$WebWorker9('preparing');y.prepareResource(this.$WebWorker2,this.$WebWorkerb.bind(this));return this;};y.prototype.setAllowCrossPageTransition=function(ea){"use strict";this.$WebWorker7=ea;return this;};y.prototype.isCurrentState=function(ea){"use strict";t(p(y.states,ea));return ea===this.$WebWorker1;};y.prototype.$WebWorkerb=function(){"use strict";t(!this.isCurrentState('executing'));if(this.isCurrentState('terminated'))return;t(this.$WebWorker2.sameOriginURL||this.$WebWorker2.source);if(this.$WebWorker2.sameOriginURL){this.$WebWorker3=new a.Worker(this.$WebWorker2.sameOriginURL);}else{this.$WebWorker3=new a.Worker(y.evalWorkerURL);this.$WebWorker3.postMessage(this.$WebWorker2.source);}this.$WebWorkerc('ping',Date.now());this.$WebWorkerd();this.$WebWorker9('executing');this.$WebWorker6.forEach(function(ea){return ea();});this.$WebWorker6=null;};y.prototype.$WebWorkera=function(){"use strict";this.$WebWorker8.release();};y.prototype.$WebWorkerc=function(ea){"use strict";for(var fa=[],ga=1,ha=arguments.length;ga<ha;ga++)fa.push(arguments[ga]);this.$WebWorker3.postMessage({type:ea,args:fa});};y.prototype.$WebWorkere=function(event,ea){"use strict";y.$WebWorkere(event,this.$WebWorker2.name,v(ea,{cross_page_transition:!!this.$WebWorker7,state:this.$WebWorker1}));};y.$WebWorkerf=function(){"use strict";return Object.keys(w({object_url:y.$WebWorkerg(),eval_url:ca(),data_url:y.$WebWorkerh(),worker:y.isSupported(),transferables:y.areTransferablesSupported()},function(ea){return !!ea;}));};y.prototype.$WebWorkerd=function(){"use strict";this.$WebWorker8.addSubscriptions(j.listen(this.$WebWorker3,'message',this.$WebWorkeri.bind(this)),j.listen(this.$WebWorker3,'error',this.$WebWorkerj.bind(this)));};y.prototype.$WebWorkerj=function(ea){"use strict";var fa=this.$WebWorker5(ea);if(!fa&&!ea.defaultPrevented)this.$WebWorkere('exception',{message:ea.message});};y.prototype.$WebWorkeri=function(event){"use strict";var ea=event.data;switch(ea.type){case 'message':this.$WebWorker4(ea.message);break;case 'pong':this.$WebWorker0=true;this.$WebWorkere('executed',{dt:Math.floor(ea.args[1]-ea.args[0]),bytes:this.$WebWorker2.source.length});break;case 'terminate':this.terminate();break;case 'haste-error':this.terminate();this.$WebWorkere('haste_error',{message:ea.message});break;case 'console':var fa=ea.args.shift();t(p(['log','error','info','debug','warn'],fa));a.console[fa].apply(a.console,ea.args);break;}};y.prototype.$WebWorker9=function(ea){"use strict";t(p(y.states,ea));this.$WebWorkere('transition',{next_state:ea});this.$WebWorker1=ea;};y.prepareResource=function(ea,fa){"use strict";fa=fa||q;t(ea.sameOriginURL||ea.url||ea.source);t(!!y.isSupported());if(ea.sameOriginURL){fa();}else if(ea.url&&l(new k(ea.url),new k(a.location.href))){ea.sameOriginURL=ea.url;fa();}else if(ea.source){if(y.$WebWorkerk())ea.sameOriginURL=y.$WebWorkerl(ea.source);fa();}else if(!ea.loading){var ga=s();ea.loading=[fa];y.$WebWorkerm(ea.url,function(ha){if(ha){ea.source=ha;if(y.$WebWorkerk())ea.sameOriginURL=y.$WebWorkerl(ha);}y.$WebWorkere('prepared',ea.name,{dt:Math.floor(s()-ga),bytes:ha.length});ea.loading.forEach(function(ia){return ia();});ea.loading=false;});}else ea.loading.push(fa);return ea;};y.releaseResource=function(ea){"use strict";if(ea.sameOriginURL.indexOf('blob:')===0){if(x.revokeObjectURL)x.revokeObjectURL(ea.sameOriginURL);ea.sameOriginURL=null;}return ea;};y.isSupported=function(){"use strict";return ba&&(y.$WebWorkerk()||ca());};y.areTransferablesSupported=function(){"use strict";return y.isSupported()&&da();};y.$WebWorkerm=function(ea,fa){"use strict";new o(ea).setTransportBuilder(r).setMethod('GET').setResponseHandler(function(ga){fa(ga);}).setErrorHandler(fa.bind(null,null)).send();};y.$WebWorkerl=function(ea){"use strict";t(y.$WebWorkerk());if(y.$WebWorkerg()){var fa=i.getBlob([ea],{type:'application/javascript'});return x.createObjectURL(fa);}if(y.$WebWorkerh())return 'data:application/javascript,'+encodeURIComponent(ea);};y.$WebWorkerg=function(){"use strict";return i.isSupported()&&z();};y.$WebWorkerh=function(){"use strict";return aa();};y.$WebWorkerk=function(){"use strict";return y.$WebWorkerg()||y.$WebWorkerh();};y.$WebWorkere=function(event,ea,fa){"use strict";if(!h.logging.enabled)return;g.log(h.logging.config,v(fa,{features_array:y.$WebWorkerf(),event:event,resource:ea}));};var z=u(function(){var ea,fa;if(!x||!x.createObjectURL)return false;try{ea=x.createObjectURL(i.getBlob([''],{type:'application/javascript'}));var ha=new a.Worker(ea);ha.terminate();fa=true;}catch(ga){fa=false;}finally{if(x.revokeObjectURL)x.revokeObjectURL(ea);}return fa;}),aa=u(function(){var ea;try{var ga=new a.Worker('data:application/javascript,');ga.terminate();ea=true;}catch(fa){ea=false;}return ea;}),ba=!!a.Worker,ca=u(function(){var ea;try{var ga=new a.Worker(y.evalWorkerURL);ga.terminate();ea=true;}catch(fa){ea=false;}return ea;}),da=u(function(){var ea;try{var ga=new a.Worker(y.evalWorkerURL),ha=new ArrayBuffer(0);ga.postMessage({buffer:ha},[ha]);ga.terminate();ea=true;}catch(fa){ea=false;}return ea;});y.states=['constructed','preparing','executing','terminated'];y.evalWorkerURL=h.evalWorkerURL;e.exports=y;},null);
__d("PooledWebWorker",["WebWorker"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(k,l,m){"use strict";i.constructor.call(this,m);this.$PooledWebWorker0=l;this.$PooledWebWorker1=k;}j.prototype.getIndex=function(){"use strict";return this.$PooledWebWorker0;};j.prototype.getPool=function(){"use strict";return this.$PooledWebWorker1;};e.exports=j;},null);
__d("WebWorkerPool",["PooledWebWorker","emptyFunction"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();i.isSupported=function(){"use strict";return g.isSupported();};function i(j,k){"use strict";this.$WebWorkerPool0=[];for(var l=0;l<k;l++)this.$WebWorkerPool0.push(new g(this,l,j).setErrorHandler(this.$WebWorkerPool1).setMessageHandler(this.$WebWorkerPool2).execute());this.$WebWorkerPool3=0;}i.prototype.setMessageHandler=function(j){"use strict";this.$WebWorkerPool4=j||h;return this;};i.prototype.setAllowCrossPageTransition=function(j){"use strict";this.$WebWorkerPool0.forEach(function(k){return k.setAllowCrossPageTransition(j);});return this;};i.prototype.setErrorHandler=function(j){"use strict";this.$WebWorkerPool5=j||h;return this;};i.prototype.postMessage=function(){"use strict";for(var j=[],k=0,l=arguments.length;k<l;k++)j.push(arguments[k]);var m=this.getWorker();m.postMessage.apply(m,j);return m;};i.prototype.$WebWorkerPool2=function(){"use strict";for(var j=[],k=0,l=arguments.length;k<l;k++)j.push(arguments[k]);j.unshift(this);this.getPool().$WebWorkerPool4.apply(this.getPool(),j);};i.prototype.$WebWorkerPool1=function(){"use strict";for(var j=[],k=0,l=arguments.length;k<l;k++)j.push(arguments[k]);j.unshift(this);return this.getPool().$WebWorkerPool5.apply(this.getPool(),j);};i.prototype.getWorker=function(){"use strict";var j=this.$WebWorkerPool0[this.$WebWorkerPool3];this.$WebWorkerPool3=(this.$WebWorkerPool3+1)%this.$WebWorkerPool0.length;return j;};e.exports=i;},null);
__d("JpegResizer",["Emscripten","JpegResizerConfig","JpegResizeWorkerResource","WebWorker","WebWorkerPool","PUWErrorCodes"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=null;n.isSupported=function(){"use strict";return k.isSupported()&&g.isSupported()&&!h.isGKBlacklisted;};n.getSingleton=function(){"use strict";if(!m)m=new n(n.DEFAULT_POOL_SIZE).setAllowCrossPageTransition(true);return m;};n.prepareResource=function(o){"use strict";j.prepareResource(i,o);};function n(o){"use strict";o=o||n.DEFAULT_POOL_SIZE;j.prepareResource(i);this.$JpegResizer0=(new k(i,o)).setErrorHandler(this.$JpegResizer1.bind(this)).setMessageHandler(this.$JpegResizer2.bind(this));this.$JpegResizer3={};this.$JpegResizer4=n.DEFAULT_RESIZE_HEIGHT;this.$JpegResizer5=n.DEFAULT_RESIZE_WIDTH;}n.prototype.setHighQuality=function(o){"use strict";if(o){this.$JpegResizer4=n.DEFAULT_RESIZE_HEIGHT;this.$JpegResizer5=n.DEFAULT_RESIZE_WIDTH;}else{this.$JpegResizer4=n.LOW_QUALITY_RESIZE_HEIGHT;this.$JpegResizer5=n.LOW_QUALITY_RESIZE_WIDTH;}return this;};n.prototype.setAllowCrossPageTransition=function(o){"use strict";this.$JpegResizer0.setAllowCrossPageTransition(o);return this;};n.prototype.resizeBlob=function(o,p,q){"use strict";var r=this.$JpegResizer0.getWorker();if(r.isCurrentState('terminated')){var s=new Error('Worker terminated');s.code=l.WORKER_TERMINATED;p(s);return this;}var t=r.postMessage({blob:o,height:this.$JpegResizer4,width:this.$JpegResizer5}).getIndex();this.$JpegResizer6(t).unshift({done:p,progress:q});return this;};n.prototype.$JpegResizer6=function(o){"use strict";if(!this.$JpegResizer3.hasOwnProperty(o))this.$JpegResizer3[o]=[];return this.$JpegResizer3[o];};n.prototype.$JpegResizer1=function(o,p){"use strict";o.terminate();var q=this.$JpegResizer6(o.getIndex());this.$JpegResizer7(p);q.forEach(function(r){return r.done(p);});q.length=0;};n.prototype.$JpegResizer2=function(o,p){"use strict";if(p.error)this.$JpegResizer7(p.error);if(p.done){this.$JpegResizer6(o.getIndex()).pop().done(p.error,p.blob,p.skipped);}else{var q=this.$JpegResizer6(o.getIndex()),r=q[q.length-1].progress;if(r)r({written:p.written,total:p.total});}};n.prototype.$JpegResizer7=function(o){"use strict";var p=o.message;if(p.indexOf('Not a JPEG file')!==-1){o.code=l.BAD_JPEG;}else if(p.indexOf('abort()')!==-1){o.code=l.WORKER_ABORT;}else o.code=l.UNKNOWN_RESIZE_ERROR;};n.DEFAULT_POOL_SIZE=3;n.DEFAULT_RESIZE_HEIGHT=2048;n.DEFAULT_RESIZE_WIDTH=2048;n.LOW_QUALITY_RESIZE_HEIGHT=960;n.LOW_QUALITY_RESIZE_WIDTH=960;e.exports=n;},null);
__d("PhotoStoreCore",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={actions:{UPDATE:'update'},_photoCache:{},_postCreateCallbacks:{},getPhotoCache:function(h){if(!this._photoCache[h])throw new Error('Photo cache requested for unknown set ID');return this._photoCache[h];},hasBeenCreated:function(h){return !!this._photoCache[h];},clearSetCache:function(h){delete this._photoCache[h];delete this._postCreateCallbacks[h];},getByIndex:function(h,i,j){this.getPhotoCache(h).getItemAtIndex(i,j);},getByIndexImmediate:function(h,i){if(this._photoCache[h])return this._photoCache[h].getItemAtIndexImmediate(i);return (void 0);},getItemsInAvailableRange:function(h){var i=this.getAvailableRange(h),j=[];for(var k=i.offset;k<i.length;k++)j.push(this.getByIndexImmediate(h,k));return j;},getItemsAfterIndex:function(h,i,j,k){var l=this.getCursorByIndexImmediate(h,i);this.fetchForward(h,l,j,k);},getAllByIDImmediate:function(h){var i=Object.keys(this._photoCache);return i.map(function(j){return this.getByIndexImmediate(j,this.getIndexForID(j,h));}.bind(this)).filter(function(j){return !!j;});},getIndexForID:function(h,i){if(this._photoCache[h])return this._photoCache[h].getIndexForID(i);return (void 0);},getEndIndex:function(h){var i=this.getAvailableRange(h);return i.offset+i.length-1;},getCursorByIndexImmediate:function(h,i){var j=this.getByIndexImmediate(h,i);if(j)return this._photoCache[h].getCursorForID(j.id);return (void 0);},hasNextPage:function(h){var i=this.getCursorByIndexImmediate(h,this.getEndIndex(h));return this.getPhotoCache(h).hasNextPage(i);},getAvailableRange:function(h){return this.getPhotoCache(h).getAvailableRange();},hasLooped:function(h){return this.getPhotoCache(h).hasLooped();},fetchForward:function(h,i,j,k){this.getPhotoCache(h).getItemsAfterCursor(i,j,k);},fetchBackward:function(h,i,j,k){this.getPhotoCache(h).getItemsBeforeCursor(i,j,k);},executePostCreate:function(h,i){if(this._photoCache[h]){i&&i();}else this._postCreateCallbacks[h]=i;},runPostCreateCallback:function(h){var i=this._postCreateCallbacks[h];if(i){i();delete this._postCreateCallbacks[h];}},setPreFetchCallback:function(h,i){this.getPhotoCache(h).setPreFetchCallback(i);},updateData:function(h){var i=h.set_id;if(!this._photoCache[i]){this._photoCache[i]=new h.cache_class(h);this.runPostCreateCallback(i);}else if(h.query_metadata.action==g.actions.UPDATE){this._photoCache[i].updateData(h);}else this._photoCache[i].addData(h);},updateFeedbackData:function(h){var i=Object.keys(h);i.forEach(function(j){return g.getAllByIDImmediate(j).forEach(function(k){k.feedback=h[j].feedback;});});},reset:function(){Object.keys(this._photoCache).forEach(function(h){return this.clearSetCache(h);}.bind(this));}};e.exports=g;},null);
__d("swfobject",["AsyncRequest","Bootloader","CSS","copyProperties","htmlSpecialChars"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();if(typeof l=="undefined")var l={};if(typeof l.util=="undefined")l.util={};if(typeof l.SWFObjectUtil=="undefined")l.SWFObjectUtil={};l.SWFObject=function(n,o,p,q,r,s,t,u,v,w){if(!document.getElementById)return;this.DETECT_KEY=w?w:'detectflash';this.skipDetect=l.util.getRequestParameter(this.DETECT_KEY);this.params={};this.variables={};this.attributes=[];this.fallback_html='';this.fallback_js_fcn=function(){};if(n)this.setAttribute('swf',n);if(o)this.setAttribute('id',o);if(p)this.setAttribute('width',p);if(q)this.setAttribute('height',q);this.installedVer=l.SWFObjectUtil.getPlayerVersion();if(r){if(!(r instanceof Array))r=[r];var x;r.forEach(function(aa){x=new l.PlayerVersion(aa.toString().split('.'));if(x.major==this.installedVer.major){this.setAttribute('version',x);return;}else if(!this.getAttribute('version')||x.major<this.getAttribute('version').major)this.setAttribute('version',x);}.bind(this));}if(!window.opera&&document.all&&this.installedVer.major>7)if(!l.unloadSet){l.SWFObjectUtil.prepUnload=function(){var aa=function(){},ba=function(){};window.attachEvent("onunload",l.SWFObjectUtil.cleanupSWFs);};window.attachEvent("onbeforeunload",l.SWFObjectUtil.prepUnload);l.unloadSet=true;}if(s)this.addParam('bgcolor',s);var y=t?t:'high';this.addParam('quality',y);this.setAttribute('useExpressInstall',false);this.setAttribute('doExpressInstall',false);var z=(u)?u:window.location;this.setAttribute('xiRedirectUrl',z);this.setAttribute('redirectUrl','');if(v)this.setAttribute('redirectUrl',v);};l.SWFObject.ieWorkaroundApplied=false;l.SWFObject.ensureIEWorkaroundAttached=function(){if(!l.SWFObject.ieWorkaroundApplied&&document.attachEvent){l.SWFObject.ieWorkaroundApplied=true;document.attachEvent('onpropertychange',l.SWFObject.onDocumentPropertyChange);}};l.SWFObject.onDocumentPropertyChange=function(event){if(event.propertyName=="title"){var n=document.title;if(n!=null&&n.indexOf('#!')!=-1){n=n.substring(0,n.indexOf('#!'));document.title=n;}}};j(l.SWFObject.prototype,{useExpressInstall:function(n){this.xiSWFPath=!n?"/swf/expressinstall.swf":n;this.setAttribute('useExpressInstall',true);},setAttribute:function(n,o){this.attributes[n]=o;},getAttribute:function(n){return this.attributes[n]||"";},addParam:function(n,o){this.params[n]=o;},getParams:function(){return this.params;},addVariable:function(n,o){this.variables[n]=o;},getVariable:function(n){return this.variables[n]||"";},getVariables:function(){return this.variables;},getVariablePairs:function(){var n=[],o,p=this.getVariables();for(o in p)n[n.length]=o+"="+p[o];return n.join('&');},getSWFHTML:function(){var n,o,p;if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","PlugIn");this.setAttribute('swf',this.xiSWFPath);}o={type:'application/x-shockwave-flash',src:this.getAttribute('swf'),width:this.getAttribute('width'),height:this.getAttribute('height'),style:this.getAttribute('style')||'display: block;',id:this.getAttribute('id'),name:this.getAttribute('id')};var q=this.getParams();for(var r in q)o[r]=q[r];p=this.getVariablePairs();if(p)o.flashvars=p;n=m('embed',o,null);}else{if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","ActiveX");this.setAttribute('swf',this.xiSWFPath);}o={id:this.getAttribute('id'),classid:'clsid:D27CDB6E-AE6D-11cf-96B8-444553540000',width:this.getAttribute('width'),height:this.getAttribute('height'),style:this.getAttribute('style')||'display: block;'};var s=m('param',{name:'movie',value:this.getAttribute('swf')},null),q=this.getParams();for(var r in q)s+=m('param',{name:r,value:q[r]},null);p=this.getVariablePairs();if(p)s+=m('param',{name:'flashvars',value:p},null);n=m('object',o,s);}return n;},write:function(n){if(this.getAttribute('useExpressInstall')){var o=new l.PlayerVersion([6,0,65]);if(this.installedVer.versionIsValid(o)&&!this.installedVer.versionIsValid(this.getAttribute('version'))){this.setAttribute('doExpressInstall',true);this.addVariable("MMredirectURL",escape(this.getAttribute('xiRedirectUrl')));document.title=document.title.slice(0,47)+" - Flash Player Installation";this.addVariable("MMdoctitle",document.title);}}var p=(typeof n=='string')?document.getElementById(n):n;if(!p)return false;i.addClass(p,'swfObject');p.setAttribute('data-swfid',this.getAttribute('id'));if(this.skipDetect||this.getAttribute('doExpressInstall')||this.installedVer.versionIsValid(this.getAttribute('version'))){l.SWFObject.ensureIEWorkaroundAttached();p.innerHTML=this.getSWFHTML();return true;}else{if(this.getAttribute('redirectUrl')!="")document.location.replace(this.getAttribute('redirectUrl'));var q=this.getAttribute('version').major+'.'+this.getAttribute('version').minor+'.'+this.getAttribute('version').release+'.'+this.getAttribute('version').build,r=this.installedVer.major+'.'+this.installedVer.minor+'.'+this.installedVer.release+'.'+this.installedVer.build;this.fallback_js_fcn(r,q);p.innerHTML=this.fallback_html;}return false;}});l.SWFObjectUtil.getPlayerVersion=function(){var n=new l.PlayerVersion([0,0,0,0]),o;if(navigator.plugins&&navigator.mimeTypes.length){for(var p=0;p<navigator.plugins.length;p++)try{var r=navigator.plugins[p];if(r.name=='Shockwave Flash'){o=new l.PlayerVersion(r.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+(r|d)|\s+b[0-9]+)/,".").split("."));if(typeof n=='undefined'||o.major>n.major||(o.major==n.major&&(o.minor>n.minor||(o.minor==n.minor&&(o.release>n.release||(o.release==n.release&&o.build>n.build))))))n=o;}}catch(q){}}else if(navigator.userAgent&&navigator.userAgent.indexOf("Windows CE")>=0){var s=1,t=3;while(s)try{t++;s=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+t);n=new l.PlayerVersion([t,0,0]);}catch(u){s=null;}}else{try{var s=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");}catch(v){try{var s=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");n=new l.PlayerVersion([6,0,21]);s.AllowScriptAccess="always";}catch(w){if(n.major==6)return n;}try{s=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");}catch(x){}}if(s!=null)n=new l.PlayerVersion(s.GetVariable("$version").split(" ")[1].split(","));}return n;};l.PlayerVersion=function(n){this.major=n[0]!=null?parseInt(n[0],10):0;this.minor=n[1]!=null?parseInt(n[1],10):0;this.release=n[2]!=null?parseInt(n[2],10):0;this.build=n[3]!=null?parseInt(n[3],10):0;};l.PlayerVersion.prototype.versionIsValid=function(n){if(this.major<n.major)return false;if(this.major>n.major)return true;if(this.minor<n.minor)return false;if(this.minor>n.minor)return true;if(this.release<n.release)return false;if(this.release>n.release)return true;if(this.build<n.build)return false;return true;};l.util={getRequestParameter:function(n){var o=document.location.search||document.location.hash;if(n==null)return o;if(o){var p=o.substring(1).split("&");for(var q=0;q<p.length;q++)if(p[q].substring(0,p[q].indexOf("="))==n)return p[q].substring((p[q].indexOf("=")+1));}return "";}};l.SWFObjectUtil.cleanupSWFs=function(){var n=document.getElementsByTagName("OBJECT");for(var o=n.length-1;o>=0;o--){n[o].style.display='none';for(var p in n[o])if(typeof n[o][p]=='function')n[o][p]=function(){};}};if(!document.getElementById&&document.all)document.getElementById=function(n){return document.all[n];};l.spawn_flash_update_dialog=function(){new g().setURI('/ajax/flash_update_dialog.php').setMethod('GET').setReadOnly(true).send();};l.showFlashErrorDialog=function(n,o){h.loadModules(["ErrorDialog"],function(p){p.show(n,o);});};function m(n,o,p){var q=/^[A-Za-z0-9\-]+$/;if(!n.match(q))throw new Error('Invalid tag '+n);var r='<'+n;for(var s in o){if(!s.match(q))throw new Error('Invalid attr '+s);r+=' '+s+'="'+k(o[s])+'"';}if(p===null){return r+'/>';}else return r+'>'+p+'</'+n+'>';}e.exports=a.deconcept||l;},null);
__d("flashLog",["AsyncSignal","swfobject"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();e.exports.logPlayerVersion=function(){var i={c:'flash_version_log',m:JSON.stringify({flashVer:h.SWFObjectUtil.getPlayerVersion()})};new g('/common/scribe_endpoint.php',i).send();};},null);
__d("DropdownContextualHelpLink",["DOM","ge"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={set:function(j){var k=h('navHelpCenter');if(k!==null)g.replace(k,j);}};e.exports=i;},null);
__d("TickerReadStateTracking",["Style","clickRefAction"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=73,j='ticker_hover',k=[];function l(n){if(!n)return null;var o=JSON.parse(n.getAttribute('data-ft'));if(!o)return null;if(o.mf_story_key)return o.mf_story_key;if(o.fbid)return o.fbid;return null;}function m(n){var o=l(n);if(!o||o in k)return;k[o]=true;var p={evt:i};h(j,n,null,'FORCE',{ft:p});}e.exports.log=m;},null);
__d("TickerController",["Event","Animation","Arbiter","AsyncRequest","AsyncSignal","Bootloader","ChannelConstants","LegacyContextualDialog","CSS","DOM","HTML","JSLogger","Keys","LayerFadeOnHide","LiveTimer","NavigationMessage","Parent","Rect","Run","ScrollableArea","SelectorDeprecated","Style","TickerReadStateTracking","Toggler","UIPagelet","URI","UserActivity","UserAgent_DEPRECATED","Vector","DOMVector","BanzaiODS","$","clickRefAction","collectDataAttributes","containsNode","copyProperties","cx","csx","ex","emptyFunction","ge","getElementText","goURI","throttle","tickerPhoteSnowLiftOpenStatus"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya){b.__markCompiled&&b.__markCompiled();var za=1,ab=2,bb=3,cb=4,db=15000,eb=r.create('ticker_controller');function fb(gb,hb,ib){if(gb===(void 0))return;fb._instances[gb.id]=this;fb._activeInstance=this;this._root=gb;this._content=p.find(gb,'.ticker_stream');this._stories=p.find(this._root,'.tickerActivityStories');this._scrollableArea=hb;this._container=p.find(gb,'div.uiScrollableAreaWrap');this._newestStory={};this._storyIDs=[];this._objectIDs=[];this._fetchedStories={};this._fetchedStoriesDialog={};this._storyDialogResources={};this._removedStoryIDs=[];this._storiesToRemove=[];var jb=Date.now();this._initTime=jb;this._lastUpdate=jb;this._lastPull=jb;this._lastInsert=jb;this._lastCustomStory=0;this._pollOnly=false;this._needNonCustomStoryNum=0;this._doCustomUpdate=true;this._autoloadStoryIndex=1;this._scrollTopThreshold=100;this._scrollTopPrompt=p.find(this._root,'.scrollTopPrompt');this._scrollTopPromptVisible=false;this._maxStoriesToKeep=50;this._minStoriesToKeep=25;this._tickerInSidebarMode=!!w.byClass(this._root,'fbChatSidebar');this._loadStoriesWithActions();ma('ticker_flyout');ma('ticker_flyout_prefetch');ma('ticker_flyout_loadtime');ma('ticker_stream');this._uaCurStoryIDFetch=null;this._uaCurStoryIDPrefetch=null;var kb=p.create('div',{className:'storyQueue hidden_elem'});this._storyQueue=kb;p.appendContent(this._root,kb);this._lastKStories={head:null,tail:null,count:0,actors:{},apps:{},stories:{}};this._dedupeKeys={};this._initObjectIDs();this._initConfig(ib);this._resetMorePager();this._initListeners();this._initSubscriptions(ib);i.inform('ticker/init',this,i.BEHAVIOR_PERSISTENT);this._poll();}pa(fb,{_instances:{},_activeInstance:null,_placeholders:{},getInstance:function(gb){var hb=w.byClass(la(gb),'fbFeedTicker');return hb?fb._instances[hb.id]:null;},isLoaded:function(gb){var hb=fb._placeholders[gb.id];return !hb||hb.status==bb;},show:function(gb,hb){hb=hb||ta;for(var ib in fb._instances){var jb=ua(ib);if(!jb||jb.parentNode.id==gb.id)continue;fb.hide(jb.parentNode);}fb._doPositionChange(gb);o.show(gb);var kb=fb._placeholders[gb.id];if(kb&&kb.status==za){var lb=(ia.getElementDimensions(gb).y||0)>0,mb=gb.id==='pagelet_rhc_ticker'&&!o.hasClass(gb,'hidden_rhc_ticker');if(lb||mb){fb._fetchTickerForPlaceholder(gb,hb);}else i.subscribe('Ticker/resized',function(){if(kb.status==za)fb._fetchTickerForPlaceholder(gb,hb);});}else{var nb=p.scry(gb,'.fbFeedTicker')[0],ob=nb&&fb.getInstance(nb);fb._activeInstance=ob;ob&&ob._poll();fb._placeholders[gb.id]={status:cb,callback:hb};hb();}i.inform('ticker/show',{node:gb,callback:hb});},_doPositionChange:function(gb){if(o.shown(gb))return;new k('/common/ods_endpoint.php',{k:'ticker.render.switch.'+gb.id}).send();},hide:function(gb){var hb=p.scry(gb,'.fbFeedTicker')[0],ib=hb&&fb.getInstance(hb);ib&&ib.hideActiveStory();o.hide(gb);},hideStoriesByClass:function(gb){for(var hb in fb._instances)p.scry(la(hb),gb).forEach(o.hide);},hideStory:function(gb){var hb=gb&&fb.getInstance(gb);hb&&hb.hideStory(gb);},replaceStory:function(gb,hb){var ib=p.scry(document.body,'div.fbFeedTickerStory'),jb=fb.getInstance(ib[0]),kb=jb._findStoryById(gb);jb.handleRemoveStory();o.hide(kb);p.insertAfter(kb,hb);hb.setAttribute('data-story-id',kb.getAttribute('id'));var lb=setTimeout(function(){fb.removeMarkup(hb,kb);},db);hb.setAttribute('data-timeout-token',lb);},removeMarkup:function(gb,hb){o.addClass(gb,'removedStoryMarkup');new h(gb).to('height',0).duration(500).ondone(function(){p.remove(gb);}).go();},undoHideStory:function(gb){var hb=gb&&fb.getInstance(gb);hb&&hb.undoHideStory(gb);},insertStoriesAtBottom:function(gb){fb._activeInstance.insertStoriesAtBottom(gb);},_fetchTickerForPlaceholder:function(gb,hb){var ib={handler:function(){fb._placeholders[gb.id].status=bb;hb();}};ea.loadFromEndpoint('TickerEntStoryPagelet',gb.id,fb._placeholders[gb.id].pageletData,ib);fb._placeholders[gb.id].status=ab;},registerStoryDialog:function(gb,hb){i.subscribe('ticker/init',function(){var ib=ua(gb),jb=ib&&fb.getInstance(ib);jb&&jb.registerStoryDialog(ib,hb);},i.SUBSCRIBE_ALL);},registerPlaceholder:function(gb,hb){var ib=fb._placeholders[gb];fb._placeholders[gb]={status:za,pageletData:hb};if(ib&&ib.status==cb){fb.show(la(gb));ib.callback();}}});pa(fb.prototype,{ADS_IDLE_MS:300000,FLYOUT_MAX_HEIGHT:450,FLYOUT_OFFSET_THRESHOLD:20,FLYOUT_COMMENT_OFFSET:15,FLYOUT_VIEWPORT_PADDING:75,FLYOUT_ACTION_FOOTER_PADDING:8,FLYOUT_TARGET_HEIGHT_OFFSET:25,DEFAULT_LOOK_BEHIND:10,init:function(gb,hb,ib){new fb(gb,hb,ib);},_lastKStoriesInsert:function(gb){this._lastKStories.stories[gb.getAttribute("data-story-key")]=true;var hb={story:gb,next:null};if(this._lastKStories.head)this._lastKStories.head.next=hb;this._lastKStories.head=hb;this._lastKStories.count++;if(!this._lastKStories.tail)this._lastKStories.tail=this._lastKStories.head;var ib=gb.getAttribute("data-actor");if(!this._lastKStories.actors[ib])this._lastKStories.actors[ib]=0;this._lastKStories.actors[ib]++;var jb=gb.getAttribute("data-app");if(jb){if(!this._lastKStories.apps[jb])this._lastKStories.apps[jb]=0;this._lastKStories.apps[jb]++;}if(this._lastKStories.count>this.DEFAULT_LOOK_BEHIND){while(this._lastKStories.tail&&!this._lastKStoriesRemove(this._lastKStories.tail.story))this._lastKStories.tail=this._lastKStories.tail.next;if(!this._lastKStories.tail)this._lastKStories.head=null;}},_lastKStoriesRemove:function(gb){var hb=gb.getAttribute("data-story-key"),ib=gb.getAttribute("data-actor"),jb=gb.getAttribute("data-app");if(this._lastKStories.stories[hb]){delete this._lastKStories.stories[hb];this._lastKStories.actors[ib]--;if(jb)this._lastKStories.apps[jb]--;this._lastKStories.count--;return true;}else return false;},_loadStoriesWithActions:function(){var gb=ua('rightCol');if(!gb)return;this._toggleWrapper=p.scry(gb,'.tickerToggleWrapper')[0];if(this._toggleWrapper){var hb=p.scry(this._stories,'.tickerStoryWithButton');this._storiesWithActions={};for(var ib=0;ib<hb.length;ib++){var jb=hb[ib];this._storiesWithActions[jb.getAttribute('data-story-key')]=jb;}}},_initConfig:function(gb){pa(this,{_newest:gb.newest,_page_newest:gb.newest,_timeout:gb.timeout,_heartbeatTimeout:Math.min(5000,gb.heartbeatTimeout),_maxHeartbeatTimeout:Math.max(30000,gb.maxHeartbeatTimeout),_pullTimeout:Math.max(30000,gb.pullTimeout),_insertTimeout:gb.insertTimeout,_friendCount:gb.friendCount,_maxQueueLength:gb.maxQueueLength,_heartbeatEndpoint:gb.heartbeatEndpoint,_maxCustomQueueLength:gb.maxCustomQueueLength,_customStoryInsertTimeout:Math.max(5000,gb.customStoryInsertTimeout),_nonCustomToCustomStoryRatio:gb.nonCustomToCustomStoryRatio,_minForceUpdateInterval:Math.max(gb.insertTimeout,gb.minForceUpdateInterval),_popupOnHover:gb.popupOnHover,_priorityAppId:gb.priorityAppId,_userIdleTimeout:gb.userIdleTimeout,_firstCustomStoryDelay:gb.firstCustomStoryDelay,_pollOnly:gb.pollOnly,_tickerSource:gb.tickerSource,_logFlyouts:gb.logFlyouts,_userScrollGaurdDelay:gb.userScrollGaurdDelay,_rescheduleScrollToTopDelay:gb.rescheduleScrollToTopDelay,_aggressiveRegulator:gb.aggressiveRegulator});this._queueCustomStories(gb.customStories);},_initListeners:function(){this._listeners=g.listen(this._root,{click:this._handleClick.bind(this),keydown:this._handleKeydown.bind(this),mouseout:this._handleMouseout.bind(this),mouseover:this._handleMouseover.bind(this),mousedown:this._tickerDeClicker.bind(this),mouseup:this._handleMouseup.bind(this)});this._listeners.scroll=g.listen(this._container,'scroll',this._handleScroll.bind(this));setTimeout(this._initInfiniteScrollListener.bind(this),0);},_initSubscriptions:function(gb){y.onLeave(this._cleanup.bind(this));this._subscriptions=[i.subscribe(v.NAVIGATION_BEGIN,this._onNavHandler.bind(this)),i.subscribe('composer/publish',this._handleComposerPublish.bind(this)),i.subscribe('Ticker/storiesInserted',this._handleStoriesInserted.bind(this)),i.subscribe('Ticker/fixed',this._setFixed.bind(this,true)),i.subscribe('Ticker/unfixed',this._setFixed.bind(this,false)),i.subscribe('Ticker/resized',this._checkInfiniteScroll.bind(this)),i.subscribe('ufi/comment',this._scrollDialogToBottom.bind(this)),i.subscribe('ufi/changed',this._redrawFlyout.bind(this)),i.subscribe('Ticker/chatOpened',this._handleChatOpened.bind(this))];if(!gb.pollOnly)this._subscriptions.push(i.subscribe(m.getArbiterType('ticker_update'),this._handleTickerPush.bind(this)));if(gb.pushChannel&&!gb.pollOnly)this.setPushChannel(gb.pushChannel);},_handleClick:function(event){if(!(event.button===1||event.altKey||event.ctrlKey||event.metaKey))event.prevent();var gb=event.getTarget();if(this._getButtonFromNode(gb)){this._logUserAction(gb,'click',event);this._handleActionButton(event);return;}var hb=this._getStoryFromNode(gb),ib=w.byClass(gb,'tickerStoryAllowClick');if(!hb||hb==this._selectedStory||ib)return;if(this._storyIsHidden(hb))return;if(hb==this._activeStory&&!this._selectedStory)this._selecting=true;if(this._storyCanOpenExternally(hb)){var jb=hb.getAttribute('data-href');if(jb&&!gb.getAttribute('href')){var kb={href:jb},lb=na(gb,['ft','gt']);ma('click',kb,event,'FORCE',lb);}else this._logUserAction(gb,'click',event);this._openStoryExternally(hb,event);return;}this._logUserAction(gb,'flyout',event);this._activateStory(hb,'click');this._selectStory(hb);},_handleMouseover:function(event){this._setLocked(true);var gb=event.getTarget(),hb=this._getOpenableStory(gb);if(!hb){var ib=w.byClass(gb,"_5wvy");if(ib){clearTimeout(parseInt(ib.getAttribute('data-timeout-token'),10));var jb=setTimeout(function(){fb.removeMarkup(ib,hb);},db);ib.setAttribute('data-timeout-token',jb);}return;}event.kill();if(this._popupOnHover){if(!(hb.id in this._fetchedStories))this._uaCurStoryIDPrefetch=hb.id;this._fetchStory(hb);}if(this._selectedStory)return;if(this._popupOnHover){this._clearHoverTimeouts();var kb=this._storyCanOpenExternally(hb)?500:1000,lb=this._activeStory?75:kb;this._hoverShowTimeout=this._setTimeout(function(){this._activateStory(hb,'hover');this._logUserAction(gb,'flyout',event);}.bind(this),lb);}},_handleMouseout:function(event){var gb=event.getTarget();this._setLocked(false);if(gb==this._getStoryFromNode(gb)){var hb=p.scry(gb.parentNode,'.openToggler');for(var ib=0;ib<hb.length;ib++)aa.toggle(hb[ib]);}this._clearClickedStory();this._scheduleHide();},_handleKeydown:function(event){this._tickerDeClicker(event);var gb=this._activeStory;if(!gb)return;var hb=g.getKeyCode(event);switch(hb){case s.UP:case s.DOWN:var ib=this._getInsertedStories(),jb;if(event.getModifiers().any){jb=hb===s.UP?0:ib.length-1;}else jb=ib.indexOf(gb)+(hb===s.UP?-1:1);gb=ib[jb];break;case s.ESC:this._deactivateStory(true);return;default:return;}event.kill();if(!gb)return;this._activateStory(gb,'keypress');this._selectStory(gb);},_fadeTopmostStoryButton:function(){var gb=0,hb=15;if(this._storiesWithActions)for(var ib in this._storiesWithActions){var jb=this._storiesWithActions[ib],kb=p.scry(jb,'.tickerInlineActionButton')[0],lb=p.scry(kb,'.tickerActionIcon')[0],mb=ia.getElementPosition(kb).y-ia.getElementPosition(this._toggleWrapper).y;if(mb<gb){ba.set(kb,'opacity',0);ba.set(lb,'opacity',0);}else if(mb>=gb&&mb<hb){var nb=(mb-gb)/(hb-gb);ba.set(kb,'opacity',nb);ba.set(lb,'opacity',nb);break;}else{ba.set(kb,'opacity',1);ba.set(lb,'opacity',1);}}},_handleScroll:function(){var gb=ya.checkIsOpen();if(gb)this._preventFlyoutDismiss=true;if(!this._preventScrollDismiss&&!gb){if(!this._preventFlyoutDismiss){this._deactivateStory(true);}else this._preventFlyoutDismiss=false;}else this._preventScrollDismiss=false;if(!this._handleScrollThrottled)this._handleScrollThrottled=xa(this._handleScrollInner.bind(this));this._handleScrollThrottled();},_handleScrollInner:function(){this._fadeTopmostStoryButton();this._checkInfiniteScroll();this._setIsUserScrolling();if(!this._scrollLogged){this._scrollLogged=true;var gb=this._stories.childNodes.length,hb=this._stories.getAttribute('data-gt'),ib={ticker_scroll:1,number_stories:gb,source:hb};ma('scroll',null,null,'FORCE',{gt:ib});}},_setIsUserScrolling:function(){clearTimeout(this._userScrollingToken);if(this._isScrolledToTop()){this._userScrolling=false;return;}this._userScrolling=true;this._userScrollingToken=setTimeout(function(){this._userScrolling=false;this._userScrollingToken=null;}.bind(this),this._userScrollGaurdDelay);},_isUserScrolling:function(){return this._userScrolling;},_handleStoriesInserted:function(){this._initInfiniteScrollListener();if(this._scrollableArea instanceof z){this._scrollableArea.adjustGripper();}else eb.error('wrong_scrollable_area',{dump:this});},_handleActionButton:function(event){var gb=event.getTarget(),hb=this._getOpenableStory(gb),ib=this._getStoryDialog(hb);if(ib)var jb=ib.subscribe('beforehide',function(){ib.unsubscribe(jb);return false;});},_handleScrollToTopClick:function(){this._scrollToTop(this._poll.bind(this));},_scheduleScrollToTop:function(){this._scrollToTopToken&&clearTimeout(this._scrollToTopToken);this._scrollToTopToken=setTimeout(function(){if(this._isLocked()||this._isUserScrolling()){this._scheduleScrollToTop();}else{this._scrollToTopToken=null;this._scrollToTop();}}.bind(this),this._rescheduleScrollToTopDelay);},_scrollToTop:function(gb){new h(this._container).to('scrollTop',0).ease(h.ease.end).ondone(gb).go();},_clearHoverTimeouts:function(){clearTimeout(this._hoverShowTimeout);clearTimeout(this._hoverHideTimeout);},_getAllStories:function(){return p.scry(this._root,'div.fbFeedTickerStory');},_findStoryById:function(gb){var hb=p.scry(this._root,'.fbFeedTickerStory'),ib;for(story in hb){ib=hb[story];if(gb==this._getStoryDialogParams(ib).token)return ib;}return null;},_getInsertedStories:function(){return this._getAllStories().filter(function(gb){return !o.hasClass(gb,'queuedStory')&&!o.hasClass(gb,'customStory');});},_getQueuedStories:function(){return p.scry(this._storyQueue,'.fbFeedTickerStory.queuedStory');},_getQueuedCustomStories:function(){return p.scry(this._storyQueue,'.fbFeedTickerStory.customStory');},_getButtonFromNode:function(gb){return w.byClass(gb,'tickerInlineOverlay');},_getStoryFromNode:function(gb){return w.byClass(gb,'fbFeedTickerStory');},_getActionButtonFromStory:function(gb){return p.scry(gb,'.tickerInlineActionButton')[0];},_getOpenableStory:function(gb){var hb=this._getStoryFromNode(gb);return this._storyCanOpenDialog(hb)?hb:null;},_getStoryDialog:function(gb){return this._fetchedStoriesDialog[gb.id]||n.getInstance(gb);},_getStoryDialogParams:function(gb){var hb=gb&&gb.getAttribute('data-flyoutdata')||null;return hb&&JSON.parse(hb)||null;},_storyCanOpenDialog:function(gb){return !!this._getStoryDialogParams(gb)&&!this._storyIsHidden(gb);},_storyCanOpenExternally:function(gb){return !!gb.getAttribute('data-href')||!this._storyCanOpenDialog(gb);},_storyIsHidden:function(gb){return o.hasClass(gb,'tickerStoryHidden');},hideActiveStory:function(){this._activeStory&&this.hideStory(this._activeStory);},hideStory:function(gb){this._deactivateStory();if(va(gb)==='')p.remove(gb);o.addClass(gb,'tickerStoryHidden');o.removeClass(gb,'tickerStoryClickable');},undoHideStory:function(gb){o.addClass(gb,'tickerStoryClickable');o.removeClass(gb,'tickerStoryHidden');},insertStoriesAtBottom:function(gb){if(!gb)return;var hb=p.create('div');hb.appendChild(gb);var ib=p.scry(hb,'.fbFeedTickerStory'),jb=p.find(hb,'.tickerMorePager'),kb=[];for(var lb=0;lb<ib.length;lb++)if(!this.dedupeStory(ib[lb]))kb.push(ib[lb]);if(kb.length){kb.push(jb);p.replace(p.find(this._root,'.tickerMorePager'),kb);}i.inform('Ticker/storiesInserted');},_scheduleHide:function(){if(this._popupOnHover&&!this._selectedStory){this._clearHoverTimeouts();this._hoverHideTimeout=this._setTimeout(this._deactivateStory.bind(this),100);}},_setScrollTopPromptVisible:function(gb){this._scrollTopPromptVisible=gb;o.conditionShow(this._scrollTopPrompt,gb);if(gb&&!this._listeners.scrollTop){this._listeners.scrollTop=g.listen(this._scrollTopPrompt,{click:this._handleScrollToTopClick.bind(this)});}else if(!gb&&this._listeners.scrollTop){this._listeners.scrollTop.click.remove();this._listeners.scrollTop=null;}},_isUserIdle:function(){return !ga.isActive(this._userIdleTimeout);},_schedulePoll:function(){clearTimeout(this._pollToken);this._pollToken=this._setTimeout(this._poll.bind(this),this._timeout);},_poll:function(){if(!this._isTickerVisible())return;if(this._storiesToRemove.length>0){if(this._isInsertingStory)return this._schedulePoll();var gb=this._storiesToRemove.pop();this.removeStory(gb);}var hb=!this._isScrolledToTop()&&this._getQueuedStories().length;this._setScrollTopPromptVisible(hb);var ib=Date.now(),jb=ib-this._lastInsert;if(jb<this._insertTimeout||this._isLocked())return this._schedulePoll();var kb=this._getQueuedStories(),lb=this._getQueuedCustomStories(),mb=this._isUserIdle(),nb=kb.length>0,ob=lb.length>0&&!mb&&(ib-this._initTime>this._firstCustomStoryDelay)&&(this._needNonCustomStoryNum===0||(!nb&&(ib-this._lastCustomStory)>this._customStoryInsertTimeout));if(ob){this.insertStory(lb.shift());this._lastCustomStory=ib;this._needNonCustomStoryNum=this._nonCustomToCustomStoryRatio;return this._schedulePoll();}if(nb){var pb=kb.shift();this.insertStory(pb);this._needNonCustomStoryNum--;if(this._needNonCustomStoryNum<0)this._needNonCustomStoryNum=0;return this._schedulePoll();}if(mb)return ga.subscribeOnce(this._poll.bind(this));var qb=lb.length===0&&this._needNonCustomStoryNum===0&&this._nonCustomToCustomStoryRatio>0&&ga.isActive(this.ADS_IDLE_MS)&&((ib-this._lastUpdate)>this._minForceUpdateInterval),rb=false,sb=false;if(this._pollOnly){sb=ib-this._lastUpdate>this._heartbeatTimeout;}else rb=(ib-this._lastPull>this._pullTimeout);var tb=(qb&&this._doCustomUpdate)||rb||sb;if(!tb)return this._schedulePoll();if(qb)this._doCustomUpdate=false;this.update({pull:rb,fullpoll:sb,needcustomstory:qb});},_updatePollOnlyHeartbeatTimeout:function(){if(this._pollOnly&&this._heartbeatTimeout<this._maxHeartbeatTimeout)this._heartbeatTimeout=Math.min(this._heartbeatTimeout+5000,this._maxHeartbeatTimeout);},update:function(gb){this._updatePollOnlyHeartbeatTimeout();if(!this._pollOnly)return this._schedulePoll();var hb={newest:(gb.fullpoll||gb.cache_update)?this._newest:this._page_newest,storyids:this._storyIDs,friendcount:this._friendCount,priorityappid:this._priorityAppId,source:this._tickerSource,needcustomstory:this._nonCustomToCustomStoryRatio>0};if(!hb.newest||hb.newest==='0')throw new Error(sa('Trying to request new ticker stories with an invalid cursor %s, with'+' the settings fullpoll %s, cache_update %s, value coming from this.%s',typeof hb.newest==='string'?'"'+hb.newest+'"':hb.newest,gb.fullpoll,gb.cache_update,(gb.fullpoll||gb.cache_update)?'_newest':'_page_newest'));pa(hb,gb);new j().setURI(this._heartbeatEndpoint).setReadOnly(true).setOption('retries',0).setData(hb).setHandler(this._handleResponse.bind(this)).setFinallyHandler(this._poll.bind(this)).setAllowCrossPageTransition(true).send();this._lastUpdate=Date.now();if(hb.pull)this._lastPull=this._lastUpdate;this._storyIDs=[];},insertStory:function(gb,hb,ib){this._lastInsert=Date.now();window.LiveTimer&&u.addTimeStamps(gb);o.removeClass(gb,'queuedStory');o.removeClass(gb,'customStory');if(hb!==false){var jb=ib?this._fadeStoryIn:this._flyStoryIn;if(this._isUserScrolling()){var kb=function(){this._container.scrollTop=this._container.scrollTop+this._stories.firstChild.offsetHeight;this._scheduleScrollToTop();}.bind(this);this._fadeStoryIn(gb,kb);}else this._scrollToTop(jb.bind(this,gb));}else p.prependContent(this._stories,gb);if(this._storiesWithActions&&o.hasClass(gb,'tickerStoryWithButton'))this._storiesWithActions[gb.getAttribute('data-story-key')]=gb;this._removeOldStories();},_removeOldStories:function(){var gb=this._getInsertedStories();if(gb.length<=this._maxStoriesToKeep)return;var hb=this._minStoriesToKeep,ib=gb.slice(hb);ib.forEach(p.remove);if(this._storiesWithActions)for(var jb=0;jb<ib.length;jb++)delete this._storiesWithActions[ib[jb].getAttribute('data-story-key')];this._resetMorePager();},_resetMorePager:function(){var gb=this._getInsertedStories();if(!gb||!gb.length)return;var hb=gb[gb.length-1].getAttribute('data-ticker-timestamp'),ib=p.scry(this._root,'.tickerMorePager a')[0];if(!ib||!hb)return;var jb=new fa(ib.getAttribute('ajaxify'));jb.addQueryData({oldest:hb});ib.setAttribute('ajaxify',jb);},_setLocked:function(gb){this._locked=gb;},_isLocked:function(){return !!(this._locked||this._activeStory);},informAndRemoveStory:function(gb,hb,ib){var jb=this._getStoryFromNode(gb),kb=jb.getAttribute('data-story-key');p.setContent(jb,hb);o.addClass(jb,'highlightedStory');this._setTimeout(this.removeStory.bind(this,kb),ib||6000);},_getStoryByStoryKey:function(gb){var hb=this._getAllStories();for(var ib=0;ib<hb.length;ib++){var jb=hb[ib];if(jb.getAttribute('data-story-key')==gb)return jb;}return null;},removeStory:function(gb){this._removedStoryIDs[gb]=true;var hb=this._getStoryByStoryKey(gb);if(!hb)return;if(this._storiesWithActions)delete this._storiesWithActions[gb];if(hb==this._activeStory)this._deactivateStory();var ib=this._getStoryDialog(hb);ib&&ib.destroy();this._lastKStoriesRemove(hb);var jb=hb.getAttribute("data-dedupe-key");if(jb)delete this._dedupeKeys[jb];if(o.hasClass(hb,'queuedStory')){p.remove(hb);return;}this._animateStoryOut(hb);},_isScrolledToTop:function(){return this._container.scrollTop<=this._scrollTopThreshold;},_flyStoryIn:function(gb){var hb=p.create('div',{style:{marginTop:'-1000px'}},gb);ba.set(hb,'opacity',0);p.prependContent(this._stories,hb);var ib=ia.getElementDimensions(hb).y;ba.set(hb,'marginTop','-'+ib+'px');this._isInsertingStory=true;new h(hb).to('marginTop',0).ease(h.ease.end).checkpoint(.5).to('opacity',1).ondone(function(){p.replace(hb,gb);this._afterInsert(gb);this._isInsertingStory=false;}.bind(this)).go();},_fadeStoryIn:function(gb,hb){new h(this._stories).to('opacity',.5).ondone(function(){p.prependContent(this._stories,gb);if(hb)hb();new h(this._stories).to('opacity',1).ondone(function(){this._afterInsert(gb);}.bind(this)).go();}.bind(this)).go();},_animateStoryOut:function(gb){var hb=p.create('div',{style:{overflow:'hidden',position:'relative'}});p.insertBefore(gb,hb);p.appendContent(hb,gb);new h(hb).to('top',20).to('height',0).to('opacity',0).ease(h.ease.end).ondone(function(){p.remove(hb);i.inform('Ticker/animateOut');}.bind(this)).go();},_afterInsert:function(gb){i.inform('Ticker/afterInsert');},setPushChannel:function(gb){this._pushSubscription&&this._pushSubscription.unsubscribe();this._pushSubscription=i.subscribe(m.getArbiterType(gb),this._handleTickerPush.bind(this));d(['ChatConfig','ChannelConnection'],function(hb,ib){this._channelConnection=ib;this._checkChannelConnection();this._channelConnectionSubscription=this._channelConnection.subscribe([this._channelConnection.CONNECTED,this._channelConnection.RECONNECTING,this._channelConnection.SHUTDOWN,this._channelConnection.MUTE_WARNING,this._channelConnection.UNMUTE_WARNING],this._handleChannelConnection.bind(this));}.bind(this));},_checkChannelConnection:function(){o.conditionClass(this._root,'disconnected',this._channelConnection.disconnected());},setCurrentAppId:function(gb){this._priorityAppId=gb;},_handleTickerPush:function(gb,hb){var ib=hb.obj;if(ib.delete_id){this._storiesToRemove.push(ib.delete_id);return;}if(ib.fromups)if(ib.do_logging)this._logDarkLaunch(ib);var jb=ib.story_xhp;if(!jb)return;var kb=q(jb).getRootNode();if(!ib.story_time||ib.story_time==='0')throw new Error(sa('An invalid story time was pushed: %s, for ticker story: %s',typeof ib.story_time==='string'?'"'+ib.story_time+'"':ib.story_time,kb.getAttribute('data-flyoutdata')));this._newest=ib.story_time;this.queueStory(kb,ib.flyout_js_cmds);if(this._aggressiveRegulator&&ib.actor==this._newestStory.actorID){this.removeStory(this._newestStory.storyKey);new k('/common/ods_endpoint.php',{k:'ticker.aggr.remove'}).send();}this._newestStory={actorID:ib.actor,storyKey:kb.getAttribute('data-story-key')};},_handleComposerPublish:function(gb,hb){hb.tickerMarkup&&this.insertStory(hb.tickerMarkup);},_logDarkLaunch:function(gb){var hb={actor:gb.actor,story_time:gb.story_time,key:gb.story_obj_id,dark:1};new j().setURI('/alite/push/log.php').setData({msg:JSON.stringify(hb)}).send();},_logRender:function(){if(this._loggedRender)return;var gb=this._tickerInSidebarMode;if(gb||w.byClass(this._content,'home_right_column')){new k('/ajax/log_ticker_render.php',{sidebar_mode:gb}).send();this._loggedRender=true;}},_isTickerVisible:function(){var gb=(fb._activeInstance==this);gb&&this._logRender();return gb;},_handleResponse:function(gb){var hb=gb.getPayload();if(hb.newest)this._newest=this._page_newest=hb.newest;if(hb.content)if(hb.content instanceof Array){for(var ib=0;ib<hb.content.length;ib++)this.queueStoryMarkup(hb.content[ib]);}else this.queueStoryMarkup(hb.content);if(hb.custom_stories&&hb.custom_stories.length){this._queueCustomStories(hb.custom_stories);this._doCustomUpdate=true;}},queueStoryMarkup:function(gb){var hb=q(gb).getRootNode();this.queueStory(hb);},dedupeStory:function(gb){var hb=gb.getAttribute('data-story-key'),ib=hb&&(!!this._objectIDs[hb]||!!this._removedStoryIDs[hb]);ib=ib||!!this._lastKStories.actors[gb.getAttribute('data-actor')]||!!this._lastKStories.apps[gb.getAttribute('data-app')];var jb=gb.getAttribute('data-dedupe-key');ib=ib||jb&&this._dedupeKeys[jb];if(gb.getAttribute('data-force-push'))ib=false;hb&&(this._objectIDs[hb]=true);return ib;},queueStory:function(gb,hb){if(this.dedupeStory(gb))return;this._lastKStoriesInsert(gb);var ib=gb.getAttribute("data-dedupe-key");if(ib)this._dedupeKeys[ib]=true;o.addClass(gb,'queuedStory');p.appendContent(this._storyQueue,gb);var jb=hb&&hb.length;if(jb)hb.forEach(function(lb){new Function(lb).apply();});gb.setAttribute('id',gb.id+'_'+this._root.id);var kb=this._getQueuedStories();kb.slice(0,-this._maxQueueLength).forEach(p.remove);if(jb)this._fetchedStories[gb.id]=true;},_queueCustomStories:function(gb){while(gb.length){var hb=gb.shift();hb=q(hb).getRootNode();if(this.dedupeStory(hb))continue;o.addClass(hb,'customStory');p.appendContent(this._storyQueue,hb);}var ib=this._getQueuedCustomStories();ib.slice(0,-this._maxQueueLength).forEach(p.remove);},_cleanup:function(){fb._placeholders.pagelet_rhc_ticker=null;if(!w.byClass(this._content,'hasRightCol'))return;this._objectIDs=[];this._subscriptions.forEach(i.unsubscribe);this._channelConnectionSubscription&&this._channelConnection.unsubscribe(this._channelConnectionSubscription);this._pushSubscription&&this._pushSubscription.unsubscribe();for(var gb in this._listeners)this._listeners[gb]&&this._listeners[gb].remove();clearTimeout(this._pollToken);this._pollToken=null;this._cleanupInputFocusListener();this._cleanupContentResizeListener();i.inform('Ticker/cleanup');},_onNavHandler:function(gb,hb){var ib=hb.params.key;if(ib!='lf'&&ib!='h')this._cleanup();},registerStoryDialog:function(gb,hb){if(this._uaCurStoryIDFetch==gb.id)this._uaCurStoryIDFetch=null;if(this._uaCurStoryIDPrefetch==gb.id)this._uaCurStoryIDPrefetch=null;this._fetchedStories[gb.id]=true;this._fetchedStoriesDialog[gb.id]=hb;hb.setContext(gb);hb.subscribe('hide',this._deactivateStory.bind(this,true));hb.subscribe('success',this._focusStory.bind(this,gb));hb.subscribe('beforehide',function(){if(this._selecting){this._selecting=false;return false;}}.bind(this));if(this._popupOnHover){hb.subscribe('mouseenter',this._clearHoverTimeouts.bind(this));hb.subscribe('mouseleave',this._scheduleHide.bind(this));hb.subscribe('show',function(){setTimeout(this._highlightDialogScrollbar.bind(this,hb),0);var ib=g.listen(hb.getContent(),'mousedown',function(){this._selectStory(gb);ib.remove();}.bind(this));}.bind(this));}if(gb==this._activeStory)this._openDialog(hb);},_highlightDialogScrollbar:function(gb){var hb=p.scry(gb.getContent(),'.uiScrollableArea')[0];hb&&z.poke(hb);},_openStoryExternally:function(gb,event){var hb=gb.getAttribute('data-href');if(!hb||hb=='#')return;var ib=gb.getAttribute('data-story-rel');switch(ib){case 'theater':this._deactivateAndClearStory();l.loadModules(["PhotoViewer"],function(lb){lb.bootstrap(hb,gb);});return;case 'async':this._deactivateAndClearStory();j.bootstrap(hb,gb);return;}var jb=gb.getAttribute('data-target'),kb=(event.which!=1||event.getModifiers().any||jb=='_blank');kb?window.open(hb,'_blank'):wa(hb);},_deactivateAndClearStory:function(){this._clearHoverTimeouts();this._deactivateStory();},_focusStoryWillTriggerScroll:function(gb){var hb=this._container,ib=hb.clientHeight,jb=gb.offsetHeight,kb=hb.scrollTop,lb=kb+ib,mb=gb.offsetTop,nb=mb+jb;return mb<kb||nb>lb;},_focusStory:function(gb){if(this._focusStoryWillTriggerScroll(gb))this._preventScrollDismiss=true;var hb=new x(gb),ib=w.byClass(gb,'scrollable'),jb=hb.boundWithin(new x(ib)).getPositionVector(),kb=hb.getPositionVector().sub(jb);if(kb.y!==0)kb.scrollElementBy(ib);gb.focus();},_selectStory:function(gb){this._selectedStory=gb;o.addClass(gb,'tickerStorySelected');o.addClass(this._root,'tickerChildSelected');},_activateStory:function(gb,hb){this._clearHoverTimeouts();if(gb==this._activeStory||!this._storyCanOpenDialog(gb))return;this._deactivateStory();this._focusStory(gb);this._activeStory=gb;o.addClass(gb,'tickerStoryActive');window.Toggler&&da.hide();if(this._logFlyouts){hb=hb||'unknown';new k('/ajax/feed/ticker/flyout.php',{src:hb}).send();}ca.log(gb);var ib=this._getStoryDialog(gb);if(ib){if(this._storyDialogResources[gb.id])l.loadResources(this._storyDialogResources[gb.id]);this._openDialog(ib);ka.bumpEntityKey('ticker_stories','flyouts.open');return;}if(!(gb.id in this._fetchedStories))this._uaCurStoryIDFetch=gb.id;this._fetchStory(gb);},handleRemoveStory:function(){this._deactivateStory(true);},_deactivateStory:function(gb){if(this._activeStory===this._deactivatingStory)return;this._deactivatingStory=this._activeStory;if(this._dialog){if(gb===true){this._dialog.enableBehavior(t);}else this._dialog.disableBehavior(t);this._dialog.hide();}if(this._activeStory){o.removeClass(this._activeStory,'tickerStoryActive');o.removeClass(this._activeStory,'tickerStorySelected');o.removeClass(this._root,'tickerChildSelected');}this._dialog=this._selectedStory=this._activeStory=null;this._cleanupInputFocusListener();this._cleanupContentResizeListener();this._deactivatingStory=null;},_logUserAction:function(gb,hb,event){ma(hb,gb,event,'FORCE');},_fetchStory:function(gb){clearTimeout(this._fetchToken);var hb=[],ib=this._getInsertedStories(),jb=ib.indexOf(gb);[-1,0,1].forEach(function(kb){var lb=ib[jb+kb];lb&&hb.push(lb);},this);this._fetchToken=setTimeout(this._fetchStories.bind(this,hb),100);},_fetchStories:function(gb){var hb=[],ib,jb=function(kb){clearTimeout(ib);gb.forEach(function(lb){o.conditionClass(lb,'tickerStoryFetching',kb);});};gb=gb.filter(function(kb){if(kb.id in this._fetchedStories)return false;this._fetchedStories[kb.id]=true;var lb=this._getStoryDialogParams(kb);if(!lb)return false;lb.uniq_id=kb.getAttribute('id');lb.referrer=this._tickerSource;hb.push(lb);return true;},this);if(!hb.length)return;ib=this._setTimeout(jb.bind(null,true),500);new j('/ajax/feed/ticker/multi_story').setInitialHandler(this._handleDialogResponse.bind(this,hb)).setFinallyHandler(jb.bind(null,false)).setErrorHandler(ta).setData({stories:hb}).setAllowCrossPageTransition(this._tickerInSidebarMode).send();},_handleDialogResponse:function(gb,hb){if(hb&&hb.resource_map){var ib=[];for(var jb in hb.resource_map){var kb=hb.resource_map[jb];if(kb.type==='css'&&!kb.permanent)ib.push(jb);}if(ib.length>0)for(var lb=0;lb<gb.length;lb++)this._storyDialogResources[gb[lb].uniq_id]=ib;}},_tickerDeClicker:function(event){var gb=event.getTarget(),hb=w.byTag(gb,'a'),ib=this._getStoryFromNode(gb),jb=this._getButtonFromNode(gb);if(ib&&hb&&!jb&&o.hasClass(ib,'tickerStoryClickable')&&!o.hasClass(hb,'tickerStoryAllowClick')&&!this._storyIsHidden(ib))hb.setAttribute('rel','ignore');var kb=(event.button==2),lb=(event.type==='keydown'),mb=ib&&this._getActionButtonFromStory(ib);if(!kb&&mb&&!lb)this._setClickedStory(ib);},_handleMouseup:function(event){this._clearClickedStory();},_setClickedStory:function(gb){this._clearClickedStory();o.addClass(gb,'tickerStoryClicked');this._clickedStory=gb;},_clearClickedStory:function(){if(this._clickedStory){o.removeClass(this._clickedStory,'tickerStoryClicked');this._clickedStory=null;}},_initInfiniteScrollListener:function(){var gb=this._getInsertedStories();if(this._storiesWithActions)for(var hb=0;hb<gb.length;hb++){var ib=gb[hb];if(o.hasClass(ib,'tickerStoryWithButton'))this._storiesWithActions[ib.getAttribute('data-story-key')]=ib;}var jb=Math.max(0,gb.length-this._autoloadStoryIndex);this._infiniteScrollStory=gb[jb];this._checkInfiniteScroll();},_checkInfiniteScroll:function(){if(this._infiniteScrollStory){var gb=ia.getElementPosition(this._infiniteScrollStory).y,hb=ia.getElementPosition(this._container).y+ia.getElementDimensions(this._container).y;if(gb<hb){var ib=p.scry(this._root,'.tickerMorePager a')[0];if(ib){var jb=w.byClass(ib,'stat_elem')||ib;new j(ib.getAttribute('ajaxify')).setReadOnly(true).setRelativeTo(ib).setStatusElement(jb).setAllowCrossPageTransition(true).send();}this._infiniteScrollStory=null;this._autoloadStoryIndex=5;}}},_setFixed:function(gb){if(!this._selectedStory)return;var hb=this._getStoryDialog(this._selectedStory);if(hb){hb.setFixed&&hb.setFixed(gb);hb.updatePosition();}},_setTimeout:function(gb,hb){return setTimeout(gb,hb,!this._tickerInSidebarMode);},_scrollDialogToBottom:function(){var gb=this._dialog&&this._dialog.getContent(),hb=gb&&p.scry(gb,'.uiScrollableAreaWrap')[0],ib=hb&&z.getInstance(hb);ib&&ib.scrollToBottom();},_redrawFlyout:function(gb,hb){if(this._hasUFIUpdated)return;var ib=this._dialog;if(ib&&ib.isShown()&&oa(ib.getContent(),hb.form)){this._hasUFIUpdated=true;this._updateDialogPosition();}},_openDialog:function(gb){if(!this._tickerInSidebarMode)o.addClass(gb.getRoot(),'tickerStoryOverlayOnTop');this._hasUFIUpdated=false;var hb=ja.getScrollPosition();this._dialog=gb.show();window.scrollTo(hb.x,hb.y);this._updateDialogPosition();this._writeSwfFrame(gb);setTimeout(this._initCommentFocusListener.bind(this),0);setTimeout(this._initContentResizeListener.bind(this),0);this._stupidIE7VideoResizeHack(gb);},_stupidIE7VideoResizeHack:function(gb){if(ha.ie()===7){var hb=p.scry(gb.getContent(),'.uiVideoThumb .img');hb.forEach(function(ib){ba.set(ib,'width','');});}},_updateDialogPosition:function(){var gb=this._tickerInSidebarMode||!!w.byClass(this._root,'fixed_elem');this._dialog.setFixed&&this._dialog.setFixed(gb);this._adjustFlyoutContentHeight();this._dialog.updatePosition();},_writeSwfFrame:function(gb){var hb=this._dialog&&this._dialog.getContent(),ib=p.scry(hb,'.swfObject')[0];if(!ib)return;var jb=ib.getAttribute('data-swfid');if(jb&&window[jb]){var kb=window[jb];kb.write(ib);}},_initCommentFocusListener:function(){var gb=this._dialog&&this._dialog.getContent(),hb=gb&&p.scry(gb,'.tickerDialogFooter textarea')[0];if(!hb)return;this._listeners.inputFocus=g.listen(hb,'focus',this._scrollDialogToBottom.bind(this));},_cleanupInputFocusListener:function(){if(this._listeners.inputFocus){this._listeners.inputFocus.remove();this._listeners.inputFocus=null;}},_initContentResizeListener:function(){var gb=this._dialog&&this._dialog.getContent();if(!gb)return;this._listeners.contentResize=g.listen(gb,'click',function(){setTimeout(this._dialog.updatePosition.bind(this._dialog),0);}.bind(this));},_cleanupContentResizeListener:function(){if(this._listeners.contentResize){this._listeners.contentResize.remove();this._listeners.contentResize=null;}},_adjustFlyoutContentHeight:function(){var gb=this._dialog&&this._dialog.getContent(),hb=gb&&p.scry(gb,'.uiScrollableAreaWrap')[0];if(!hb)return;var ib=ia.getElementDimensions(hb),jb=ia.getElementPosition(hb),kb=p.scry(hb,'.uiUfi .uiUfiComment'),lb=p.scry(hb,"._12tg")[0],mb=p.scry(hb,".UFILikeSentence")[0],nb=this.FLYOUT_MAX_HEIGHT;if(lb||mb){var ob=this._getUfiItemAndTop(lb,mb),pb=ob[0],qb=ob[1];nb=Math.max(nb,this.FLYOUT_TARGET_HEIGHT_OFFSET+hb.scrollTop+qb+pb.offsetHeight-jb.y);}var rb=ia.getViewportDimensions().y-this.FLYOUT_VIEWPORT_PADDING;nb=Math.min(nb,rb);var sb=nb-this.FLYOUT_TARGET_HEIGHT_OFFSET;for(var tb=0;tb<kb.length;tb++){var ub=kb[tb],vb=ia.getElementPosition(ub),wb=vb.y-jb.y;if(Math.abs(wb-sb)<=this.FLYOUT_OFFSET_THRESHOLD){sb=wb+this.FLYOUT_COMMENT_OFFSET;break;}}if(ib.y>=sb){ba.set(hb,'height',sb+'px');ba.set(hb,'max-height',null);}else{ba.set(hb,'max-height',nb+'px');ba.set(hb,'height',null);}},_getUfiItemAndTop:function(gb,hb){var ib=(gb&&ia.getElementPosition(gb).y)||0,jb=(hb&&ia.getElementPosition(hb).y)||0,kb=[gb,ib+this.FLYOUT_ACTION_FOOTER_PADDING],lb=[hb,jb];return ib>jb?kb:lb;},_initObjectIDs:function(){var gb=this._getAllStories();for(var hb=gb.length-1;hb>=0;hb--){var ib=gb[hb].getAttribute('data-story-key');if(ib){this._objectIDs[ib]=true;this._lastKStoriesInsert(gb[hb]);var jb=gb[hb].getAttribute("data-dedupe-key");if(jb)this._dedupeKeys[jb]=true;}}},_handleChatOpened:function(){this._deactivateStory(true);},_handleChannelConnection:function(){this._checkChannelConnection();},getNewest:function(){return this._newest;}});e.exports=fb;},null);
__d("TickerRightColumnController",["Arbiter","CSS","DOM","Event","NavigationMessage","Run","Style","SubscriptionsHandler","TickerController","Vector","ge","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s;function t(){var y=q('pagelet_rhc_ticker');y&&o.show(y,v);}function u(){var y=q('pagelet_rhc_ticker');y&&o.hide(y);}function v(){var y=q('pagelet_rhc_ticker'),z=i.scry(y,'.ticker_container')[0],aa=i.scry(y,'.ticker_stream')[0],ba=q('rightCol');if(!y||!z||!aa||!ba)return;m.set(z,'height','0');var ca=75,da=p.getViewportDimensions().y,ea=p.getElementDimensions(ba).y,fa=da-ea-ca,ga=p.getElementDimensions(aa).y,ha=Math.max(Math.min(fa,ga,s.tickerMaxHeight||425),s.tickerMinHeight||225);m.set(z,'height',ha+'px');}function w(y){var z=q('pagelet_reminders'),aa=q('pagelet_rhc_ticker'),ba=z&&i.scry(z,'div.tickerToggleWrapper')[0],ca=aa&&i.scry(aa,'div.tickerToggleWrapper')[0];ba&&h.conditionClass(ba,'displayedTickerToggleWrapper',!y);ca&&h.conditionClass(ca,'displayedTickerToggleWrapper',y);aa&&h.conditionClass(aa,'hidden_rhc_ticker',!y);if(y){v();var da=q('fbTickerClosedEd');da&&h.hide(da);}}var x={init:function(y){s=y;var z=new n();if(s.enableSidebar)z.addSubscriptions(g.subscribe('sidebar/hide',t),g.subscribe('sidebar/show',u),g.subscribe('minisidebar/show',t),g.subscribe('LitestandClassicRHC/loaded',v),j.listen(window,'scroll',r(function(){var ba=i.scry(q('pagelet_rhc_ticker'),'.fbFeedTicker')[0],ca=ba&&o.getInstance(ba);ca&&ca.handleRemoveStory();})));if(!h.hasClass(document.documentElement,'sidebarMode')){t();}else if(s.enableSidebar)h.hasClass(document.documentElement,'miniSidebar')?t():u();var aa=function(){z.release();};g.subscribeOnce(k.NAVIGATION_BEGIN,aa);l.onLeave(aa);},initRHCTickerHider:function(y){j.listen(y,'click',this.hideRHCTicker);},showRHCTicker:function(){w(true);},hideRHCTicker:function(){w(false);}};e.exports=x;},null);
__d("WaterfallIDGenerator",["CurrentUser","md5"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(){var l=2147483647;return Math.random()*l;}function j(){return Math.floor(Date.now()/1000);}var k={generate:function(){return h([g.getID(),j(),i()].join(':'));}};e.exports=k;},null);
__d("MercuryTypeaheadDataSource",["Banzai","BanzaiLogger","CurrentUser","DataSource","MercuryParticipantTypes","MercuryTypeaheadConstants","OrderedFriendsList","ShortProfiles","debounce","merge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=500,r=[],s={},t={},u={},v=false,w=false;for(var x in j)if(j.hasOwnProperty(x))z[x]=j[x];var y=j===null?null:j.prototype;z.prototype=Object.create(y);z.prototype.constructor=z;z.__superConstructor__=j;function z(aa){"use strict";aa=aa||{};aa.kanaNormalization=true;j.call(this,aa);this.logQuery=o(function(ba){this.$MercuryTypeaheadDataSource0(ba);},q,this,true);this.logResponse=o(function(ba){this.$MercuryTypeaheadDataSource0(ba);},q,this,true);}z.prototype.dirty=function(){"use strict";this.$MercuryTypeaheadDataSource1=r;this.localCache=t;this.queryCache=s;this.queryIDs=u;return this;};z.prototype.bootstrap=function(){"use strict";if(v||w)return false;this.$MercuryTypeaheadDataSource0({event:'bootstrap_start'});w=true;n.fetchAll().then(function(){this.updateBootstrapData();this.$MercuryTypeaheadDataSource0({event:'bootstrap_end'});w=false;v=true;}.bind(this),function(){this.$MercuryTypeaheadDataSource0({event:'bootstrap_failure'});}.bind(this));return true;};z.prototype.updateBootstrapData=function(){"use strict";var aa=this.getCachedShortProfileIDs(),ba=aa.map(function(ca){var da=n.getNow(ca),ea=ca==i.getID()?k.FRIEND:da.type,fa=[da.additionalName,da.alternateName].concat(da.searchTokens||[]).join(' ');return {uid:ca,index:m.getActiveRank(ca),text:da.name,tokens:fa,localized_text:da.name,additional_text:da.additionalName,photo:da.thumbSrc,render_type:ea,type:l.USER_TYPE};});if(ba.length)this.addEntries(ba);};z.prototype.query=function(aa,ba,ca,da){"use strict";var ea=ba||aa.length===1;return y.query.call(this,aa,ea,ca,da);};z.prototype.getQueryData=function(aa,ba){"use strict";return p(y.getQueryData.call(this,aa,ba),{needs_friends:!this.isBootstrapped()});};z.prototype.setEntry=function(aa,ba){"use strict";this.$MercuryTypeaheadDataSource1[aa]=ba;};z.prototype.getEntry=function(aa){"use strict";return this.$MercuryTypeaheadDataSource1[aa]||null;};z.prototype.getCachedShortProfileIDs=function(){"use strict";var aa=n.getCachedProfileIDs(),ba=aa.filter(function(ca){var da=n.getNow(ca);return (ca==i.getID()||da.type===k.FRIEND);});return ba;};z.prototype.isBootstrapped=function(){"use strict";return v;};z.prototype.isBootstrapping=function(){"use strict";return w;};z.prototype.$MercuryTypeaheadDataSource0=function(aa){"use strict";if(!g.isEnabled('mercury_typeahead_logging'))return;h.log('MercuryQueryResultsLoggerConfig',aa);};e.exports=z;},null);
__d("MercuryErrorInfo",["MercuryErrorType","MercuryMessageInfo","fbt"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={getMessage:function(k){var l='';if(j.isConnectionError(k)){l=i._("This message didn't send.");if(j.isTransient(k))l=i._("{message} Check your internet connection and click to try again.",[i.param("message",l)]);}else{if(k&&k.description){l=k.description;}else l=i._("This message failed to send.");if(j.isTransient(k))l=i._("{message} Click to send again.",[i.param("message",l)]);}return l;},isConnectionError:function(k){if(k&&k.type==g.TRANSPORT)return k.code===1001||k.code===1004||k.code===1006;return false;},isTransient:function(k){return k&&k.is_transient;},isPermanent:function(k){return k?!this.isTransient(k):false;},hasErrorStatus:function(k){return h.hasError(k);}};e.exports=j;},null);
__d("MercuryThreadMetadataRawRenderer",["Event","CSS","DOM","MercuryActionStatus","MercuryErrorInfo","MercuryStatusTemplates","Tooltip","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p={renderParticipantListWithNoThreadName:function(q,r,s,t,u,v){var w={callback:true,check_length:true,show_unread_count:true};v=v||{};var x={};for(var y in v)if(w[y]){x[y]=v[y];delete v[y];}var z=s.map(function(ea){return t[ea];}),aa=this.renderRawParticipantList(q,z,s.length,v);aa=this.renderRawTitleWithUnreadCount(aa,x.show_unread_count?r.unread_count:0);var ba=v.abbr_mode,ca={};for(var da in v)ca[da]=v[da];ca.abbr_mode=true;u.forEach(function(ea){var fa=u.length>1?this._cloneIfDOMElement(aa):aa;i.setContent(ea,fa);if(x.check_length&&!ba&&ea.scrollWidth>ea.clientWidth){var ga=this.renderRawParticipantList(q,z,s.length,ca),ha=this.renderRawTitleWithUnreadCount(ga,x.show_unread_count?r.unread_count:0);i.setContent(ea,ha);}}.bind(this));x.callback&&x.callback(aa);},renderRawParticipantList:function(q,r,s,t){var u={abbr_mode:true,last_separator_uses_and:true,names_renderer:true};t=t||{};var v=null;if(t.names_renderer){v=t.names_renderer(r);}else v=r.map(function(x){return x.name;});var w=null;if(v.length===0){if(!q){w=o._("New message");}else w=o._("No Participants");}else if(v.length==1){w=v[0];}else if(v.length==2){if(t.last_separator_uses_and){w=o._("{participant1} and {participant2}",[o.param("participant1",v[0]),o.param("participant2",v[1])]);}else w=o._("{participant1}, {participant2}",[o.param("participant1",v[0]),o.param("participant2",v[1])]);}else if(t.last_separator_uses_and){if(t.abbr_mode){w=o._("{participant1} and {others_link}",[o.param("participant1",v[0]),o.param("others_link",this.renderRawParticipantCount({render_subset:true,count:s-1}))]);}else if(v.length==3){w=o._("{participant1}, {participant2}  and {participant3}",[o.param("participant1",v[0]),o.param("participant2",v[1]),o.param("participant3",v[2])]);}else w=o._("{participant1}, {participant2} and {others_link}",[o.param("participant1",v[0]),o.param("participant2",v[1]),o.param("others_link",this.renderRawParticipantCount({render_subset:true,count:s-2}))]);}else if(v.length==3){w=o._("{participant1}, {participant2}, {participant3}",[o.param("participant1",v[0]),o.param("participant2",v[1]),o.param("participant3",v[2])]);}else w=o._("{participant1}, {participant2}, {participant3}, {others_link}",[o.param("participant1",v[0]),o.param("participant2",v[1]),o.param("participant3",v[2]),o.param("others_link",this.renderRawParticipantCount({render_subset:true,count:s-3}))]);if(Array.isArray(w))w=i.create('span',{},w);return w;},renderRawTitleWithUnreadCount:function(q,r){var s=q;if(r&&r>1)s=i.create('span',{},o._("{conversation_title} ({unread_count})",[o.param("conversation_title",q),o.param("unread_count",r)]));return s;},renderRawParticipantCount:function(q){var r=q.render_subset,s;if(!r){s=q.count>1?o._({"*":"{num} people"},[o.param("num",q.count,[0])]):o._("1 person");}else s=q.count>1?o._({"*":"{others_count} others"},[o.param("others_count",q.count,[0])]):o._("1 other");return s;},renderShortNames:function(q){if(q.length==1)return [q[0].name];return q.map(function(r){return r.short_name;});},renderStatusIndicator:function(q,r,s){var t;if(q==j.RESENDING){t=this.renderResendIndicator();}else if(q!==(void 0)&&q!=j.UNSENT&&q!=j.UNCONFIRMED&&q!=j.SUCCESS)t=this.renderErrorIndicator(r,s);return t;},renderResendIndicator:function(){return l[':fb:mercury:resend-indicator'].render();},renderErrorIndicator:function(q,r){if(!q)return null;var s=l[':fb:mercury:error-indicator'].render(),t=q.is_transient,u=k.getMessage(q);if(t)if(k.isConnectionError(q)){u=o._("{message} Check your internet connection and click to try again.",[o.param("message",u)]);}else u=o._("{message} Click to send again.",[o.param("message",u)]);m.set(s,u,'above','center');if(r&&t){g.listen(s,'click',r);s.setAttribute('tabindex','0');h.addClass(s,"_55q-");}return s;},_cloneIfDOMElement:function(q){if(q&&q.cloneNode){return q.cloneNode();}else return q;}};e.exports=p;},null);
__d("MercuryThreadSearchUtils",["escapeRegex","TokenizeUtil"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={wordsInString:function(j){return (j||'').split(/\s+/).filter(function(k){return k.trim().length>0;});},anyMatchPredicate:function(j,k){for(var l=0;l<j.length;l++)if(k(j[l]))return true;return false;},allMatchPredicate:function(j,k){for(var l=0;l<j.length;l++)if(!k(j[l]))return false;return true;},queryWordMatchesAnyNameWord:function(j,k){var l=new RegExp('^'+g(j),'i');return this.anyMatchPredicate(k,function(m){var n=h.parse(m).flatValue;return l.test(n);});},queryMatchesName:function(j,k){var l=this.wordsInString(j),m=this.wordsInString(k);return this.allMatchPredicate(l,function(n){return this.queryWordMatchesAnyNameWord(n,m);}.bind(this));}};e.exports=i;},null);
__d("MessagingRecipientTypeaheadItem.react",["BackgroundImage.react","ChatTypeaheadConstants","ImageBlock.react","LeftRight.react","React","SplitImage.react","MercuryThreadMetadataRawRenderer","TypeaheadViewItem","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=k,r=q.PropTypes,s=k.createClass({displayName:"MessagingRecipientTypeaheadItem",propTypes:Object.assign({},n.propTypes,{imageSize:r.number.isRequired}),mixins:[n.Mixin],isThreadRecipient:function(){return this.props.entry.getType()===h.THREAD_TYPE;},_getImage:function(){var t=this.props.entry;if(t.getType()===h.THREAD_TYPE&&!t.getPhoto()){var u=t.getAuxiliaryData();return (k.createElement(l,{size:this.props.imageSize,srcs:u.participantsToRender.map(function(v){return v.image_src;})}));}if(t.getPhoto())return (k.createElement(g,{width:this.props.imageSize,height:this.props.imageSize,backgroundSize:"cover",src:t.getPhoto()}));return k.createElement("span",null);},_getThreadParticipantList:function(){if(!this.isThreadRecipient())return null;var t=this.props.entry;return m.renderRawParticipantList(t.getUniqueID(),t.getAuxiliaryData().participantsToRender,t.getAuxiliaryData().thread.participants.length-1,{names_renderer:m.renderShortNames});},_getTitle:function(){var t=this.props.entry;if(this.isThreadRecipient()&&!t.getTitle())return this._getThreadParticipantList();return t.getTitle();},_getSubtitle:function(){var t=this.props.entry;if(this.isThreadRecipient()&&!t.getTitle())return this._getThreadParticipantList();return t.getSubtitle()?t.getSubtitle().split(' \u00b7 ')[0]:null;},render:function(){var t=this._getSubtitle(),u=p((("_599m")+(' '+"_55xn")+(!t?' '+"_5mne":'')+(this.props.highlighted?' '+"_599n":'')),this.props.className);return (k.createElement("li",{"aria-selected":this.props.selected,className:u,onMouseDown:this._onSelect,onMouseEnter:this._onHighlight,role:this.props.role},k.createElement(i,{spacing:"medium"},this._getImage(),k.createElement(j,null,k.createElement("div",null,k.createElement("div",{className:"_55xt _599p"},this._getTitle()),k.createElement("div",{className:"_55z3 _599q"},t)),this.props.children))));}});e.exports=s;},null);
__d("AsyncLayout",["AjaxPipeRequest","Arbiter","AsyncRequest","AsyncResponse","CSS","DOM","HTML","NavigationMessage","PageTransitions","URI","$","emptyFunction","ge","goURI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();function u(v){"use strict";this.canvasID=v;if(s('rightCol'))this.auxiliaryID='rightCol';if(s('headerArea'))this.headerID='headerArea';if(s('toolbarContainer'))this.toolbarID='toolbarContainer';this.waitingForAux=false;o.registerHandler(this.catchPageTransition.bind(this));this.subscription=h.subscribe(n.NAVIGATION_BEGIN,this.onNavigate.bind(this));h.inform('AsyncLayout/initialized',null,h.BEHAVIOR_STATE);}u.prototype.catchPageTransition=function(v){"use strict";this.subscription.unsubscribe();return false;};u.prototype.getCanvasID=function(v){"use strict";return v.sidecol?'contentCol':'contentArea';};u.prototype.onNavigate=function(v,w){"use strict";var x=w.useAjaxPipe;w=w.params;if(w.endpoint){if(this.request){this.request.setFinallyHandler(r);this.request.abort();}if(this.sideRequest)this.sideRequest.abort();if(x){this.request=new g().setURI(w.endpoint).setData(w).setCanvasId(this.getCanvasID(w)).setFinallyHandler(this.finallyHandler.bind(this)).setErrorHandler(this.errorHandler.bind(this)).setFirstResponseCallback(this.firstResponseCallback.bind(this)).send();}else{w.handled=true;this.waitingForAux=w.sidecol;var y=!!w.iframe,z=new i().setOption('useIframeTransport',y).setURI(new p(w.endpoint)).setReadOnly(true).setMethod('GET').setData(w).setHandler(this.onResponse.bind(this)).setErrorHandler(this.errorHandler.bind(this)).setFinallyHandler(this.finallyHandler.bind(this));this.request=z;z.send();}}};u.prototype.onSideResponse=function(v){"use strict";var w=v.getPayload();if(w&&this.auxiliaryID)this.receivedAux(w);};u.prototype.receivedAux=function(v){"use strict";!this.waitingForAux;this.waitingForAux=false;l.setContent(q(this.auxiliaryID),m(v));};u.prototype.onResponse=function(v){"use strict";var w=v.getPayload();if(w.redirect){t(w.redirect);}else{var x=w.html||w;l.setContent(q(this.canvasID),m(x));if(w.side_html&&this.auxiliaryID)this.receivedAux(w.side_html);if(this.headerID&&!w.keep_header){var y=q(this.headerID);l.setContent(y,m(w.header_html||''));k.conditionShow(y,w.header_html);}if(w.toolbar_html&&this.toolbarID)l.setContent(q(this.toolbarID),m(w.toolbar_html));if(w.js)(new Function(w.js))();k.conditionClass('contentCol','hasRightCol',this.auxiliaryID&&!w.noRightSide);var z=s('rightCol');if(z&&w.noRightSide)l.empty(z);}var aa=v.getRequest().getData();h.inform(n.NAVIGATION_COMPLETED,aa.key);};u.prototype.errorHandler=function(v){"use strict";j.verboseErrorHandler(v);h.inform(n.NAVIGATION_FAILED);this.request=null;};u.prototype.firstResponseCallback=function(v){"use strict";window.scrollTo(0,0);h.inform(n.NAVIGATION_FIRST_RESPONSE);};u.prototype.finallyHandler=function(v){"use strict";this.request=null;o.transitionComplete(true);h.inform(n.NAVIGATION_COMPLETED);};e.exports=u;},null);
__d("FileFormResetOnSubmit",["DOMQuery","Event","emptyFunction"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(l,m){var n=h.listen(l,'change',i.thatReturnsFalse,h.Priority.URGENT);try{m();}catch(o){throw o;}finally{n.remove();}}function k(l){"use strict";this._form=l;}k.prototype.enable=function(){"use strict";var l=this._reset.bind(this);this._subscription=this._form.subscribe('submit',function(){setTimeout(l,0);});};k.prototype.disable=function(){"use strict";this._subscription.unsubscribe();this._subscription=null;};k.prototype._reset=function(){"use strict";var l=this._form.getRoot();j(l,function(){var m=g.scry(l,'input[type="file"]');m.forEach(function(n){n.value='';});});};e.exports=k;},null);
__d("SoundPlayer",["Arbiter","URI","createArrayFromMixed","swfobject"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=b('swfobject').SWFObject,k={},l=null,m=false,n='so_sound_player',o='/swf/SoundPlayer.swf?v=1',p='10.0.22.87',q=null;function r(z){var aa=h(z);if(!aa.getDomain())return h().setPath(aa.getPath()).toString();return z;}function s(z){var aa=h(z).getPath();if(/\.mp3$/.test(aa))return 'audio/mpeg';if(/\.og[ga]$/.test(aa))return 'audio/ogg';return '';}function t(){if(!q){var z=document.createElement('audio');if(!z||!z.canPlayType)return null;z.setAttribute('preload','auto');document.body.appendChild(z);q=z;}return q;}function u(){var z=document[n]||window[n];if(z)if(!z.playSound&&z.length)z=z[0];return (z&&z.playSound&&z.loopSound)?z:null;}function v(){return m;}function w(z,aa,ba){l={path:z,sync:aa,loop:ba};}function x(){m=true;if(l){var z=u();if(l.loop){z.loopSound(l.path,l.sync);}else z.playSound(l.path,l.sync);}}var y={init:function(z){z=i(z);var aa;for(var ba=0;ba<z.length;++ba){aa=z[ba];if(k[aa])return;}var ca=t();for(ba=0;ca&&ba<z.length;++ba){aa=z[ba];if(ca.canPlayType(aa)){k[aa]=true;return;}}k['audio/mpeg']=true;if(u())return;try{g.registerCallback(x,['sound/player_ready','sound/ready']);var ea=document.createElement('div');ea.id='sound_player_holder';document.body.appendChild(ea);var fa=new j(o,n,'1px','1px',[p],'#ffffff');fa.addParam('allowscriptaccess','always');fa.addParam('wmode','transparent');fa.addVariable('swf_id',n);fa.fallback_html=' ';fa.write(ea.id);window[n]=fa;g.inform('sound/player_ready');}catch(da){}},play:function(z,aa){z=i(z);var ba=t(),ca,da;for(var ea=0;ba&&ea<z.length;++ea){ca=z[ea];da=s(ca);if(!ba.canPlayType(da))continue;y.init([da]);ba.src=r(ca);if(aa){ba.setAttribute('loop','');}else ba.removeAttribute('loop');ba.play();return;}for(ea=0;ea<z.length;++ea){ca=r(z[ea]);da=s(ca);if(da!='audio/mpeg')continue;y.init([da]);var fa=u();if(!v()){w(ca,true,aa);return;}else if(fa){if(aa){fa.loopSound(ca,true);}else fa.playSound(ca,true);return;}}},stop:function(z){z=i(z);for(var aa=0;aa<z.length;++aa){var ba=r(z[aa]),ca=t(),da=u();if(ca&&ca.src==ba){ca.pause();ca.removeAttribute('src');}else da&&da.stopSound(ba);}}};e.exports=y;},null);
__d("SoundSynchronizer",["SoundPlayer","WebStorage","createArrayFromMixed"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j='fb_sounds_playing3';function k(){var o=h.getLocalStorage();if(o)try{var q=o[j];if(q){q=JSON.parse(q);if(Array.isArray(q))return q;}}catch(p){}return [];}function l(o){var p=h.getLocalStorage();if(p){var q=k();q.push(o);while(q.length>5)q.shift();try{p[j]=JSON.stringify(q);}catch(r){}}}function m(o){return k().some(function(p){return p===o;});}var n={play:function(o,p,q){o=i(o);p=p||(o[0]+Math.floor(Date.now()/1000));if(m(p))return;g.play(o,q);l(p);},isSupported:function(){return !!h.getLocalStorage();}};e.exports=n;},null);
__d("SoundRPC",["Event","SoundSynchronizer"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(k,l,m){h.play(k,l,m);}var j={playLocal:i,playRemote:function(k,l,m,n){var o={paths:l,sync:m,loop:n};k.postMessage(JSON.stringify(o),'*');},supportsRPC:function(){return !!window.postMessage;},_listen:function(){g.listen(window,'message',function(k){if(!/\.facebook.com$/.test(k.origin))return;var l=JSON.parse(k.data||'{}');i(l.paths,l.sync,l.loop);});}};e.exports=j;},null);
__d("Sound",["SoundInitialData","SoundPlayer","SoundRPC","SoundSynchronizer","URI","UserAgent_DEPRECATED","isFacebookURI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=null,o={init:function(s){if(!n)h.init(s);},play:function(s,t,u){if(n){i.playRemote(n.contentWindow,s,t,false);}else i.playLocal(s,t,u);},stop:function(s){if(!n)h.stop(s);}},p=new k(location.href);if(p.getSubdomain()&&p.getSubdomain()!=='www')p.setSubdomain('www');var q=p.getDomain();function r(){if(l.ie()<9)return false;if(g.RPC_DISABLED)return false;return j.isSupported()&&i.supportsRPC();}if(m(p)&&location.host!==q&&r()){n=document.createElement('iframe');n.setAttribute('src','//'+q+'/sound_iframe.php');n.style.display='none';document.body.appendChild(n);}e.exports=o;},null);
__d("Token",["CSS","DataStore","DOM","Locale","UnicodeBidi","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();function m(n,o){"use strict";this.info=n;this.paramName=o;}m.prototype.getInfo=function(){"use strict";return this.info;};m.prototype.getText=function(){"use strict";return this.info.text;};m.prototype.getValue=function(){"use strict";return this.info.uid;};m.prototype.isFreeform=function(){"use strict";return !!this.info.freeform;};m.prototype.setSelected=function(n){"use strict";g.conditionClass(this.getElement(),'uiTokenSelected',n);return this;};m.prototype.getElement=function(){"use strict";if(!this.element)this.setElement(this.createElement());return this.element;};m.prototype.setElement=function(n){"use strict";h.set(n,'Token',this);this.element=n;return this;};m.prototype.isRemovable=function(){"use strict";return g.hasClass(this.element,'removable');};m.prototype.getTextDirection=function(){"use strict";var n=k.isDirectionRTL(this.getText()),o=j.isRTL();if(n&&!o)return 'rtl';if(!n&&o)return 'ltr';return null;};m.prototype.createElement=function(n,o){"use strict";var p=this.paramName,q=this.getText(),r=this.getValue(),s=i.create('a',{href:'#','aria-label':l._("Remove {item}",[l.param("item",q)]),className:'remove uiCloseButton uiCloseButtonSmall'});if(n)g.addClass(s,'uiCloseButtonSmallGray');var t=i.create('input',{type:'hidden',value:r,name:p+'[]',autocomplete:'off'}),u=i.create('input',{type:'hidden',value:q,name:'text_'+p+'[]',autocomplete:'off'}),v={className:'removable uiToken'},w=this.getTextDirection();if(w!==null)v.dir=w;var x=i.create('span',v,[q,t,u,s]);if(n)g.addClass(x,'uiTokenGray');if(o){var y=i.create('i',{className:o});i.prependContent(x,y);}return x;};e.exports=m;},null);
__d("WeakToken",["CSS","Token"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();for(var i in h)if(h.hasOwnProperty(i))k[i]=h[i];var j=h===null?null:h.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=h;function k(){"use strict";if(h!==null)h.apply(this,arguments);}k.prototype.createElement=function(){"use strict";var l=j.createElement.call(this,true,'UFIWeakReferenceIcon');g.addClass(l,'uiTokenWeakReference');return l;};e.exports=k;},null);
__d("Tokenizer",["Arbiter","ArbiterMixin","CSS","DataStore","DOM","DOMQuery","Event","Focus","Input","Keys","Parent","StickyPlaceholderInput","Style","TextMetrics","Token","UserAgent_DEPRECATED","WeakToken","copyProperties","createObjectFrom","emptyFunction","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){b.__markCompiled&&b.__markCompiled();var ba=20,ca=aa(h);for(var da in ca)if(ca.hasOwnProperty(da))fa[da]=ca[da];var ea=ca===null?null:ca.prototype;fa.prototype=Object.create(ea);fa.prototype.constructor=fa;fa.__superConstructor__=ca;function fa(ga,ha,ia){"use strict";this.element=ga;this.typeahead=ha;this.input=ha.getCore().getElement();if(ia)this.init(ia.tokenarea,ia.param_name,ia.initial_info,ia.options);j.set(this.element,'Tokenizer',this);}fa.prototype.init=function(ga,ha,ia,ja){"use strict";this._handleEvents=this.handleEvents.bind(this);this.init=z;this.setTokenarea(ga);this.paramName=ha;if(!this.placeholder)this.placeholder=this.input.getAttribute('data-placeholder')||this.input.getAttribute('placeholder')||'';x(this,ja||{});this.initEvents();this.initTypeahead();this.reset(ia);this.initBehaviors();setTimeout(this.adjustWidth.bind(this),0);g.inform('Tokenizer/init',this,g.BEHAVIOR_PERSISTENT);this.inform('init',{tokens:this.getTokens()});};fa.prototype.reset=function(ga){"use strict";this.tokens=[];this.unique={};if(ga){this.populate(ga);}else k.empty(this.tokenarea);this.updateTokenarea();};fa.prototype.populate=function(ga){"use strict";var ha=[];this.tokens=this.getTokenElements().map(function(ia,ja){var ka=ga[ja];ha.push(this._tokenKey(ka));return this.createToken(ka,ia);},this);this.unique=y(ha,this.tokens);};fa.prototype.setTokenarea=function(ga){"use strict";var ha=!this.tokenarea;if(ga!==this.tokenarea){if(this.tokenarea){k.remove(this.tokenarea);for(var ia in this._tokenareaListeners)this._tokenareaListeners[ia].remove();}this._tokenareaListeners=m.listen(ga,{click:this._handleEvents,keydown:this._handleEvents});this.tokenarea=ga;}if(!ha)this.reset();};fa.prototype.getElement=function(){"use strict";return this.element;};fa.prototype.getTypeahead=function(){"use strict";return this.typeahead;};fa.prototype.getInput=function(){"use strict";return this.input;};fa.prototype.initBehaviors=function(){"use strict";this.behaviors=this.behaviors||[];if(this.behaviors instanceof Array){this.behaviors.forEach(function(ia){ia.behavior(this,ia.config);}.bind(this));}else for(var ga in (this.behaviors||{})){var ha=window.TokenizerBehaviors&&window.TokenizerBehaviors[ga];ha.call(null,this,this.behaviors[ga]);}};fa.prototype.initTypeahead=function(){"use strict";var ga=this.typeahead.getCore();ga.resetOnSelect=true;ga.setValueOnSelect=false;ga.preventFocusChangeOnTab=true;if(this.inline){var ha=this.typeahead.getView();i.addClass(ha.getElement(),'uiInlineTokenizerView');}this.typeahead.subscribe('select',function(ia,ja){return this.handleSelect(ja);}.bind(this));this.typeahead.subscribe('blur',this.handleBlur.bind(this));};fa.prototype.handleBlur=function(event){"use strict";this.inform('blur',{event:event});this.updatePlaceholder();};fa.prototype.handleSelect=function(ga){"use strict";var ha=ga.selected;if('uid' in ha){this.updateInput();this.addToken(this.createToken(ha));}};fa.prototype.initEvents=function(){"use strict";var ga=v.firefox()<4?'keypress':'keydown';m.listen(this.input,'paste',this.paste.bind(this));m.listen(this.input,ga,this.keydown.bind(this));};fa.prototype.handleEvents=function(event){"use strict";var ga=event.getTarget(),ha=ga&&this.getTokenElementFromTarget(ga);if(!ha)return;if(event.type!='keydown'||m.getKeyCode(event)==p.RETURN)this.processEvents(event,ga,ha);};fa.prototype.processEvents=function(event,ga,ha){"use strict";if(q.byClass(ga,'remove')){var ia=ha.nextSibling;ia=ia&&l.scry(ha.nextSibling,'.remove')[0];var ja=this.getTokenFromElement(ha);ja=this.addTokenData(ja,ga);this.removeToken(ja);this.focusOnTokenRemoval(event,ia);event.kill();}};fa.prototype.focusOnTokenRemoval=function(event,ga){"use strict";n.set(event.type=='keydown'&&ga||this.input);};fa.prototype.addTokenData=function(ga,ha){"use strict";return ga;};fa.prototype.keydown=function(event){"use strict";this.inform('keydown',{event:event});var ga=m.getKeyCode(event),ha=this.input;if(this.inline&&ga==p.BACKSPACE&&o.isEmpty(ha)){var ia=this.getLastToken();if(ia&&ia.isRemovable())this.removeToken(ia);}this.updateInput();};fa.prototype.paste=function(event){"use strict";this.inform('paste',{event:event});this.updateInput(true);};fa.prototype.focusInput=function(){"use strict";n.set(this.input);};fa.prototype.updateInput=function(ga){"use strict";if(!this.inline)return;setTimeout(function(){this.adjustWidth(this.input.value);if(ga)this.input.value=this.input.value;}.bind(this),20);r.setPlaceholderText(this.input,'');this.inform('resize');};fa.prototype.setPlaceholder=function(ga){"use strict";this.placeholder=ga;if(this.stickyPlaceholder)r.setPlaceholderText(this.input,ga);this.updatePlaceholder();};fa.prototype.updatePlaceholder=function(){"use strict";if(!this.inline||this.input.value)return;var ga=!this.tokens.length,ha='';if(ga||this.stickyPlaceholder){this.adjustWidth(this.placeholder);ha=this.placeholder;}else this.adjustWidth(this.input.value);r.setPlaceholderText(this.input,ha);};fa.prototype.adjustWidth=function(ga){"use strict";if(!this.inline||!this._getIsInDOM())return;if(!ga&&this.input.value==='')ga=this.placeholder;var ha=ba;if(ga!==this.placeholder||!this.getTokens().length||this.stickyPlaceholder){var ia=s.getFloat(this.getElement(),'width'),ja=this._getMetrics().measure(ga);ha=ja.width+this._getWidthOffset()+10;ha=(ha>=ia)?ia:ha;}s.set(this.input,'width',ha+'px');this.inform('resize');g.inform('reflow');};fa.prototype.getToken=function(ga){"use strict";return this.unique[ga]||null;};fa.prototype.getTokens=function(){"use strict";return this.tokens||[];};fa.prototype.getTokenElements=function(){"use strict";return l.scry(this.tokenarea,'span.uiToken');};fa.prototype.getTokenElementFromTarget=function(ga){"use strict";return q.byClass(ga,'uiToken');};fa.prototype.getTokenFromElement=function(ga){"use strict";return j.get(ga,'Token');};fa.prototype.getTokenValues=function(){"use strict";if(!this.tokens)return [];return this.tokens.map(function(ga){return ga.getValue();});};fa.prototype.getFirstToken=function(){"use strict";return this.tokens[0]||null;};fa.prototype.getLastToken=function(){"use strict";return this.tokens[this.tokens.length-1]||null;};fa.prototype.hasMaxTokens=function(){"use strict";return this.maxTokens&&this.maxTokens<=this.tokens.length;};fa.prototype.createToken=function(ga,ha){"use strict";var ia=this.getToken(this._tokenKey(ga));if(!ia)ia=ga.weak_reference?new w(ga,this.paramName):new u(ga,this.paramName);ha&&ia.setElement(ha);return ia;};fa.prototype.addToken=function(ga){"use strict";if(this.hasMaxTokens())return;var ha=this._tokenKey(ga.getInfo());if(ha in this.unique)return;this.unique[ha]=ga;this.tokens.push(ga);this.insertToken(ga);this.updateTokenarea();this.inform('addToken',ga);this.inform('changeTokens');g.inform('Form/change',{node:this.element});};fa.prototype.insertToken=function(ga){"use strict";k.appendContent(this.tokenarea,ga.getElement());};fa.prototype.removeToken=function(ga){"use strict";if(!ga)return;var ha=this.tokens.indexOf(ga);if(ha<0)return;this.tokens.splice(this.tokens.indexOf(ga),1);delete this.unique[this._tokenKey(ga.getInfo())];k.remove(ga.getElement());this.updateTokenarea();this.inform('removeToken',ga);this.inform('changeTokens');g.inform('Form/change',{node:this.element});};fa.prototype.removeAllTokens=function(){"use strict";this.reset();this.inform('changeTokens');this.inform('removeAllTokens');};fa.prototype.updateTokenarea=function(){"use strict";var ga=this.typeahead.getCore(),ha=this.getTokenValues();if(this.excludeDuplicates){this._exclusions||(this._exclusions=ga.getExclusions());ga.setExclusions(ha.concat(this._exclusions));}ga.setEnabled(!this.hasMaxTokens());this.updateTokenareaVisibility();this.updatePlaceholder();this.inform('resize');g.inform('reflow');};fa.prototype.updateTokenareaVisibility=function(){"use strict";i.conditionShow(this.tokenarea,this.tokens.length!==0);};fa.prototype._tokenKey=function(ga){"use strict";return ga.uid+(ga.freeform?':':'');};fa.prototype._getWidthOffset=function(){"use strict";if(this._widthOffset===null){var ga=this.input.clientWidth,ha=s.getFloat(this.input,'width');if(ga==ha){this._widthOffset=s.getFloat(this.input,'paddingLeft')+s.getFloat(this.input,'paddingRight');}else this._widthOffset=0;}return this._widthOffset;};fa.prototype._getMetrics=function(){"use strict";if(!this._metrics)this._metrics=new t(this.input,this.inline);return this._metrics;};fa.prototype._getIsInDOM=function(){"use strict";return this._isInDOM||(this._isInDOM=l.contains(document.body,this.input));};fa.getInstance=function(ga){"use strict";var ha=q.byClass(ga,'uiTokenizer');return ha?j.get(ha,'Tokenizer'):null;};fa.init=function(ga,ha){"use strict";ga.init(ha.tokenarea,ha.param_name,ha.initial_info,ha.options);};x(fa.prototype,{inline:false,maxTokens:null,excludeDuplicates:true,placeholder:'',_widthOffset:null,_metrics:null});e.exports=fa;},null);
__d("PhotoStore",["Arbiter","PhotoStoreCore"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();g.subscribe('update-photos',function(i,j){h.updateData(j);});e.exports=h;},null);
__d("PhotoUtils",["Event","URI"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={getImagesFromData:function(j){var k=[];for(var l in j)if(l.indexOf('image')===0)k.push(j[l]);return k;},getFBIDFromData:function(j){return j&&j.id;},getOriginalImageFromData:function(j){return j.original||j.download_image;},getDownloadURLFromData:function(j){var k=this.getOriginalImageFromData(j);if(!k)return null;var l=new h(k.uri);l.addQueryData({dl:1});return l;},getPermalinkFromData:function(j){return j.permalink;},canViewerMakeCoverPhoto:function(j){return !!j.can_viewer_make_cover_photo;},getCoverPhotoURLFromData:function(j){return new h('/profile.php').addQueryData({preview_cover:i.getFBIDFromData(j)});},preload:function(j,k,l){var m=j.getDimensions();for(var n=0;n<k.length;++n){var o=m.getBestFitImageFromPhoto(k[n],m.getMaxStageDimensions()),p=new Image();l&&g.listen(p,'load',l.bind(null,k[n]));j.getLogger().log(o.uri);p.src=o.uri;}}};e.exports=i;},null);
__d("PhotoViewState",["ArbiterMixin","PhotoStore","PhotoUtils","SpotlightViewerLoggingEvents","copyProperties","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=l(g);for(var n in m)if(m.hasOwnProperty(n))p[n]=m[n];var o=m===null?null:m.prototype;p.prototype=Object.create(o);p.prototype.constructor=p;p.__superConstructor__=m;function p(q,r,s,t,u){"use strict";this._viewer=q;this._setID=r;this._updateCallback=t;this._position=s||0;this._preloaded={};this._reverse=u;}p.prototype._fetchCallback=function(q){"use strict";if(!this._viewer.isOpen())return;this._preload(q);this._log(j.DATA_FETCH_COMPLETE);};p.prototype._preload=function(q){"use strict";i.preload(this._viewer,q,function(r){this._preloaded[i.getFBIDFromData(r)]=true;}.bind(this));};p.prototype._preloadPhotosInRange=function(q,r){"use strict";var s=[];for(var t=q;t<=r;++t){var u=h.getByIndexImmediate(this._setID,t);if(u&&!this._isPreloaded(u))s.push(u);}this._preload(s);};p.prototype._isPreloaded=function(q){"use strict";return this._preloaded[i.getFBIDFromData(q)];};p.prototype.getPosition=function(){"use strict";return this._position;};p.prototype.isValidMovement=function(q){"use strict";if(!h.hasBeenCreated(this._setID))return false;if(h.hasLooped(this._setID))return true;var r=this._position+q,s=h.getAvailableRange(this._setID),t=s.offset+s.length-1;return r>=s.offset-1&&r<=t+1;};p.prototype.getRelativeMovement=function(q){"use strict";return h.getIndexForID(this._setID,q)-this._position;};p.prototype.moveCursor=function(q){"use strict";if(!this.isValidMovement(q))return false;this._position+=q;return true;};p.prototype._page=function(q){"use strict";if(!this.moveCursor(q))return;this._log(j.PAGE_BEGIN);var r=h.getByIndexImmediate(this._setID,this._position);if(!r){this.inform('photo_fetch');this._log(j.PHOTO_FETCH);}else if(!this._isPreloaded(r))this._preload([r]);h.getByIndex(this._setID,this._position,this._updateCallback);this._loadMoreIfNecessary(q>0,p.BUFFER_SIZE);this._log(j.PAGE_COMPLETE);};p.prototype.loadMoreForwardIfNecessary=function(q){"use strict";var r=h.getAvailableRange(this._setID),s=r.offset+r.length-1,t=this._position+q;if(t>s&&!h.hasLooped(this._setID)){var u=h.getCursorByIndexImmediate(this._setID,s);h.fetchForward(this._setID,u,q,this._fetchCallback.bind(this));}else this._preloadPhotosInRange(this._position+1,t);};p.prototype.loadMoreBackwardIfNecessary=function(q){"use strict";var r=h.getAvailableRange(this._setID),s=this._position-q;if(s<r.offset&&!h.hasLooped(this._setID)){var t=h.getCursorByIndexImmediate(this._setID,r.offset);h.fetchBackward(this._setID,t,q,this._fetchCallback.bind(this));}else this._preloadPhotosInRange(s,this._position-1);};p.prototype._loadMoreIfNecessary=function(q,r){"use strict";if(q){this.loadMoreForwardIfNecessary(r);}else this.loadMoreBackwardIfNecessary(r);};p.prototype.displayFirst=function(){"use strict";if(!this._viewer.isOpen())return;h.setPreFetchCallback(this._setID,function(){this._log(j.DATA_FETCH_BEGIN);}.bind(this));var q=function(r){if(!this._isPreloaded(r))this._preload([r]);this._updateCallback(r);}.bind(this);h.getByIndex(this._setID,this._position,q);if(this._reverse){this.loadMoreBackwardIfNecessary(p.BUFFER_SIZE);}else this.loadMoreForwardIfNecessary(p.BUFFER_SIZE);};p.prototype.backward=function(){"use strict";this._page(this._reverse?1:-1);};p.prototype.forward=function(){"use strict";this._page(this._reverse?-1:1);};p.prototype._log=function(q){"use strict";this._viewer.log(q);};k(p,{BUFFER_SIZE:4});e.exports=p;},null);
__d("SpotlightViewerBottomBarGroup",["React","cx"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=g.createClass({displayName:"SpotlightViewerBottomBarGroup",render:function(){var j=this.props.itemmargin||'right',k=((j=='left'?"marginLeft":'')+(j=='right'?' '+"marginRight":'')+(' '+"_4_8i"));return (g.createElement("div",{className:k},this.props.children));}});e.exports=i;},null);
__d("SpotlightViewerBottomBarLink",["Link.react","React","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=h.createClass({displayName:"SpotlightViewerBottomBarLink",render:function(){return (h.createElement(g,h.__spread({},this.props,{className:"_4_8j _4_8k"}),this.props.children));}});e.exports=j;},null);
__d("SpotlightViewerClose",["React","TooltipLink.react","cx","fbt","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=g,m=l.PropTypes,n=g.createClass({displayName:"SpotlightViewerClose",propTypes:{position:m.oneOf(['left','right'])},getDefaultProps:function(){return {position:'right'};},render:function(){var o=(this.props.position=='left')?"_5wx3":"_5wx4",p=g.createElement("span",null,j._("Press Esc to close"));return (g.createElement(h,{className:k("_4-o9 _50-m _51an",o),onClick:this.props.onClick,tooltip:p}));}});e.exports=n;},null);
__d("SpotlightViewerImage",["React","cx"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=g.createClass({displayName:"SpotlightViewerImage",render:function(){return (g.createElement("img",{className:"_4-od",src:this.props.src,style:{width:this.props.dimensions.x,height:this.props.dimensions.y}}));}});e.exports=i;},null);
__d("SpotlightViewerCoreMixin",["PhotoLogger","PhotoStore","PhotoUtils","PhotoViewState","React","SpotlightViewerImage","SpotlightViewerLoggingEvents"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n={_displayFirstPhoto:function(){h.executePostCreate(this.props.setid,this.viewState.displayFirst.bind(this.viewState));},_getInitialPosition:function(){var o;if(!this.props.clearcache)o=h.getIndexForID(this.props.setid,this.props.photoid);if(o===(void 0)){h.clearSetCache(this.props.setid);o=0;}return o;},__displayPhoto:function(){var o=this._getInitialPosition();this.viewState=new j(this,this.props.setid,o,this._updatePhoto,this.props.reverse);this.inform('open');this._displayFirstPhoto();},componentWillMount:function(){this._logger=new g(this.getViewerID());this.log(m.OPEN_BEGIN);this.__displayPhoto();},componentDidMount:function(){this._enableSubscriptions&&this._enableSubscriptions();this.log(m.OPEN_COMPLETE);},isOpen:function(){return this.state.open;},close:function(){if(!this.isOpen())return;this.log(m.CLOSE_BEGIN);this.setState({open:false},function(){this.inform('close');this.log(m.CLOSE_COMPLETE);});},componentWillUnmount:function(){this.viewState=null;},_onClickViewport:function(o){o?this.viewState.forward():this.viewState.backward();},_getMedia:function(o,p){return (k.createElement(l,{ref:"image",src:o.uri,dimensions:p.imageDimensions}));},_getCurrentFBID:function(){return i.getFBIDFromData(this.state.photoData);},_updatePhoto:function(o){this.log(m.PHOTO_CHANGE_BEGIN);this.setState({photoData:o},function(){this.inform('photo_change',this.state.photoData);this.log(m.PHOTO_CHANGE_COMPLETE);});},getLogger:function(){return this._logger;},log:function(o){this._logger&&this._logger.logEvent(o);}};e.exports=n;},null);
__d("SpotlightViewerStageResizer",["Event","SubscriptionsHandler","Vector"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=520;function k(l,m){"use strict";this._subscriptionsHandler=new h();this._subscriptionsHandler.addSubscriptions(g.listen(window,'resize',this._resetStageDimensions.bind(this)));this._dimensions=l;this._minHeight=m.minHeight||j;this._minWidth=m.minWidth||j;this._resetStageDimensions();}k.prototype.destroy=function(){"use strict";this._dimensions=null;this._subscriptionsHandler.release();};k.prototype._resetStageDimensions=function(){"use strict";this._currentStageDimensions=new i(this._minWidth,this._minHeight);};k.prototype.getImageAndStageDimensions=function(l){"use strict";var m=this._dimensions.getBestFitDimensionsFromPhoto(l,this._dimensions.getMaxStageDimensions()),n=this._dimensions.getStageDimensions(m);this._currentStageDimensions=new i(Math.max(n.x,this._minWidth,this._currentStageDimensions.x),Math.max(n.y,this._minHeight,this._currentStageDimensions.y));var o=this._dimensions.getImageDimensionsForStage(m,this._currentStageDimensions);return {stageDimensions:this._currentStageDimensions,imageDimensions:o};};k.prototype.getCurrentStageDimensions=function(){"use strict";return this._currentStageDimensions;};e.exports=k;},null);
__d("PhotoViewerDimensions",["Event","PhotoUtils","Vector","copyProperties"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={verticalPadding:'number',horizontalPadding:'number',normalResDim:'object'};function l(m){"use strict";for(var n in m){if(!k[n])throw new Error("Unsupported extraData value '"+n+"' should not be used");if(typeof m[n]===k[n])this['_'+n]=m[n];}this._listener=g.listen(window,'resize',this._resetMaxStageDimensions.bind(this));}l.prototype.destroy=function(){"use strict";this._listener.remove();};l.prototype.getStageDimensions=function(m){"use strict";var n=this.getMaxStageDimensions(),o=new i(Math.min(m.x,n.x),Math.min(m.y,n.y)),p=o.x/o.y,q=m.x/m.y;if(p<q){o.y=Math.round(o.x/q);}else o.x=Math.round(o.y*q);return o;};l.prototype.getImageDimensionsForStage=function(m,n){"use strict";var o=m.x,p=m.y,q=n.x,r=n.y;if(o>=q||p>=r){var s=o/p,t=q/r;if(t<s){o=q;p=Math.round(q/s);}else if(t>s){o=Math.round(r*s);p=r;}else{o=q;p=r;}}return new i(o,p);};l.prototype.getMaxStageDimensions=function(){"use strict";if(!this._maxStageDimensions)this._maxStageDimensions=new i(i.getViewportDimensions().x-this._horizontalPadding,i.getViewportDimensions().y-this._verticalPadding);return this._maxStageDimensions;};l.prototype._resetMaxStageDimensions=function(){"use strict";this._maxStageDimensions=null;};l.prototype.getBestFitImageFromPhoto=function(m,n){"use strict";var o=null,p=h.getImagesFromData(m);p=p.sort(function(r,s){return s.width-r.width;});if(window.devicePixelRatio&&window.devicePixelRatio>1)n=new i(n.x*window.devicePixelRatio,n.y*window.devicePixelRatio);for(var q=0;q<p.length;q++)if(!o||p[q].width>=n.x||p[q].height>=n.y)o=p[q];return o;};l.prototype.getOriginalDimensionsFromPhoto=function(m){"use strict";var n=h.getOriginalImageFromData(m);return new i(n.width,n.height);};l.prototype.getBestFitDimensionsFromPhoto=function(m,n){"use strict";var o=this.getBestFitImageFromPhoto(m,n);return new i(o.width,o.height);};l.prototype.getVerticalPadding=function(){"use strict";return this._verticalPadding;};l.prototype.getHorizontalPadding=function(){"use strict";return this._horizontalPadding;};j(l.prototype,{_verticalPadding:40,_horizontalPadding:60,_normalResDim:{x:960,y:960}});e.exports=l;},null);
__d("SpotlightViewerDimensionMixin",["SpotlightViewerStageResizer","PhotoViewerDimensions"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={getInitialState:function(){this._dimensions=new h({verticalPadding:this.props.verticalPadding,horizontalPadding:this.props.horizontalPadding});this._resizer=new g(this._dimensions,{minHeight:this.props.minHeight,minWidth:this.props.minWidth});return {maxStageDimensions:this._dimensions.getMaxStageDimensions()};},componentWillUnmount:function(){this._resizer&&this._resizer.destroy();this._resizer=null;this._dimensions&&this._dimensions.destroy();this._dimensions=null;},getMedia:function(){if(this.state.photoData){var j=this._resizer.getImageAndStageDimensions(this.state.photoData),k=this._dimensions.getBestFitImageFromPhoto(this.state.photoData,this.state.maxStageDimensions);return this._getMedia(k,j);}else return null;},getDimensions:function(){return this._dimensions;},getStageDimensions:function(){if(this.state.photoData){return this._resizer.getImageAndStageDimensions(this.state.photoData).stageDimensions;}else return this._dimensions.getMaxStageDimensions();},getImageDimensions:function(){if(!this.state.photoData)return null;return this._resizer.getImageAndStageDimensions(this.state.photoData).imageDimensions;},onResize:function(){this.setState({maxStageDimensions:this._dimensions.getMaxStageDimensions()});}};e.exports=i;},null);
__d("SpotlightViewerPagers",["LeftRight.react","Link.react","React","cx"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=i.createClass({displayName:"SpotlightViewerPagers",render:function(){return (i.createElement(g,null,i.createElement(h,{className:"_4-oa _4-ob _50-m"}),i.createElement(h,{className:"_4-oa _4-oc _50-m"})));}});e.exports=k;},null);
__d("SpotlightViewport",["Locale","Parent","React","Vector","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=i,n=m.PropTypes,o=i.createClass({displayName:"SpotlightViewport",propTypes:{stageDimensions:n.object.isRequired,snapToPhoto:n.bool},PAGE_TO_PREV_PERCENTAGE:.2,sections:{NONE:null,FORWARD:1,BACKWARD:2},getInitialState:function(){return {currentActiveSection:this.sections.NONE,active:true};},_onMouseMove:function(event){var p=j.getEventPosition(event.nativeEvent),q=j.getElementPosition(i.findDOMNode(this)),r,s=p.x-q.x,t=s/this.props.stageDimensions.x;if(g.isRTL()){r=t>(1-this.PAGE_TO_PREV_PERCENTAGE);}else r=t<this.PAGE_TO_PREV_PERCENTAGE;if(r){this.setState({currentActiveSection:this.sections.BACKWARD});}else this.setState({currentActiveSection:this.sections.FORWARD});},_onClick:function(event){var p=this.state.currentActiveSection==this.sections.FORWARD,q=event.target;if(!h.byClass(q,"_51an"))this.props.onClick&&this.props.onClick(p);},_onMouseEnter:function(){this.setState({active:true});},_onMouseLeave:function(){this.setState({active:false});},render:function(){var p=(("_4-of")+(!this.state.active&&!this.props.active?' '+"_50-l":'')+(this.state.currentActiveSection===this.sections.BACKWARD?' '+"_516a":'')+(this.state.currentActiveSection===this.sections.FORWARD?' '+"_516b":'')+(this.props.showLoadingIndicator?' '+"_51jp":''));if(this.props.className)p=l(p,this.props.className);var q={};if(this.props.stageDimensions){var r=this.props.snapToPhoto?['maxHeight','maxWidth']:['height','width'];q[r[0]]=this.props.stageDimensions.y;q[r[1]]=this.props.stageDimensions.x;}return (i.createElement("div",{className:p,style:q,onClick:this._onClick,onMouseMove:this._onMouseMove,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},this.props.children,i.createElement("div",{className:"_4-og"},i.createElement("span",{className:"_4-oh"}),this.props.media,i.createElement("div",{className:"_4-oi"}))));}});e.exports=o;},null);
__d("SpotlightViewerAutoResize",["Event","SubscriptionsHandler","invariant"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(k){"use strict";this.$SpotlightViewerAutoResize0=k;i(typeof this.$SpotlightViewerAutoResize0.onResize==='function');}j.prototype.enable=function(){"use strict";this.$SpotlightViewerAutoResize1=new h();this.$SpotlightViewerAutoResize1.addSubscriptions(g.listen(window,'resize',this.$SpotlightViewerAutoResize0.onResize));};j.prototype.disable=function(){"use strict";this.$SpotlightViewerAutoResize1.release();delete this.$SpotlightViewerAutoResize1;};e.exports=j;},null);
__d("DirectionalDockingElement",["ArbiterMixin","CSS","DOM","DOMDimensions","Event","Run","Style","SubscriptionsHandler","ViewportBounds","getElementPosition","mixin","queryThenMutateDOM","removeFromArray"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t,u=[],v=true,w=false,x='unfixed',y='fixed_top',z='fixed_middle',aa=q(g);for(var ba in aa)if(aa.hasOwnProperty(ba))da[ba]=aa[ba];var ca=aa===null?null:aa.prototype;da.prototype=Object.create(ca);da.prototype.constructor=da;da.__superConstructor__=aa;function da(ea){"use strict";this.$DirectionalDockingElement0=ea;this.$DirectionalDockingElement1=0;if(!t){var fa=r.bind(null,function(){for(var ga=0,ha=u.length;ga<ha;ga++)u[ga].$DirectionalDockingElement2();},function(){for(var ga=0,ha=u.length;ga<ha;ga++)u[ga].$DirectionalDockingElement3();},'DirectionalDockingElement');t=new n();t.addSubscriptions(k.listen(window,'scroll',fa),k.listen(window,'resize',fa));l.onLeave(function(){while(u.length)u.pop().destroy();t.release();t=null;});}u.push(this);this.$DirectionalDockingElement4=o.getTop();this.$DirectionalDockingElement5=y;m.set(this.$DirectionalDockingElement0,'width',j.getElementDimensions(this.$DirectionalDockingElement0).width+'px');this.$DirectionalDockingElement6=i.create('div');m.set(this.$DirectionalDockingElement6,'position','relative');i.replace(this.$DirectionalDockingElement0,this.$DirectionalDockingElement6);i.appendContent(this.$DirectionalDockingElement6,this.$DirectionalDockingElement0);this.update();}da.prototype.$DirectionalDockingElement2=function(){"use strict";var ea=-p(this.$DirectionalDockingElement6).y;if(ea!==this.$DirectionalDockingElement7){this.$DirectionalDockingElement8=ea>this.$DirectionalDockingElement7?w:v;this.$DirectionalDockingElement7=ea;}this.$DirectionalDockingElement9=j.getElementDimensions(this.$DirectionalDockingElement0);this.$DirectionalDockingElementa=h.hasClass(document.documentElement,'tinyViewport');this.$DirectionalDockingElementb=document.body.scrollTop+document.documentElement.clientHeight>document.documentElement.scrollHeight;};da.prototype.$DirectionalDockingElementc=function(ea,fa){"use strict";if(this.$DirectionalDockingElementd!==ea||this.$DirectionalDockingElemente!==fa){m.apply(this.$DirectionalDockingElement0,{position:ea,top:fa+'px'});this.$DirectionalDockingElementd=ea;this.$DirectionalDockingElemente=fa;}};da.prototype.$DirectionalDockingElementf=function(){"use strict";this.$DirectionalDockingElement5=y;this.$DirectionalDockingElementc('fixed',this.$DirectionalDockingElement4);};da.prototype.$DirectionalDockingElementg=function(){"use strict";this.$DirectionalDockingElement5=z;this.$DirectionalDockingElementc('fixed',this.$DirectionalDockingElement1);};da.prototype.$DirectionalDockingElementh=function(){"use strict";this.$DirectionalDockingElement5=x;this.$DirectionalDockingElementc('absolute',this.$DirectionalDockingElementi);};da.prototype.$DirectionalDockingElement3=function(){"use strict";var ea=this.$DirectionalDockingElement9.height;if(ea!==this.$DirectionalDockingElementj){m.set(this.$DirectionalDockingElement6,'height',ea+'px');this.$DirectionalDockingElementj=ea;this.inform('changedheight');}if(this.$DirectionalDockingElement5===y){this.$DirectionalDockingElementi=this.$DirectionalDockingElement7+this.$DirectionalDockingElement4;}else if(this.$DirectionalDockingElement5===z)this.$DirectionalDockingElementi=this.$DirectionalDockingElement7+this.$DirectionalDockingElement1;if(this.$DirectionalDockingElementb)return;if(this.$DirectionalDockingElement7+this.$DirectionalDockingElement4<=0||this.$DirectionalDockingElementa){this.$DirectionalDockingElementi=0;this.$DirectionalDockingElementh();return;}if(this.$DirectionalDockingElement8===w&&this.$DirectionalDockingElement7+this.$DirectionalDockingElement1>=this.$DirectionalDockingElementi){this.$DirectionalDockingElementg();}else if(this.$DirectionalDockingElement8===v&&this.$DirectionalDockingElement7+this.$DirectionalDockingElement4<=this.$DirectionalDockingElementi){this.$DirectionalDockingElementf();}else this.$DirectionalDockingElementh();};da.prototype.update=function(){"use strict";this.$DirectionalDockingElement2();this.$DirectionalDockingElement3();};da.prototype.destroy=function(){"use strict";if(u.indexOf(this)===-1)return;s(u,this);if(this.$DirectionalDockingElement6&&this.$DirectionalDockingElement6.parentNode){i.remove(this.$DirectionalDockingElement6);this.$DirectionalDockingElement6=null;}};da.prototype.setOffset=function(ea){"use strict";this.$DirectionalDockingElement1=ea;this.update();return this;};e.exports=da;},null);
__d("DockingElement",["ArbiterMixin","CSS","DOM","DOMDimensions","Event","Run","Style","SubscriptionsHandler","getElementPosition","mixin","queryThenMutateDOM","removeFromArray"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s,t=[],u=p(g);for(var v in u)if(u.hasOwnProperty(v))x[v]=u[v];var w=u===null?null:u.prototype;x.prototype=Object.create(w);x.prototype.constructor=x;x.__superConstructor__=u;function x(y){"use strict";this.$DockingElement0=y;this.$DockingElement1=0;if(!t.length){var z=q.bind(null,function(){for(var aa=0,ba=t.length;aa<ba;aa++)t[aa].getRect();},function(){for(var aa=0,ba=t.length;aa<ba;aa++)t[aa].updateWithCache();},'DockingElement');s=new n();s.addSubscriptions(k.listen(window,'scroll',z),k.listen(window,'resize',z));l.onLeave(function(){while(t.length)t.pop().destroy();});}t.push(this);this.update();}x.prototype.getRect=function(){"use strict";var y=this.$DockingElement2?this.getPlaceholder():this.$DockingElement0;this.$DockingElement3=o(y);this.$DockingElement4=j.getElementDimensions(y);this.$DockingElement5=h.hasClass(document.documentElement,'tinyViewport');};x.prototype.updateWithCache=function(){"use strict";var y=this.$DockingElement1,z=this.getPlaceholder();if(!this.$DockingElement5&&this.$DockingElement3.y<=y){if(!this.$DockingElement2){if(!this.$DockingElement6){i.insertAfter(this.$DockingElement0,z);this.$DockingElement6=true;}h.addClass(this.$DockingElement0,'fixed_elem');h.show(z);this.$DockingElement2=true;}var aa;if(this.$DockingElement7!==y){aa={};aa.top=y+'px';this.$DockingElement7=y;}var ba=this.$DockingElement4.width;if(ba!==this.$DockingElement8){aa=aa||{};aa.width=ba+'px';this.$DockingElement8=ba;}aa&&m.apply(this.$DockingElement0,aa);var ca=this.$DockingElement4.height;if(ca!==this.$DockingElement9){m.set(z,'height',ca+'px');this.$DockingElement9=ca;this.inform('changedheight');}}else if(this.$DockingElement2){m.apply(this.$DockingElement0,{top:'',width:''});h.removeClass(this.$DockingElement0,'fixed_elem');h.hide(z);this.$DockingElement2=false;this.$DockingElement8=null;this.$DockingElement7=null;}};x.prototype.update=function(){"use strict";this.getRect();this.updateWithCache();};x.prototype.getPlaceholder=function(){"use strict";if(!this.$DockingElementa)this.$DockingElementa=i.create('div');return this.$DockingElementa;};x.prototype.destroy=function(){"use strict";if(t.indexOf(this)===-1)return;r(t,this);if(this.$DockingElementa&&this.$DockingElementa.parentNode){i.remove(this.$DockingElementa);this.$DockingElementa=null;}if(!t.length){s.release();s=null;}};x.prototype.setOffset=function(y){"use strict";this.$DockingElement1=y;this.update();return this;};e.exports=x;},null);
__d("StickyRHC",["Arbiter","DirectionalDockingElement","DockingElement","DOM","DOMDimensions","Event","LitestandMessages","Run","SubscriptionsHandler","ViewportBounds","$","csx","ge","getElementPosition","removeFromArray","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();var w=35,x=[],y;function z(da,ea){if(!ea||!ea.dom_id){x.forEach(aa);return;}var fa=q(ea.dom_id);for(var ga=0;ga<x.length;ga++)if(j.contains(x[ga].getRoot(),fa)){aa(x[ga]);return;}}function aa(da){var ea=da.getRoot(),fa=da.updateOffset.bind(da),ga=j.scry(ea,'img.img');ga.forEach(function(ha){if(ha.complete||ha.getAttribute('height')||(typeof ha.naturalHeight!=='undefined'&&ha.naturalHeight!==0))return;var ia=function(){fa();ja.remove();ka.remove();la.remove();},ja=l.listen(ha,'load',ia),ka=l.listen(ha,'error',ia),la=l.listen(ha,'abort',ia);});fa();}function ba(){x.forEach(function(da){da.updateOffset();});}function ca(da,ea){"use strict";this.$StickyRHC0=da;this.$StickyRHC1=ea?new h(da):new i(da);this.$StickyRHC2=0;this.$StickyRHC1.subscribe('changedheight',this.updateOffset.bind(this));this.updateOffset();aa(this);if(!x.length){y=new o();y.addSubscriptions(g.subscribe('header_loaded',ba),g.subscribe('netego_loaded',z),g.subscribe(m.RHC_RELOADED,function(){ba();x.forEach(aa);}),l.listen(window,'resize',v(ba)));}n.onLeave(this.destroy.bind(this));x.push(this);}ca.getInstances=function(){"use strict";return x;};ca.prototype.getRoot=function(){"use strict";return this.$StickyRHC0;};ca.prototype.destroy=function(){"use strict";this.$StickyRHC1.destroy();u(x,this);if(!x.length){y.release();y=null;}};ca.prototype.updateOffset=function(){"use strict";var da=j.scry(this.$StickyRHC0,"._4-u2"),ea=j.scry(this.$StickyRHC0,"._4-u3"),fa=j.scry(this.$StickyRHC0,"._5eh2"),ga=j.scry(this.$StickyRHC0,'.uiHeader'),ha=j.scry(this.$StickyRHC0,'.ego_unit'),ia=[].concat(da,ea,fa,ga,ha),ja=[];ia.forEach(function(ta){ja.push(t(ta).y);});ja.sort(function(ta,ua){return ta-ua;});var ka=t(this.$StickyRHC0).y,la=k.getElementDimensions(this.$StickyRHC0).height;la+=this.$StickyRHC2;var ma=p.getTop(),na=k.getViewportDimensions().height-ma;na-=w;if(typeof this.$StickyRHC3==='undefined'){var oa=s('pageFooter');this.$StickyRHC3=oa?k.getElementDimensions(oa).height:0;}na-=this.$StickyRHC3;var pa=na-la;if(la<na){pa=ma;}else for(var qa=0,ra=ja.length;qa<ra;qa++){var sa=ja[qa]-ka;if(la-sa<na){pa=ma-sa;break;}}this.$StickyRHC1.setOffset(pa+this.$StickyRHC2);};ca.prototype.setOffset=function(da){"use strict";this.$StickyRHC2=da;this.updateOffset();};ca.prototype.getOffset=function(da){"use strict";return this.$StickyRHC2;};e.exports=ca;},null);
__d("legacy:adware-scanner",["AdwareScaner"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();a.AdwareScaner=b('AdwareScaner');},3);
__d("StickerSearch",["StickerServerRequests"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h,i,j={},k={requestStickersForQuery:function(l,m){h=l;g.getStickersForQuery(l,function(n){return h===l&&m(n.payload);});},prepareTagsData:function(){if(!i)i=g.fetchTagData(function(l){j=l;});return i;},getTagByName:function(l){return j[l];},getTagsIndex:function(){return j;}};e.exports=k;},null);
__d("StickersDispatcher",["Dispatcher","StickerConstants","copyProperties","merge"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=i(new g(),{_handleUpdate:function(l,m){var n=j({payloadSource:l},m);this.dispatch(n);},handleUpdateFromViewActions:function(l){this._handleUpdate(h.PayloadSource.VIEW_ACTION,l);}});e.exports=k;},null);
__d("ProgressBarBase",["emptyFunction","requestAnimationFrame","removeFromArray","arrayContains"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=[];function l(m,n){"use strict";this._min=m||0;this._max=n||100;this._initialPosition=0;this._position=0;this._initialVelocity=0;this._velocity=0;this._acceleration=0;this.useAcceleration=true;this._targetPosition=0;this._targetTime=0;this._startTime=null;this._onComplete=g;}l.prototype.setPosition=function(m){"use strict";m=this._normalizePosition(m);this._initialPosition=m;this._position=m;this.updateMeter(this._position);this.stop();return this;};l.prototype.setCompleteHandler=function(m){"use strict";this._onComplete=m||g;return this;};l.prototype.setTarget=function(m,n){"use strict";this._stopAnimating();this._clearOnCompleteTimeout();this._targetPosition=m;var o=this._normalizePosition(m);this._targetTime=n;this._initialVelocity=this._velocity;this._initialPosition=this._position;if(this.useAcceleration){this._acceleration=2*(o-this._initialPosition-this._initialVelocity*n)/(n*n);}else{this._acceleration=0;this._velocity=this._initialVelocity=(o-this._initialPosition)/n;}if(this._position>=o){this._onComplete();}else this._start();return this;};l.prototype.setNoAcceleration=function(m){"use strict";this.useAcceleration=!m;return this;};l.prototype._clearOnCompleteTimeout=function(){"use strict";a.clearTimeout(this._onCompleteTimeout);};l.prototype.stop=function(){"use strict";this._clearOnCompleteTimeout();this._velocity=0;this._initialVelocity=0;this._acceleration=0;this._stopAnimating();return this;};l.prototype._start=function(){"use strict";this._startTime=Date.now();this._onCompleteTimeout=a.setTimeout(function(){this.setPosition(this._targetPosition);this._onComplete();}.bind(this),this._targetTime);this._startAnimating();return this;};l.prototype._loop=function(){"use strict";var m=Date.now()-this._startTime;this._position=(.5*this._acceleration*m*m)+(this._initialVelocity*m)+this._initialPosition;var n=this._velocity;this._velocity=this._acceleration*m+this._initialVelocity;var o=n<0!==this._velocity<0;if(this._position>this._normalizePosition(this._targetPosition)||o){this.setPosition(this._targetPosition);this._onComplete();}else this.updateMeter(this._position);};l.prototype.updateMeter=function(m){"use strict";throw "Unimplemented function: updateMeter";};l.prototype._normalizePosition=function(m){"use strict";return Math.min(Math.max((m-this._min)/(this._max-this._min),0),1);};l.prototype._startAnimating=function(){"use strict";if(!j(k,this)){k.push(this);if(k.length===1)h(l.prototype._requestAnimationFrameCallback);}};l.prototype._stopAnimating=function(){"use strict";i(k,this);};l.prototype._requestAnimationFrameCallback=function(){"use strict";k.forEach(function(m){m._loop();});if(k.length)h(l.prototype._requestAnimationFrameCallback);};l.setPosition=function(m,n){"use strict";m.setPosition(n);};l.setTarget=function(m,n,o){"use strict";m.setTarget(n,o);};e.exports=l;},null);
__d("ProgressBar",["ProgressBarBase","CSS","Style","cx","csx","DOM"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();for(var m in g)if(g.hasOwnProperty(m))o[m]=g[m];var n=g===null?null:g.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=g;function o(p,q,r){"use strict";g.call(this,q,r);this._root=p;this._meter=l.find(p,"div._5e4k");this._meter2=l.scry(p,"div._5e2g")[0];}o.prototype.getRoot=function(){"use strict";return this._root;};o.prototype.updateMeter=function(p){"use strict";var q=Math.min(Math.max(p,0),1);h.conditionClass(this._meter,"_5e2d",q<=0);h.conditionClass(this._meter,"_5e4j",q>=1);q=q*100+'%';i.set(this._meter,'width',q);if(this._meter2){i.set(this._meter2,'left',q);i.set(this._meter2,'width',q);}};o.prototype.changeLabel=function(p){"use strict";var q=l.scry(this._root,"span._5e2h");q.forEach(function(r){l.setContent(r,p);});return this;};e.exports=o;},null);
__d("FormSubmitOnChange",["Event","copyProperties","submitForm"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(k){"use strict";this._form=k;}j.prototype.enable=function(){"use strict";this._listener=g.listen(this._form.getRoot(),'change',this._submit.bind(this));};j.prototype.disable=function(){"use strict";this._listener.remove();this._listener=null;};j.prototype._submit=function(){"use strict";i(this._form.getRoot());};h(j.prototype,{_listener:null});e.exports=j;},null);
__d("ClearableTypeahead",["Event"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={resetOnCloseButtonClick:function(i,j){g.listen(j,'click',function(){var k=i.getCore();k.getElement().focus();k.reset();});}};e.exports=h;},null);
__d("AbstractDialogFitHeight",["CSS","DOM","Event","Style","SubscriptionsHandler","Vector","csx","cx","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=450,q=100,r=67,s=67;function t(u){"use strict";this.$AbstractDialogFitHeight0=u;}t.prototype.enable=function(){"use strict";this.$AbstractDialogFitHeight1=new k();this.$AbstractDialogFitHeight1.addSubscriptions(this.$AbstractDialogFitHeight0.subscribe('beforeshow',this.$AbstractDialogFitHeight2.bind(this)),i.listen(window,'resize',o(this.$AbstractDialogFitHeight2.bind(this))));this.$AbstractDialogFitHeight3=h.find(this.$AbstractDialogFitHeight0.getRoot(),"._4-i2");g.addClass(this.$AbstractDialogFitHeight3,"_5pfh");this.$AbstractDialogFitHeight4=q;if(h.scry(this.$AbstractDialogFitHeight0.getRoot(),"._4-i0").length)this.$AbstractDialogFitHeight4+=r;if(h.scry(this.$AbstractDialogFitHeight0.getRoot(),"._5a8u").length)this.$AbstractDialogFitHeight4+=s;};t.prototype.disable=function(){"use strict";this.$AbstractDialogFitHeight1.release();this.$AbstractDialogFitHeight1=null;g.removeClass(this.$AbstractDialogFitHeight3,"_5pfh");};t.prototype.$AbstractDialogFitHeight2=function(){"use strict";var u=l.getViewportDimensions().y,v=u-this.$AbstractDialogFitHeight4;j.set(this.$AbstractDialogFitHeight3,this.getHeightProperty(),Math.max(p,v)+'px');this.$AbstractDialogFitHeight0.updatePosition();};e.exports=t;},null);