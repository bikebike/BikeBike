/*!CK:3934515273!*//*1427086765,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["0WSD5"]); }

__d("ComposerTargetType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={SELF_USER:"feed",OTHER_USER:"wall",GROUP:"group",PAGE:"page",EVENT:"event"};},null);
__d("ComposerType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={INLINE:"inline",ADVANCED:"advanced",NORMAL:"normal"};},null);
__d("ComposerVersion",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={MBASIC_LEGACY:"legacy",MBASIC_AMBER:"amber",MBASIC_LEGACY_SHARE:"legacy_share",MBASIC_AMBER_SHARE:"amber_share",WWW_LEGACY:"www_legacy"};},null);
__d("ComposerWaterfallEvent",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={COMPOSER_CANCEL:"composer_cancel",COMPOSER_CANCEL_INTENT:"intent_composer_cancel",COMPOSER_ENTRY:"composer_entry",COMPOSER_NOT_RENDERED:"composer_not_renderer",COMPOSER_POST:"composer_post",COMPOSER_POST_CANCEL:"composer_post_cancel",COMPOSER_POST_FAILURE:"composer_post_failure",COMPOSER_POST_FAILURE_FATAL:"composer_post_fatal_failure",COMPOSER_POST_FAILURE_GIVEUP:"composer_post_giveup_failure",COMPOSER_POST_SUCCESS:"composer_post_success",COMPOSER_POST_COMPLETED:"composer_post_completed",COMPOSER_WRITTEN:"composer_written",ALBUM_ADD:"add_album",ALBUM_CANCEL:"cancel_album",ALBUM_INTENT:"intent_album",ALBUM_REMOVE:"remove_album",FRIEND_TAG_ADD:"add_friend_tag",FRIEND_TAG_CANCEL:"cancel_friend_tag",FRIEND_TAG_INTENT:"intent_friend_tag",FRIEND_TAG_REMOVE:"remove_friend_tag",FRIEND_TAG_SEARCH:"search_friend_tag",FRIEND_SHOW_MORE:"show_more_friend_tag",LOCATION_ADD:"add_location",LOCATION_CANCEL:"cancel_location",LOCATION_INTENT:"intent_location",LOCATION_REMOVE:"remove_location",LOCATION_SCROLL:"scroll_location",LOCATION_SEARCH:"search_location",MINUTIAE_ADD:"add_minutiae",MINUTIAE_CANCEL:"cancel_minutiae",MINUTIAE_CHANGE_ICON:"change_icon_minutiae",MINUTIAE_CHANGE_ICON_CANCEL:"change_icon_cancel_minutiae",MINUTIAE_CHANGE_ICON_INTENT:"change_icon_intent_minutiae",MINUTIAE_INTENT:"intent_minutiae",MINUTIAE_REMOVE:"remove_minutiae",MINUTIAE_SCROLL:"scroll_minutiae",MINUTIAE_SEARCH:"search_minutiae",MINUTIAE_TYPE_CLICK:"type_click_minutiae",MINUTIAE_SEE_MORE:"see_more_minutiae",MINUTIAE_CHAIN_SKIP:"skip_chain_minutiae",MINUTIAE_CHAIN_SUGGEST:"suggest_chain_minutiae",MINUTIAE_ICONPICKER_QUERY:"minutiae_iconpicker_query",MINUTIAE_ICONPICKER_BOOTSTRAP:"minutiae_iconpicker_bootstrap",MINUTIAE_ICONPICKER_SELECT:"minutiae_iconpicker_select",MEDIA_INTENT:"intent_media",MEDIA_CANCEL:"cancel_media",PHOTO_ADD:"add_photo",PHOTO_ADD_FAILURE:"add_photo_failure",PHOTO_ADD_SUCCESS:"add_photo_success",PHOTO_REMOVE:"remove_photo",PRIVACY_ADD:"add_privacy",PRIVACY_CANCEL:"cancel_privacy",PRIVACY_INTENT:"intent_privacy",PRIVACY_SCROLL:"scroll_privacy",PRIVACY_SEE_ALL_LISTS:"see_all_lists_privacy",SELECT_FRIEND_TIMELINE_INTENT:"intent_select_friend_timeline",SELECT_FRIEND_TIMELINE_ADD:"add_select_friend_timeline",SELECT_FRIEND_TIMELINE_CANCEL:"cancel_select_friend_timeline",SERVER_POST_BEGIN:"server_composer_post_begin",SERVER_POST_FAILURE:"server_composer_post_failure",SERVER_POST_SUCCESS:"server_composer_post_succeeded",POST_POST_WITH_TAG_BEGIN:"post_post_with_tag_begin",POST_POST_WITH_TAG_FAILURE:"post_post_with_tag_failure",POST_POST_WITH_TAG_SUCCESS:"post_post_with_tag_success",TARGET_SELECTOR_INTENT:"intent_target_selector",TARGET_SELECTOR_CANCEL:"cancel_target_selector",VIDEO_ADD:"add_video",VIDEO_ADD_FAILURE:"add_video_failure",VIDEO_ADD_SUCCESS:"add_video_success",VIDEO_REMOVE:"remove_video"};},null);
__d("ComposerXAjaxEndpoint",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={ADS_MEDIA_UPLOAD:"\/ajax\/ads\/create\/composerx\/attachment\/media\/upload\/",ADS_ATTACHMENT_STATUS:"\/ajax\/ads\/create\/composerx\/attachment\/status\/",MEDIA_UPLOAD:"\/ajax\/composerx\/attachment\/media\/upload\/"};},null);
__d("ComposerXContextConfig",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={propertyNames:{actorID:"ACTOR_ID",postID:"POST_ID",bootloadAttachmentsImmediately:"BOOTLOAD_ATTACHMENTS_IMMEDIATELY"},propertyValues:{ACTOR_ID:"actorID",POST_ID:"postID",BOOTLOAD_ATTACHMENTS_IMMEDIATELY:"bootloadAttachmentsImmediately"}};},null);
__d("PrivacyRemindersLoggingTypes",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={ONLY_ME_IMPRESSION:"only_me_impression",ONLY_ME_CONVERSION:"only_me_conversion",EVERYONE_IMPRESSION:"everyone_impression",EVERYONE_CONVERSION:"everyone_conversion",EVERYONE_TESTS_IMPRESSION:"everyone_tests_impression",EVERYONE_TESTS_CONVERSION:"everyone_tests_conversion",PUBLIC_POSTING_FILTER_NUX_IMPRESSION:"public_posting_filter_nux_impression",PUBLIC_POSTING_FILTER_NUX_CONVERSION:"public_posting_filter_nux_conversion",DELTA_EVERYONE_IMPRESSION:"delta_everyone_impression",DELTA_EVERYONE_CONVERSION:"delta_everyone_conversion",DELTA_EVERYONE_OK_BUTTON_CLICKED:"delta_everyone_ok_button_clicked",DELTA_EVERYONE_CHANGE_BUTTON_CLICKED:"delta_everyone_change_button_clicked"};},null);
__d("PUWApplications",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={WEB_SIMPLE:"web_simple",WEB_FLASH:"web_flash",WEB_HTML5:"web_html5",WEB_COMPOSER:"web_composer",WEB_ARCHIVE:"web_archive",WEB_MESSENGER:"web_messenger",WEB_OMNIPICKER:"web_omnipicker",WEB_MUSE_OMNIPICKER:"web_muse_omnipicker",WEB_SAY_THANKS:"web_say_thanks",WEB_GOODWILL_CAMPAIGN_OMNIPICKER:"web_goodwill_campaign_omnipicker",WEB_M_ZERO:"web_m_zero",WEB_M_BASIC:"web_m_basic",WEB_M_TOUCH:"web_m_touch",MOBILE_FB4IOS:"mobile_fb4ios",MOBILE_FB4IOS_SNAP:"mobile_fb4ios_snap",MOBILE_FB4A:"mobile_fb4a",MOBILE_PMA_ANDROID:"mobile_pma_android",MOBILE_PMA_IOS:"mobile_pma_ios",THIRD_PARTY:"third_party"};},null);
__d("PUWMethods",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={DRAGDROP:"dragdrop",FILE_SELECTOR:"file_selector",VAULT:"vault",RECENT_PHOTOS:"recent_photos",PHOTOS_OF_YOU:"photos_of_you",METHOD_EDITOR:"editor",SUGGESTIONS:"suggestions",CAMERA:"camera",COPYPASTE:"copypaste"};},null);
__d("PUWSteps",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={CLIENT_FLOW_BEGIN:"client_flow_begin",CLIENT_SELECT_BEGIN:"client_select_begin",CLIENT_SELECT_SUCCESS:"client_select_success",CLIENT_SELECT_CANCEL:"client_select_cancel",CLIENT_SELECT_FAIL:"client_select_fail",CLIENT_FLOW_POST:"client_flow_post",CLIENT_TRANSFER_BATCH_BEGIN:"client_transfer_batch_begin",CLIENT_UPLOAD_BEGIN:"client_upload_begin",CLIENT_ATTACH_PHOTO:"client_attach_photo",CLIENT_PROCESS_BEGIN:"client_process_begin",CLIENT_PROCESS_SUCCESS:"client_process_success",CLIENT_PROCESS_CANCEL:"client_process_cancel",CLIENT_PROCESS_SKIP:"client_process_skip",CLIENT_PROCESS_FAIL:"client_process_fail",CLIENT_PROCESS_UNAVAILABLE:"client_process_unavailable",CLIENT_TRANSFER_ENQUEUE:"client_transfer_enqueue",CLIENT_TRANSFER_BEGIN:"client_transfer_begin",CLIENT_TRANSFER_SUCCESS:"client_transfer_success",CLIENT_TRANSFER_CANCEL:"client_transfer_cancel",CLIENT_TRANSFER_FAIL:"client_transfer_fail",CLIENT_TRANSFER_MANUAL_RETRY:"client_transfer_manual_retry",CLIENT_UPLOAD_SUCCESS:"client_upload_success",CLIENT_UPLOAD_FAIL:"client_upload_fail",CLIENT_UPLOAD_CANCEL:"client_upload_cancel",CLIENT_UPLOAD_REMOVE:"client_upload_remove",CLIENT_FACEREC_BEGIN:"client_facerec_begin",CLIENT_FACEREC_SUCCESS:"client_facerec_success",CLIENT_FACEREC_FAIL:"client_facerec_fail",CLIENT_PHOTO_PREVIEW_OPEN:"client_photo_preview_open",CLIENT_PHOTO_PREVIEW_CLOSE:"client_photo_preview_close",CLIENT_TRANSFER_BATCH_SUCCESS:"client_transfer_batch_success",CLIENT_TRANSFER_BATCH_CANCEL:"client_transfer_batch_cancel",CLIENT_TRANSFER_BATCH_FAIL:"client_transfer_batch_fail",CLIENT_PUBLISH_ENQUEUE:"client_publish_enqueue",CLIENT_PUBLISH_BEGIN:"client_publish_begin",CLIENT_PUBLISH_SUCCESS:"client_publish_success",CLIENT_PUBLISH_FAIL:"client_publish_fail",CLIENT_ATTEMPT_FAIL:"client_attempt_fail",CLIENT_FLOW_SUCCESS:"client_flow_success",CLIENT_FLOW_FATAL:"client_flow_fatal",CLIENT_FLOW_GIVEUP:"client_flow_giveup",CLIENT_FLOW_CANCEL:"client_flow_cancel",CLIENT_FLOW_FAIL:"client_flow_fail",CLIENT_FLOW_INCOMPLETE:"client_flow_incomplete",CLIENT_ATTEMPT_INCOMPLETE:"client_attempt_incomplete",CLIENT_FLOW_RETRY:"client_flow_retry",CLIENT_ATTEMPT_RETRY:"client_attempt_retry",CLIENT_DIAGNOSTIC:"client_diagnostic",CLIENT_QUALITY_SWITCH:"client_quality_switch",CLIENT_CANCEL_SURVEY:"client_cancel_survey",CLIENT_PHOTO_EDIT_BEGIN:"client_photo_edit_begin",CLIENT_PHOTO_EDIT_SUCCESS:"client_photo_edit_success",SERVER_UPLOAD_BEGIN:"server_upload_begin",SERVER_UPLOAD_SUCCESS:"server_upload_success",SERVER_UPLOAD_FAIL:"server_upload_fail",SERVER_PUBLISH_BEGIN:"server_publish_begin",SERVER_PUBLISH_SUCCESS:"server_publish_success",SERVER_PUBLISH_FAIL:"server_publish_fail",SERVER_RECEIVER_BEGIN:"server_receiver_begin",SERVER_RECEIVER_PUBLISH_BEGIN:"server_receiver_publish_begin",SERVER_SENTRY_RESTRICTION:"server_sentry_restriction"};},null);
__d("SuggestionConfig",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={GROUP_POST_COMPOSER:"grouppostcomposer",OG_SUGGESTION_BY_INPUT:"ogsuggestionbyinput",COMPOSER_ENTRY_BOOTSTRAP:"composerentrybootstrap",MTOUCH_COMPOSER_ENTRY_BOOTSTRAP:"mtouchcomposerentrybootstrap",MTOUCH_COMPOSER_LOAD_VERBS:"mtouchcomposerloadverbs"};},null);
__d("SuggestionUIPresentation",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={FLYOUT:1,TAGGER_BADGE:2,ADD_TAG:3,SEMI_INLINE:4,TOP_OF_VERBS:5};},null);
__d("TagExpansionButtonConfig",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={FRIENDS_OF_TAGGED:"friends_of_tagged",TAGGED_ONLY:"tagged_only"};},null);
__d("UFIOrderingModeSelector.react",["InlineBlock.react","Link.react","LoadingIndicator.react","React","Image.react","ReactXUIMenu","PopoverMenu.react","cx","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=j,q=p.PropTypes,r=l.SelectableMenu,s=l.SelectableItem,t=j.createClass({displayName:"UFIOrderingModeSelector",propTypes:{currentOrderingMode:q.string,onOrderChanged:q.func,orderingmodes:q.array.isRequired},getInitialState:function(){var u=null;this.props.orderingmodes.map(function(v){if(v.selected)u=v;});return {selectedMode:u};},onMenuItemClick:function(u,v){var w=v.item.getValue();this.props.orderingmodes.map(function(x){if(x.value===w)this.setState({selectedMode:x});}.bind(this));this.props.onOrderChanged(w);},render:function(){var u=null;if(this.props.currentOrderingMode!=this.state.selectedMode.value)u=j.createElement(i,{className:"UFIOrderingModeSelectorLoading",color:"white",size:"small"});var v=j.createElement(r,{onItemClick:this.onMenuItemClick},this.props.orderingmodes.map(function(w){return (j.createElement(s,{key:w.value,value:w.value,selected:w.value===this.state.selectedMode.value},w.name));}.bind(this)));return (j.createElement("div",{className:"UFIOrderingModeSelector"},u,j.createElement(g,null,j.createElement(m,{className:"UFIOrderingModeSelectorPopover",menu:v,alignh:"right"},j.createElement(h,null,this.state.selectedMode.name,j.createElement(k,{className:"UFIOrderingModeSelectorDownCaret",src:o('/images/ui/xhp/link/more/down_caret.gif')}))))));}});e.exports=t;},null);
__d("ComposerXAttachmentBootstrap",["CSS","Form","Parent","URI","cx"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=[],m={bootstrap:function(n){m.load(i.byTag(n,'form'),n.getAttribute('data-endpoint'));},load:function(n,o,p){var q=j(o).addQueryData({composerurihash:m.getURIHash(o)});g.conditionClass(n,"_fu",p);var r=i.byClass(n,"_2_4");g.removeClass(r,'async_saving');h.setDisabled(n,false);n.action=q.toString();h.bootstrap(n);},getURIHash:function(n){if(n==='initial')return 'initial';var o=l.indexOf(n);if(o!==-1){return o+'';}else{o=l.length;l[o]=n;return o+'';}}};e.exports=m;},null);
__d("ComposerXContext",["ComposerXContextConfig","invariant"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=function(k){return g.propertyNames[k];};function j(k){"use strict";this.$ComposerXContext0={};for(var l in k)this.setProperty(l,k[l]);}j.prototype.getProperty=function(k){"use strict";h(i(k));return this.$ComposerXContext0[k];};j.prototype.setProperty=function(k,l){"use strict";h(i(k));this.$ComposerXContext0[k]=l;return this;};j.PROPERTIES=g.propertyValues;e.exports=j;},null);
__d("ComposerXSessionIDs",["DOM","cx"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(){return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(l){var m=Math.random()*16|0,n=l=='x'?m:(m&3|8);return n.toString(16);});}var j={},k={getSessionID:function(l){return j[l];},resetSessionID:function(l){j[l]=i();},createSessionIDInput:function(l){return g.create('input',{type:'hidden',name:'composer_session_id',className:"_5r_b",value:l});}};e.exports=k;},null);
__d("ShareModeConst",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={SELF_PAGE:'selfpage',PAGE:'page',SELF_POST:'self',FRIEND:'friend',GROUP:'group',ALBUM:'album',MESSAGE:'message'};e.exports=g;},null);
__d("ComposerXMarauderLogger",["Event","ComposerTargetType","ComposerType","ComposerVersion","ComposerWaterfallEvent","ComposerXSessionIDs","MarauderLogger","ShareModeConst"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o={},p=i.NORMAL,q=j.WWW_LEGACY,r={logEvent:function(s,t,u){if(!u)u={};var v=o[t],w=l.getSessionID(t);if(!v||!w)return;if(u.logOncePerSession){if(!v.loggedEventTypes[w])v.loggedEventTypes[w]={};if(v.loggedEventTypes[w][s])return;v.loggedEventTypes[w][s]=true;}var x=Object.assign({},u.extraData,{composer_type:p,composer_version:q,target_type:v.targetType,ref:v.entryPointRef});if(u.logDetails){x.has_photo=v.hasPhoto;x.has_video=v.hasVideo;x.xy_tag_count=v.numXYTags;x.with_tag_count=v.numWithTags;x.tags_user=v.numUserTags;}m.log(s,'composer',x,(void 0),(void 0),w);},registerComposer:function(s,t,u){o[s.id]={targetType:t,entryPointRef:u,loggedEventTypes:{},hasPhoto:false,hasVideo:false,numWithTags:0,numXYTags:0,numUserTags:0};},updateHasPhoto:function(s,t){if(!o[s])return;o[s].hasPhoto=t;},updateHasVideo:function(s,t){if(!o[s])return;o[s].hasVideo=t;},updateNumWithTags:function(s,t){if(!o[s])return;o[s].numWithTags=t;},updateNumXYTags:function(s,t){if(!o[s])return;o[s].numXYTags=t;o[s].numWithTags=o[s].numWithTags-t;},updateNumUserTags:function(s,t){if(!o[s])return;o[s].numUserTags=t;},listenForPostEvents:function(s,t){if(!t)return [];return [g.listen(t,'submit',function(){r.logPost(s);}),g.listen(t,'success',function(){r.logPostSuccess(s);}),g.listen(t,'error',function(event){r.logPostFailure(s,{error_info:{error_code:event.data.response.error,error_description:event.data.response.errorDescription,error_summary:event.data.response.errorSummary}});})];},setShareMode:function(s,t){var u=o[s];if(!u)return;switch(t){case n.SELF_POST:u.targetType=h.SELF_USER;break;case n.FRIEND:u.targetType=h.OTHER_USER;break;case n.PAGE:case n.SELF_PAGE:u.targetType=h.PAGE;break;case n.GROUP:u.targetType=h.GROUP;break;default:u.targetType=h.OTHER;}},logEntry:function(s,t){if(typeof t==='string')return;r.logEvent(k.COMPOSER_ENTRY,s,{logOncePerSession:true,extraData:t});},logCompleted:function(s,t){r.logEvent(k.COMPOSER_POST_COMPLETED,s,{extraData:t});},logPost:function(s,t){r.logEvent(k.COMPOSER_POST,s,{extraData:t});},logPostSuccess:function(s,t){r.logEvent(k.COMPOSER_POST_SUCCESS,s,{extraData:t});},logPostFailure:function(s,t){r.logEvent(k.COMPOSER_POST_FAILURE,s,{extraData:t});}};e.exports=r;},null);
__d("ComposerXSessionIDInserter",["ComposerXSessionIDs","DOM","DOMQuery","Event","Parent","csx","cx","onEnclosingPageletDestroy"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o={init:function(p){var q=j.listen(p,'submit',o._onSubmit);n(p,function(){q.remove();});},_onSubmit:function(p){o.insertSessionInput(p.getTarget());},insertSessionInput:function(p){var q=k.byClass(p,"_119");if(!q)return;var r=g.getSessionID(q.id);if(!r)return;var s=i.scry(p,"._5r_b")[0];if(!s){h.prependContent(p,g.createSessionIDInput(r));}else s.value=r;}};e.exports=o;},null);
__d("ComposerXStore",["Arbiter","ge"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={};function j(l,m){return 'ComposerX/'+l+'/'+m;}var k={set:function(l,m,n){if(!i[l])i[l]={};i[l][m]=n;g.inform(j(l,m),{},g.BEHAVIOR_STATE);},get:function(l,m){if(i[l])return i[l][m];return null;},getAllForComposer:function(l){return i[l]||{};},waitForComponents:function(l,m,n){g.registerCallback(n,m.map(j.bind(null,l)));}};g.subscribe('page_transition',function(){for(var l in i)if(!h(l))delete i[l];});e.exports=k;},null);
__d("ComposerX",["ActorURI","Arbiter","ComposerXAttachmentBootstrap","ComposerXContext","ComposerXMarauderLogger","ComposerXSessionIDs","ComposerXSessionIDInserter","ComposerXStore","CSS","DOM","DOMQuery","PrivacyConst","PrivacySelectorNewDispatcher","URI","SubscriptionsHandler","arrayContains","copyProperties","csx","cx","getObjectValues","removeFromArray"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){b.__markCompiled&&b.__markCompiled();var ba='any';function ca(da){"use strict";this._root=da;this._composerID=da.id;this._attachments={};this._context=new j({});l.resetSessionID(this._composerID);m.init(this._root);this._subscriptionsHandler=new u();this._subscriptionsHandler.addSubscriptions(h.subscribe(['composer/publish','composer/close'],function(ea,fa){if(fa.composer_id===this._composerID)this.reset();}.bind(this)));this._subscriptionsHandler.addSubscriptions.apply(this._subscriptionsHandler,k.listenForPostEvents(this._composerID,this._getContent()));this._attachmentFetchForm=q.find(da,"._2_4");}ca.prototype.getAttachment=function(da,ea,fa){"use strict";da=this._augmentURI(da);var ga=i.getURIHash(da);this._endpointHashToShow=ga;var ha=this._attachments[ga];if(ha){this._showAttachmentAfterComponentsLoaded(ga,fa);}else this.fetchAttachmentData(da,ea);};ca.prototype.fetchAttachmentData=function(da,ea){"use strict";da=this._augmentURI(da);var fa=i.getURIHash(da);if(this._attachments[fa])return;if(!v(this._currentFetchEndpoints,fa)){i.load(this._attachmentFetchForm,da,ea);this._currentFetchEndpoints.push(fa);}};ca.prototype.setAttachment=function(da,ea,fa,ga){"use strict";aa(this._currentFetchEndpoints,da);this._setupAttachment(da,ea,fa,ga);this._showAttachmentAfterComponentsLoaded(da,false);};ca.prototype.setInitialAttachment=function(da,ea,fa,ga,ha){"use strict";if(ha)this._context=ha;da=this._augmentURI(da);var ia=i.getURIHash(da);this._setupAttachment(ia,ea,fa,ga);this._initialAttachmentEndpoint=da;if(!this._currentInstance)this._showAttachmentAfterComponentsLoaded(ia,true);};ca.prototype.setComponent=function(da,ea){"use strict";if(!n.get(this._composerID,da)){n.set(this._composerID,da,ea);p.appendContent(this._attachmentFetchForm,p.create('input',{type:'hidden',name:'loaded_components[]',value:da}));}};ca.prototype.reset=function(){"use strict";if(this._currentInstance){this._currentInstance.cleanup();this._currentInstance=null;}l.resetSessionID(this._composerID);for(var da in this._attachments)this._attachments[da].instance.reset();var ea=n.getAllForComposer(this._composerID);z(ea).forEach(function(ha){if(ha.reset)ha.reset(ha);});var fa=n.get(this._composerID,'mainprivacywidget'),ga=fa&&fa.instance&&fa.instance.getInstance().getInstance();if(ga&&ga.isComposerWithDefault()){ga.selectDefaultOption();s.handleUpdateFromSelector({selector_type:r.PrivacyField.DEFAULT_COMPOSER.toString(),post_param:ga.getSelectedPostParam(),unique_value:'_reloadDefaultSelectors'});}this.getAttachment(this._initialAttachmentEndpoint,false,true);h.inform('composer/reset');};ca.prototype.destroy=function(){"use strict";this._subscriptionsHandler.release();};ca.prototype.addPlaceholders=function(da,ea){"use strict";var fa;for(var ga in this._attachments){fa=this._attachments[ga];if(fa.instance===da){ea.forEach(function(ha){fa.placeholders.push(ha);fa.required_components.push(ha.component_name);});break;}}if(this._currentInstance===da)this._fillPlaceholders(ea);};ca.prototype.hasAttachmentWithClassName=function(da){"use strict";return q.scry(this._root,'.'+da).length>0;};ca.prototype.showAttachmentThrobber=function(){"use strict";o.addClass(this._attachmentFetchForm,'async_saving');};ca.prototype.hideAttachmentThrobber=function(){"use strict";o.removeClass(this._attachmentFetchForm,'async_saving');};ca.prototype.getContext=function(){"use strict";return this._context;};ca.prototype.getID=function(){"use strict";return this._composerID;};ca.prototype._setupAttachment=function(da,ea,fa,ga){"use strict";ea.setComposerID(this._composerID);this._attachments[da]={instance:ea,placeholders:fa,required_components:ga};var ha=this._getContent(),ia=ea.getRoot();if(ia.parentNode!==ha){o.hide(ia);p.appendContent(ha,ia);}};ca.prototype._getContent=function(){"use strict";return q.find(this._root,"div._55d0");};ca.prototype._showAttachment=function(da,ea,fa,ga){"use strict";if(this._currentInstance===da)return;if(this._endpointHashToShow===ba){this._endpointHashToShow=null;}else if(this._endpointHashToShow!==ea)return;if(this._currentInstance){if(!this._currentInstance.canSwitchAway())return;this._currentInstance.cleanup();}this._currentInstance=da;var ha=this._getContent().childNodes,ia=da.getRoot();for(var ja=0;ja<ha.length;ja++)if(ha[ja]!==ia)o.hide(ha[ja]);o.show(ia);this._fillPlaceholders(fa);da.initWithComponents(ga);if(this._context.getProperty(j.PROPERTIES.BOOTLOAD_ATTACHMENTS_IMMEDIATELY))if(typeof da.bootloadAttachments==='function')da.bootloadAttachments();this._setAttachmentSelectedClass(da.attachmentClassName);h.inform('composer/initializedAttachment',{composerRoot:this._root,isInitial:ga});};ca.prototype._showAttachmentAfterComponentsLoaded=function(da,ea){"use strict";var fa=this._attachments[da];n.waitForComponents(this._composerID,fa.required_components,this._showAttachment.bind(this,fa.instance,da,fa.placeholders,ea));};ca.prototype._fillPlaceholders=function(da){"use strict";da.forEach(function(ea){var fa=n.get(this._composerID,ea.component_name);if(fa.element&&ea.element!==fa.element.parentNode)p.setContent(ea.element,fa.element);}.bind(this));};ca.prototype._setAttachmentSelectedClass=function(da){"use strict";var ea=q.scry(this._root,"._519b")[0],fa;if(ea){o.removeClass(ea,"_519b");fa=q.scry(ea,'*[aria-pressed="true"]')[0];if(fa)fa.setAttribute('aria-pressed','false');}if(da){var ga=q.scry(this._root,'.'+da)[0];if(ga){o.addClass(ga,"_519b");fa=q.scry(ga,'*[aria-pressed="false"]')[0];if(fa)fa.setAttribute('aria-pressed','true');}}};ca.prototype._augmentURI=function(da){"use strict";var ea=this._context.getProperty(j.PROPERTIES.ACTOR_ID),fa=(ea)?g.create(da,ea):new t(da),ga=this._context.getProperty(j.PROPERTIES.POST_ID);if(ga)fa.addQueryData('post_id',ga);return fa.toString();};w(ca.prototype,{_endpointHashToShow:ba,_currentFetchEndpoints:[],_initialAttachmentEndpoint:''});e.exports=ca;},null);
__d("ComposerXAttachment",["ComposerXStore","copyProperties"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(){"use strict";}i.prototype.getRoot=function(){"use strict";};i.prototype.initWithComponents=function(j){"use strict";};i.prototype.cleanup=function(){"use strict";};i.prototype.reset=function(){"use strict";};i.prototype.getComponent=function(j){"use strict";return g.get(this._composerID,j);};i.prototype.getComponentInstance=function(j){"use strict";var k=g.get(this._composerID,j);return k&&k.instance;};i.prototype.canSwitchAway=function(){"use strict";return true;};i.prototype.setComposerID=function(j){"use strict";this._composerID=j;};i.prototype.getComposerID=function(){"use strict";return this._composerID;};i.prototype.allowOGTagPreview=function(){"use strict";return false;};h(i.prototype,{attachmentClassName:''});e.exports=i;},null);
__d("registerForLeaveWarning",["PageTransitions","Run","URI","createCancelableFunction","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();function l(n){var o=i.getNextURI(),p=j(n);h.onBeforeUnload(function(){return m(p,o);});return p;}function m(n,o){var p=g.getMostRecentURI(),q=i.getNextURI(),r=p.getQueryData().hasOwnProperty('theater')&&o.path===q.path,s=q.getQueryData().hasOwnProperty('theater'),t=a.DialogNavigationStack&&a.DialogNavigationStack.isActiveURI(q);if(r||s||t){h.onAfterLoad(function(){h.onBeforeUnload(function(){return m(n,o);});});return;}if(a.Dialog&&a.Dialog.getCurrent())return;if(n())return k._("You haven't finished your post yet. Do you want to leave without finishing?");}e.exports=l;},null);
__d("ComposerXController",["ActorURI","Arbiter","ComposerX","ComposerXMarauderLogger","ComposerXAttachmentBootstrap","ComposerXContext","Event","Parent","$","cx","emptyFunction","ge","invariant","registerForLeaveWarning"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();var u={},v={},w={};function x(ba){var ca=r(ba);if(!ca)return null;var da=n.byClass(o(ba),"_119"),ea=da.id;if(!w[ea])w[ea]=new i(da);return w[ea];}function y(ba){var ca=x(ba);s(ca!==null);return ca;}function z(ba){if(!v[ba])return;v[ba].forEach(function(ca){return ca.cancel();});delete v[ba];}var aa={registerConditionForComposerCancel:function(ba,ca){var da=y(ba).getID();if(!(da in u))u[da]=[];u[da].push(ca);if(!(da in v))v[da]=[];v[da].push(t(ca));},hasChanges:function(ba){var ca=u[ba];if(!ca)return false;return ca.some(function(da){return da();});},getAttachment:function(ba,ca,da){var ea=y(ba);ea.getAttachment(ca,da);},fetchAttachmentData:function(ba,ca,da){y(ba).fetchAttachmentData(ca,da);},setAttachment:function(ba,ca,da,ea,fa){var ga=x(ba);if(ga)ga.setAttachment(ca,da,ea,fa);},setInitialAttachment:function(ba,ca,da,ea,fa,ga){var ha=y(ba);ha.setInitialAttachment(ca,da,ea,fa,ga);},setComponent:function(ba,ca,da){var ea=x(ba);if(ea)ea.setComponent(ca,da);},reset:function(ba){var ca=y(ba);ca.reset();},holdTheMarkup:q,getEndpoint:function(ba,ca,da){var ea=y(ba),fa=ea.getContext();ca=g.create(ca,fa.getProperty(l.PROPERTIES.ACTOR_ID)).toString();k.load(ea._attachmentFetchForm,ca,da);},addPlaceholders:function(ba,ca,da){var ea=y(ba);ea.addPlaceholders(ca,da);},hasAttachmentWithClassName:function(ba,ca){var da=y(ba);return da.hasAttachmentWithClassName(ca);},showAttachmentThrobber:function(ba){var ca=y(ba);ca.showAttachmentThrobber();},hideAttachmentThrobber:function(ba){var ca=y(ba);ca.hideAttachmentThrobber();},logEventForAttachment:function(ba,ca){m.listen(ba,'click',function(){var da=aa.getComposerID(ba);j.logEvent(ca,da);});},getComposerID:function(ba){return y(ba).getID();},destroyComposer:function(ba){if(!(ba in w))return;w[ba].destroy();delete w[ba];delete u[ba];z(ba);}};k.bootstrap=function(ba){aa.getAttachment(ba,ba.getAttribute('data-endpoint'));};h.subscribe('page_transition',function(){for(var ba in w)if(!r(ba))aa.destroyComposer(ba);});e.exports=aa;},null);
__d("ComposerXAttachmentButtonBarState",["CSS","DOMQuery","csx","cx"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={trackCityChanges:function(l){var m=l.getComponent('citysharericon');if(m)return m.instance.subscribe('change',function(){k.updateMessageBoxBarState(l);});},updateMessageBoxBarState:function(l){var m=l.getComponent('citysharericon');if(m){var n=h.find(l.getRoot(),"._1dsp");g.conditionClass(n,"_icv",!!m.instance.getValue());}}};e.exports=k;},null);
__d("ComposerXAttachmentPrefillMixin",["Event","InputSelection"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={_initPrefill:function(j,k){this._textArea=j;this._didInitialFocus=false;this._prefill=k;if(this._prefill)this._focusListener=g.listen(this._textArea,'focus',this._prefillOnFocus.bind(this));},_resetPrefill:function(){this._didInitialFocus=false;},_prefillOnFocus:function(){if(!this._didInitialFocus&&this._prefill&&this._textArea.value===''){this._textArea.value=this._prefill;h.set(this._textArea,0,0);}this._didInitialFocus=true;}};e.exports=i;},null);
__d("ComposerXAttachmentUtils",["BrowserSupport","Button","ComposerXController","DataStore","DOMQuery","Event","Focus","Keys","Run","StickyPlaceholderInput","UserAgent_DEPRECATED","csx","debounce"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t='composer_fixed_placeholder';function u(w,x){if(!j.get(w.element,t,false))w.instance.setPlaceholder(x);}var v={initMentions:function(w,x,y,z){u(w,x);if(!z||!z.dontFocusMentions)v.focusMentions(w);this.registerMentionsForComposerCancel(w,y);},focusMentions:function(w){var x=k.find(w.element,'textarea.input');m.set(x);},registerMentionsForComposerCancel:function(w,x){i.registerConditionForComposerCancel(x,w.instance.hasChanges.bind(w.instance));},setStickyPlaceholderForMentions:function(w,x){u(w,x);},setPlaceholderIsFixed:function(w,x){j.set(w.element,t,!!x);},setStickyPlaceholderForTypeahead:function(w,x){var y=k.find(w,'.textInput');p.setPlaceholderText(y,x);},listenForPostSubmission:function(w){l.listen(w,'keydown',function(event){var x=event.getModifiers(),y=q.osx()?x.meta:x.control,z=k.find(w.form,"._11b"+'[type="submit"]');if((event.keyCode===n.RETURN)&&y&&h.isEnabled(z)){w.blur();if(l.fire(z,'click'))l.fire(w.form,'submit');event.preventDefault();}});},disableSaveOnEmpty:function(w,x){var y=k.find(w,'.textInput'),z=s(function(ba){h.setEnabled(x,y.value.trim().length!==0);},50),aa=[];aa.push(l.listen(y,'keyup',z));if(g.hasClipboardEvents()){aa.push(l.listen(y,'cut',z));aa.push(l.listen(y,'paste',z));}else{aa.push(l.listen(y,'mouseout',z));aa.push(l.listen(y,'mousemove',z));}o.onUnload(function(){for(var ba=0;ba<aa.length;ba++)aa[ba].remove();aa=null;});}};e.exports=v;},null);
__d("DynamicIconSelector",["Button","CSS","DOM","SelectorDeprecated"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={swapIcon:function(l){var m=j.getSelectedOptions(l)[0],n=m&&i.scry(m,'.itemIcon')[0],o=j.getSelectorButton(l);if(n){g.setIcon(o,n.cloneNode(true));}else{var p=i.scry(o,'.img')[0];p&&i.remove(p);}h.conditionClass(o,'uiSelectorChevronOnly',!n);}};j.subscribe('change',function(l,m){var n=m.selector;if(h.hasClass(n,'dynamicIconSelector'))k.swapIcon(n);});e.exports=k;},null);
__d("PrivacySelectorOption",["Arbiter","AudienceSelectorTags","CSS","CurrentUser","DOM","DynamicIconSelector","Parent","PrivacyConst","SelectorDeprecated","copyProperties","csx","fbt","intlList"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();function t(u,v){if(!u)throw new Error("there's no DOM option. Config data: ",v);this._elem=u;this._selector=m.byClass(this._elem,'audienceSelector');if(!this._selector)return;this._priv_base_val=v.priv_base_val;this._audienceCount=v.audience_count||"";this._hasRestricted=v.has_restricted||false;this._isCustom=v.is_custom||false;this._includedAudience=v.included||"";this._excludedAudience=v.excluded||{};this._excludedTaggees={};this._tagExpansionBehavior=v.tag_expansion_behavior||n.TagExpansion.NONE;this._plusLabel=k.scry(u,'.plusLabel')[0];this._audienceCountLabel=k.scry(u,'.audienceCountLabel')[0];this._taggedIDs=[];this._tags=[];this._recalculateTooltipAndLabel();this._updateOptionCountLabel();this._updateSelector();g.subscribe('Composer/changedtags',function(w,x){var y=i.hasClass(this._selector,'composerAudienceSelector');if(!this._getChangedData()||!y)return;this._tags=[];this._taggedIDs=[];for(var z=0;z<x.withTags.length;z++){var aa=x.withTags[z].info;if(aa.uid!=j.getID()){this._tags.push(aa.text);this._taggedIDs.push(aa.uid);}}for(z in x.mention)if(x.mention[z].type=='user'&&x.mention[z].uid!=j.getID()){this._tags.push(x.mention[z].text);this._taggedIDs.push(x.mention[z].uid);}var ba=k.scry(document.body,"._5l7q")[0];ba&&!!this._taggedIDs.length&&i.hide(ba);this._updateOptionCountLabel();var ca=this._recalculateTooltipAndLabel();if(ca&&o.isOptionSelected(this._elem)){this._updateSelector();g.inform('SelectedPrivacyOption/changed',this._getChangedData());}}.bind(this));o.listen(this._selector,'change',this._updateSelector.bind(this));}p(t.prototype,{updateOption:function(u,v,w,x,y){this._priv_base_val=u;this._includedAudience=v;this._excludedAudience=w;this._tagExpansionBehavior=x;this._audienceCount=y;this._recalculateTooltipAndLabel();this._updateOptionCountLabel();return {label:this._label,tooltip:this._tooltip};},_recalculateTooltipAndLabel:function(){var u=this._label;this._label=this._getNewSelectorLabel();var v=this._tooltip;this._tooltip=this._getNewTooltip();return (v!=this._tooltip)||(u!=this._label);},_getNewTooltip:function(){if(this._isCustom)return this._recalcCustomTooltip();switch(this._priv_base_val){case n.FriendsValue.ALL_FRIENDS:return this._recalcFriendsTooltip();case n.FriendsValue.FRIENDS_MINUS_ACQUAINTANCES:return this._recalcFriendsMinusTooltip();case n.FriendsValue.SELF:var u=this._getTagExpansionText();return u?u:this._getIncludedAudience();default:return this._recalcCustomTooltip();}},_getNewSelectorLabel:function(){var u=this._elem.getAttribute('data-label').replace(/\(.*\)/,"");if(this._showAudienceCount()){var v=' ('+this._audienceCount+')';u+=v;}if(this._isTagExpanded())u+=' (+)';return u;},_updateOptionCountLabel:function(){if(this._audienceCountLabel){if(this._showAudienceCount()){var u=' ('+this._audienceCount+')';k.setContent(this._audienceCountLabel,u);}i.conditionShow(this._audienceCountLabel,this._showAudienceCount());}this._plusLabel&&i.conditionShow(this._plusLabel,this._isTagExpanded());},_getChangedData:function(){return {tags:this._taggedIDs,privacy:this._priv_base_val};},_showAudienceCount:function(){return (this._audienceCountLabel&&this._audienceCount&&this._audienceCount.length>0);},_isTagExpanded:function(){var u=this._getTagExpansionBehavior(),v=!!this._taggedIDs.length||this._alreadyHasTags();return (v&&u!=n.TagExpansion.NONE);},_alreadyHasTags:function(){var u=k.scry(this._selector,'*[data-oid]')[0];u=u&&u.getAttribute('data-oid');return u&&h.hasTags(u);},_updateSelector:function(){if(!this._isSharedAlbum()&&o.isOptionSelected(this._elem)){var u=i.hasClass(this._selector,'composerAudienceSelector');u&&o.setButtonLabel(this._selector,this._label);o.setButtonTooltip(this._selector,this._tooltip);l.swapIcon(this._selector);return false;}return true;},_isSharedAlbum:function(){var u=k.scry(this._selector,'*[data-shared-album]')[0];return u&&u.getAttribute('data-shared-album');},_getTagExpansionBehavior:function(){if(this._tagExpansionBehavior)return this._tagExpansionBehavior;var u=this._priv_base_val===n.FriendsValue.SELF,v=this._priv_base_val===n.FriendsValue.EVERYONE;if((u&&this._isSharedAlbum())||v){return n.TagExpansion.NONE;}else if(this._priv_base_val<n.FriendsValue.ALL_FRIENDS)return n.TagExpansion.TAGGEES;return n.TagExpansion.FRIENDS_OF_TAGGEES;},_getTagExpansionText:function(){var u=this._getTagExpansionBehavior();if(!!this._taggedIDs.length||this._alreadyHasTags()){if(u==n.TagExpansion.FRIENDS_OF_TAGGEES){return r._("friends of anyone tagged");}else if(u==n.TagExpansion.TAGGEES)return r._("Anyone tagged");return '';}return '';},_getIncludedAudience:function(){if(this._includedAudience)return this._includedAudience;var u=this._priv_base_val===n.FriendsValue.SELF;if(u&&!this._isSharedAlbum())return r._("Only me");return this._elem.getAttribute('data-label');},_getCombinedSentence:function(u,v){if(!v)return u;return r._("{list of people who can see this}; Except: {list of people who cannot see this}",[r.param("list of people who can see this",u),r.param("list of people who cannot see this",v)]);},_recalcFriendsTooltip:function(){var u=this._tags.length;if(u>2){return this._hasRestricted?r._("Your friends and friends of anyone tagged; Except: Restricted"):r._("Your friends and friends of anyone tagged");}else if(u==2){if(this._hasRestricted){return r._("Your friends, {user}'s friends and {user2}'s friends; Except: Restricted",[r.param("user",this._tags[0]),r.param("user2",this._tags[1])]);}else return r._("Your friends, {user}'s friends and {user2}'s friends",[r.param("user",this._tags[0]),r.param("user2",this._tags[1])]);}else if(u==1){if(this._hasRestricted){return r._("Your friends and {user}'s friends; Except: Restricted",[r.param("user",this._tags[0])]);}else return r._("Your friends and {user}'s friends",[r.param("user",this._tags[0])]);}else return this._hasRestricted?r._("Your friends; Except: Restricted"):r._("Your friends");},_recalcFriendsMinusTooltip:function(){var u=this._tags.length;if(u>0||this._alreadyHasTags()){var v=r._("friends of anyone tagged"),w=r._("{people who can see this}, {list of more people who can see this}",[r.param("people who can see this",r._("Your friends")),r.param("list of more people who can see this",v)]),x=r._("Acquaintances");if(this._hasRestricted)x=r._("{Name of Acquaintances friend list}, {restricted}",[r.param("Name of Acquaintances friend list",x),r.param("restricted",r._("Restricted"))]);return this._getCombinedSentence(w,x);}else{if(this._hasRestricted)return r._("Friends; Except: Acquaintances, Restricted");return r._("Friends except Acquaintances");}},_recalcCustomTooltip:function(){var u=this._getIncludedAudience(),v=this._getTagExpansionText();if(v)u=r._("{list of people who can see this}, {list of additional people who can see this}",[r.param("list of people who can see this",u),r.param("list of additional people who can see this",v)]);for(var w=0;w<this._taggedIDs.length;w++){x=this._taggedIDs[w];if(x in this._excludedAudience){delete this._excludedAudience[x];this._excludedTaggees[x]=this._tags[w];break;}}for(var x in this._excludedTaggees)if(this._excludedTaggees.hasOwnProperty(x))if(this._taggedIDs.indexOf(x)===-1){this._excludedAudience[x]=this._excludedTaggees[x];delete this._excludedTaggees[x];break;}var y=[];for(w in this._excludedAudience)if(this._excludedAudience.hasOwnProperty(w))y.push(this._excludedAudience[w]);return this._getCombinedSentence(u,s(y));}});e.exports=t;},null);
__d("CustomPrivacyOptionController",["Arbiter","AsyncDialog","AsyncRequest","DOM","Event","Form","Parent","PrivacyConst","PrivacySelectorOption","SelectorDeprecated","XPrivacyCustomDialogController","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();function s(t,u){if(!t)return;setTimeout((function(){this._selector=m.byClass(t,'audienceSelector');if(!this._selector)return;this.initCustomState(t,u.option_id,u.id);var v={priv_base_val:u.base_audience_value,audience_count:u.audience_count,is_custom:true,included:u.included_audience,excluded:u.excluded_audience,tag_expansion_behavior:u.tag_expansion_behavior};this._optionJSInstance=new o(t,v);k.listen(t,'click',function(event){this.openCustomDialog(event,u.option_id,u.explain_tags,u.autosave,u.limit_community,u.limit_facebook,u.limit_fof,u.limit_tagexpand,u.source);}.bind(this));p.listen(this._selector,'select',function(w){if(w.option._id!=this._id)this.clearCustomState();}.bind(this));}).bind(this),0);}r(s,{_instances:{},update:function(t,u,v,w,x,y,z,aa,ba){var ca=s._instances[t];ca._update(u,v)._updateOption(v,x,y,z,aa,ba);g.inform('Form/change',{node:ca._container});},getData:function(t){var u=s._instances[t];return u&&u._privacyData;},setPrivacyData:function(t,u,v){s._instances[t]._update(u,v);}});r(s.prototype,{_updateOption:function(t,u,v,w,x,y){var z=p.getOption(this._selector,t)||p.getOption(this._selector,n.BaseValue.CUSTOM+''),aa=this._optionJSInstance.updateOption(u,v,w,x,y);g.inform('CustomPrivacyOptionController/update',{selector:this._selector,option:z,tooltip:aa.tooltip,label:aa.label});return this;},_update:function(t,u){var v=u==n.BaseValue.CUSTOM||!p.getOption(this._selector,u),w=this._selector.getAttribute('data-name');this.updateCustomState(t,v,w);return this;},initCustomState:function(t,u,v){s._instances[u]=this;this._container=j.find(t,'.customPrivacyInputs');this._id=v;this._privacyData={};var w=l.serialize(this._container);if(w.audience)this._privacyData=w.audience[v];return t;},openCustomDialog:function(event,t,u,v,w,x,y,z,aa){var ba=q.getURIBuilder().setString('option_id',t).setString('id',this._id).setString('privacy_data',JSON.stringify(this._privacyData)).setBool('explain_tags',u).setBool('autosave',v).setBool('limit_community',w).setBool('limit_facebook',x).setBool('limit_fof',y).setBool('limit_tagexpand',z).setBool('is_new_privacy_selector',false).setString('source',aa).getURI(),ca=new i(ba);ca.setRelativeTo(event.getTarget());h.send(ca,function(da){da.subscribe('cancel',function(){g.inform('CustomPrivacyOptionController/cancel',{selector:this._selector});}.bind(this));}.bind(this));},updateCustomState:function(t,u,v){this.clearCustomState();this._privacyData=r({},t);if(u)if(v){v=v.slice(0,-'[value]'.length);var w={};w[v]=t;l.createHiddenInputs(w,this._container,null,true);}},clearCustomState:function(){this._privacyData={};j.empty(this._container);}});e.exports=s;},null);
__d("AudienceSelector",["Arbiter","AsyncRequest","AudienceSelectorTags","CSS","CustomPrivacyOptionController","DOM","DynamicIconSelector","PrivacyConst","SelectorDeprecated"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p={};o.subscribe('select',function(r,s){if(!j.hasClass(s.selector,'audienceSelector'))return;var t=o.getOptionValue(s.option);s.value=t;g.inform('AudienceSelector/changed',s);if(t==n.BaseValue.CUSTOM&&!j.hasClass(s.option,'noDialog')){o.toggle(s.selector);return false;}g.inform('AudienceSelector/changedNonCustomDialogButton',s);if(j.hasClass(s.selector,'dataTooltip')){var u=l.find(s.option,'.itemAnchor').getAttribute('data-tooltip');o.setButtonTooltip(s.selector,u||null);}if(!j.hasClass(s.option,'specialOption'))return;var v=l.find(s.option,'a').getAttribute('data-type');if(j.hasClass(s.option,'moreOption')){j.addClass(s.selector,v);j.addClass(s.selector,'showSecondaryOptions');return false;}else if(j.hasClass(s.option,'returnOption')){j.removeClass(s.selector,'showSecondaryOptions');j.removeClass(s.selector,'friendList');return false;}});var q={keepSynchronized:function(r,s){p[r]||(p[r]={});p[r][s.id]=s;},setHasTags:function(r){i.setHasTags(r);},getComposerInstance:function(){var r=p['PrivacyLiteNav/audience'];if(r){var s;for(var t in r){s=r[t];return s;}}return null;},forceAndKeepSynchronized:function(r,s){q.keepSynchronized(r,s);g.inform('AudienceSelector/update',{option:o.getSelectedOptions(s)[0],selector:s});},get:function(r){if(j.hasClass(r,'audienceSelector'))return r;var s=l.scry(r,'div.audienceSelector');if(s.length!=1)return;return s[0];},setAudience:function(r,s){var t=q.get(r);o.loadMenu(t,function(u){o.setSelected(t,s.toString());m.swapIcon(t);var v=o.getSelectedOptions(t),w=v[0]&&l.find(v[0],'a');if(w&&w.getAttribute('ajaxify'))h.bootstrap(w.getAttribute('ajaxify'),w,true);g.inform('AudienceSelector/changed',{option:v[0],selector:t});});}};g.subscribe('CustomPrivacyOptionController/update',function(r,s){if(!j.hasClass(s.selector,'audienceSelector'))return;o.setSelected(s.selector,o.getOptionValue(s.option));m.swapIcon(s.selector);var t=j.hasClass(s.selector,'composerAudienceSelector'),u=j.hasClass(s.selector,'inlineAudienceWidget');if(t||u)o.setButtonLabel(s.selector,s.label);o.setButtonTooltip(s.selector,s.tooltip);g.inform('AudienceSelector/update',s);});g.subscribe(['AudienceSelector/changed','AudienceSelector/update'],function(event,r){var s=o.getOptionValue(r.option),t={};if(s==n.BaseValue.CUSTOM){if(event=='AudienceSelector/changed')return;t=k.getData(r.option.id);if(!t)return;}else if(j.hasClass(r.selector,'inlineAudienceWidget'))o.setButtonLabel(r.selector,r.option.innerText);for(var u in p){var v=p[u];if(v[r.selector.id]){g.inform('AudienceSelector/syncNonSelectorIcon',{category:u});for(var w in v){var x=v[w];if(!x||r.selector===x)continue;if(o.getValue(x)!==s){o.setSelected(x,s);m.swapIcon(x);}if(s==n.BaseValue.CUSTOM){var y=o.getOption(x,n.BaseValue.CUSTOM+'');if(y){k.setPrivacyData(y.id,t,s);o.setButtonTooltip(x,r.tooltip);}}}}}});e.exports=q;},null);
__d("XPrivacyAudienceAlignmentLoggingController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/privacy\/audience_alignment\/log\/",{client_time:{type:"Int"},event:{type:"Enum",required:true,enumType:1},product:{type:"Enum",required:true,enumType:1}});},null);
__d("AudienceAlignment",["Arbiter","AsyncRequest","AudienceSelector","ComposerXStore","ContextualDialog","CSS","cx","DialogExpansion","DOM","Event","Focus","Keys","ModalMask","PrivacyConst","SelectorDeprecated","Style","XPrivacyAudienceAlignmentLoggingController"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){b.__markCompiled&&b.__markCompiled();var x=false,y,z;function aa(wa,xa){wa.setContext(xa);wa.show();}function ba(wa,xa){var ya=v.get(xa.getContentRoot(),'margin-top');wa.setWidth(this.aaa_dialog_width);wa.show();v.set(wa.getContentRoot(),'margin-top',ya);}var ca='wwwtux',da='wwwroadblock',ea='exposed',fa='friends_sticky',ga='public_sticky',ha='selector',ia='holdout',ja='dismissal',ka='learn_more',la='blur';function ma(wa,event){var xa=w.getURIBuilder().setEnum('product',wa).setEnum('event',event).setInt('client_time',Date.now()).getURI(),ya=new h().setURI(xa);ya.send();}function na(wa,xa,ya,za){if(x)return false;if(!o.contains(document.body,wa.getRoot()))return false;var ab=j.get(xa,'maininput');if(ab&&ab.instance.getValue())return false;if(!ya)return false;var bb=null;if(za){bb=za.getSelectedBaseValue();}else bb=parseInt(u.getValue(ya),10);return (bb===t.BaseValue.EVERYONE);}function oa(){var wa=o.scry(document.body,'#pagelet_timeline_recent');if(wa.length>=1){var xa=o.scry(wa[0],'li.fbTimelineComposerCapsule');if(xa.length>=1)return xa[0];}return null;}function pa(wa,xa,ya,za){var ab;if(za){ab=za.getMenuElement();}else{var bb=o.find(ya,'div.audienceSelector');ab=o.scry(bb,'div.wrap');}if(ab.length<1)return;var cb=oa(),db;if(za){za.subscribeOnce('open',function(){if(cb)l.addClass(cb,"_2wc-");k.setContext(xa,ab);xa.setOffsetY(30);xa.show();});}else db=u.listen(bb,'open',function(){var gb=o.scry(ab[0],'div.uiSelectorMenuWrapper');if(gb.length>0){if(cb)l.addClass(cb,"_2wc-");k.setContext(xa,gb[0]);xa.setOffsetX(12);xa.show();}else s.hide();u.unsubscribe(db);});if(za){za.getPopover().subscribeOnce('hide',function(){qa(xa,ab,cb,wa);});}else var eb=u.listen(bb,'close',function(){qa(xa,ab[0],cb,wa);u.unsubscribe(eb);});if(za){l.addClass(ab,"_35mn");var fb=za.getTriggerButtonElement();l.addClass(fb,"_35mn");}else l.addClass(ab[0],"_35mn");setTimeout(function(){s.show();v.set(s.getNode(),'opacity','0.3');v.set(s.getNode(),'background-color','rgb(0,0,0)');if(za){za.openSelectorExpanded();}else u.toggle(bb);},20);}function qa(wa,xa,ya,za){s.hide();wa.hide();l.removeClass(xa,"_35mn");if(ya)l.removeClass(ya,"_2wc-");q.set(o.find(za.getRoot(),'textarea.input'));}function ra(wa,xa){wa.unsubscribe(y);wa.hide();q.set(o.find(xa.getRoot(),'textarea.input'));}function sa(wa){var xa=ua(wa);return xa&&xa.element;}function ta(wa){var xa=ua(wa);return xa&&xa.instance&&xa.instance.getInstance().getInstance();}function ua(wa){return j.get(wa,'mainprivacywidget');}var va={abort:function(){x=true;},startOnComposerFocus:function(wa,xa,ya,za,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb){var mb=da;if(ib)mb=ca;g.subscribe('composer/focus',function(){var nb=sa(lb),ob=ta(lb);if(na(xa,lb,nb,ob))if(wa){ma(mb,ia);}else{ma(mb,ea);setTimeout(function(){ya.show();var pb=gb.parentElement;this.aaa_dialog_width=ya.getWidth()+pb.offsetWidth-490;var qb=new n(ya);qb.setTargetWidth(this.aaa_dialog_width);qb._onAfterShow();q.set(ya.getRoot());},100);}});p.listen(fb,'click',function(){var nb=sa(lb),ob=ta(lb);ra(ya,xa);if(ob){ob.selectOption(t.PostParam.FRIENDS);}else i.setAudience(xa.getRoot(),t.BaseValue.ALL_FRIENDS);aa(za,nb);ma(mb,fa);});p.listen(gb,'click',function(){var nb=sa(lb),ob=ta(lb);ra(ya,xa);if(ob){ob.selectOption(t.PostParam.EVERYONE);}else i.setAudience(xa.getRoot(),t.BaseValue.EVERYONE);aa(ab,nb);ma(mb,ga);});p.listen(hb,'click',function(){ya.subscribe('hide',function(){var nb=sa(lb),ob=ta(lb);if(bb)pa(xa,bb,nb,ob);});ra(ya,xa);ma(mb,ha);});if(ib)p.listen(ib,'click',function(){var nb=sa(lb);ra(ya,xa);ma(mb,ja);if(cb)aa(cb,nb);});y=ya.subscribe('hide',function(){var nb=sa(lb);q.set(o.find(xa.getRoot(),'textarea.input'));ma(mb,ja);if(db)aa(db,nb);});z=ya.subscribe('blur',function(){ma(mb,la);});p.listen(jb,'click',function(event){ba(eb,ya);ma(mb,ka);});p.listen(kb,'click',function(event){eb.hide();});if(ib)p.listen(eb.getRoot(),'keydown',function(event){if(p.getKeyCode(event)===r.ESC){eb.hide();p.kill(event);}});}};e.exports=va;},null);
__d("ComposerXDragDrop",["Arbiter","ClipboardPhotoUploader","ComposerXAjaxEndpoint","ComposerXController","ComposerXDragDropConfig","CSS","DOMQuery","DragDropTarget","Event","Parent","PUWMethods","URI","csx","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();var u=i.MEDIA_UPLOAD,v='/ajax/composerx/attachment/link/scraper/',w=function(y){y();};function x(y,z,aa,ba){"use strict";this._root=y;this._composerID=z;this._targetID=aa;ba=ba||w;this._activatePasteHandler();this._dragdrop=new n(y).setOnFilesDropCallback(function(ca){ba(this._uploadFiles.bind(this,ca,q.DRAGDROP));}.bind(this)).setFileFilter(x.filterImages).enable();x.handleDragEnterAndLeave(y);g.subscribe('composer/deactivateDragdrop',function(){this.deactivate();}.bind(this));g.subscribe('composer/reactivateDragdrop',function(){this.reactivate();}.bind(this));}x.prototype.enableURLDropping=function(){"use strict";this._dragdrop.setOnURLDropCallback(this._onURLDrop.bind(this));};x.prototype.deactivate=function(){"use strict";this._dragdrop.disable();this._deactivatePasteHandler();};x.prototype.reactivate=function(){"use strict";this._activatePasteHandler();this._dragdrop.enable();};x.prototype._activatePasteHandler=function(){"use strict";if(!k.canPaste||this._pasteHandler)return;this._pasteHandler=o.listen(this._root,'paste',function(event){var y=h.getImages(event);if(!y.length)return;this._uploadFiles(y,q.COPYPASTE);}.bind(this));};x.prototype._deactivatePasteHandler=function(){"use strict";if(!this._pasteHandler)return;this._pasteHandler.remove();delete this._pasteHandler;};x.prototype._uploadFiles=function(y,z){"use strict";j.getAttachment(this._root,u);g.inform('ComposerXFilesStore/filesDropped/'+this._composerID+'/mediaupload',{files:y,method:z},g.BEHAVIOR_PERSISTENT);};x.prototype._onURLDrop=function(y){"use strict";var z=new r(v);z.addQueryData({scrape_url:encodeURIComponent(y)});j.getAttachment(this._root,z.toString());};x.handleDragEnterAndLeave=function(y){"use strict";var z=m.scry(p.byClass(y,"_119"),"._2wr");g.subscribe('dragenter',function(aa,ba){if(y==ba.element)z.forEach(l.hide);});g.subscribe('dragleave',function(aa,ba){if(y==ba.element)z.forEach(l.show);});};x.filterImages=function(y){"use strict";var z=[];for(var aa=0;aa<y.length;aa++)if(y[aa].type.match('image/*'))z.push(y[aa]);return z;};e.exports=x;},null);
__d("PagesComposerEntryLogger",["Event","PagesBanzaiLogger"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(j){"use strict";this.$PagesComposerEntryLogger0=j;}i.prototype.registerForContentEntryEvents=function(j){"use strict";var k=function(){var l={page_id:this.$PagesComposerEntryLogger0,event_name:'composer_content_entry',pages_composer:1,target_id:this.$PagesComposerEntryLogger0};h.logData(l,h.VITAL_WAIT);this.unregister();};this.$PagesComposerEntryLogger1=g.listen(j,{paste:k.bind(this),keydown:k.bind(this)});};i.prototype.unregister=function(){"use strict";if(!this.$PagesComposerEntryLogger1)return;for(var event in this.$PagesComposerEntryLogger1)this.$PagesComposerEntryLogger1[event].remove();this.$PagesComposerEntryLogger1=null;};e.exports=i;},null);
__d("XPrivacyRemindersImpressionLoggingController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/privacy\/reminders\/log_imp\/",{type:{type:"String",required:true}});},null);
__d("ComposerXBootloadStatusAttachment",["requireWeak","Arbiter","AsyncRequest","AudienceAlignment","Bootloader","ComposerXAttachment","ComposerXAttachmentButtonBarState","ComposerXAttachmentPrefillMixin","ComposerXAttachmentUtils","ComposerXController","ComposerXDragDrop","ComposerXMarauderLogger","ComposerXStore","CSS","DOM","DOMQuery","Event","Focus","LitestandMessages","NoNewerStoryInsertionWhileComposingGK","PagesComposerEntryLogger","Parent","FocusListener","PrivacyConst","PrivacyRemindersLoggingTypes","SelectorDeprecated","SuggestionConfig","SuggestionUIPresentation","URI","classWithMixins","copyProperties","createCancelableFunction","csx","cx","getActiveElement","mixin","requestAnimationFrame","XPrivacyRemindersDismissController","XPrivacyRemindersImpressionLoggingController"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa){b.__markCompiled&&b.__markCompiled();var ta;g(['LitestandStoryInsertionStatus'],function(ab){ta=ab;});var ua={only_me:{PRIVACY_CONSTANT:[da.BaseValue.SELF],LOG_IMPRESSION:ea.ONLY_ME_IMPRESSION,LOG_CONVERSION:ea.ONLY_ME_CONVERSION,LOG_IMPRESSION_TO_DISMISS_ENDPOINT:true},everyone:{PRIVACY_CONSTANT:[da.BaseValue.EVERYONE],LOG_IMPRESSION:ea.EVERYONE_IMPRESSION,LOG_CONVERSION:ea.EVERYONE_CONVERSION,LOG_IMPRESSION_TO_DISMISS_ENDPOINT:true},delta_everyone:{PRIVACY_CONSTANT:[da.BaseValue.EVERYONE],LOG_IMPRESSION:ea.DELTA_EVERYONE_IMPRESSION,LOG_CONVERSION:ea.DELTA_EVERYONE_CONVERSION,LOG_IMPRESSION_TO_DISMISS_ENDPOINT:true},everyone_tests:{PRIVACY_CONSTANT:[da.BaseValue.EVERYONE],LOG_IMPRESSION:ea.EVERYONE_TESTS_IMPRESSION,LOG_CONVERSION:ea.EVERYONE_TESTS_CONVERSION,LOG_IMPRESSION_TO_DISMISS_ENDPOINT:true},public_posting_filter_nux:{PRIVACY_CONSTANT:[da.BaseValue.EVERYONE],LOG_IMPRESSION:ea.PUBLIC_POSTING_FILTER_NUX_IMPRESSION,LOG_CONVERSION:ea.PUBLIC_POSTING_FILTER_NUX_CONVERSION,LOG_IMPRESSION_TO_DISMISS_ENDPOINT:true}},va={},wa=ja(l,pa(n));for(var xa in wa)if(wa.hasOwnProperty(xa))za[xa]=wa[xa];var ya=wa===null?null:wa.prototype;za.prototype=Object.create(ya);za.prototype.constructor=za;za.__superConstructor__=wa;function za(ab,bb){"use strict";wa.call(this);this._root=ab;this._config=bb;this._privacyReminders={};this._onSelectorChange=this._onSelectorChange.bind(this);if(ta&&z.no_insertion_while_composing)ta.registerBlocker(function(){return this._isFocused();}.bind(this));}za.prototype.getRoot=function(){"use strict";return this._root;};za.prototype.getPrivacyInstance=function(){"use strict";return this._newPrivacyWidgetInstance;};za.prototype._getTextArea=function(){"use strict";return v.find(this.getComponent('maininput').element,'textarea.input');};za.prototype.initWithComponents=function(ab){"use strict";va[this._composerID]=this;this._attachmentIsActive=true;var bb=this._getTextArea(),cb=v.scry(ba.byClass(this.getRoot(),"_119"),'li.'+this.attachmentClassName)[0];this._focusListener=w.listen(bb,'focus',this._onFocus.bind(this));if(this._config.prefill_text)this._initPrefill(bb,this._config.prefill_text);if(ab&&this._config.targetIsPage){this._pagesComposerEntryLogger=new aa(this._config.targetID);this._pagesComposerEntryLogger.registerForContentEntryEvents(bb);}if(this._fullVersion){this._fullInitWithComponents();}else if(!this._bootloading)if(this._isFocused()){this._onFocus();}else if(cb)this._clickListener=w.listen(cb,'click',function(){x.set(bb);}.bind(this));this._dragEnterHandler=h.subscribe('dragenter',function(db,eb){if(eb.element==this._root){j.abort();var fb=eb.event.dataTransfer.items,gb;if(fb)gb=q.filterImages(fb);if(gb&&gb.length>0){x.set(bb);}else{var hb=ba.byClass(this._root,'focus_target');ca.expandInput(hb);this._onFocus();}}}.bind(this));this.getComponent('maininput').instance.setPlaceholder(this._config.mentionsPlaceholder);if(!ab)x.set(bb);if(this._config.plus_version){this._dragdrop=new q(this._root,this._composerID,this._config.targetID);this._dragdrop.enableURLDropping();}this._initPrivacyWidgetInstance();if(this._config.postActionsButton!=null)this._config.postActionsButton.initHiddenInputs(this.getComponent('pabhiddeninputs').instance);};za.prototype._initPrivacyWidgetInstance=function(){"use strict";var ab=this.getComponent('mainprivacywidget');if(!ab)return;this._privacyWidgetElement=ab.element;this._newPrivacyWidgetInstance=ab.instance&&ab.instance.getInstance().getInstance();if(this._newPrivacyWidgetInstance){var bb=this.getComponent('maininput').instance&&this.getComponent('maininput').instance.getMentions(),cb=this.getComponent('tagExpansionButton');(cb&&cb.instance)&&cb.instance.listenToPrivacy(this._newPrivacyWidgetInstance,bb);}};za.prototype._fullInitWithComponents=function(ab){"use strict";this._bootloadCallback=la(this._bootloadModules.bind(this));if(ab&&ab.show_tag_expansion_reminder){k.loadModules(["ComposerXPrivacyWidgetTags","URLScraper","SuggestionScraper","URI","ComposerTagReminder"],this._bootloadCallback);}else k.loadModules(["ComposerXPrivacyWidgetTags","URLScraper","SuggestionScraper","URI"],this._bootloadCallback);Object.keys(this._privacyReminders).forEach(this._showPrivacyReminder,this);if(this._setEveryonePrivacyImpression)this._showPrivacyReminder('everyone');if(this._privacyReminders.delta_everyone&&this._privacyReminders.delta_everyone.dialog){var bb=this._privacyReminders.delta_everyone.dialog.getContent();if(bb){var cb=v.scry(bb,'.photoText')[0],db=v.scry(bb,'.postText')[0];h.subscribe('multi-upload/images-added',function(){cb&&t.show(cb);db&&t.hide(db);}.bind(this));h.subscribe('multi-upload/all-images-removed',function(){cb&&t.hide(cb);db&&t.show(db);}.bind(this));}}if(this._newPrivacyWidgetInstance){this._newPrivacyWidgetInstance.subscribe('changed',this._onSelectorChange);}else fa.subscribe('select',this._onSelectorChange);};za.prototype._bootloadModules=function(ab,bb,cb,db,eb){"use strict";this._modulesAreBootloaded=true;this._tagger.init(this);this._privacyWidgetTags=new ab(this);if(eb){this._tagExpansionReminder=new eb(this);this._tagExpansionReminder.listen();}m.trackCityChanges(this);var fb=v.find(this.getComponent('maininput').element,'textarea.input');if(!this._scraper){this._scraper=new bb(fb);this._scraper.subscribe('match',function(ib,jb){var kb=this._getScraperEndpoint();kb.addQueryData({scrape_url:encodeURIComponent(jb.url),remove_url:this._config.remove_url,attachment_class:this._config.classname});p.getAttachment(this._root,kb.toString());}.bind(this));}this._scraper.enable();this._scraper.check();var gb=u.scry(this._root,"._4-jj"),hb=this.getComposerID();if(this._config.stream_context==='home'&&gb&&gb.length&&this._tagger&&hb)if(!this._suggestionScraper){this._suggestionScraper=new cb(this._tagger,gb[0],[ha.SEMI_INLINE,ha.TAGGER_BADGE,ha.TOP_OF_VERBS],hb);this._suggestionScraper.setInputTriggerConfig(ga.OG_SUGGESTION_BY_INPUT,fb);this._suggestionScraper.setBootloadTriggerConfig(ga.COMPOSER_ENTRY_BOOTSTRAP);}};za.prototype._showPrivacyReminder=function(ab){"use strict";var bb=this,cb=this._privacyReminders[ab],db=ua[ab],eb=null;if(this._newPrivacyWidgetInstance){eb=this._newPrivacyWidgetInstance.getSelectedBaseValue();}else eb=parseInt(fa.getValue(this._privacyWidgetElement),10);if(!cb||!cb.dialog||cb.shown){if(eb===da.BaseValue.EVERYONE&&this._setEveryonePrivacyImpression){this._sendSetEveryonePrivacyImpression();this._setEveryonePrivacyImpression=false;}return;}if(db.PRIVACY_CONSTANT.indexOf(eb)===-1)return;cb.dialog.setContext(this._privacyWidgetElement).show();cb.shown=true;this._privacyReminderShown=true;if(db.LOG_IMPRESSION){var fb=(sa.getURIBuilder()).setString('type',db.LOG_IMPRESSION).getURI();new i(fb).send();}if(db.LOG_IMPRESSION_TO_DISMISS_ENDPOINT)if(ab==='delta_everyone'||ab==='only_me'){var gb=(ra.getURIBuilder()).setString('type',ab).getURI();new i(gb).send();}else new i('/ajax/privacy/reminders/dismiss').setData({type:ab,dismiss_type:'impression'}).send();var hb=function(event){var ib=t.hasClass(event.target,'layerConfirm')||v.scry(event.target,'^.layerConfirm').length===1,jb=t.hasClass(event.target,'layerButton')||v.scry(event.target,'^.layerButton').length===1;if(ib&&ab!=='public_posting_filter_nux'){if(ab==='delta_everyone'||ab==='only_me'){var kb=(sa.getURIBuilder()).setString('type',ea.DELTA_EVERYONE_OK_BUTTON_CLICKED).getURI();new i(kb).send();}return;}if(ab==='delta_everyone'||ab==='only_me'){var lb=(ra.getURIBuilder()).setString('type',ab).getURI();new i(lb).send();}else new i('/ajax/privacy/reminders/dismiss').setData({type:ab,hide:jb}).send();cb.events.forEach(function(nb){nb.remove();});cb.events=[];cb.dialog.hide();this._privacyReminderShown=false;if(jb){qa(function(){if(this._newPrivacyWidgetInstance){this._newPrivacyWidgetInstance.openSelector();}else fa.toggle(v.scry(bb.getComponent('mainprivacywidget').element,'.uiSelector')[0]);}.bind(this));if(ab==='delta_everyone'){var mb=(sa.getURIBuilder()).setString('type',ea.DELTA_EVERYONE_CHANGE_BUTTON_CLICKED).getURI();new i(mb).send();}}}.bind(this);if(this._newPrivacyWidgetInstance){cb.conversionListener=this._newPrivacyWidgetInstance.subscribe('changed',function(ib,jb){var kb=this._newPrivacyWidgetInstance.getSelectedBaseValue();this._logPrivacyReminderConversion(cb,db,kb);}.bind(this));}else cb.conversionListener=fa.subscribe('select',function(ib,jb){if(jb.selector==this._privacyWidgetElement.firstChild){var kb=parseInt(fa.getValue(jb.option),10);this._logPrivacyReminderConversion(cb,db,kb);}}.bind(this));cb.events=[w.listen(cb.dialog.getContent(),'click',hb),w.listen(cb.dialog.getContext(),'click',hb)];};za.prototype._logPrivacyReminderConversion=function(ab,bb,cb){"use strict";if(bb.PRIVACY_CONSTANT.indexOf(cb)===-1){if(bb.LOG_CONVERSION){var db=(sa.getURIBuilder()).setString('type',bb.LOG_CONVERSION).getURI();new i(db).send();}if(this._newPrivacyWidgetInstance){this._newPrivacyWidgetInstance.unsubscribe(ab.conversionListener);}else fa.unsubscribe(ab.conversionListener);ab.conversionListener=null;}};za.prototype._onSelectorChange=function(ab,bb){"use strict";if(!this.getComponent('mainprivacywidget'))return;if(this._newPrivacyWidgetInstance||(bb.selector===this._privacyWidgetElement.firstChild))setTimeout(function(){Object.keys(this._privacyReminders).forEach(this._showPrivacyReminder,this);}.bind(this));if(this._tagExpansionReminder)this._tagExpansionReminder.updateReminderText(bb.post_param);};za.prototype.cleanup=function(){"use strict";this._attachmentIsActive=false;if(this._focusListener){this._focusListener.remove();this._focusListener=null;}if(this._clickListener){this._clickListener.remove();this._clickListener=null;}Object.keys(ua).forEach(function(ab){var bb=this._privacyReminders[ab];if(bb&&bb.dialog&&bb.shown){bb.dialog.hide();bb.events.forEach(function(cb){cb.remove();});bb.events=[];if(bb.conversionListener)if(this._newPrivacyWidgetInstance){this._newPrivacyWidgetInstance.unsubscribe(bb.conversionListener);}else fa.unsubscribe(bb.conversionListener);bb.conversionListener=null;}}.bind(this));if(this._dragdrop){this._dragdrop.deactivate();this._dragdrop=null;}if(this._modulesAreBootloaded){this._tagger.cleanup();this._privacyWidgetTags.destroy();this._privacyWidgetTags=null;this._scraper.disable();}if(this._bootloadCallback){this._bootloadCallback.cancel();this._bootloadCallback=null;}if(this._dragEnterHandler){this._dragEnterHandler.unsubscribe();this._dragEnterHandler=null;}if(this._pagesComposerEntryLogger)this._pagesComposerEntryLogger.unregister();};za.prototype.reset=function(){"use strict";var ab=ba.byClass(this._root,"child_was_focused");if(ab)t.removeClass(ab,"child_was_focused");if(this._tagger)this._tagger.reset();if(this._scraper)this._scraper.reset();if(this._newPrivacyWidgetInstance)this._newPrivacyWidgetInstance.informTagsChanged([]);this.getComponent('maininput').instance.setPlaceholder(this._config.mentionsPlaceholder);if(this._config.prefill_text)this._resetPrefill();};za.prototype.canSwitchAway=function(){"use strict";return !ba.byClass(this._root,'async_saving');};za.prototype.bootloadAttachments=function(){"use strict";if(this._bootloading)return;this._bootloading=true;p.getEndpoint(this._root,'/ajax/composerx/attachment/status/bootload/',true);};za.prototype.setBootloadedContent=function(ab){"use strict";this._bootloading=false;this._setEveryonePrivacyImpression=!!ab.set_everyone_privacy_impression;Object.keys(ua).forEach(function(eb){var fb=ab[eb+'_privacy_reminder'];if(fb)this._privacyReminders[eb]={dialog:fb};}.bind(this));if(ab.markup.privacy_widget){var bb=v.find(this._root,"._etn");u.setContent(bb,ab.markup.privacy_widget);var cb=v.find(this._root,"._1dwm");if(cb){cb.disabled=false;t.removeClass(cb,"_42fr");}}var db=ab.placeholders.map(function(eb){return eb.component_name;});s.waitForComponents(this._composerID,db,function(){var eb=v.find(this._root,"._3-6"),fb=v.find(this._root,"._3-7");u.setContent(eb,ab.markup.tagger_content);u.setContent(fb,ab.markup.tagger_icons);if(ab.markup.privacy_widget)this._initPrivacyWidgetInstance();p.addPlaceholders(this._root,this,ab.placeholders);this._tagger=ab.tagger;m.updateMessageBoxBarState(this);this._fullVersion=true;if(this._attachmentIsActive)this._fullInitWithComponents(ab);o.registerMentionsForComposerCancel(this.getComponent('maininput'),this.getComposerID());}.bind(this));};za.prototype._getScraperEndpoint=function(){"use strict";return ia('/ajax/composerx/attachment/link/scraper/');};za.prototype._isFocused=function(){"use strict";return v.contains(this._root,oa());};za.prototype._onFocus=function(){"use strict";r.logEntry(this._composerID);this._prefillOnFocus();h.inform(y.COMPOSER_FOCUSED);if(this._fullVersion||this._bootloading)return;h.inform('composer/focus',this._composerID);h.inform('composer/render_pab_nux');this.bootloadAttachments();};za.prototype.allowOGTagPreview=function(){"use strict";return true;};za.prototype._sendSetEveryonePrivacyImpression=function(){"use strict";new i('/ajax/privacy/reminders/set_everyone_privacy_impression').send();};za.setBootloadedContent=function(ab,bb){"use strict";var cb=va[ab];if(cb)cb.setBootloadedContent.call(cb,bb);};ka(za.prototype,{_attachmentIsActive:false,_bootloading:false,_modulesAreBootloaded:false,_fullVersion:false,_focusListener:null,_privacyWidgetTags:null,_scraper:null,_dragdrop:null,_bootloadCallback:null,attachmentClassName:"_4j"});e.exports=za;},null);
__d("fileSliceName",["UserAgent_DEPRECATED"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h='slice',i;if(i=g.chrome()){if(i<21)h='webkitSlice';}else if(i=g.firefox()){if(i<13)h='mozSlice';}else if(!(i=g.safari()))if(g.webkit())h='webkitSlice';e.exports=h;},null);
__d("fileSlice",["fileSliceName"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=a.File&&a.File.prototype[g];e.exports=h;},null);
__d("VideoUploadFeatureDetector",["UserAgent_DEPRECATED","fileSlice"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={supportsChunking:function(){return (typeof h==='function')&&this.supportsXHR();},supportsFullProgress:function(){return !g.firefox();},supportsFileAPI:function(){return ('FileList' in window);},supportsFileReading:function(){return ('FileReader' in window&&'DataView' in window);},supportsXHR:function(){return ('FormData' in window);}};e.exports=i;},null);
__d("VideoUploadFile",["fileSlice","VideoUploadFeatureDetector"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(j){"use strict";this.$VideoUploadFile0=j;this.$VideoUploadFile1=i.getExtensionFromFileInput(j);if(h.supportsFileAPI()&&j.files.length){this.$VideoUploadFile2=j.files[0];this.$VideoUploadFile3=this.$VideoUploadFile2.size;}else{this.$VideoUploadFile2=null;this.$VideoUploadFile3=null;}}i.prototype.getFileInput=function(){"use strict";return this.$VideoUploadFile0;};i.prototype.getFile=function(){"use strict";return this.$VideoUploadFile2;};i.prototype.getSize=function(){"use strict";return this.$VideoUploadFile3;};i.prototype.getExtension=function(){"use strict";return this.$VideoUploadFile1;};i.prototype.getChunk=function(j,k){"use strict";return this.$VideoUploadFile2?g.call(this.$VideoUploadFile2,j,k):null;};i.getExtensionFromFileInput=function(j){"use strict";return j.value.indexOf('.')!=-1?j.value.split('.').pop().toLowerCase():'';};e.exports=i;},null);
__d("ComposerXMediaUploadHandler",["Arbiter","AsyncRequest","ComposerXAjaxEndpoint","ComposerXController","CSS","Dialog","SubscriptionsHandler","URI","VideoUploadConfig","VideoUploadFile","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r=i.MEDIA_UPLOAD,s='/ajax/composerx/attachment/video/upload/',t=0;function u(v,w){"use strict";this.$ComposerXMediaUploadHandler0=v;this.$ComposerXMediaUploadHandler1=w;}u.prototype.fetchAttachments=function(){"use strict";[this.getPhotoUploadAttachmentEndpoint(),s].forEach(function(v){j.fetchAttachmentData(this.$ComposerXMediaUploadHandler0,v);}.bind(this));};u.prototype.handleFileSelected=function(v){"use strict";if(u.isVideoFile(v)){this.handleVideoSelected(v);}else this.handlePhotoSelected(v);};u.prototype.handleVideoSelected=function(v){"use strict";if(this.$ComposerXMediaUploadHandler1&&this.$ComposerXMediaUploadHandler1.imagesOnly){var w=new l().setModal(true).setButtons([l.OK]);if(this.$ComposerXMediaUploadHandler1.isEditComposer){w.setTitle(q._("Can't add video")).setBody(q._("Sorry, you can't add a video to a post you're editing."));}else w.setTitle(q._("Invalid Image File")).setBody(q._("Please upload a valid image file."));w.show();return;}j.getAttachment(this.$ComposerXMediaUploadHandler0,s);g.inform('ComposerXFilesStore/filesAdded/'+this.$ComposerXMediaUploadHandler0+'/videoupload',{fileInput:v},g.BEHAVIOR_PERSISTENT);};u.prototype.handlePhotoSelected=function(v){"use strict";j.getAttachment(this.$ComposerXMediaUploadHandler0,this.getPhotoUploadAttachmentEndpoint());u.$ComposerXMediaUploadHandler2(this.$ComposerXMediaUploadHandler0,v);};u.isVideoFile=function(v){"use strict";var w=p.getExtensionFromFileInput(v.getInput());return !!o.videoExtensions[w];};u.prototype.$ComposerXMediaUploadHandler3=function(){"use strict";return (this.$ComposerXMediaUploadHandler1)?this.$ComposerXMediaUploadHandler1.photoUploadOverrideEndpoint:null;};u.prototype.getPhotoUploadAttachmentEndpoint=function(){"use strict";var v=this.$ComposerXMediaUploadHandler3();return (v)?v:r;};u.$ComposerXMediaUploadHandler2=function(v,w){"use strict";g.inform('ComposerXFilesStore/filesAdded/'+v+'/mediaupload',{fileInput:w},g.BEHAVIOR_PERSISTENT);};u.setupFileUploadToComposerDialog=function(v,w,x){"use strict";var y='composerxmediauploadhandler'+t++,z=function(ca){k.conditionClass(v.getControl(),x,ca);v.getInput().disabled=ca;},aa=new n(w),ba=aa.getQueryData();ba.client_ref=y;aa.setQueryData(ba);w=aa.toString();v.subscribe('change',function(){new h().setURI(w).setErrorHandler(function(){v.clear();z(false);}).send();z(true);});g.subscribe('composer/dialog/'+y+'/new',function(ca,da){this.$ComposerXMediaUploadHandler2(da.composerID,v);var ea=new m();ea.addSubscriptions(g.subscribe('composer/publish',function(event,fa){if(da.composerID===fa.composer_id)a.location.reload();}),da.dialog.subscribe('hide',function(){ea.release();v.clear();z(false);}));}.bind(this));};e.exports=u;},null);
__d("ComposerXMentionsInputReset",["DOMQuery","Input"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(j){var k=g.scry(j.element,'textarea.input')[0];j.instance.reset();h.reset(k);}e.exports=i;},null);
__d("ComposerXOGTaggerIconReset",["CSS","cx"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(j){g.removeClass(j.element,"_4-jh");g.removeClass(j.element,"_509o");}e.exports=i;},null);
__d("ComposerXPrivacyWidgetReset",["Arbiter"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i){g.inform('Composer/changedtags',{withTags:[],mention:{},eventTag:false});}e.exports=h;},null);
__d("ComposerXTaggerIconReset",["CSS","cx"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(j){g.removeClass(j.element,"_1dsa");g.removeClass(j.element,"_1dsb");g.removeClass(j.element,"_509o");}e.exports=i;},null);
__d("htmlize",["htmlSpecialChars"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i){return g(i).replace(/\r\n|[\r\n]/g,'<br/>');}e.exports=h;},null);
__d("PhotosUploadWaterfallXMixin",["AsyncSignal","Banzai","PhotosUploadWaterfallXConfig","PUWApplications","copyProperties","invariant","randomInt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();function n(p,q){var r={};p.client_time=Math.round(Date.now()/1000);if(i.retryBanzai){r.retry=true;p.nonce=m(4294967296);}h.post(i.banzaiRoute,p,r);if(q)setTimeout(q,0);}function o(p,q){if(i.useBanzai){n(p,q);}else{var r=new g(i.loggingEndpoint,{data:JSON.stringify(p)}).setHandler(q);if(i.timeout)r.setTimeout(10*1000);r.send();}}e.exports={logStep:function(p,q,r){var s=this.getWaterfallID&&this.getWaterfallID(),t=this.getWaterfallAppName&&this.getWaterfallAppName();if(!s||!t)return;if(i.reduceLoggingRequests&&t===j.WEB_FLASH){r&&r();return;}o(k({step:p,qn:s,uploader:t,ref:this.getWaterfallSource&&this.getWaterfallSource()},q),r);}};},null);
__d("XPubcontentInlinePhotoPivotsEventsController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/pubcontent\/inline_photo_pivots_chaining\/events\/",{});},null);
__d("EntstreamAttachmentRelatedShare",["Arbiter","AsyncRequest","AttachmentRelatedShareConstants","csx","cx","CSS","DOM","Event","ge","tidyEvent","XPubcontentInlinePhotoPivotsEventsController"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r=2,s=3,t={createRelatedAttachmentDelay:function(u,v,w){var x=null;if(typeof u==="string"){x=o(u);}else x=u;if(!x)return;setTimeout(function(){g.inform(i.ARTICLE_CLICK,{attachment:x,global_share_id:v,is_auto_expand:true,is_right_click:false});},1000);},loadRelatedAttachment:function(u,v,w){var x=null;if(typeof u==="string"){x=o(u);}else x=u;if(!x)return;var y=n.listen(x,'click',function(){y.remove();g.inform(i.ARTICLE_CLICK,{attachment:x,global_share_id:v,is_right_click:false,share_id:w});}),z=n.listen(x,'mousedown',function(event){if(event.which===s||event.button===r){z.remove();g.inform(i.ARTICLE_CLICK,{attachment:x,global_share_id:v,is_right_click:true});}});},loadInlineStoryPivotAttachment:function(u,v){var w=o(u);if(!w)return;var x=n.listen(w,'click',function(){x.remove();g.inform(i.PHOTO_CLICK,{attachment:w,storyid:v});});},loadRelatedGameAttachment:function(u,v){var w=null;if(typeof u==="string"){w=o(u);}else w=u;if(!w)return;p(n.listen(w,'click',function(){g.inform(i.GAME_CLICK,{attachment:w,global_share_id:v});}));p(n.listen(w,'mousedown',function(event){if(event.which===s||event.button===r)g.inform(i.GAME_CLICK,{attachment:w,global_share_id:v});}));},loadRelatedLSCVideoAttachment:function(u,v){var w=null;if(typeof u==='string'){w=o(u);}else w=u;if(!w)return;var x="^div._4-u2",y=m.scry(w,x),z=n.listen(w,'click',function(){z.remove();g.inform(i.VIDEO_CLICK,{attachment:w,global_share_id:v});});},loadRelatedLSCInlineVideoAttachment:function(u,v){var w=null;if(typeof u==='string'){w=o(u);}else w=u;if(!w)return;n.listen(w,'click',function(){var x="^div._4-u2",y="_1d8v",z=m.scry(w,x),aa=z.length===1?z[0]:null,ba=aa.parentNode,ca=ba.previousSibling;while(!ca){ba=ba.parentNode;ca=ba.previousSibling;}if(!l.hasClass(ca,y)){var da=m.create('div',{className:y}),ea=m.insertBefore(aa.parentNode,da),fa=ea.length>=1?ea[0]:null;}else fa=ca;var ga=m.getID(fa);new h().setURI('/ajax/flash/expand_inline.php').setData({share_id:v,target_div:ga,max_width:470,max_height:264,replace_target_div:true}).setMethod('GET').setReadOnly(true).setRelativeTo(w.parentNode).send();});},loadRelatedEventsPivotAttachment:function(u,v){var w=null;if(typeof u==="string"){w=o(u);}else w=u;if(!w)return;p(n.listen(w,'click',function(){g.inform(i.EVENT_JOIN,{attachment:w,event_id:v});}));},closeButton:function(u,v){n.listen(u,'click',function(){m.remove(v);});},closeButtonPhotoPivots:function(u,v,w,x){n.listen(u,'click',function(){var y=q.getURIBuilder(),z={story_id:w,search_query_type:x,event:'hide'};new h().setMethod('POST').setURI(y.getURI()).setData(z).send();m.remove(v);});},seeAllLinkPhotoPivots:function(u,v,w){n.listen(u,'click',function(){var x=q.getURIBuilder(),y={story_id:v,search_query_type:w,event:'see_all'};new h().setMethod('POST').setURI(x.getURI()).setData(y).send();});},loadRelatedVideos:function(u,v,w){var x=o(u);if(!x)return;var y=o(v);if(!y)return;var z={global_share_id:w,attachment_div_id:m.getID(x.parentNode),video_div_id:v},aa=n.listen(y,'click',function(){aa.remove();g.inform(i.VIDEO_CLICK,{attachment:x.parentNode,attachment_div_id:m.getID(x.parentNode),video_div_id:v,global_share_id:w});});},removeOldSuggestions:function(u){var v=o(u);if(!v)return;var w=m.scry(v.parentNode,"._5d73");for(var x=1;x<w.length;x++)m.remove(w[x]);setTimeout(function(){l.show(w[0]);},1000);},showHiddenSuggestions:function(u){var v=n.listen(u,'click',function(){v.remove();var w="^._1ui8",x=m.scry(u,w);if(!x)return;l.hide(x[0]);var y=x[0].previousSibling;while(y){l.show(y);y=y.previousSibling;}});}};e.exports=t;},null);
__d("XIntlPostTranslationController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/intl\/see_translation\/",{ftid:{type:"String",required:true}});},null);
__d("IntlPostTranslation",["AsyncRequest","cx","DOM","Event","fbt","highlight","LoadingIndicator.react","React","XIntlPostTranslationController"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();function p(r,s){var t=i.create('div',{'class':"_5yn0"},s||k._("No translation available"));i.replace(r,t);if(s)l(t);}var q={bindListener:function(r,s){j.listen(r,'click',function(){n.render(n.createElement(m,{size:"small",color:"white"}),r);var t=o.getURIBuilder().setString('ftid',s).getURI();new g().setURI(t).setHandler(function(u){var v=u.getPayload();p(r,v&&v.text);}).setErrorHandler(function(){p(r,null);}).send();});}};e.exports=q;},null);
__d("PluginFlyout",["Arbiter","Button","CSS","DOM","DOMEvent","DOMEventListener","Form","Plugin","TextAreaControl","copyProperties","csx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r=g.SUBSCRIBE_NEW,s=g.subscribe,t=g.inform,u=function(w,x){return l.add(w,'click',x);};function v(w,x,y){var z=this,aa=s(n.CONNECT,function(event,ba){g.unsubscribe(aa);z.init(w,x,y);z.connect(event,ba);},r);s(n.DIALOG,function(){z.init(w,x,y);z.toggle();},r);}p(v.prototype,{init:function(w,x,y){if(this.initialized)return;this.initialized=true;j.appendContent(w,JSON.parse(y));var z=j.find(w,'form'),aa=j.find(z,"._56zw"),ba=j.find(z,"._56zx"),ca=j.find(z,"._42x4"),da=o.getInstance(ca);l.add(ca,'keyup',function(ha){h.setEnabled(aa,!!da.getValue());});l.add(z,'submit',function(ha){new k(ha).kill();m.bootstrap(z);});var ea=(x==='tiny')?j.find(document.body,'.pluginPostFlyoutPrompt'):null;this.flyout=w;this.form=z;this.post_button=aa;this.prompt=ea;var fa=this.hide.bind(this),ga=this.show.bind(this);u(ba,function(ha){new k(ha).kill();fa();});if(ea)u(ea,function(ha){new k(ha).kill();ga();});s(n.CONNECT,this.connect.bind(this),r);s(n.DISCONNECT,function(){fa();},r);s(v.SUCCESS,function(){fa();if(ea)i.hide(ea);},r);s(n.ERROR,function(event,ha){if(ha.action!=='comment')return;j.setContent(j.find(z,"._56zy"),ha.content);i.hide(aa);},r);},connect:function(event,w){if(w.crossFrame)return;if(this.prompt)return i.show(this.prompt);if(!w.story_fbid)this.show();},show:function(){this.shown=true;i.show(this.flyout);i.show(this.post_button);this.form.comment.focus();t(v.SHOW);},hide:function(){this.shown=false;i.hide(this.flyout);t(v.HIDE);},toggle:function(){if(this.shown){this.hide();}else this.show();}});p(v,{SUCCESS:'platform/plugins/flyout/success',SHOW:'platform/plugins/flyout/show',HIDE:'platform/plugins/flyout/hide',success:function(){t(v.SUCCESS);}});e.exports=v;},null);
__d("PluginFlyoutDialog",["Arbiter","DOMEvent","DOMEventListener","PluginFlyout","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();function l(m,n,o){this.parent=new j(m,n,o);this.flyout=m;g.subscribe(j.SHOW,this.show.bind(this),g.SUBSCRIBE_NEW);}k(l.prototype,{show:function(){if(this.subscribed)return;this.subscribed=1;var m=window.ServerJSAsyncLoader;m&&m.ondemandjs&&m.run(m.ondemandjs);i.add(this.flyout.parentNode,'click',(function(n){n=new h(n);if(n.target===this.flyout.parentNode){n.kill();this.parent.hide();}}).bind(this));}});e.exports=l;},null);
__d("legacy:AudienceSelector",["AudienceSelector"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();b('AudienceSelector');},3);
__d("FriendListPrivacyOptions",["Arbiter","AsyncDialog","AsyncRequest","Dialog","DOMQuery","PageTransitions","Parent","SelectorDeprecated","$","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=false,r=false,s=null,t={},u=function(w){if(!Object.keys(t).length)l.registerHandler(function(){t={};q=false;r=false;});var x=w.getAttribute('data-name');t[x]=w;n.listen(w,'select',function(y){var z=y.option,aa=k.find(z,'a.itemAnchor'),ba=aa.getAttribute('data-flid');if(!ba)return;var ca=aa.getAttribute('data-dynamic');if(ca&&q){v.showSmartListNux(z,ba);}else if(!ca&&r)v.showDumbListNux([ba]);});},v={listen:function(w,x,y){var z=p(w);if(!z)return;var aa=m.byClass(z,'audienceSelector');if(aa){u(aa);q=x;r=y;}},showSmartListNux:function(w,x){w=o(w);new i('/ajax/friends/lists/smart_list_publish_nux.php').setData({option_id:w.id,flid:x}).send();q=false;},setContextualDialog:function(w,x){x=o(x);var y=m.byClass(x,'audienceSelector');if(y){w.setContext(y);w.show();var z=g.subscribe('composer/publish',function(){w.hide();});w.subscribe('hide',function(){z.unsubscribe();});}},showDumbListNux:function(w){h.send(new i('/ajax/friends/lists/dumb_list_publish_nux.php').setData({flids:w}));r=false;},showBothListsNux:function(w,x){s=o(w);v.showDumbListNux(x);},setDialogX:function(w){if(!s)return;w.subscribe('hide',function(){v.showSmartListNux(s);s=null;});},setDialog:function(){if(!s)return;var w=j.getCurrent();if(w)w.setCloseHandler(function(){v.showSmartListNux(s);s=null;});}};e.exports=v;},null);
__d("MetaComposerEdDialog",["ARIA","Animation","Arbiter","AsyncRequest","DOM","Ease","Parent","SelectorDeprecated","Vector","copyProperties","getElementText"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r=null;function s(t){this._dialog=t.dialog;this.config=t;this._init();}s.init=function(t){if(r){r.config.show_audience=t.show_audience;t.dialog.destroy();return;}r=new s(t);};p(s.prototype,{_init:function(){i.subscribe('ComposerXStatusAttachment/ready',function(){if(this.config.show_audience){this._sendEducationRequest({},'/ajax/composer/audience/education',this._handlerCustomDuration.bind(this,6000));this.config.show_audience=false;}}.bind(this));if(this.config.show_sticky)i.subscribe('composer/mutate',function(t,u){this._sendEducationRequest({sticky_num:this.config.n_sticky_shown},'/ajax/composer/audience/sticky_education');}.bind(this));if(this.config.show_tags)i.subscribe('SelectedPrivacyOption/changed',function(t,u){this._sendEducationRequest({ids:u.tags,from:'WithTagger',hasEvent:u.hasEvent,type:u.privacy,tag_num:this.config.n_tag_shown},'/ajax/composer/audience/tag_education',this._handler.bind(this));}.bind(this));n.subscribe('open',this._killAnim.bind(this));},_sendEducationRequest:function(t,u,v){if(!this._updateDialogContext())return;this._async&&this._async.abort();this._async=new j(u);this._async.setData(t).setHandler(v).send();},_updateDialogContext:function(){var t=k.scry(document.body,'div.composerAudienceWrapper'),u,v;for(var w=0;w<t.length;w++){u=t[w];v=o.getElementPosition(u);if(u&&v.x>0&&v.y>0){this._dialog.setContext(u);return true;}}return false;},_handler:function(t){this._handlerCustomDuration(1500,t);},_handlerCustomDuration:function(t,u){var v=u.payload;if(!v||!this._updateDialogContext())return;var w=this._dialog.getContent().firstChild;k.setContent(w,v);g.announce(q(w));this._dialog.show();var x=m.byClass(w,'metaComposerUserEd');if(this._anim){this._anim.stop();this._anim=new h(x);}else this._anim=new h(x).from('opacity',0);this._anim.to('opacity',1).ease(l.sineOut).checkpoint().duration(t).checkpoint().to('opacity',0).ease(l.sineOut).checkpoint().ondone(this._killAnim.bind(this)).go();},_killAnim:function(t,u){if(this._anim){this._dialog.hide();this._anim.stop();this._anim=null;}}});e.exports=s;},null);
__d("PrivacySelectorOptionNew",["CSS","DOM","DOMQuery","JSXDOM","MenuSelectableItem","PrivacyConst","csx","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();for(var p in k)if(k.hasOwnProperty(p))r[p]=k[p];var q=k===null?null:k.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=k;function r(s){"use strict";k.call(this,s);this.updateAfterTagExpansion(this._data.hasTags);}r.prototype.getTooltip=function(){"use strict";return this._data.tooltip;};r.prototype.getPostParam=function(){"use strict";return this._data.postParam;};r.prototype.getTriggerIcon=function(){"use strict";return this._data.triggerIcon;};r.prototype.isPublic=function(){"use strict";return this.getPostParam()===l.PostParam.EVERYONE;};r.prototype.isFriends=function(){"use strict";return this.getPostParam()===l.PostParam.FRIENDS;};r.prototype.isOnlyMe=function(){"use strict";return this.getPostParam()===l.PostParam.ONLY_ME;};r.prototype.isBasicOption=function(){"use strict";return true;};r.prototype.isCustomOption=function(){"use strict";return false;};r.prototype.getTagExpansionBehavior=function(){"use strict";return this._data.tagExpansionBehavior;};r.prototype.getBaseValue=function(){"use strict";return this._data.baseValue;};r.prototype.getIndex=function(){"use strict";return this._data.value;};r.prototype.getLoggingEventName=function(){"use strict";switch(this.getPostParam()){case l.PostParam.FRIENDS:return 'click_friends';case l.PostParam.EVERYONE:return 'click_everyone';case l.PostParam.ONLY_ME:return 'click_only_me';case l.PostParam.FRIENDS_MINUS_ACQUAINTANCES:return 'click_friends_except_acquaintances';case l.PostParam.FB_ONLY:return 'click_fb_only';default:return 'click_other';}};r.prototype.updateAfterTagExpansion=function(s){"use strict";var t=this._data.baseLabel;if(s&&this._data.showPlusOnTagExpansion)t=o._("{privacyLabel} (+)",[o.param("privacyLabel",this._data.baseLabel)]);this._setLabel(t);if(s){this._setSubtitle(this._data.optionSubtitleWithTags);}else this._setSubtitle(this._data.optionSubtitle);};r.prototype.isBelowFold=function(){"use strict";var s=g.hasClass(this.getRoot(),"_3ey_");return s;};r.prototype._setLabel=function(s){"use strict";if(!s)return;var t=i.find(this.getRoot(),"._54nh");t&&h.setContent(t,s);this._data.label=s;};r.prototype._setSubtitle=function(s){"use strict";if(!s)return;var t=i.find(this.getRoot(),"._48u1");t&&h.setContent(t,s);};r.prototype.render=function(){"use strict";var s=q.render.call(this);if(!this._data.isPrimaryOption)return s;var t=i.find(s,"._54nc");t&&g.addClass(t,"_48t_");var u=h.find(s,"._54nh");u&&g.addClass(u,"_48u0");var v=j.div({className:"_48u1"},this._data.optionSubtitle);h.appendContent(t,v);return s;};e.exports=r;},null);
__d("XPrivacySelectorLoggingController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/privacy\/selector\/log\/",{event:{type:"Enum",required:true,enumType:1},render_location:{type:"Int",required:true},content_type:{type:"String",required:true}});},null);
__d("PrivacySelectorCustomOption",["AsyncDialog","AsyncRequest","DataStore","PrivacySelectorOptionNew","XPrivacySelectorLoggingController","XPrivacyCustomDialogController"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();for(var m in j)if(j.hasOwnProperty(m))o[m]=j[m];var n=j===null?null:j.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=j;function o(p){"use strict";j.call(this,p);}o.prototype.isBasicOption=function(){"use strict";return false;};o.prototype.isCustomOption=function(){"use strict";return true;};o.prototype.getSelector=function(){"use strict";return this._selector;};o.prototype.setPostParam=function(p){"use strict";this._data.postParam=p;};o.prototype.getLoggingEventName=function(){"use strict";return 'click_custom';};o.prototype.openDialog=function(p){"use strict";if(typeof this._selector==='undefined')this._selector=p;i.set(this._data.id,'PrivacySelectorCustomOption',this);var q=l.getURIBuilder().setString('option_id',this._data.id).setString('id',this._data.privacyfbid.toString()).setString('post_param',p.getPostParam()).setString('content_type',p.getContentType()).setInt('render_location',p.getRenderLocation()).setIntVector('tags',p.getTags()).setBool('autosave',this._data.autosave).setBool('limit_community',this._data.limitcommunity).setBool('limit_facebook',this._data.limitfacebook).setBool('limit_fof',this._data.limitfof).setBool('limit_tagexpand',this._data.limittagexpand).setBool('is_new_privacy_selector',true).setString('tag_expansion_button',p.getTagExpansionButton()).getURI(),r=new h(q);r.setRelativeTo(p.getTriggerButtonElement());g.send(r,function(s){var t=function(u){var v=k.getURIBuilder().setEnum('event',u).setInt('render_location',document.getElementsByName('render_location')[0].value).setString('content_type',document.getElementsByName('content_type')[0].value).getURI();new h().setURI(v).send();};s.subscribe('hide',function(){p.inform('custom/hide');p.inform('selectorFinished');});s.subscribe('success',function(){p.inform('custom/success');t('custom_save');});s.subscribe('cancel',function(){p.inform('custom/cancel');t('custom_cancel');});});};o.customPrivacySave=function(p,q,r){"use strict";var s=i.get(p,'PrivacySelectorCustomOption');s.getSelector().updateDataForItemIndex(s.getIndex(),q,r);s.getSelector().setValue(s.getIndex());i.remove(p,'PrivacySelectorCustomOption');};e.exports=o;},null);
__d("PrivacySelectableMenu",["AsyncRequest","CSS","Ease","PrivacySelectorCustomOption","PrivacySelectorOptionNew","SelectableMenu","SelectableMenuUtils","XPrivacySelectorLoggingController","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();for(var p in l)if(l.hasOwnProperty(p))r[p]=l[p];var q=l===null?null:l.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=l;function r(s,t){"use strict";l.call(this,s,t);}r.prototype.getItemForIndex=function(s){"use strict";for(var t=0;t<this._items.length;t++){var u=this._items[t];if(u instanceof k&&u.getIndex()==s)return u;}return null;};r.prototype.selectDefaultOption=function(){"use strict";this._items.some(function(s){if(s instanceof k&&this._isDefaultOption(s)){this.setValue(s.getIndex());return true;}return false;},this);};r.prototype.selectOption=function(s){"use strict";var t=null,u=this._items.some(function(v){if(v instanceof k&&!v.isCustomOption()&&v.getPostParam()==s){this.setValue(v.getIndex());return true;}if(v instanceof j){t=v;return false;}if(this._isMoreOption(v)){this.expandMenu();return false;}},this);if(!u&&t){t.setPostParam(s);this.setValue(t.getIndex());}};r.prototype._isDefaultOption=function(s){"use strict";return h.hasClass(s.getRoot(),"_plx");};r.prototype._isMoreOption=function(s){"use strict";return h.hasClass(s.getRoot(),"_po2");};r.prototype._handleItemClick=function(s,t){"use strict";if(!m.doesItemSupportSelect(s))return q._handleItemClick.call(this,s,t);if(this._isMoreOption(s)){this._logMoreClick();this.expandMenu();return;}this._logOptionClick(s);var u=this.inform('itemclick',{item:s,event:t});if(u)return;if(!m.isSelected(s)&&!s.isCustomOption()&&s.select()!==false){this._items.forEach(function(v){if(m.isSelected(v)&&v!==s)v.deselect();});this.inform('change',this.getSelection());}this.done();return s.handleClick();};r.prototype._logMoreClick=function(){"use strict";var s=n.getURIBuilder().setEnum('event','more_options').setInt('render_location',this._config.renderlocation).setString('content_type',this._config.contenttype).getURI();new g().setURI(s).send();};r.prototype._logOptionClick=function(s){"use strict";var t=n.getURIBuilder().setEnum('event',s.getLoggingEventName()).setInt('render_location',this._config.renderlocation).setString('content_type',this._config.contenttype).getURI();new g().setURI(t).send();};r.prototype.expandMenu=function(){"use strict";h.removeClass(this.getRoot(),"_po3");h.addClass(this.getRoot(),"_po4");this.inform('expandMenu');};r.prototype.collapseMenu=function(){"use strict";h.removeClass(this.getRoot(),"_po4");h.addClass(this.getRoot(),"_po3");};r.prototype.updateOptionsAfterTagExpansion=function(s){"use strict";this.forEachItem(function(t){if(t instanceof k)t.updateAfterTagExpansion(s);});};r.prototype.onPopoverOpen=function(s){"use strict";if(this._config.learnMore)this._config.learnMore.collapse();if(s&&s.isBelowFold()){this.expandMenu();}else this.collapseMenu();if(s&&this._items.indexOf(s)>=15)setTimeout(function(){this._scrollableArea.scrollToBottom(true,{duration:1000,ease:i.sineOut});}.bind(this),250);};e.exports=r;},null);
__d("MenuStaticItem",["DOM","MenuItemBase","React","copyProperties","cx","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();for(var m in h)if(h.hasOwnProperty(m))o[m]=h[m];var n=h===null?null:h.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=h;function o(p){"use strict";h.call(this);this._data=p;}o.prototype._renderItemContent=function(){"use strict";var p=g.create('span',{className:"_54nc _54ah"});if(this._data.children){i.render(i.createElement("span",{className:"_54nh"},this._data.children),p);}else g.setContent(p,g.create('span',{className:"_54nh"},this._data.markup));return p;};j(o.prototype,{handleClick:l});e.exports=o;},null);
__d("PopoverButton",["DOM","DOMQuery","csx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={setLabel:function(k,l){var m=h.find(k,"._55pe"),n=m.childNodes;for(var o=0;o<n.length;o++)if(h.isTextNode(n[o])){g.replace(n[o],l);return;}g.appendContent(m,l);}};e.exports=j;},null);
__d("PrivacySelectorDataStore",["ArbiterMixin","merge","PrivacySelectorNewDispatcher","KeyedCallbackManager"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=new j(),l=h(g,{get:function(m,n){k.executeOrEnqueue(m,n);},hasValueChanged:function(m){return !!k.getResource(m);}});i.register(function(m){if(m.selector_type){var n={};n[m.selector_type]={post_param:m.post_param,unique_id:m.unique_id};k.addResourcesAndExecute(n);l.inform('change');}});e.exports=l;},null);
__d("XPrivacySelectorTransitionDefaultController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/privacy\/selector\/transition_default\/",{post_param:{type:"String"},render_location:{type:"Enum",enumType:0}});},null);
__d("XPrivacySelectorUpdateController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/privacy\/selector\/update\/",{privacy_fbid:{type:"String",required:true},post_param:{type:"String",required:true},tags:{type:"IntVector"},render_location:{type:"Int",required:true},is_saved_on_select:{type:"Bool",defaultValue:false},should_return_tooltip:{type:"Bool",defaultValue:false},replace_on_select:{type:"Bool",defaultValue:false},prefix_tooltip_with_app_privacy:{type:"Bool",defaultValue:false},ent_id:{type:"String",required:true},tag_expansion_button:{type:"String"},reload_selector:{type:"Bool",defaultValue:false}});},null);
__d("PrivacySelectorBase",["ArbiterMixin","AsyncRequest","Button","CSS","CurrentUser","Input","MenuStaticItem","MenuSelectableItem","PopoverButton","PopoverLoadingMenu","PrivacyConst","DataStore","PrivacySelectorNewDispatcher","PrivacySelectorDataStore","PrivacySelectableMenu","TagExpansionButtonConfig","Tooltip","XPrivacySelectorLoggingController","XPrivacySelectorTransitionDefaultController","XPrivacySelectorUpdateController","bind","cx","fbt","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da){b.__markCompiled&&b.__markCompiled();var ea=3,fa=da(g);for(var ga in fa)if(fa.hasOwnProperty(ga))ia[ga]=fa[ga];var ha=fa===null?null:fa.prototype;ia.prototype=Object.create(ha);ia.prototype.constructor=ia;ia.__superConstructor__=fa;function ia(ja,ka,la,ma,na,oa){"use strict";r.set(ja,'selector',this);this._root=ja;this._button=ka;this._config=oa;this._menu=la;this._popoverMenu=na;this._input=ma;this._isSavedOnSelect=oa.is_saved_on_select;this._privacyFBID=oa.privacy_fbid;this._contentType=oa.content_type;this._renderLocation=oa.render_location;this._supportsTagExpansion=oa.supports_tag_expansion;this._prefixTooltipApps=oa.should_prefix_tooltip_apps;this._shouldDisplayLabel=oa.should_display_label;this._tags=oa.tagged_uids;this._hasTags=this._tags.length>0;this._entID=oa.ent_id;this._popover=this._popoverMenu.getPopover();this._receivingUpdate=false;this._initTagExpansionButtonState();this._selectorSyncKey=oa.selector_sync_key;if(oa.use_async_menu){this._popoverMenu.subscribe('setMenu',function(){this._menu=this._popoverMenu.getMenu();if(!(this._menu instanceof u))return;this._onMenuLoad();this._onPopoverOpen();this.inform('asyncMenuLoaded');}.bind(this));}else this._onMenuLoad();if(this._selectorSyncKey)this._initSelectorSync();}ia.prototype._initSelectorSync=function(){"use strict";t.subscribe('change',function(){t.get(this._selectorSyncKey,function(ja){if(ja.unique_id!==this._menu._config.id){this._receivingUpdate=true;this.selectOption(ja.post_param);this.isComposerWithDefault()&&this.reloadSelector();}}.bind(this));}.bind(this));if(!this._syncsToDefault())this._menu.subscribe('change',function(){this._broadcastUpdate();}.bind(this));};ia.prototype._broadcastUpdate=function(){"use strict";if(!this._receivingUpdate){var ja=this._getSelectedOption();s.handleUpdateFromSelector({selector_type:this._selectorSyncKey,post_param:ja.getPostParam().toString(),unique_id:this._menu._config.id});}else this._receivingUpdate=false;};ia.prototype.isComposerWithDefault=function(){"use strict";return this._syncsToDefault()&&!this._config.replace_on_select;};ia.prototype._isSelectorForChangingComposerDefault=function(){"use strict";return this._syncsToDefault&&this._config.replace_on_select;};ia.prototype._syncsToDefault=function(){"use strict";return this._config.selector_sync_key==q.PrivacyField.DEFAULT_COMPOSER.toString();};ia.prototype.getIsPublicSelected=function(){"use strict";return this._selectedOption&&this._selectedOption.isPublic();};ia.prototype.getIsFriendsSelected=function(){"use strict";return this._selectedOption&&this._selectedOption.isFriends();};ia.prototype.getIsOnlyMeSelected=function(){"use strict";return this._selectedOption&&this._selectedOption.isOnlyMe();};ia.prototype.getSelectedBaseValue=function(){"use strict";return this._selectedOption&&this._selectedOption.getBaseValue();};ia.prototype.getSelectedPostParam=function(){"use strict";return this._selectedOption&&this._selectedOption.getPostParam().toString();};ia.prototype.setValue=function(ja){"use strict";this._menu.setValue(ja);};ia.prototype.openSelectorExpanded=function(ja){"use strict";this.openSelector(function(){this._menu.expandMenu();ja&&ja();}.bind(this));};ia.prototype.openSelector=function(ja){"use strict";if(this._menu instanceof p){this.subscribeOnce('asyncMenuLoaded',function(){ja&&ja();}.bind(this));this._popover.showLayer();}else{this._popover.showLayer();ja&&ja();}};ia.prototype.closeSelector=function(){"use strict";this._popover.hideLayer();};ia.prototype.getPopover=function(){"use strict";return this._popover;};ia.prototype.getTriggerButtonElement=function(){"use strict";return this._button;};ia.prototype.getRoot=function(){"use strict";return this._root;};ia.prototype.getMenuElement=function(){"use strict";return this._menu.getRoot();};ia.prototype.selectDefaultOption=function(){"use strict";this._menu.selectDefaultOption();this._updateMenu();};ia.prototype.selectOption=function(ja){"use strict";if(!ja)return;if(this._menu instanceof p){this.subscribeOnce('asyncMenuLoaded',this._selectOptionImpl.bind(this,ja));this._fetchAsyncMenu();}else this._selectOptionImpl(ja);};ia.prototype._selectOptionImpl=function(ja){"use strict";this._menu.selectOption(ja);this._updateMenu();};ia.prototype._updateMenu=function(){"use strict";this._selectedOption=this._getSelectedOption();this.updateDataForItemIndex(this._selectedOption.getIndex(),this._selectedOption.getPostParam().toString());};ia.prototype.setTagExpansionButton=function(ja){"use strict";this._tagExpansionButton=ja;if(this._hasTags){this._menu.updateOptionsAfterTagExpansion(this._showTagExpansion());this._updateTriggerButtonLabel();this._updateTooltipAfterChange();}};ia.prototype.getTagExpansionButton=function(){"use strict";return this._tagExpansionButton;};ia.prototype._initTagExpansionButtonState=function(){"use strict";this._tagExpansionButton=v.FRIENDS_OF_TAGGED;var ja=this._getSelectedOption();if(!ja)return;var ka=JSON.parse(ja.getPostParam());if(ka.settings&&ka.settings.no_tag_expansion===true){this._tagExpansionButton=v.TAGGED_ONLY;}else this._tagExpansionButton=v.FRIENDS_OF_TAGGED;};ia.prototype._fetchAsyncMenu=function(){"use strict";if(this._config.use_async_menu)this._popoverMenu.fetchMenu();};ia.prototype._getSelectedOption=function(){"use strict";if(!(this._menu instanceof u))return;var ja;this._menu.forEachItem(function(ka){if(ka instanceof n&&ka.isSelected())ja=ka;}.bind(this));return ja;};ia.prototype._onItemClick=function(ja,ka){"use strict";var la=ka.item;if(la instanceof m)return;if(la.isBasicOption()){this.updateDataForItemIndex(la.getIndex(),la.getPostParam().toString());}else if(la.isCustomOption()){this._closeForCustom=true;la.openDialog(this);}this.inform('click',{customSelected:la.isCustomOption()});};ia.prototype.getContentType=function(){"use strict";return this._contentType;};ia.prototype.getRenderLocation=function(){"use strict";return this._renderLocation;};ia.prototype.getPostParam=function(){"use strict";return this._postParam;};ia.prototype.getTags=function(){"use strict";return this._tags;};ia.prototype.updateDataForItemIndex=function(ja,ka,la){"use strict";if(la){this._tagExpansionButton=la;this.inform('CustomTagExpansion',this._tagExpansionButton);}var ma=this._menu.getItemForIndex(ja);if(ma.isCustomOption())ma.setPostParam(ka);this._selectedOption=ma;this._postParam=ka;l.setValue(this._input,ka);this._updateTriggerButtonLabel();if(this._shouldUpdateTooltips()){this._updateTooltipAfterChange();}else{if(this._isSavedOnSelect)this._savePrivacy();this._setTooltipValue(this._selectedOption.getTooltip());}this.inform('changed',{post_param:this._postParam,base_value:this.getSelectedBaseValue()});};ia.prototype._shouldUpdateTooltips=function(){"use strict";return this._prefixTooltipApps||this._supportsTagExpansion;};ia.prototype._savePrivacy=function(){"use strict";this._sendUpdateRequest();};ia.prototype.reloadSelector=function(){"use strict";var ja=z.getURIBuilder().setString('privacy_fbid',String(this._privacyFBID)).setString('post_param',this._postParam).setInt('render_location',this._renderLocation).setBool('reload_selector',true).setString('ent_id',String(this._entID)).getURI();new h().setRelativeTo(this._root).setHandler(this.inform.bind(this,'reloaded')).setURI(ja).send();};ia.prototype.transitionToDefault=function(){"use strict";var ja=y.getURIBuilder().setString('post_param',this._postParam).setEnum('render_location',this._renderLocation).getURI();new h().setRelativeTo(this._root).setHandler(function(){this._config.selector_sync_key=q.PrivacyField.DEFAULT_COMPOSER.toString();this._initSelectorSync();this.inform.bind(this,'reloaded');}.bind(this)).setURI(ja).send();};ia.prototype._sendUpdateRequest=function(){"use strict";var ja=z.getURIBuilder().setString('privacy_fbid',String(this._privacyFBID)).setString('post_param',this._postParam).setIntVector('tags',this._tags).setInt('render_location',this._renderLocation).setBool('is_saved_on_select',this._isSavedOnSelect).setBool('should_return_tooltip',this._shouldUpdateTooltips()).setBool('prefix_tooltip_with_app_privacy',this._prefixTooltipApps).setBool('replace_on_select',this._config.replace_on_select).setString('ent_id',String(this._entID)).setString('tag_expansion_button',this._tagExpansionButton).getURI();new h().setRelativeTo(this._button).setHandler(aa(this,function(ka){if(this._isSelectorForChangingComposerDefault())this._broadcastUpdate();var la=ka&&ka.payload&&ka.payload.tooltip;la&&this._setTooltipValue(ka.payload.tooltip);this.inform('selector_updated');})).setURI(ja).send();};ia.prototype.informTagsChanged=function(ja){"use strict";var ka=this._getTags(ja);this.informTagsChangedWithIDs(ka);};ia.prototype.informTagsChangedWithIDs=function(ja){"use strict";var ka=!ja.length;if(this._hasTags===ka){this._hasTags=!!ja.length;this._menu.updateOptionsAfterTagExpansion(this._showTagExpansion());this._updateTriggerButtonLabel();}if(this._tags.length!==ja.length){this._tags=ja;this._updateTooltipAfterChange();}};ia.prototype._showTagExpansion=function(){"use strict";return this._hasTags&&(this._tagExpansionButton.valueOf()===v.FRIENDS_OF_TAGGED.valueOf());};ia.prototype._getTags=function(ja){"use strict";var ka=[],la=k.getID();if(ja.withTags)for(var ma=0;ma<ja.withTags.length;ma++){var na=ja.withTags[ma].info;if(na.uid!=la)ka.push(na.uid);}if(ja.mention)for(var oa in ja.mention)if(ja.mention[oa].type=='user'&&ja.mention[oa].uid!=la)ka.push(ja.mention[oa].uid);return ka;};ia.prototype._updateTriggerButtonLabel=function(){"use strict";var ja=this._selectedOption.getTriggerIcon();i.setIcon(this._button,ja.cloneNode());if(!this._shouldDisplayLabel)return;o.setLabel(this._button,this._selectedOption.getLabel());if(this._config.trigger_style===ea){j.conditionClass(this.getTriggerButtonElement(),"_mw-",this.getIsOnlyMeSelected());j.conditionClass(this.getTriggerButtonElement(),"_mw_",this.getIsPublicSelected());}};ia.prototype._updateTooltipAfterChange=function(){"use strict";var ja=ca._("Loading...");this._setTooltipValue(ja);this._sendUpdateRequest();};ia.prototype._setTooltipValue=function(ja){"use strict";ja&&w.set(this._button,ja);};ia.prototype._onPopoverClose=function(){"use strict";if(!this._getSelectedOption())return;if(this._closeForCustom){this._closeForCustom=false;}else this.inform('selectorFinished');this.inform('close');};ia.prototype._onPopoverOpen=function(){"use strict";if(!(this._menu instanceof u))return;this._menu.onPopoverOpen(this._getSelectedOption());var ja=x.getURIBuilder().setEnum('event','opened').setInt('render_location',this._renderLocation).setString('content_type',this._contentType).getURI();new h().setURI(ja).send();this.inform('open');};ia.prototype._onMenuLoad=function(){"use strict";this._menu.subscribe('itemclick',this._onItemClick.bind(this));this._popover.subscribe('hide',this._onPopoverClose.bind(this));this._popover.subscribe('show',this._onPopoverOpen.bind(this));this._menu.subscribe('expandMenu',function(){if(this._popover&&this._popover.getLayer())this._popover.getLayer().updatePosition();}.bind(this));this._selectedOption=this._getSelectedOption();if(this._selectedOption){this._postParam=this._selectedOption.getPostParam().toString();this._hasTags&&this._updateTriggerButtonLabel();}};e.exports=ia;},null);
__d("XFamilyMentionsNUXDialogController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/family_mentions\/nux_dialog\/",{__asyncDialog:{type:"Int"}});},null);
__d("FamilyRelationshipMentions",["AsyncDialog","AsyncRequest","FamilyMentionsData","XFamilyMentionsNUXDialogController"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=(function(){var l={},m=false;l.shouldShowNUX=function(n){if(i.hasAcceptedNUX||m)return false;var o=n.family_names;if(o==(void 0))return false;for(var p=0;p<o.length;p++)if(o[p]==n.text)return true;return false;};l.showNUX=function(n,o){var p=j.getURIBuilder().getURI();g.send(new h(p),function(q){q.subscribe('cancel',function(){n.text=n.default_name;o(n);});q.subscribe('confirm',function(){m=true;new h().setURI('/ajax/family_mentions/confirm_nux').send();o(n);q.finishHide();});});};return l;})();e.exports=k;},null);
__d("StreamShareVideo",["AsyncRequest","CSS","Event","cx","ge"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l={_endpoints:[],_thumbs:[],registerThumb:function(m,n,o,p){l._endpoints[m+' '+o]=p;l._thumbs[m+' '+o]=n;},clickTitle:function(m,n,event){return this.expandInlineOrRedirect(m,n,event);},expandInlineOrRedirect:function(m,n,event){if(l._shouldFollowHref(event))return true;var o=l._thumbs[m+' '+n],p=k(o);if(p){h.addClass(p,"uiVideoThumbLoading");g.bootstrap(l._endpoints[m+' '+n],p.parentNode);return false;}return true;},clickTimeline:function(m,n,event){if(l._shouldFollowHref(event))return true;h.addClass(m,"_1xu");h.removeClass(m,"_1xv");g.bootstrap(n,m);return false;},_shouldFollowHref:function(event){event=i.$E(event);if(!event)return false;if(event.getModifiers().any||event.isMiddleClick())return true;return false;}};e.exports=l;},null);
__d("legacy:stream-share-video",["StreamShareVideo"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();a.StreamShareVideo=b('StreamShareVideo');},3);
__d("StreamViewportTracking",["DOM","DOMDimensions","ViewportTracking","ge","recordTNTreeData"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=51;for(var m in i)if(i.hasOwnProperty(m))o[m]=i[m];var n=i===null?null:i.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=i;function o(){"use strict";if(i!==null)i.apply(this,arguments);}o.prototype.init=function(p,q){"use strict";if(q)this.$StreamViewportTracking0=q;n.init.call(this,p);this.initSubscriptions();};o.prototype.initSubscriptions=function(){"use strict";};o.prototype.getDataFromConfig=function(p){"use strict";this.isTimetrackingEnabled=1;this.timeout=p.record_delay;};o.prototype.getTimeout=function(){"use strict";return this.timeout;};o.prototype.getStorySelector=function(){"use strict";return '.uiStreamStory';};o.prototype.getAllStories=function(){"use strict";var p=g.scry(this.getStream(),this.getStorySelector());return p.filter(function(q){return q.getAttribute('data-ft');});};o.prototype.getStoryID=function(p){"use strict";var q=JSON.parse(p.getAttribute('data-ft'));return q.mf_story_key;};o.prototype.getQueryID=function(p){"use strict";var q=JSON.parse(p.getAttribute('data-ft'));return q.qid;};o.prototype.getFBFeedLocations=function(p){"use strict";var q=JSON.parse(p.getAttribute('data-ft'));return q.fbfeed_location;};o.prototype.getFBFeedInsertionPosition=function(p){"use strict";var q=JSON.parse(p.getAttribute('data-ft'));return q.insertion_position;};o.prototype.getDataToLog=function(p){"use strict";var q={},r=this.getStream();q=k(p,r);var s=p.getAttribute('data-insertion-position');if(s!==null)q.inspos=s;q.evt=l;q.vpv_time=Math.round(Date.now()/1000);var t=g.scry(p,".fbStoryAttachmentImage")[0];if(t){var u=h.getElementDimensions(t);q.story_image_height=u.height;q.story_image_width=u.width;}return {ft:q};};o.prototype.getStream=function(){"use strict";if(this.$StreamViewportTracking0)return this.$StreamViewportTracking0;return j('home_stream');};o.prototype.heartBeatIsEnabled=function(){"use strict";return true;};o.init=function(p,q){"use strict";o.instance=new o();o.instance.init(p,q);};o.getInstance=function(){"use strict";return o.instance;};e.exports=o;},null);
__d("FbFeedAttachmentRelatedShare",["Arbiter","AttachmentRelatedShareConstants","DOM","Event","tidyEvent","csx"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m={loadRelatedAttachment:function(n,o){k(j.listen(n,'click',function(){g.inform(h.ARTICLE_CLICK,{attachment:n,global_share_id:o});}));},loadRelatedVideoAttachment:function(n,o){k(j.listen(n,'click',function(){g.inform(h.VIDEO_CLICK,{attachment:n,global_share_id:o});}));},loadRelatedGameAttachment:function(n,o){k(j.listen(n,'click',function(){g.inform(h.GAME_CLICK,{attachment:n,global_share_id:o});}));},loadRelatedAttachmentForStream:function(n){var o=function(event,p){var q=event.getTarget();if(q.getAttribute('target')!=='_blank')return;var r="^div._5pbx",s="^div._5pc9",t=i.scry(q,r)[0]||i.scry(q,s)[0];if(!t)return;g.inform(h.ARTICLE_CLICK,{attachment:t,global_share_id:0,link_url:q.getAttribute('href'),is_right_click:p});};k(j.listen(n,'click',function(event){o(event,false);}));k(j.listen(n,'mousedown',function(event){if(event.which==3||event.button==2)o(event,true);}));},closeButton:function(n,o){k(j.listen(n,'click',function(){i.remove(o);}));}};e.exports=m;},null);
__d("MentionsInputMatchers",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=['@','\\uff20'].join(''),h=['#','\\uFF03'].join(''),i='.,+*?$|#{}()\\^\\-\\[\\]\\\\\/!%\'"~=<>_:;\n\r',j=i.replace('#','')+'&';function k(n,o){"use strict";this.$Matchers0=n;this.$Matchers1=o;this.$Matchers2();}k.prototype.$Matchers2=function(){"use strict";var n=this.$Matchers3(this.$Matchers1),o=this.$Matchers4(this.$Matchers0,this.$Matchers1),p=this.$Matchers5(this.$Matchers0,o),q=this.$Matchers6(n,p),r=this.$Matchers7(n);this.$Matchers8=new RegExp('['+this.$Matchers0+']$');this.$Matchers9=new RegExp(p+'$');this.$Matchersa=new RegExp(r+'$');this.$Matchersb=new RegExp(q+'$');this.$Matchersc=new RegExp('['+h+']');};k.prototype.$Matchers3=function(n){"use strict";return '\\b[A-Z][^ A-Z'+n+']';};k.prototype.$Matchers4=function(n,o){"use strict";return '(?:[^'+n+o+']|['+o+'][^ '+o+'])';};k.prototype.$Matchers5=function(n,o){"use strict";return '(?:^|\\s)(?:['+n+']('+o+'{0,20}))';};k.prototype.$Matchers6=function(n,o){"use strict";return '(?:(?:^|[^#])('+n+'+)|'+o+')';};k.prototype.$Matchers7=function(n){"use strict";return '(?:'+n+'{4,})';};k.prototype.getMainMatcher=function(){"use strict";return this.$Matchers9;};k.prototype.getTriggerMatcher=function(){"use strict";return this.$Matchers8;};k.prototype.getAutoMatcher=function(){"use strict";return this.$Matchersb;};k.prototype.getHashtagMatcher=function(){"use strict";return this.$Matchersc;};var l='\\b[A-Z][^ A-Z'+i+']',m={mentionsMatchers:new k(g,i),hashtagMatchers:new k(h,j),userMatcher:new RegExp('(?:'+l+'{4,})'+'$')};e.exports=m;},null);
__d("MentionsInput",["Arbiter","ArbiterMixin","Bootloader","CSS","DataStore","DOM","Event","FlipDirection","Input","InputSelection","Keys","MentionsInputMatchers","Parent","Style","TokenizeUtil","UserAgent_DEPRECATED","htmlize","mixin","removeFromArray","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){b.__markCompiled&&b.__markCompiled();var aa='\u200B',ba=new RegExp(aa,'g'),ca=function(pa){return pa+aa;},da='\uFFFD',ea=/@+\[[0-9]+\:([^\]]|\\\])*\]+/g,fa=/[\\\]:]/g,ga={MENTIONS:'mentions',HASHTAGS:'hashtags'};function ha(pa,qa){return pa.replace(qa,' '.repeat(qa.length));}function ia(pa,qa){return pa.substring(0,qa)+pa.substring(qa+1);}function ja(pa){var qa=pa.lastIndexOf('>');if(qa>=0){var ra=pa.indexOf(' ',qa);return ra>=0?pa.substr(0,ra+1):pa;}else return '';}function ka(pa,qa,ra){var sa=ra.lastIndexOf('<',qa)>ra.lastIndexOf('>',qa);return sa?' ':'&nbsp;<wbr />';}var la=x(h);for(var ma in la)if(la.hasOwnProperty(ma))oa[ma]=la[ma];var na=la===null?null:la.prototype;oa.prototype=Object.create(na);oa.prototype.constructor=oa;oa.__superConstructor__=la;function oa(pa,qa,ra,sa,ta,ua){"use strict";k.set(pa,'MentionsInput',this);this._root=pa;this._typeahead=qa;this._input=ra;this._offsets=[];var va=null,wa=this.init.bind(this,sa,ta,ua);try{va=document.activeElement===this._input;}catch(xa){}if(va){setTimeout(wa,0);}else var ya=m.listen(this._input,'focus',function(){setTimeout(wa,0);ya.remove();});this._hasHashtags=sa.hashtags;this._hashtagsDataSource=sa.hashtags_data_source;this._mentionsDataSource=this._typeahead.getData();this._currentDataSource=this._mentionsDataSource;this._autoSuggestPages=sa.autosuggest_pages;this._lastHighlighterHTML='';this._hashtags=[];this._matchers=r.mentionsMatchers;this._setMatchersMode(ga.MENTIONS);}oa.prototype.init=function(pa,qa,ra){"use strict";if(this._initialized)return;this._initValue=qa?qa.value:'';this._initialized=true;this._highlighter=l.find(this._root,'.highlighter');this._highlighterInner=this._highlighter.firstChild;this._highlighterContent=l.find(this._root,'.highlighterContent');this._hiddenInput=l.find(this._root,'.mentionsHidden');this._placeholder=this._input.getAttribute('placeholder')||'';this._metrics=ra;if(!this._hiddenInput.name){var sa=this._input.name;this._input.name=sa+'_text';this._hiddenInput.name=sa;}this._initEvents();this._initTypeahead();if(qa===null){this._setup();}else this.reset(qa);if(pa.autoheight)this._typeahead.getCore().updateHeight&&this._typeahead.getCore().updateHeight();this.inform('init',null,g.BEHAVIOR_STATE);};oa.prototype._setup=function(){"use strict";this._mentioned={};this._orderedUIDs=[];this._numMentioned=0;this._filterData=null;this._highlighterContent&&l.empty(this._highlighterContent);this._highlighterAuxContent&&l.remove(this._highlighterAuxContent);this._highlighterAuxContent=null;o.setPlaceholder(this._input,this._placeholder);t.set(this._typeahead.getElement(),'height','auto');};oa.prototype.reset=function(pa){"use strict";if(!this._initialized)return;this._setup();var qa=pa&&pa.value||'';this._value=qa;this._hiddenInput&&(this._hiddenInput.value=qa);if(this._input&&pa)o.setValue(this._input,pa.value);var ra=pa&&pa.mentions;if(ra&&ra.length){var sa=[];ra.forEach(function(ta){sa.push(ta.offset+ta.length);delete ta.offset;delete ta.length;this._addToken(ta);},this);sa.reverse().forEach(function(ta){qa=qa.substring(0,ta)+aa+qa.substring(ta);});}o.setValue(this._input,qa);if(this._value==='')n.setDirection(this._input);this._update();};oa.prototype.getValue=function(){"use strict";return o.getValue(this._input).replace(ba,'');};oa.prototype._getMarkedValue=function(){"use strict";return o.getValueRaw(this._input);};oa.prototype.getRawValue=function(){"use strict";this._update();return o.getValue(this._hiddenInput);};oa.prototype.checkValue=function(){"use strict";var pa=this._typeahead.getCore().getValue();if(this._matchers.getTriggerMatcher().exec(pa)||pa==='')this.inform('sessionEnd',{});};oa.prototype.getTypeahead=function(){"use strict";return this._typeahead;};oa.prototype.hasChanges=function(){"use strict";return !o.isEmpty(this._input)&&this._input.value!==this._initValue&&this._initialized;};oa.prototype.focus=function(){"use strict";this._input.focus();};oa.prototype._initEvents=function(){"use strict";var pa=this._update.bind(this);m.listen(this._input,{input:pa,keyup:pa,change:pa,blur:this._handleBlur.bind(this),focus:this._handleFocus.bind(this),keydown:this._handleKeydown.bind(this)});if(this._metrics){this._metrics.init(this._typeahead);this._metrics._reset();this._metrics.bindSessionStart(this._typeahead,'render',true);this._metrics.bindSessionEnd(this._typeahead.getView(),'select',true);this._metrics.bindSessionEnd(this,'sessionEnd',false);m.listen(this._input,'keyup',function(event){setTimeout(this.checkValue.bind(this),0);}.bind(this));}};oa.prototype._initTypeahead=function(){"use strict";this._typeahead.subscribe('select',function(ua,va){var wa=va.selected;this._addToken({uid:wa.uid,text:wa.text,type:wa.type,weakreference:wa.weak_reference});this.updateValue();}.bind(this));var pa=this._input,qa=null;function ra(){if(qa===null){qa=o.getSubmitOnEnter(pa);o.setSubmitOnEnter(pa,false);}}function sa(){if(qa!==null){o.setSubmitOnEnter(pa,qa);qa=null;}}this._typeahead.subscribe('reset',sa);this._typeahead.subscribe('render',ra);this._typeahead.subscribe('highlight',function(ua,va){va.index>=0?ra():sa();});this._typeahead.subscribe('query',function(){this._filterData=null;}.bind(this));var ta=this._typeahead.getCore();ta.suffix=aa;this._handleFocus();};oa.prototype._handleBlur=function(){"use strict";if(this._filterToken){this._filterToken.remove();this._filterToken=null;}};oa.prototype._handleFocus=function(){"use strict";if(!this._filterToken)this._filterToken=this._typeahead.getData().addFilter(this._filterResults.bind(this));this._updateWidth();};oa.prototype._handleKeydown=function(event){"use strict";var pa=event.keyCode;if(pa==q.BACKSPACE||pa==q.DELETE)this._handleBackspaceAndDelete(event,pa);if(pa==q.LEFT||pa==q.RIGHT)setTimeout(this._handleLeftAndRight.bind(this,pa),10);};oa.prototype._handleLeftAndRight=function(pa){"use strict";var qa=this._getMarkedValue(),ra=p.get(this._input),sa=ra.start,ta=ra.end,ua=pa==q.LEFT,va=pa==q.RIGHT;if(sa==ta){var wa=ua?-1:1;if(qa.charAt(sa)==aa)p.set(this._input,sa+wa);}else if(ua&&qa.charAt(sa)==aa){p.set(this._input,sa-1,ta);}else if(ua&&qa.charAt(ta)==aa){p.set(this._input,sa,ta-1);}else if(va&&qa.charAt(ta)==aa){p.set(this._input,sa,ta+1);}else if(va&&qa.charAt(sa)==aa)p.set(this._input,sa+1,ta);};oa.prototype._handleBackspaceAndDelete=function(event,pa){"use strict";var qa=p.get(this._input),ra=false;if(qa.start!==qa.end)if(this._offsetIsInsideMention(qa.start+1)&&this._offsetIsInsideMention(qa.end)){ra=(pa===q.BACKSPACE);}else return;var sa=pa===q.DELETE?1:-1,ta=sa+(ra?qa.end:qa.start),ua=this._getMarkedValue(),va=ua;for(var wa=0;wa<this._orderedUIDs.length;++wa){var xa=this._mentioned[this._orderedUIDs[wa]],ya=xa.text,za=ca(ya),ab=va.indexOf(za),bb=ab+za.length;if(ta<ab||ta>=bb){va=ha(va,za);continue;}var cb,db;if(xa.type!='user'){cb=0;db=[ya];}else{cb=za.substring(0,ta-ab).split(' ').length-1;db=ya.split(' ');}var eb=db.splice(cb,1)[0],fb=db.join(' '),gb=cb===0?ab:bb-eb.length-1;if(fb){xa.text=fb;fb=ca(fb);}else this._removeToken(xa.uid);var hb=ua.substring(0,ab)+fb+ua.substring(bb);o.setValue(this._input,hb);p.set(this._input,gb);this._update();event.kill();break;}};oa.prototype._offsetIsInsideMention=function(pa){"use strict";for(var qa=0;qa<this._offsets.length;qa++)if(pa>this._offsets[qa][0]&&pa<=this._offsets[qa][1])return true;return false;};oa.prototype._filterResults=function(pa){"use strict";if(this._filterData===null){var qa=p.get(this._input).start;if(this._offsetIsInsideMention(qa)){this._filterData={caretIsInsideMention:true};return false;}var ra=this._typeahead.getCore();this._filterData={value:ra.getValue(),rawValue:ra.getRawValue()};}if(this._filterData.caretIsInsideMention)return false;if(this._matchers.getMainMatcher().test(this._filterData.rawValue))return true;if(pa.type!='user'&&!pa.connected_page)return false;if(pa.disable_autosuggest)return false;if(this._matchersMode===ga.MENTIONS&&r.userMatcher.test(this._filterData.value))return true;return u.isExactMatch(this._filterData.value,this._typeahead.getData().getTextToIndex(pa));};oa.prototype._addToken=function(pa){"use strict";var qa=pa.uid;if(!this._mentioned.hasOwnProperty(qa)){this._mentioned[qa]=pa;var ra=this._orderedUIDs,sa=this._getMarkedValue().replace(ea,da),ta=sa.indexOf(ca(this._mentioned[qa].text)),ua=false,va=0;for(var wa=0;wa<ra.length;++wa){var xa=ca(this._mentioned[ra[wa]].text),ya=sa.indexOf(xa,va);va=ya+xa.length;if(ta<ya){this._orderedUIDs.splice(wa,0,qa);ua=true;break;}}if(!ua)this._orderedUIDs.push(qa);this._numMentioned++;this._update();}};oa.prototype._removeToken=function(pa){"use strict";if(this._mentioned.hasOwnProperty(pa)){delete this._mentioned[pa];y(this._orderedUIDs,pa);this._numMentioned--;this._update();}};oa.prototype._update=function(){"use strict";var pa=this._getMarkedValue();this._checkShouldSwapDataSource(pa);if(pa==this._value)return;this._value=pa;this._updateTypeahead();this._updateMentions();this._updateWidth();setTimeout(this._updateDirection.bind(this),0);this.updateValue();var qa=this.hasAuxContent();this.inform('valueUpdate',{value:pa,hasAuxContent:qa});};oa.prototype._updateMentions=function(){"use strict";this._offsets=[];var pa=this._getMarkedValue(),qa=pa;for(var ra=0;ra<this._orderedUIDs.length;++ra){var sa=this._orderedUIDs[ra],ta=ca(this._mentioned[sa].text),ua=qa.indexOf(ta);if(ua==-1)this._removeToken(sa);qa=ha(qa,ta);this._offsets.push([ua,ua+ta.length]);}var va=pa;while((ua=qa.indexOf(aa))>-1){va=ia(va,ua);qa=ia(qa,ua);}if(pa!==va){var wa=p.get(this._input);o.setValue(this._input,va);p.set(this._input,wa.start);this._value=va;}};oa.prototype._renderHashtags=function(pa){"use strict";this._initHashtagParser(pa);if(!this._hasHashtags||!this._hashtagParser)return w(pa);this._hashtags=this._hashtagParser.parse(pa);var qa=[],ra=0;for(var sa=0;sa<this._hashtags.length;sa++){var ta=this._hashtags[sa];qa.push(w(pa.substring(ra,ta.rawOffset)),'<b>',ta.marker,ta.tag,'</b>');ra=ta.rawOffset+ta.marker.length+ta.tag.length;}qa.push(w(pa.substring(ra)));return qa.join('');};oa.prototype.updateValue=function(){"use strict";var pa=this._value=this._getMarkedValue(),qa=this._orderedUIDs,ra=pa.replace(ea,da);for(var sa=0;sa<qa.length;++sa){var ta='@['+qa[sa]+':]',ua=ca(this._mentioned[qa[sa]].text);ra=ra.replace(ua,ta);pa=pa.replace(ua,ta);}var va=this._renderHashtags(pa);for(var sa=0;sa<qa.length;++sa){var wa=qa[sa],xa=this._mentioned[wa],ya=xa.text,za=xa.weakreference?'<b class="weak">':'<b>';va=va.replace('@['+wa+':]',za+w(ca(ya))+'</b>');ya=ya.replace(fa,function(bb){return '\\'+bb;});ra=ra.replace('@['+wa+':]','@['+wa+':'+ya+']');}var ab=ja(va);if(this._highlighterAuxContent||ab!==this._lastHighlighterHTML){if(v.ie()<9)va=va.replace(/ /g,ka);this._highlighterContent.innerHTML=va;this._updateHighlighter();this._lastHighlighterHTML=ab;}this._hiddenInput.value=ra;this._updateHeight();};oa.prototype._updateDirection=function(){"use strict";var pa=t.get(this._input,'direction');if(pa==this._dir)return;this._dir=pa;t.set(this._highlighter,'direction',pa);if(pa=='rtl'){t.set(this._highlighter,'text-align','right');}else t.set(this._highlighter,'text-align','left');};oa.prototype._updateWidth=function(){"use strict";var pa=this._input.offsetWidth;if(pa===this._lastInputWidth)return;this._lastInputWidth=pa;var qa=t.getFloat.bind(null,this._input),ra=pa-qa('paddingLeft')-qa('paddingRight')-qa('borderLeftWidth')-qa('borderRightWidth');this._highlighterInner.style.width=Math.max(ra,0)+'px';};oa.prototype._updateHeight=function(){"use strict";if(this._highlighterAuxContent){var pa=this._highlighter.offsetHeight,qa=this._typeahead.getElement();if(pa>qa.offsetHeight){if(this._typeahead.setHeight){this._typeahead.setHeight(pa);}else t.set(qa,'height',pa+'px');g.inform('reflow');}}};oa.prototype._updateTypeahead=function(){"use strict";var pa=this._typeahead.getCore();pa.matcher=this._matchers.getAutoMatcher();pa.setExclusions(this._orderedUIDs);this.inform('update',{mentioned:this._mentioned});};oa.prototype.setPlaceholder=function(pa){"use strict";this._placeholder=pa;if(!this.hasAuxContent())o.setPlaceholder(this._input,pa);};oa.prototype._updateHighlighter=function(){"use strict";if(this._highlighterContent)j.conditionShow(this._highlighterContent,this._numMentioned>0||this.hasAuxContent()||this._hashtags.length);};oa.prototype.setAuxContent=function(pa){"use strict";if(this._highlighterContent){if(!this._highlighterAuxContent){this._highlighterAuxContent=l.create('span',{className:"highlighterAuxContent"});l.insertAfter(this._highlighterContent,this._highlighterAuxContent);}l.setContent(this._highlighterAuxContent,pa);if(pa){o.setPlaceholder(this._input,'');}else o.setPlaceholder(this._input,this._placeholder);this._value=null;this._update();this._updateHighlighter();this._updateHeight();}};oa.prototype.hasAuxContent=function(){"use strict";var pa=this.getAuxContentRoot();return pa&&j.shown(pa)&&pa.innerHTML.length>0;};oa.prototype.getAuxContentRoot=function(){"use strict";return this._highlighterAuxContent;};oa.prototype.addMention=function(pa,qa){"use strict";qa=(typeof qa==='undefined')?true:qa;var ra=qa===false?'':' ',sa=this._getMarkedValue();if(sa!=='')sa+=' ';o.setValue(this._input,sa+ca(pa.text)+ra);this._addToken(pa);this._update();};oa.prototype.getMentions=function(){"use strict";return this._mentioned;};oa.prototype.bootloadHashtagParser=function(){"use strict";if(!this._hashtagParser)i.loadModules(["HashtagParser"],function(pa){this._hashtagParser=pa;if(this._initialized){this._value=null;this._update();}}.bind(this));};oa.getInstance=function(pa){"use strict";var qa=s.byClass(pa,'uiMentionsInput');return qa?k.get(qa,'MentionsInput'):null;};oa.prototype._checkShouldSwapDataSource=function(pa){"use strict";this._initHashtagParser(pa);if(!this._hashtagsDataSource||!this._hashtagParser)return;var qa=this._isInsideHashtagToken(pa);if(this._matchersMode===ga.HASHTAGS&&!qa){this._setMatchersMode(ga.MENTIONS);this._swapData(this._mentionsDataSource);}else if(this._matchersMode===ga.MENTIONS&&qa){this._setMatchersMode(ga.HASHTAGS);this._swapData(this._hashtagsDataSource);}};oa.prototype._swapData=function(pa){"use strict";this._currentDataSource=pa;this._typeahead.swapDataNoCoreReset(this._currentDataSource);};oa.prototype._isInsideHashtagToken=function(pa){"use strict";this._hashtags=this._hashtagParser.parse(pa);var qa=p.get(this._input).start;for(var ra=0;ra<this._hashtags.length;ra++){var sa=this._hashtags[ra],ta=sa.offset;if(qa>=ta&&qa<=(ta+sa.tag.length+1))return true;}return false;};oa.prototype._initHashtagParser=function(pa){"use strict";if(this._hashtagParser)return;if(this._matchers.getHashtagMatcher().exec(pa))this.bootloadHashtagParser();};oa.prototype._setMatchersMode=function(pa){"use strict";switch(pa){case ga.MENTIONS:this._matchers=r.mentionsMatchers;break;case ga.HASHTAGS:this._matchers=r.hashtagMatchers;break;default:throw new Error('Invariant Violation: MatchersMode enum is missing constant '+pa);}this._matchersMode=pa;};e.exports=oa;},null);
__d("MentionsTypeaheadAreaView",["ContextualTypeaheadView","FamilyRelationshipMentions","Parent"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();for(var j in g)if(g.hasOwnProperty(j))l[j]=g[j];var k=g===null?null:g.prototype;l.prototype=Object.create(k);l.prototype.constructor=l;l.__superConstructor__=g;function l(){"use strict";if(g!==null)g.apply(this,arguments);}l.prototype.getContext=function(){"use strict";return i.byClass(this.element,'uiMentionsInput');};l.prototype.shouldValidateTypeaheadSelection=function(m){"use strict";return h.shouldShowNUX(m);};l.prototype.validateTypeaheadSelection=function(m,n){"use strict";h.showNUX(m,n);};e.exports=l;},null);
__d("legacy:MentionsInput",["MentionsInput"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();a.MentionsInput=b('MentionsInput');},3);
__d("TypeaheadAreaCore",["InputSelection","TextAreaControl","TypeaheadCore","copyProperties","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();for(var l in i)if(i.hasOwnProperty(l))n[l]=i[l];var m=i===null?null:i.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=i;function n(o){"use strict";i.call(this,o);this.matcher=new RegExp(this.matcher+'$');this.preventFocusChangeOnTab=true;}n.prototype.select=function(o){"use strict";m.select.call(this,o);var p=this.element.value,q=this.prefix+o.text+this.suffix;this.expandBounds(p,q);var r=p.substring(0,this.start),s=p.substring(this.end);this.element.value=r+q+s;g.set(this.element,r.length+q.length);};n.prototype.expandBounds=function(o,p){"use strict";o=o.toLowerCase();p=p.toLowerCase();var q,r,s,t,u=/\s/;r=o.substring(this.start,this.end);s=p.indexOf(r);q=this.start;while(q>=0&&s>=0){t=o.charAt(q-1);if(!t||u.test(t))this.start=q;r=t+r;s=p.indexOf(r);q--;}r=o.substring(this.start,this.end);s=p.indexOf(r);q=this.end;while(q<=o.length&&s>=0){t=o.charAt(q);if(!t||u.test(t))this.end=q;r=r+t;s=p.indexOf(r);q++;}};n.prototype.getRawValue=function(){"use strict";var o=g.get(this.element).start||0;return m.getValue.call(this).substring(0,o);};n.prototype.getValue=function(){"use strict";var o=this.matcher&&this.matcher.exec(this.getRawValue());if(!o)return '';var p=o[0],q=o.index+p.length;p=p.replace(/^\s/,'');var r=p.length;p=p.replace(/\s$/,'');var s=r-p.length;this.start=q-r;this.end=q+s;return o[2]||o[1]||o[0];};n.prototype.updateHeight=function(){"use strict";var o=h.getInstance(this.element);o.updateHeight();};j(n.prototype,{prefix:'',suffix:', ',matcher:"\\b[^,]*",click:k});e.exports=n;},null);
__d("TypeaheadHoistFriends",["copyProperties"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i){"use strict";this._typeahead=i;}h.prototype.enable=function(){"use strict";var i=this._typeahead.getView();this._subscription=i.subscribe('beforeRender',function(j,k){var l=[],m=[],n=[];for(var o=0;o<k.results.length;++o){var p=k.results[o];if(p.type=='header'){n=n.concat(m,l);n.push(p);m=[];l=[];}else if(p.type=='user'&&p.bootstrapped){m.push(p);}else l.push(p);}k.results=n.concat(m,l);});};h.prototype.disable=function(){"use strict";this._typeahead.getView().unsubscribe(this._subscription);this._subscription=null;};g(h.prototype,{_subscription:null});e.exports=h;},null);
__d("legacy:HoistFriendsTypeaheadBehavior",["TypeaheadHoistFriends"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();if(!a.TypeaheadBehaviors)a.TypeaheadBehaviors={};a.TypeaheadBehaviors.hoistFriends=function(h){h.enableBehavior(g);};},3);
__d("TypeaheadMetrics",["AsyncRequest","Event","QueriesHistory","copyProperties","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=1000;function m(n){"use strict";this.extraData={};j(this,n);}m.prototype.init=function(n){"use strict";this.init=k;this._initImpl(n);};m.prototype._initImpl=function(n){"use strict";this.core=n.getCore();this.view=n.getView();this.data=n.getData();this.queriesHistory=new i(l);this.stats={};this.sessionActive=false;this._sessionStartEvents=[];this._sessionEndEvents=[];this._reset();this.initEvents();};m.prototype._reset=function(){"use strict";this.log=[];this.stats={};this.avgStats={};this.sessionActive=false;this._setSid(Math.floor(Date.now()*Math.random()));this.request_ids=[];this.lastNotBackspacedQuery='';this.queriesHistory.reset();this._logEvent('session_started',{});};m.prototype._logEvent=function(n,o){"use strict";var p={type:n,data:o,time:Date.now()};this.log.push(p);};m.prototype._setSid=function(n){"use strict";this.sid=n;if(typeof this.data.queryData==='object'&&this.data.queryData!==null){this.data.queryData.sid=this.sid;}else this.data.setQueryData({sid:this.sid});if(typeof this.data.bootstrapData==='object'&&this.data.bootstrapData!==null){this.data.bootstrapData.sid=this.sid;}else this.data.setBootstrapData({sid:this.sid});};m.prototype.resetWithData=function(n){"use strict";this.init=k;this._initImpl(n);};m.prototype.recordSelect=function(n){"use strict";var o=n.selected;if(o.uid==null){this.recordStat('selected_id','SELECT_NULL');}else this.recordStat('selected_id',o.uid);this.recordStat('selected_type',o.type);this.recordStat('selected_score',o.score);this.recordStat('selected_original_id',o.original_id);this.recordStat('place_id',o.place_id);this.recordStat('client_time',o.client_time);this.recordStat('selected_position',n.index);this.recordStat('selected_with_mouse',n.clicked?1:0);this.recordStat('selected_query',n.query);this._sessionEnd();};m.prototype.bindSessionStart=function(n,event,o){"use strict";if(o)for(var p=0;p<this._sessionStartEvents.length;++p){var q=this._sessionStartEvents[p];q.obj.unsubscribe(q.token);}this._sessionStartEvents.push({obj:n,token:n.subscribe(event,function(r,s){this._sessionStart();}.bind(this))});};m.prototype.bindSessionEnd=function(n,event,o){"use strict";if(o)for(var p=0;p<this._sessionEndEvents.length;++p){var q=this._sessionEndEvents[p];q.obj.unsubscribe(q.token);}this._sessionEndEvents.push({obj:n,token:n.subscribe(event,function(r,s){this._sessionEnd();}.bind(this))});};m.prototype.dataSubscribe=function(n,o){"use strict";var p=this.data,q=this.data.subscribe(n,o);this._dataSubscriptions.push(function(){p.unsubscribe(q);});};m.prototype.initEvents=function(){"use strict";this._dataSubscriptions=this._dataSubscriptions||[];this._dataSubscriptions.forEach(function(n){n();});this._dataSubscriptions=[];this.bindSessionStart(this.core,'focus',false);this.bindSessionEnd(this.core,'blur',false);this.view.subscribe('select',function(n,o){this.recordSelect(o);}.bind(this));this.bindSessionEnd(this.view,'select',false);this.view.subscribe('render',function(n,o){this.results=o;}.bind(this));this.dataSubscribe('beforeQuery',function(n,o){this._logEvent('user_typed',{query:o.value});if(!o.value)return;this.query=o.value;this.queriesHistory.add(this.query);if(this.lastNotBackspacedQuery.indexOf(this.query)!==0)this.lastNotBackspacedQuery=this.query;this.recordCountStat('num_queries');}.bind(this));this.dataSubscribe('beforeFetch',function(n,o){if(o.fetch_context.bootstrap){this.bootstrapBegin=Date.now();}else o.fetch_context.queryBegin=Date.now();this._logEvent('async_query_started',{query:o.fetch_context.value,request_id:o.fetch_context.request_id});}.bind(this));this.dataSubscribe('fetchComplete',function(n,o){this._logEvent('async_query_completed',{query:o.fetch_context.value,request_id:o.fetch_context.request_id});if(o.fetch_context.bootstrap){this.recordAvgStat('bootstrap_latency',Date.now()-this.bootstrapBegin);var p={};o.response.payload.entries.forEach(function(q){if(!p[q.type]){p[q.type]=1;}else p[q.type]++;});this.recordStat('bootstrap_response_types',p);this.bootstrapped=true;}else{if('filtered_count' in o.response.payload)this.recordStat('filtered_count',o.response.payload.filtered_count);this.recordAvgStat('avg_query_latency',Date.now()-o.fetch_context.queryBegin);}}.bind(this));this.dataSubscribe('respond',function(n,o){this._logEvent('respond',{query:o.value,num_results:o.results.length});var p=this.data.tokenizeBackend(o.value||'').flatValue,q=this.data.findBestPreviousQuery(p,this.data.getQueryIDs())||'',r=this.data.getQueryIDs()[q];this.normalized_backend_query=q;this.request_id=r;this.request_ids.push(r);}.bind(this));this.dataSubscribe('dirty',function(n,o){this.bootstrapped=false;}.bind(this));};m.prototype._sessionStart=function(){"use strict";if(this.sessionActive)return;this.sessionActive=true;};m.prototype._sessionEnd=function(){"use strict";if(!this.sessionActive)return;this.sessionActive=false;this.submit();this._reset();};m.prototype.recordStat=function(n,o){"use strict";this.stats[n]=o;};m.prototype.recordCountStat=function(n){"use strict";var o=this.stats[n];this.stats[n]=o?o+1:1;};m.prototype.recordAvgStat=function(n,o){"use strict";if(this.avgStats[n]){this.avgStats[n][0]+=o;++this.avgStats[n][1];}else this.avgStats[n]=[o,1];};m.prototype.hasStats=function(){"use strict";return !!Object.keys(this.stats).length;};m.prototype.submit=function(){"use strict";if('log_all_sessions' in this.extraData||this.hasStats()){j(this.stats,this.extraData);if(this.results){var n=(this.results).map(function(q,r){return q.uid;});this.recordStat('candidate_results',JSON.stringify(n));}if(this.query)this.recordStat('query',this.query);if(this.lastNotBackspacedQuery)this.recordStat('last_not_backspaced_query',this.lastNotBackspacedQuery);this.recordStat('queries_history',JSON.stringify(this.queriesHistory.getQueries()));if(this.normalized_backend_query)this.recordStat('normalized_backend_query',this.normalized_backend_query);if(this.request_id)this.recordStat('request_id',this.request_id);if(this.request_ids.length)this.recordStat('request_ids',this.request_ids);if(this.sid)this.recordStat('sid',this.sid);if(this.bootstrapped)this.recordStat('bootstrapped',1);for(var o in this.avgStats){var p=this.avgStats[o];this.stats[o]=p[0]/p[1];}this.recordStat('log',JSON.stringify(this.log));new g().setURI(this.endPoint).setMethod('POST').setData({stats:this.stats}).setErrorHandler(k).send();this._reset();}};m.register=function(n,o,p){"use strict";if(document.activeElement===n){o.init(p);}else var q=h.listen(n,'focus',function(){o.init(p);q.remove();});};j(m.prototype,{endPoint:'/ajax/typeahead/record_basic_metrics.php'});e.exports=m;},null);
__d("ContextualLayerAsyncRelative",["Event","Parent","copyProperties"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(k){"use strict";this._layer=k;}j.prototype.enable=function(){"use strict";this._layerSubscription=this._layer.subscribe('show',this._attachListener.bind(this));if(this._layer.isShown())this._attachListener();};j.prototype.disable=function(){"use strict";this._layerSubscription.unsubscribe();this._layerSubscription=null;if(this._listener){this._listener.remove();this._listener=null;}};j.prototype._attachListener=function(){"use strict";this._listener=g.listen(this._layer.getRoot(),'click',this._onclick.bind(this));};j.prototype._onclick=function(k){"use strict";var l=h.byTag(k.getTarget(),'A');if(!l)return;var m=l.getAttribute('ajaxify'),n=l.href,o=m||n;if(l.rel==='async'||l.rel==='async-post'){d(['AsyncRequest'],function(p){p.bootstrap(o,this._layer.getContext(),l.rel==='async-post');}.bind(this));return false;}};i(j.prototype,{_layerSubscription:null,_listener:null});e.exports=j;},null);
__d("XBirthdayMessagePostController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/reminders\/birthday\/message\/",{});},null);